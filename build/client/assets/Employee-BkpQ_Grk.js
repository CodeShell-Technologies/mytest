import{w as ja}from"./with-props-DF0D9zIo.js";import{r as a,j as e,b as ua,u as xa}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as Be}from"./DataTable-DtyPIAGZ.js";import{C as He}from"./CustomPagination-CBTcVvJz.js";import{S as Ge}from"./SearchInput-CMdOUuSO.js";import{M as ae}from"./Modal-BCIUwH-b.js";import{D as K}from"./DrapDown-CEm3nLdF.js";import{F as Ye,u as Q,w as We}from"./xlsx-DTxMWUdD.js";import{t as be,a as q,B as G,b as va}from"./api-C04JdqFc.js";import{O as ne,V as P,c as Xe}from"./index-DxoBGdjx.js";import{u as O}from"./AuthStore-BnYeBJES.js";import{u as ke}from"./useBranchStore-kvv3vD_e.js";import{u as Ze,K as Na,N as ka}from"./useEmployeeStore-BJ_SZO4g.js";import{u as Ke}from"./use-click-outside-BhLpsQYS.js";import{C as aa}from"./AddSalary-DLBe5IEO.js";import{D as wa}from"./index.es-Dy-HqQhS.js";/* empty css                         */import{B as we}from"./ButtonLoader-Z62NVHwI.js";import{A as ca}from"./award-AgZZTWnY.js";import{P as Re}from"./percent-PG9oKso6.js";import{C as ie}from"./calendar-C_LRGMui.js";import{C as pa}from"./circle-x-Dr6D4A3M.js";import{C as ea}from"./circle-check-big-DhDS6nah.js";import{F as Sa}from"./funnel-BXR2-FhQ.js";import{C as Ca}from"./clock-CzOQJT5p.js";import{F as Ue}from"./file-text-BNGbNc3I.js";import{D as oe}from"./dollar-sign-D2IX7NrM.js";import{C as _a}from"./clipboard-list-C2ET-QCv.js";import{E as qe}from"./eye-2Mk8PZw-.js";import{S as ta}from"./square-pen-hueQTsQ_.js";import{T as ha}from"./trash-2-AUNIB88j.js";import{U as fe}from"./user-DKFoNGWn.js";import{c as Je}from"./createLucideIcon-RccWoOaL.js";import{P as Qe,M as Da}from"./phone-iHDF8fYQ.js";import{F as Ea}from"./file-QxKA-9Fo.js";import{M as za}from"./map-pin-DetA7opX.js";import{B as Ve}from"./briefcase-B0VTTUxq.js";import{H as ya}from"./hash-Cmnw3-GM.js";import{U as fa}from"./user-check-BVVInUPf.js";import{C as Aa}from"./credit-card-YBFNOl8z.js";import{P as Ba}from"./plus-HifIQSWH.js";import{h as ma}from"./moment-C5S46NFB.js";import{u as Ta}from"./UseStaffFilter-Bwbq-nCs.js";import{B as ga}from"./building-38OCE1f9.js";import{U as Fa}from"./users-CXAhoVGa.js";import{C as $a}from"./clipboard-check-ZUIfxiNP.js";import{T as La,U as Pa}from"./user-x-B8sHd6dn.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./react-_sXfQCJm.js";import"./indian-rupee-vxz3wvmf.js";import"./clsx-B-dksMZM.js";import"./index-CyJ3O4p6.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Ia=Je("droplets",Oa);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],Ra=Je("heart-pulse",Ma);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ua=Je("lock",Va);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ga=Je("square-plus",Ha),Ya=({salaryRequest:t,onSuccess:v,onCancel:S})=>{const[p,x]=a.useState(!1),[D,A]=a.useState(null),b=O(r=>r.accessToken),[l,k]=a.useState({performance_id:(t==null?void 0:t.performance_id)||"",hr_rating:(t==null?void 0:t.hr_rating)||"",increment_percentage:(t==null?void 0:t.increment_percentage)||"",closingDate:(t==null?void 0:t.closingDate)||"",increment_effective_date:(t==null?void 0:t.increment_effective_date)||"",status:(t==null?void 0:t.status)||"pending"});a.useEffect(()=>{t&&k({performance_id:t.performance_id||"",hr_rating:t.hr_rating||"",increment_percentage:t.increment_percentage||"",closingDate:t.closingDate||"",increment_effective_date:t.increment_effective_date||"",status:t.status||"pending"})},[t]);const n=r=>{const{name:m,value:h}=r.target;k(f=>({...f,[m]:h}))},g=r=>{k(m=>({...m,hr_rating:r}))},B=async r=>{var m,h;r.preventDefault(),x(!0),A(null);try{const f=await q.put(`${G}/api/users/hr_rating/edit`,{reviewData:{performance_id:l.performance_id,hr_rating:l.hr_rating,increment_percentage:l.increment_percentage,closingDate:l.closingDate,increment_effective_date:l.increment_effective_date,status:l.status}},{headers:{Authorization:`Bearer ${b}`}});f.status===200?(P.success("Performance rating updated successfully!"),v()):A(f.data.message||"Failed to update performance rating")}catch(f){A(((h=(m=f.response)==null?void 0:m.data)==null?void 0:h.message)||"An error occurred"),P.error(D||"Error updating performance rating")}finally{x(!1)}},u=({value:r,onChange:m})=>e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[[1,2,3,4,5].map(h=>e.jsx("button",{type:"button",onClick:()=>m(h),className:`w-8 h-8 rounded-full flex items-center justify-center text-sm 
            ${r>=h?"bg-red-700 text-white":"bg-gray-200 text-gray-700"}`,children:h},h)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:r?r<=2?e.jsxs("span",{className:"text-red-500 flex items-center",children:[e.jsx(pa,{size:14,className:"mr-1"})," Needs Improvement"]}):r<=4?e.jsxs("span",{className:"text-yellow-500 flex items-center",children:[e.jsx(ea,{size:14,className:"mr-1"})," Good"]}):e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(ca,{size:14,className:"mr-1"})," Excellent"]}):null})]});return e.jsxs("div",{className:"flex flex-col gap-6 bg-white p-6 rounded-lg",children:[e.jsx(ne,{position:be}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 border-b pb-2",children:"HR Performance Review"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance ID"}),e.jsx("input",{name:"performance_id",value:l.performance_id,className:"w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center",children:[e.jsx(ca,{className:"mr-1",size:14})," HR Rating (1-5)"]}),e.jsx(u,{value:l.hr_rating,onChange:g})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center",children:[e.jsx(Re,{className:"mr-1",size:14})," Increment Percentage"]}),e.jsx("input",{type:"number",name:"increment_percentage",value:l.increment_percentage,onChange:n,className:"w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",placeholder:"Enter increment percentage",min:"0",max:"100",step:"0.01"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center",children:[e.jsx(ie,{className:"mr-1",size:14})," Review Closing Date"]}),e.jsx("input",{type:"date",name:"closingDate",value:l.closingDate,onChange:n,className:"w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center",children:[e.jsx(ie,{className:"mr-1",size:14})," Increment Effective Date"]}),e.jsx("input",{type:"date",name:"increment_effective_date",value:l.increment_effective_date,onChange:n,className:"w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsxs("select",{name:"status",value:l.status,onChange:n,className:"w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),D&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:D}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition-colors duration-200 font-medium text-sm",onClick:S,disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:B,className:"px-5 py-2 bg-red-700 hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",disabled:p,children:p?e.jsx(we,{}):"Update Review"})]})]})},ba=()=>{var Ne;const t=Ke({query:"(max-width: 768px)"}),[v,S]=a.useState(1),[p,x]=a.useState(!1),[D,A]=a.useState(0),[b,l]=a.useState(null),[k,n]=a.useState(""),[g,B]=a.useState(""),[u,r]=a.useState(10),[m,h]=a.useState([]),[f,j]=a.useState(null),[F,y]=a.useState(null),[i,C]=a.useState([]),[o,E]=a.useState(!1),[_,$]=a.useState(null),[J,I]=a.useState(!1),R=O(d=>d.accessToken),ce=O(d=>d.permissions),Y=O(d=>d.staff_id),V=O(d=>d.branchcode),N=((Ne=ce[0])==null?void 0:Ne.role)||"employee",{branchCodeOptions:de,fetchBranches:W,isLoading:w}=ke(),L=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],Z=[{value:"",label:"All Status"},{value:"submitted",label:"Submitted"},{value:"teamlead_reviewed",label:"Team Lead Reviewed"},{value:"hr_reviewed",label:"HR Reviewed"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],[M,se]=a.useState(""),Se=()=>N==="superadmin"?de:N==="hr"?de.filter(d=>d.value===V):[];a.useEffect(()=>{(N==="superadmin"||N==="hr")&&W(R)},[R,N]),a.useEffect(()=>{N==="hr"&&n(V)},[N,V]),a.useEffect(()=>{N!=="hr"&&N!=="superadmin"&&B(Y)},[N,Y]),a.useEffect(()=>{(N==="superadmin"||N==="hr")&&(async()=>{if(N==="superadmin"&&!k||N==="hr"&&!V){C([]);return}x(!0);try{const U=`${G}/users/dropdown?branchcode=${N==="hr"?V:k}`,T=await q.get(U,{headers:{Authorization:`Bearer ${R}`}});if(T.data&&T.data.data){const he=T.data.data.map(c=>({value:c.staff_id,label:`${c.firstname} ${c.lastname} (${c.staff_id})`}));C(he)}}catch(z){console.error("Error fetching staff list",z),P.error("Failed to fetch staff")}finally{x(!1)}})()},[k,R,N,V]);const je=async()=>{x(!0);try{let d=`${G}/users/self_rating/read`;const z=new URLSearchParams;N==="superadmin"?(k&&z.append("branchcode",k),g&&z.append("staff_id",g)):N==="hr"?(z.append("branchcode",V),g&&z.append("staff_id",g)):z.append("staff_id",Y),M&&z.append("status",M),f&&z.append("start_date",me(f)),F&&z.append("end_date",me(F)),z.append("page",v),z.append("limit",u),d+=`?${z.toString()}`;const U=await q.get(d,{headers:{Authorization:`Bearer ${R}`}});U.data&&(h(U.data.data||[]),A(U.data.totalDocuments||0))}catch(d){console.error("Error fetching salary requests",d),P.error("Failed to fetch salary requests"),l("Failed to fetch data")}finally{x(!1)}},me=d=>{if(!d)return"";const z=new Date(d),U=z.getFullYear(),T=(z.getMonth()+1).toString().padStart(2,"0"),he=z.getDate().toString().padStart(2,"0");return`${U}-${T}-${he}`},ge=d=>{S(d)},Ce=d=>{n(d),B(""),S(1)},_e=d=>{B(d),S(1)},ee=d=>{r(d),S(1)},ve=d=>{const[z,U]=d;j(z),y(U)},De=d=>{se(d),S(1)},ue=()=>{I(!1),P.success("Salary request processed successfully!"),je()},Ee=()=>{if(!m||m.length===0){P.error("No data to export");return}const d=m.map(T=>({"Performance ID":T.performance_id,"Staff ID":T.staff_id,Name:T.name,"Branch Code":T.branchcode,Designation:T.designation,Department:T.department,"Review Year":T.review_year,"Self Rating":T.self_rating_overall,"Lead Rating":T.lead_technical_rating,Status:T.status,"Increment Percentage":T.increment_percentage,"Increment Effective Date":T.increment_effective_date,"Created On":T.created_on,"Updated On":T.updated_on})),z=Q.book_new(),U=Q.json_to_sheet(d);Q.book_append_sheet(z,U,"SalaryRequests"),We(z,"SalaryRequests.xlsx")};a.useEffect(()=>{je()},[v,u,k,g,M,f,F,N,V]);const xe=d=>{$(d),I(!0)},pe=()=>[{data:"Performance ID"},{data:"Staff ID"},{data:"Name"},{data:"Branch Code"},{data:"Designation"},{data:"Department"},{data:"Review Year"},{data:"Self Rating"},{data:"Lead Rating"},{data:"Status"},{data:"Increment %"},{data:"Effective Date"},{data:"Created On"},{data:"Action"}],ze=()=>m?m.map(d=>({id:d.performance_id,data:[{data:d.performance_id},{data:d.staff_id},{data:d.name},{data:d.branchcode},{data:d.designation},{data:d.department},{data:d.review_year},{data:d.self_rating_overall||"-"},{data:d.lead_technical_rating||"-"},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${d.status==="approved"?"bg-green-100 text-green-800":d.status==="rejected"?"bg-red-100 text-red-800":d.status==="hr_reviewed"||d.status==="teamlead_reviewed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:[d.status==="approved"?e.jsx(ea,{className:"w-3 h-3 mr-1"}):d.status==="rejected"?e.jsx(pa,{className:"w-3 h-3 mr-1"}):e.jsx(Ca,{className:"w-3 h-3 mr-1"}),d.status.split("_").map(z=>z.charAt(0).toUpperCase()+z.slice(1)).join(" ")]})},{data:d.increment_percentage?`${d.increment_percentage}%`:"-"},{data:d.increment_effective_date?new Date(d.increment_effective_date).toLocaleDateString():"-"},{data:new Date(d.created_on).toLocaleDateString()},{data:e.jsx("div",{className:"flex flex-nowrap justify-center gap-2",children:(N==="hr"||N==="superadmin")&&e.jsx("button",{className:"p-1 text-amber-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>xe(d),title:"Process",disabled:d.status==="approved"||d.status==="rejected",children:e.jsx(ea,{size:18})})}),className:"action-cell"}]})):[];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Salary Increment Requests"}),t&&e.jsxs("button",{onClick:()=>E(!o),className:"p-2 bg-gray-200 rounded-md",children:[e.jsx(Sa,{size:18,className:"mr-1"}),o?"Hide Filters":"Show Filters"]})]}),e.jsx(ne,{position:be,reverseOrder:!1}),e.jsx("div",{className:`${t&&!o?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`grid grid-cols-1 ${N!=="superadmin"&&N!=="hr"?"md:grid-cols-2 lg:grid-cols-2 gap-3":"md:grid-cols-4 lg:grid-cols-4 gap-20"}`,children:[N==="superadmin"&&e.jsx(K,{options:Se(),selectedValue:k,onSelect:Ce,placeholder:"Select Branch",className:"w-[245px]",isLoading:w}),(N==="superadmin"||N==="hr")&&e.jsx(K,{options:i,selectedValue:g,onSelect:_e,placeholder:"Select Staff",className:"w-[245px]",disabled:N==="hr"?!1:!k,isLoading:p}),e.jsx(K,{options:Z,selectedValue:M,onSelect:De,placeholder:"Select Status",className:"w-[245px]"}),e.jsx("div",{className:"w-[245px]",children:e.jsx(wa,{selectsRange:!0,startDate:f,endDate:F,onChange:ve,placeholderText:"Select date range",className:"w-full p-2 border rounded h-[40px]",isClearable:!0})})]})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(K,{options:L,selectedValue:u,onSelect:ee,placeholder:"Items per page",className:"w-[150px]"}),e.jsxs("button",{onClick:Ee,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2",disabled:m.length===0,children:[e.jsx(Ye,{className:"mr-1"}),!t&&"Export Excel"]})]}),p&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),b&&e.jsx("div",{className:"text-red-500 text-center py-4",children:b}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Be,{thead:pe,tbody:ze,responsive:!0,className:"min-w-full"})}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(He,{total:D,currentPage:v,defaultPageSize:u,onChange:ge,paginationLabel:"salary requests",isScroll:!0})})]})}),e.jsx(ae,{isVisible:J,className:"w-full md:w-[800px]",onClose:()=>I(!1),title:"Process Salary Request",children:e.jsx(Ya,{salaryRequest:_,onSuccess:ue,onCancel:()=>I(!1)})})]})},Wa=({salary:t,onSuccess:v,onCancel:S})=>{const[p,x]=a.useState(!1),[D,A]=a.useState(null),b=O(u=>u.accessToken);Ze(u=>u.branchEmployeeOptions);const[l,k]=a.useState({staff_id:"",basicsalary:"",hra:"",lpa:"",gross_salary:"",net_salary:"",bonus:"",pf:"",esi:"",tds:"",other_allowance:"",deductions:"",remarks:"",processondate:"",processtilldate:"",status:"active"});a.useEffect(()=>{t&&k({staff_id:t.staff_id||"",basicsalary:t.basicsalary||"",hra:t.hra||"",lpa:t.lpa||"",gross_salary:t.gross_salary||"",net_salary:t.net_salary||"",bonus:t.bonus||"",pf:t.pf||"",esi:t.esi||"",tds:t.tds||"",other_allowance:t.other_allowance||"",deductions:t.deductions||"",remarks:t.remarks||"",processondate:t.processondate||"",processtilldate:t.processtilldate||"",status:t.status||"active"})},[t]);const n=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],g=u=>{const{name:r,value:m}=u.target;k(h=>({...h,[r]:m}))},B=async u=>{var r,m;u.preventDefault(),x(!0);try{const h=await q.put(`${G}/users/salary/edit/${t.id}`,{userData:l},{headers:{Authorization:`Bearer ${b}`}});h.status===201?(v(),P.success("Salary updated successfully!")):A(h.data.message||"Failed to update salary")}catch(h){A(((m=(r=h.response)==null?void 0:r.data)==null?void 0:m.message)||"An error occurred"),P.error(D||"Error updating salary",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{x(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(ne,{position:be}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ue,{className:"inline mr-1",size:14})," Staff ID"]}),e.jsx("input",{name:"staff_id",value:l.staff_id,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Process On Date"]}),e.jsx("input",{name:"processondate",value:l.processondate,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"date",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Process Till Date"]}),e.jsx("input",{name:"processtilldate",value:l.processtilldate,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"date"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Salary Components"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Basic Salary"]}),e.jsx("input",{name:"basicsalary",value:l.basicsalary,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Basic Salary",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," HRA"]}),e.jsx("input",{name:"hra",value:l.hra,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"HRA",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," LPA"]}),e.jsx("input",{name:"lpa",value:l.lpa,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"LPA",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Bonus"]}),e.jsx("input",{name:"bonus",value:l.bonus,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Bonus",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Deductions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Re,{className:"inline mr-1",size:14})," PF"]}),e.jsx("input",{name:"pf",value:l.pf,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"PF",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Re,{className:"inline mr-1",size:14})," ESI"]}),e.jsx("input",{name:"esi",value:l.esi,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"ESI",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Re,{className:"inline mr-1",size:14})," TDS"]}),e.jsx("input",{name:"tds",value:l.tds,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"TDS",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Other Allowance"]}),e.jsx("input",{name:"other_allowance",value:l.other_allowance,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Other Allowance",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Deductions"]}),e.jsx("input",{name:"deductions",value:l.deductions,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Deductions",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Salary Totals"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Gross Salary"]}),e.jsx("input",{name:"gross_salary",value:l.gross_salary,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Gross Salary",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(oe,{className:"inline mr-1",size:14})," Net Salary"]}),e.jsx("input",{name:"net_salary",value:l.net_salary,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Net Salary",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(_a,{className:"inline mr-1",size:14})," Status"]}),e.jsx("select",{name:"status",value:l.status,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:n.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ue,{className:"inline mr-1",size:14})," Remarks"]}),e.jsx("input",{name:"remarks",value:l.remarks,onChange:g,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Remarks",required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:S,disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:B,disabled:p,children:p?e.jsx(we,{}):"Update Salary"})]})]})},Ka=()=>{const t=Ke({query:"(max-width: 768px)"}),[v,S]=a.useState(""),[p,x]=a.useState(1),[D,A]=a.useState(""),[b,l]=a.useState([]),[k,n]=a.useState(""),[g,B]=a.useState([]),[u,r]=a.useState(!1),[m,h]=a.useState(0),[f,j]=a.useState(null),[F,y]=a.useState(!1),[i,C]=a.useState(!1),[o,E]=a.useState(),[_,$]=a.useState(!1),[J,I]=a.useState(),[R,ce]=a.useState(""),[Y,V]=a.useState(""),[N,de]=a.useState(""),[W,w]=a.useState(8),[L,Z]=a.useState(!1),M=O(c=>c.accessToken),{branches:se,managerOptions:Se,branchCodeOptions:je,fetchBranches:me,isLoading:ge}=ke(),Ce=[{value:"",label:"All Branches"},{value:"active",label:"Active Branches"},{value:"inactive",label:"Inactive Branches"}],_e=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];a.useEffect(()=>{me(M)},[M]);const ee=async(c=p,ye=W,te=v,Ae=k,Te=Y,Fe=N,$e=R)=>{var Le,Pe,Oe;r(!0);try{let re=`${G}/users/salary/read?page=${c}&limit=${ye}`;te&&(re+=`&search=${te}`),Ae&&(re+=`&status=${Ae}`),Te&&(re+=`&manager_id=${Te}`),Fe&&(re+=`&branchcode=${Fe}`),$e&&(re+=`&dec=${$e}`);const s=await q.get(re,{headers:{Authorization:`Bearer ${M}`}});l((Le=s==null?void 0:s.data)==null?void 0:Le.data),h(((Pe=s==null?void 0:s.data)==null?void 0:Pe.totalDocuments)||0),B(((Oe=s==null?void 0:s.data)==null?void 0:Oe.data)||[])}catch(re){console.error("Error fetching branch list",re),j("Failed to fetch branches")}finally{r(!1)}};a.useEffect(()=>{ee()},[p,v,k,Y,N,R,W]);const ve=c=>{x(c)},De=c=>{S(c),x(1)},ue=c=>{E(c),C(!0)},Ee=c=>{$(!0),I(c)},xe=async()=>{const c=Number(J.id),ye={userData:{staff_id:J.staff_id}};try{r(!0);const te=await q.delete(`${G}/users/salary/delete/${c}`,{data:ye,headers:{Authorization:`Bearer ${M}`}});(te==null?void 0:te.status)===201&&($(!1),P.success("Branch deleted successfully!"),me(M),ee())}catch(te){console.error("Error deleting branch",te),P.error("Failed to delete branch")}finally{r(!1)}},pe=()=>{ce(c=>c==="desc"?"":"desc"),x(1)},ze=c=>{n(c),x(1)},Ne=c=>{V(c),x(1)},d=c=>{de(c),x(1)},z=c=>{w(c),x(1)},U=()=>[{data:"id"},{data:"Staff_id"},{data:"Basic Salary"},{data:"hra"},{data:"lpa"},{data:"Deductions"},{data:"gross_salary"},{data:"net_salary"},{data:"bonus"},{data:"processondate"},{data:"Status"},{data:"Actions",className:"text-center"}],T=()=>g?g.map(c=>({id:c.id,data:[{data:c.id},{data:c.staff_id},{data:c.basicsalary},{data:c.hra},{data:c.lpa},{data:c.deductions},{data:c.gross_salary},{data:c.net_salary},{data:c.bonus},{data:c.processondate},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${c.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${c.status==="active"?"bg-green-800":"bg-red-700"}`}),c.status.charAt(0).toUpperCase()+c.status.slice(1)]})},{data:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ua,{to:"/employee/salary_slip",children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(qe,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>ue(c),title:"Edit",children:e.jsx(ta,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Ee(c),title:"Delete",children:e.jsx(ha,{size:18})})]}),className:"action-cell"}]})):[],he=()=>{const c=Q.book_new(),ye=Q.json_to_sheet(b);Q.book_append_sheet(c,ye,"Branches"),We(c,"BranchList.xlsx")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:t&&e.jsx("button",{onClick:()=>Z(!L),className:"p-2 bg-gray-200 rounded-md",children:L?"Hide Filters":"Show Filters"})}),e.jsx(ne,{position:be,reverseOrder:!1}),e.jsx("div",{className:`flex ${t?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${t?"flex-col":"flex-row"} gap-4`,children:[e.jsx(K,{options:_e,selectedValue:W,onSelect:z,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:he,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(Ye,{className:"mr-1"}),!t&&"Export Excel"]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!t&&"New Salary"," +"]})]})}),e.jsx("div",{className:`${t&&!L?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${t?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(K,{options:Ce,selectedValue:k,onSelect:ze,placeholder:"Branch Status",className:"w-full md:w-[200px]"}),e.jsx(K,{options:je,selectedValue:N,onSelect:d,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:ge}),e.jsx(K,{options:Se,selectedValue:Y,onSelect:Ne,placeholder:"Manager",className:"w-full md:w-[200px]",isLoading:ge}),e.jsxs("button",{onClick:pe,className:`${t?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",R==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${t?"w-full":"w-[200px] mt-3"}`,children:e.jsx(Ge,{value:v,onChange:De,placeholder:"Search branches...",className:"w-full"})})]})}),u&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),f&&e.jsx("div",{className:"text-red-500 text-center py-4",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Be,{thead:U,tbody:T,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(He,{total:m,currentPage:p,defaultPageSize:W,onChange:ve,paginationLabel:"branches",isScroll:!0})})]}),e.jsx(ae,{isVisible:F,className:"w-full md:w-[800px]",onClose:()=>y(!1),title:"Create New Salary",children:e.jsx(aa,{onSuccess:()=>{y(!1),ee()},onCancel:()=>y(!1)})}),e.jsx(ae,{isVisible:i,className:"w-full md:w-[800px]",onClose:()=>C(!1),title:"Edit Salary",children:e.jsx(Wa,{salary:o,onSuccess:()=>{C(!1),ee()},onCancel:()=>C(!1)})}),e.jsx(ae,{isVisible:_,className:"w-full md:w-[600px]",onClose:()=>$(!1),title:"Delete Salary Detail",children:e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Are you sure you want to delete this Salary Details? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:()=>$(!1),disabled:u,children:"Cancel"}),e.jsx("button",{type:"button",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:xe,disabled:u,children:u?e.jsx(we,{}):"Delete Salary"})]})]})})]})},qa=()=>{const[t,v]=a.useState(""),[S,p]=a.useState(1),[x,D]=a.useState(!1),[A,b]=a.useState(""),[l,k]=a.useState([]),[n,g]=a.useState(""),[B,u]=a.useState("salaryList"),r=[{id:"1",date:"25-05-2025",name:"Bharathi",branch:"bharathi@gmail.com",position:"Team Lead",category:"salary",amount:"10000"}],m=[{id:"salaryList",label:"Salary List"},{id:"revisionTracking",label:"Revision & Increment Tracking"}],h=()=>r;return a.useEffect(()=>{k(h())},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen mt-[-30px]",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex -mb-px",children:m.map(f=>e.jsx("button",{onClick:()=>u(f.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${B===f.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:f.label},f.id))})}),e.jsx("div",{className:"p-4 flex-grow",children:B==="salaryList"?e.jsx(Ka,{}):e.jsx(ba,{})})]}),e.jsx(ae,{isVisible:x,className:"w-[200px]",onClose:()=>D(!1),title:"Add Salary Form",children:e.jsx(aa,{onCancel:()=>D(!1)})})]})};function Ja(){const t=[{uri:"/documents/Interview Evaluation Form (1).pdf",fileType:"pdf",fileName:"Interview Evaluation Form (1).pdf",fileSize:"15MB"},{uri:"/documents/ProjectReportDocumentation.docx",fileType:"docx",fileName:"Project Report Documentation.docx",fileSize:"15MB"}],[v,S]=a.useState(t[0]),[p,x]=a.useState(0),D=b=>{S(b),x(l=>l+1)},A=b=>b.fileType==="docx"||b.fileType==="doc"?`https://docs.google.com/viewer?url=${encodeURIComponent(window.location.origin+b.uri)}&embedded=true`:b.uri;return e.jsxs("div",{className:"flex flex-col h-[1050px] p-6 bg-gray-50",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-8",children:"Documents"}),e.jsxs("div",{className:"flex flex-1 gap-6 overflow-hidden",children:[e.jsxs("div",{className:"w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300",children:"Documents List"}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsx("ul",{className:"space-y-2",children:t.map(b=>e.jsx("li",{className:`p-3 rounded-lg cursor-pointer transition-all duration-200 ${v.uri===b.uri?"bg-red-50/80 border-l-4 border-red-600 shadow-sm":"bg-white hover:bg-gray-50"}`,onClick:()=>D(b),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-3 mt-0.5",children:b.fileType==="pdf"?e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:b.fileName}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs font-mono text-gray-500",children:b.fileType.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-400",children:b.fileSize})]})]})]})},b.uri))})})]}),e.jsx("div",{className:"flex-1 bg-white rounded-lg shadow-md overflow-hidden",children:v.fileType==="docx"||v.fileType==="doc"?e.jsx("iframe",{src:A(v),className:"w-full h-full border-0",title:v.fileName}):e.jsx(Na,{documents:[v],pluginRenderers:ka,config:{header:{disableHeader:!1,disableFileName:!0,retainURLParams:!1}},theme:{primary:"rgb(185 28 28)",secondary:"#BDBDBD",tertiary:"#BDBDBD",textPrimary:"#ffffff",textSecondary:"rgb(185 28 28)",textTertiary:"rgb(185 28 28)",disableThemeScrollbar:!1}},p)})]})]})}const Xa=()=>{const[t,v]=a.useState(""),[S,p]=a.useState(1),[x,D]=a.useState(!1),[A,b]=a.useState(""),[l,k]=a.useState([]),[n,g]=a.useState(""),[B,u]=a.useState("salaryList"),[r]=a.useState([{id:"1",name:"Production Department Structure Charts.pdf",type:"PDF",size:"2.4 MB",url:"http://localhost:5173/documents/Production%20Department%20Structure%20Chart.pdf",category:"HR"},{id:"2",name:"Salary Structure.docx",type:"Word",size:"1.2 MB",url:"/documents/Interview Evaluation Form.docx",category:"Finance"}]),m=[{id:"termination",label:"Employee Termination Manage"},{id:"documents",label:"Company Documents"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen mt-[-30px]",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex -mb-px",children:m.map(h=>e.jsx("button",{onClick:()=>u(h.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${B===h.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:h.label},h.id))})}),e.jsx("div",{className:"p-4 flex-grow mt[-50px]",children:B==="termination"?e.jsx(ba,{}):e.jsx(Ja,{documents:r})})]}),e.jsx(ae,{isVisible:x,className:"w-[200px]",onClose:()=>D(!1),title:"Add Salary Form",children:e.jsx(aa,{})})]})},Qa={architecture:["principal","senior-Architect","architect","junior-Architect","architect-Trainee","architect-Intern"],visualization:["principal","senior-Visualization","visualization","junior-Visualization","visualization-Trainee","visualization-Intern"],structural:["principal","senior-Structural","structural","junior-Structural","structural-Trainee","structural-Intern"],drafting:["principal","senior-Drafting","drafting","junior-Drafting","drafting-Trainee","drafting-Intern"],hr:["principal","senior-HR-Executive","hr-Executive","junior-HR-Executive","hr-Executive-Trainee","hr-Executive-Intern"],sales:["principal","senior-Sales-Executive","sales-Executive","junior-Sales-Executive","sales-Executive-Trainee","sales-Executive-Intern"],consulting:["principal","senior-Site-Engineer","site-Engineer","junior-Site-Engineer","site-Engineer-Trainee","site-Engineer-Intern"]},Za=["architecture","visualization","structural","drafting","hr","sales","consulting"];function et({onSuccess:t,onCancel:v}){const[S,p]=a.useState(!1),[x,D]=a.useState([]),[A,b]=a.useState(""),[l,k]=a.useState([]),[n,g]=a.useState({firstName:"",lastName:"",dob:"",gender:"",maritalStatus:"",bloodGroup:"",mobileNo:"",residenceContactNo:"",email:"",presentAddress:"",permanentAddress:"",photograph:null,branchcode:"",role:"",password:"",psn:"",department:"",pannumber:"",aadharnumber:"",designation:""}),B=O(i=>i.accessToken),r=O(i=>i.permissions)[0].role,m=ke(i=>i.branchCodeOptions),h=O(i=>i.branchcode),f=r==="superadmin"?m:[{value:h,label:h}],j=i=>{const{name:C,value:o,files:E}=i.target;g(_=>({..._,[C]:E?E[0]:o})),C==="department"&&(D(Qa[o]||[]),g(_=>({..._,designation:""})))},F=async i=>{const C=i.target.value;if(g(o=>({...o,branchcode:C,role:""})),C)try{p(!0);const _=(await(await fetch(`${G}/branch/dropdown?branchcode=${C}`,{headers:{Authorization:`Bearer ${B}`}})).json()).result.map($=>({value:$.role,label:$.role}));k(_)}catch(o){console.error("Error fetching roles:",o),k([])}finally{p(!1)}else k([])},y=async()=>{var i,C;p(!0);try{const o={branchcode:n.branchcode,firstName:n.firstName,lastName:n.lastName,dob:n.dob,gender:n.gender,marital:n.maritalStatus,bloodgroup:n.bloodGroup,phonenumber:n.mobileNo,alternumber:n.residenceContactNo,email:n.email,presentaddress:n.presentAddress,permanentaddress:n.permanentAddress,photograph:n.photograph,role:n.role,password:n.password,department:n.department,pannumber:n.pannumber,aadharnumber:n.aadharnumber,designation:n.designation},E=await q.post(`${G}/users/create`,{profile:[o]},{headers:{Authorization:`Bearer ${B}`}});(E==null?void 0:E.status)===201&&t()}catch(o){console.log("Error in employee data create",o),b(((C=(i=o.response)==null?void 0:i.data)==null?void 0:C.message)||"An error occurred"),P.error(o.message||"Error in Add New Employee",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",width:"900px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{p(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(fe,{className:"inline mr-2"})," Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," First Name",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," Last Name"]}),e.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Date of Birth",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"date",name:"dob",value:n.dob,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," Gender ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"gender",value:n.gender,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ra,{className:"inline mr-1",size:14})," Marital Status ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"maritalStatus",value:n.maritalStatus,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ia,{className:"inline mr-1",size:14})," Blood Group ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"bloodGroup",value:n.bloodGroup,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Blood Group"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(Qe,{className:"inline mr-2"})," Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Qe,{className:"inline mr-1",size:14})," Mobile Number",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"tel",name:"mobileNo",value:n.mobileNo,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Qe,{className:"inline mr-1",size:14})," Residence Contact"]}),e.jsx("input",{type:"tel",name:"residenceContactNo",value:n.residenceContactNo,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Da,{className:"inline mr-1",size:14})," Email ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ua,{className:"inline mr-1",size:14})," Password",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"password",name:"password",value:n.password,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ea,{className:"inline mr-1",size:14})," Photograph"]}),e.jsx("input",{type:"file",name:"photograph",onChange:j,className:"w-full text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",accept:"image/*"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(za,{className:"inline mr-2"})," Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Present Address"}),e.jsx("textarea",{name:"presentAddress",value:n.presentAddress,onChange:j,rows:3,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Permanent Address"}),e.jsx("textarea",{name:"permanentAddress",value:n.permanentAddress,onChange:j,rows:3,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(Ve,{className:"inline mr-2"})," Employment Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ya,{className:"inline mr-1",size:14})," Branch Code ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"branchcode",value:n.branchcode,onChange:F,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:S,children:[e.jsx("option",{value:"",children:"Select Branch"}),f==null?void 0:f.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fa,{className:"inline mr-1",size:14})," User Role ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"role",value:n.role,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!n.branchcode||S,children:[e.jsx("option",{value:"",children:"Select Role"}),l==null?void 0:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ve,{className:"inline mr-1",size:14})," Department",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"department",value:n.department,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),Za.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ve,{className:"inline mr-1",size:14})," Designation",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{name:"designation",value:n.designation,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!n.department,children:[e.jsx("option",{value:"",children:"Select Designation"}),x.map(i=>e.jsx("option",{value:i,children:i},i))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(Aa,{className:"inline mr-2"})," Identification Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:["PAN Number ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"text",name:"pannumber",value:n.pannumber,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:["Aadhar Number ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{type:"text",name:"aadharnumber",value:n.aadharnumber,onChange:j,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:v,className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:y,disabled:S,className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",children:S?e.jsx(we,{}):"Create Employee"})]})]})}const at=()=>{const t=Ke({query:"(max-width: 768px)"}),[v,S]=a.useState(""),[p,x]=a.useState(1),[D,A]=a.useState([]),[b,l]=a.useState(!1),[k,n]=a.useState(0),[g,B]=a.useState(null),[u,r]=a.useState(!1),[m,h]=a.useState(8),[f,j]=a.useState(!1),[F,y]=a.useState([]),i=xa(),[C,o]=a.useState({name:"",position:"",department:"",location:"",startDate:"",monthlySalary:"",otherAllowances:"",contactEmail:"",contactPhone:""}),E=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];a.useEffect(()=>{const w=localStorage.getItem("offerLetters");if(w){const L=JSON.parse(w);A(L),y(L),n(L.length)}},[]);const _=w=>{const{name:L,value:Z}=w.target;o({...C,[L]:Z})},$=w=>{w.preventDefault();const L={...C,id:Date.now().toString(),generatedDate:new Date().toISOString()},Z=[...D,L];A(Z),y(Z),n(Z.length),localStorage.setItem("offerLetters",JSON.stringify(Z)),o({name:"",position:"",department:"",location:"",startDate:"",monthlySalary:"",otherAllowances:"",contactEmail:"",contactPhone:""}),r(!1),P.success("Offer letter generated successfully!")},J=w=>{i(`/offer-letter-view/${w}`)},I=w=>{x(w)},R=w=>{S(w),x(1)},ce=w=>{h(w),x(1)},Y=()=>{const w=Q.book_new(),L=Q.json_to_sheet(F);Q.book_append_sheet(w,L,"OfferLetters"),We(w,"OfferLetters.xlsx")},V=D.filter(w=>w.name.toLowerCase().includes(v.toLowerCase())||w.position.toLowerCase().includes(v.toLowerCase())||w.department.toLowerCase().includes(v.toLowerCase())),N=V.slice((p-1)*m,p*m),de=()=>[{data:"#"},{data:"Candidate Name"},{data:"Position"},{data:"Department"},{data:"Location"},{data:"Generated Date"},{data:"Actions",className:"text-center"}],W=()=>N.map((w,L)=>({id:w.id,data:[{data:L+1+(p-1)*m},{data:w.name},{data:w.position},{data:w.department},{data:w.location},{data:new Date(w.generatedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},{data:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx("button",{onClick:()=>J(w.id),className:"p-1 text-blue-600 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View Offer Letter",children:e.jsx(qe,{size:18})})}),className:"action-cell"}]}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Offer Letter Management"}),t&&e.jsx("button",{onClick:()=>j(!f),className:"p-2 bg-gray-200 rounded-md",children:f?"Hide Filters":"Show Filters"})]}),e.jsx(ne,{position:"top-right",reverseOrder:!1}),e.jsx("div",{className:`flex ${t?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${t?"flex-col":"flex-row"} gap-4`,children:[e.jsx(K,{options:E,selectedValue:m,onSelect:ce,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:Y,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(Ye,{className:"mr-1"}),!t&&"Export Excel"]}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!t&&"New Offer Letter"," ",e.jsx(Ba,{className:"ml-1",size:18})]})]})}),e.jsx("div",{className:`${t&&!f?"hidden":"block"} mb-4`,children:e.jsx("div",{className:`${t?"grid grid-cols-1 gap-3":"flex justify-between items-center gap-3"}`,children:e.jsx("div",{className:`${t?"w-full":"w-[300px]"}`,children:e.jsx(Ge,{value:v,onChange:R,placeholder:"Search offer letters...",className:"w-full"})})})}),b&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),g&&e.jsx("div",{className:"text-red-500 text-center py-4",children:g}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Be,{thead:de,tbody:W,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(He,{total:V.length,currentPage:p,defaultPageSize:m,onChange:I,paginationLabel:"offer letters",isScroll:!0})})]}),e.jsx(ae,{isVisible:u,className:"w-full md:w-[800px]",onClose:()=>r(!1),title:"Create New Offer Letter",children:e.jsx("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Candidate Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Candidate Name"}),e.jsx("input",{type:"text",name:"name",value:C.name,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Position"}),e.jsx("input",{type:"text",name:"position",value:C.position,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Department"}),e.jsx("input",{type:"text",name:"department",value:C.department,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:C.location,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:C.startDate,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Monthly Salary"}),e.jsx("input",{type:"text",name:"monthlySalary",value:C.monthlySalary,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Other Allowances"}),e.jsx("input",{type:"text",name:"otherAllowances",value:C.otherAllowances,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Contact Email"}),e.jsx("input",{type:"email",name:"contactEmail",value:C.contactEmail,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Contact Phone"}),e.jsx("input",{type:"tel",name:"contactPhone",value:C.contactPhone,onChange:_,className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:()=>r(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",children:"Generate Offer Letter"})]})]})})})]})},tt=({onSuccess:t,onCancel:v})=>{const[S,p]=a.useState(!1),[x,D]=a.useState(!1),[A,b]=a.useState(null),l=O(o=>o.accessToken),n=O(o=>o.permissions)[0].role,g=ke(o=>o.branchCodeOptions),B=O(o=>o.branchcode),u=n==="superadmin"?g:[{value:B,label:B}],[r,m]=a.useState({staff_id:"",staff_name:"",branchcode:"",branch_name:"",department:"",designation:"",team_id:"",team_name:"",team_lead_id:"",team_lead_name:"",termination_type:"resignation",termination_reason:"",last_working_day:"",reliving_date:"",exit_notes:"",created_by:n}),{departmentOptions:h,selectedDepartment:f,staffOptions:j,isFetchingStaff:F,handleDepartmentChange:y}=Ta(r.branchcode),i=o=>{const{name:E,value:_}=o.target;m($=>({...$,[E]:_}))};a.useEffect(()=>{(async()=>{if(r.staff_id){D(!0);try{const E=await q.get(`${G}/teams/members/read?staff_id=${r.staff_id}`,{headers:{Authorization:`Bearer ${l}`}});if(E.data.data){const _=E.data.data;m($=>({...$,team_id:_.team_id,team_name:_.team_name,team_lead_id:_.team_lead,team_lead_name:_.team_lead_name,branch_name:_.name}))}}catch(E){console.error("Failed to fetch team details:",E)}finally{D(!1)}}})()},[r.staff_id,l]),a.useEffect(()=>{if(r.staff_id&&j.length>0){const o=j.find(E=>E.value===r.staff_id);o&&m(E=>({...E,staff_name:o.label.split(" - ")[0],department:o.dept||"",designation:o.desig||""}))}},[r.staff_id,j]);const C=async o=>{var E,_,$,J;o.preventDefault(),p(!0);try{const I=await q.post(`${G}/user_resign_form/create`,r,{headers:{Authorization:`Bearer ${l}`}});I.status===201?(P.success("Resignation submitted successfully"),t()):b(I.data.message||"Failed to submit resignation")}catch(I){b(((_=(E=I.response)==null?void 0:E.data)==null?void 0:_.message)||"An error occurred"),P.error(((J=($=I.response)==null?void 0:$.data)==null?void 0:J.message)||"Failed to submit resignation",{style:{border:"1px solid  rgb(185 28 28)",padding:"14px",width:"900px",color:" rgb(185 28 28)"},iconTheme:{primary:" rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{p(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(ne,{position:be}),A&&e.jsx("div",{className:"text-red-500 mb-4",children:A}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Resignation Form"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ya,{className:"inline mr-1",size:14})," Branch Code"]}),e.jsxs("select",{name:"branchcode",value:r.branchcode,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),u==null?void 0:u.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ga,{className:"inline mr-1",size:14})," Branch Name"]}),e.jsx("input",{name:"branch_name",value:r.branch_name,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ga,{className:"inline mr-1",size:14})," Department"]}),e.jsxs("select",{value:f,onChange:o=>{y(o.target.value),m(E=>({...E,staff_id:"",staff_name:"",department:"",designation:"",team_id:"",team_name:"",team_lead_id:"",team_lead_name:""}))},className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!r.branchcode,children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ve,{className:"inline mr-1",size:14})," Designation"]}),e.jsx("input",{name:"designation",value:r.designation,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," Select Staff"]}),F?e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Loading staff..."}):e.jsxs("select",{name:"staff_id",value:r.staff_id,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!f||j.length===0,children:[e.jsx("option",{value:"",children:"Select Staff"}),j.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]}),f&&j.length===0&&!F&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"No staff found in this department"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," Staff Name"]}),e.jsx("input",{name:"staff_name",value:r.staff_name,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Fa,{className:"inline mr-1",size:14})," Team Name"]}),e.jsx("input",{name:"team_name",value:r.team_name,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fe,{className:"inline mr-1",size:14})," Team Lead"]}),e.jsx("input",{name:"team_lead_name",value:r.team_lead_name,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Termination Type"}),e.jsxs("select",{name:"termination_type",value:r.termination_type,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"resignation",children:"Resignation"}),e.jsx("option",{value:"termination",children:"Termination"}),e.jsx("option",{value:"retirement",children:"Retirement"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Termination Reason"}),e.jsxs("select",{name:"termination_reason",value:r.termination_reason,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Career Growth",children:"Career Growth"}),e.jsx("option",{value:"Health Reasons",children:"Health Reasons"}),e.jsx("option",{value:"Relocation",children:"Relocation"}),e.jsx("option",{value:"Better Opportunity",children:"Better Opportunity"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Last Working Day"]}),e.jsx("input",{name:"last_working_day",type:"date",value:r.last_working_day,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Reliving Date"]}),e.jsx("input",{name:"reliving_date",type:"date",value:r.reliving_date,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700 col-span-1 md:col-span-2",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ue,{className:"inline mr-1",size:14})," Exit Notes"]}),e.jsx("textarea",{name:"exit_notes",value:r.exit_notes,onChange:i,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none min-h-[80px]",placeholder:"Enter your exit notes..."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:v,disabled:S,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",disabled:S,children:S?e.jsx(we,{}):"Submit Resignation"})]})]})]})};function rt({termination:t,onSuccess:v,onCancel:S}){const[p,x]=a.useState({resign_id:"",status:"pending",approved_by:""}),[D,A]=a.useState(!1),[b,l]=a.useState(null),k=O(r=>r.accessToken),g=O(r=>r.permissions)[0].role;a.useEffect(()=>{t&&x({resign_id:t.resign_id||"",status:t.status||"pending",approved_by:g})},[t,g]);const B=r=>{const{name:m,value:h}=r.target;x(f=>({...f,[m]:h}))},u=async r=>{var m,h,f,j;r.preventDefault(),A(!0);try{const F=await q.put(`${G}/api/user_resign_form/edit`,p,{headers:{Authorization:`Bearer ${k}`}});F.status===200?(P.success("Termination status updated successfully"),v()):l(F.data.message||"Failed to update termination status")}catch(F){l(((h=(m=F.response)==null?void 0:m.data)==null?void 0:h.message)||"An error occurred"),P.error(((j=(f=F.response)==null?void 0:f.data)==null?void 0:j.message)||"Failed to update termination status",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",width:"900px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{A(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(ne,{}),b&&e.jsx("div",{className:"text-red-500 mb-4",children:b}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Update Termination Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ue,{className:"inline mr-1",size:14})," Resignation ID"]}),e.jsx("input",{name:"resign_id",value:p.resign_id,readOnly:!0,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx($a,{className:"inline mr-1",size:14})," Status"]}),e.jsxs("select",{name:"status",value:p.status,onChange:B,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(fa,{className:"inline mr-1",size:14})," Approved By"]}),e.jsx("input",{name:"approved_by",type:"text",value:p.approved_by,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none "})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:S,disabled:D,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",disabled:D,children:D?e.jsx(we,{}):"Update Status"})]})]})]})}const st=()=>{const t=O(y=>y.accessToken),[v,S]=a.useState([]),[p,x]=a.useState(""),[D,A]=a.useState(!1),[b,l]=a.useState(!1),[k,n]=a.useState(!1),[g,B]=a.useState(null),u=async()=>{var y;n(!0);try{const i=await q.get(`${G}/user_resign_form/read`,{headers:{Authorization:`Bearer ${t}`}});Array.isArray((y=i==null?void 0:i.data)==null?void 0:y.data)?S(i.data.data):Xe.error("Invalid data received")}catch(i){Xe.error("Failed to fetch termination data"),console.error("API error:",i)}finally{n(!1)}},r=y=>{B(y),l(!0)},m=()=>{l(!1),Xe.success("Branch updated successfully!"),u()};a.useEffect(()=>{t&&u()},[t]);const h=v.filter(y=>y.staff_name.toLowerCase().includes(p.toLowerCase())),f=()=>[{data:"ID"},{data:"Staff Name"},{data:"Designation"},{data:"Team"},{data:"Termination Type"},{data:"Last Working Day"},{data:"Relieving Date"},{data:"Status"},{data:"Action"}],j=()=>h.map((y,i)=>({id:y.resign_id,data:[{data:i+1},{data:y.staff_name},{data:y.designation},{data:y.team_name},{data:y.termination_type},{data:ma(y.last_working_day).format("YYYY-MM-DD")},{data:ma(y.reliving_date).format("YYYY-MM-DD")},{data:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${y.status==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})},{data:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ua,{to:`/View-certificate/${encodeURIComponent(y.staff_id)}/${encodeURIComponent(y.resign_id)}`,children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(qe,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>r(y),title:"Edit",children:e.jsx(ta,{size:18})})]}),className:"action-cell"}]})),F={staff_id:"BRCH_01/03",staff_name:"Gokul Easwaran",branchcode:"BRCH_01",branch_name:"Head Office",department:"IT",designation:"Engineer",team_id:"BRCH_01/TEAM/01",team_name:"Development",team_lead_id:"BRCH_01/03",team_lead_name:"Ajay K",termination_type:"resignation",termination_reason:"Personal",last_working_day:"2025-08-01",reliving_date:"2025-08-03",exit_notes:"Great company. Leaving for further studies.",created_by:"HR_ADMIN"};return e.jsxs("div",{className:"p-4 relative",children:[e.jsx(ne,{position:be}),e.jsx("h1",{className:"text-xl font-semibold mb-4 text-red-700",children:"Termination Records"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(Ge,{placeholder:"Search by staff name...",value:p,onChange:y=>x(y)}),e.jsx("button",{onClick:()=>A(!0),className:"px-4 py-3 bg-red-700 hover:bg-red-800 text-white rounded-sm text-sm shadow",children:"+ Create Termination"})]}),k?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsx("div",{className:"overflow-x-auto mt-4",children:e.jsx(Be,{thead:f,tbody:j})}),e.jsx(ae,{isVisible:D,onClose:()=>A(!1),title:"Create Termination",className:"w-full max-w-3xl",children:e.jsx(tt,{onCancel:()=>A(!1),onSuccess:()=>{A(!1),u()},defaultData:F})}),e.jsx(ae,{isVisible:b,className:"w-full md:w-[800px]",onClose:()=>l(!1),title:"Edit Branch",children:e.jsx(rt,{termination:g,onSuccess:m,onCancel:()=>l(!1)})})]})},nt=()=>{const t=Ke({query:"(max-width: 768px)"}),[v,S]=a.useState(""),[p,x]=a.useState(1),[D,A]=a.useState(""),[b,l]=a.useState([]),[k,n]=a.useState(""),[g,B]=a.useState([]),[u,r]=a.useState(!1),[m,h]=a.useState(0),[f,j]=a.useState(null),[F,y]=a.useState(!1),[i,C]=a.useState(!1),[o,E]=a.useState(),[_,$]=a.useState(!1),[J,I]=a.useState(""),[R,ce]=a.useState(""),[Y,V]=a.useState(""),[N,de]=a.useState(""),[W,w]=a.useState(5),[L,Z]=a.useState(!1),M=O(s=>s.accessToken),[se,Se]=a.useState("employee"),{fetchEmployee:je,fetchBranchEmployee:me,isStoreLoading:ge}=Ze(),Ce=Ze(s=>s.roleOptions),_e=ke(s=>s.branchCodeOptions),[ee,ve]=a.useState({type:"",status:""}),De=[{value:"",label:"All Branches"},{value:"active",label:"Active Employees"},{value:"inactive",label:"Inactive Employees"}],ue=O(s=>s.branchcode);console.log("branchcodefor employee",ue);const Ee=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}],xe=xa();a.useEffect(()=>{je(M),me(M,ue)},[M,ue]);const pe=async(s=p,H=W,Ie=v,Me=k,ra=Y,sa=N,na=R)=>{var da,la,oa,ia;r(!0);try{console.log("Store state:",ke.getState());let le=`${G}/users/read?page=${s}&limit=${H}`;Ie&&(le+=`&search=${Ie}`),Me&&(le+=`&status=${Me}`),ra&&(le+=`&role=${ra}`),sa&&(le+=`&branchcode=${sa}`),na&&(le+=`&dec=${na}`);const X=await q.get(le,{headers:{Authorization:`Bearer ${M}`}});console.log("userrr>>>>>>>>>",(da=X==null?void 0:X.data)==null?void 0:da.data),l((la=X==null?void 0:X.data)==null?void 0:la.data),h((oa=X==null?void 0:X.data)==null?void 0:oa.totalDocuments),B(((ia=X==null?void 0:X.data)==null?void 0:ia.data)||[])}catch(le){console.error("Error fetching branch list",le),j("Failed to fetch branches")}finally{r(!1)}};a.useEffect(()=>{pe()},[p,v,k,Y,N,R,W]);const ze=s=>{x(s)},Ne=()=>{y(!1),P.success("Employee created successfully"),pe()},d=s=>{S(s),x(1)},z=s=>{console.log("stafffidd",s),$(!0),I(s)},U=async()=>{console.log("deletedidinapi",J);const s={staff_id:J,type:ee.type,status:ee.status};try{r(!0);const H=await q.delete(`${G}/users/delete`,{data:s,headers:{Authorization:`Bearer ${M}`}});console.log("deleteemployeeresponse",H),(H==null?void 0:H.status)===200&&($(!1),P.success("Access permission updated Successfully!",va),pe(),r(!1),ve({type:"",status:""}))}catch(H){console.error("Error deleting branch",H),P.error("Failed to delete branch"),r(!1)}finally{r(!1)}},T=()=>{ce(s=>s==="desc"?"":"desc"),x(1)},he=s=>{n(s),x(1)},c=s=>{V(s),x(1)},ye=s=>{de(s),x(1)},te=s=>{w(s),x(1)},Ae=s=>{const{name:H,value:Ie}=s.target;ve(Me=>({...Me,[H]:Ie}))},Te=s=>{console.log("editprofileidd",s),alert("navigateactive"),xe(`/employee/addpage/${encodeURIComponent(s)}`)},Fe=s=>{console.log("editprofileidd",s),alert("navigateactive"),xe(`/employee/editpage/${encodeURIComponent(s)}`)},$e=s=>{xe(`/employee_profile/${encodeURIComponent(s)}`)},Le=()=>[{data:"Staff Id"},{data:"First Name"},{data:"Last Name"},{data:"Branch Code"},{data:"Role"},{data:"Email"},{data:"Status"},{data:"Actions",className:"text-center"}],Pe=()=>g?g.map(s=>({id:s.staff_id,data:[{data:s.staff_id},{data:s.firstname},{data:s.lastname},{data:s.branchcode},{data:s.role},{data:s.email},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${s.status==="active"?"bg-green-100 text-green-800":s.status==="relive"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${s.status==="active"?"bg-green-800":s.status==="relive"?"bg-yellow-600":"bg-red-600"}`}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})},{data:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",onClick:()=>$e(s.staff_id),children:e.jsx(qe,{size:18})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Te(s.staff_id),title:"Add",children:e.jsx(Ga,{size:18})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Fe(s.staff_id),title:"Update",children:e.jsx(ta,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>z(s.staff_id),title:"Delete",children:e.jsx(ha,{size:18})})]}),className:"action-cell"}]})):[],Oe=()=>{const s=Q.book_new(),H=Q.json_to_sheet(b);Q.book_append_sheet(s,H,"Branches"),We(s,"BranchList.xlsx")},re=[{id:"employee",label:"Employee List"},{id:"salary",label:"Salary"},{id:"leave",label:"Documents"},{id:"termination",label:"Termination"},{id:"interview",label:"Offer letters"}];return e.jsxs("div",{className:"flex flex-col min-h-screen gap-15",children:[e.jsx("div",{className:"  dark:border-gray-700 ",children:e.jsx("nav",{className:"flex justify-evenly -mb-px",children:re.map((s,H)=>e.jsxs(e.Fragment,{children:[H>0&&e.jsx("span",{className:"bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"}),e.jsx("button",{onClick:()=>Se(s.id),className:` font-medium text-sm  ${se===s.id?" text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm ":"border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm "}`,children:s.label},s.id)]}))})}),e.jsxs("div",{className:"p-4 flex-grow",children:[se==="employee"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen mt-[-30px]",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Employee Management"}),e.jsx(ne,{position:be,reverseOrder:!1})]}),e.jsx("div",{className:"flex items-end justify-end gap-4 mb-5",children:e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(K,{options:Ee,selectedValue:W,onSelect:te,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:Oe,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(Ye,{className:"mr-1"}),"Export Excel"]})," ",e.jsx("button",{onClick:()=>y(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:"+ New Employee"})]})}),e.jsx("div",{className:`${t&&!L?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${t?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(K,{options:De,selectedValue:k,onSelect:he,placeholder:"Branch Status",className:"w-full md:w-[200px]"}),e.jsx(K,{options:_e,selectedValue:N,onSelect:ye,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:ge}),e.jsx(K,{options:Ce,selectedValue:Y,onSelect:c,placeholder:"Manager",className:"w-full md:w-[200px]",isLoading:ge}),e.jsxs("button",{onClick:T,className:`${t?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",R==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${t?"w-full":"w-[200px] mt-3"}`,children:e.jsx(Ge,{value:v,onChange:d,placeholder:"Search branches...",className:"w-full"})})]})}),u&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),f&&e.jsx("div",{className:"text-red-500 text-center py-4",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Be,{thead:Le,tbody:Pe,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(He,{total:m,currentPage:p,defaultPageSize:W,onChange:ze,paginationLabel:"Employees",isScroll:!0})})]})}),se==="salary"&&e.jsx("div",{children:e.jsx(qa,{})}),se==="leave"&&e.jsx("div",{children:e.jsx(Xa,{})}),se==="interview"&&e.jsx("div",{children:e.jsx(at,{})}),se==="termination"&&e.jsx("div",{children:e.jsx(st,{})})]}),e.jsx(ae,{isVisible:_,className:"w-full md:w-[600px]",onClose:()=>$(!1),title:"Delete Branch",children:e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(La,{className:"inline mr-2"})," Inactive Employee"]}),e.jsx("p",{className:"text-gray-500 text-sm font-medium text-center",children:"Are you sure you want to inactivate this employee?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ie,{className:"inline mr-1",size:14})," Type"]}),e.jsxs("select",{name:"type",value:ee.type,onChange:Ae,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"temp",children:"Temporary"}),e.jsx("option",{value:"permanent",children:"Permanent"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Pa,{className:"inline mr-1",size:14})," Status"]}),e.jsxs("select",{name:"status",value:ee.status,onChange:Ae,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"relive",children:"Relive"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"abscond",children:"Abscond"}),e.jsx("option",{value:"resigned",children:"Resigned"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:()=>$(!1),disabled:u,children:"Cancel"}),e.jsx("button",{type:"button",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:U,disabled:u,children:u?"Processing...":"Confirm"})]})]})}),e.jsx(ae,{isVisible:F,className:"w-full md:w-[800px]",onClose:()=>y(!1),title:"Create New Employee",children:e.jsx(et,{onSuccess:Ne,onCancel:()=>y(!1)})})]})},lr=ja(nt);export{lr as default};
