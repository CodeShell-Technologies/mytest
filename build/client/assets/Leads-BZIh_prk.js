import{w as Ue}from"./with-props-DF0D9zIo.js";import{r as n,j as e,b as He}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as We}from"./DataTable-DtyPIAGZ.js";import{C as Ge}from"./CustomPagination-CBTcVvJz.js";import{S as Qe}from"./SearchInput-CMdOUuSO.js";import{M as R}from"./Modal-BCIUwH-b.js";import{D as Y}from"./DrapDown-CEm3nLdF.js";import{F as Je,u as Z,w as Ke}from"./xlsx-DTxMWUdD.js";import{t as re,a as H,B as W}from"./api-C04JdqFc.js";import{O as se,V as w}from"./index-DxoBGdjx.js";import{B as ne}from"./ButtonLoader-Z62NVHwI.js";import{u as D}from"./AuthStore-BnYeBJES.js";import{u as oe}from"./useBranchStore-kvv3vD_e.js";import{u as Xe}from"./useEmployeeStore-BJ_SZO4g.js";import{u as Ye}from"./use-click-outside-BhLpsQYS.js";import{u as de}from"./LeadsStore-C-d0npQs.js";import{A as Ze}from"./AddNewLead-CzoeECYc.js";import{B as ea}from"./book-user-BTUNghSh.js";import{H as G}from"./hash-Cmnw3-GM.js";import{U as T}from"./user-DKFoNGWn.js";import{P as ae,M as te}from"./phone-iHDF8fYQ.js";import{C as aa}from"./calendar-check-DuYbAMAv.js";import{T as ee}from"./tag-hjf6KM-t.js";import{B as ta}from"./book-open-text-CwD5ICOx.js";import{C as U}from"./clipboard-list-C2ET-QCv.js";import{F as ra}from"./file-text-BNGbNc3I.js";import{M as sa}from"./map-pin-DetA7opX.js";import{T as be}from"./trash-2-AUNIB88j.js";import{P as na}from"./plus-HifIQSWH.js";import{c as oa}from"./createLucideIcon-RccWoOaL.js";import{E as da}from"./eye-2Mk8PZw-.js";import{S as la}from"./square-pen-hueQTsQ_.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./react-_sXfQCJm.js";/* empty css                         */import"./moment-C5S46NFB.js";import"./UseStaffFilter-Bwbq-nCs.js";import"./building-38OCE1f9.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M6 3v12",key:"qpgusn"}],["path",{d:"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"1d02ji"}],["path",{d:"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"chk6ph"}],["path",{d:"M15 6a9 9 0 0 0-9 9",key:"or332x"}],["path",{d:"M18 15v6",key:"9wciyi"}],["path",{d:"M21 18h-6",key:"139f0c"}]],ca=oa("git-branch-plus",ia),ma=({lead:a,onSuccess:C,onCancel:z})=>{const[h,g]=n.useState(!1),[O,A]=n.useState(null),M=D(o=>o.accessToken),E=oe(o=>o.branchCodeOptions),b=de(o=>o.campaigncodeOptions),_=Xe(o=>o.branchEmployeeOptions),[i,j]=n.useState({branchcode:(a==null?void 0:a.branchcode)||"",campaign_code:(a==null?void 0:a.campaign_code)||"",lead_date:(a==null?void 0:a.lead_date)||new Date().toISOString().split("T")[0],lead_name:(a==null?void 0:a.lead_name)||"",phone:(a==null?void 0:a.phone)||"",email:(a==null?void 0:a.email)||"",assignee_id:(a==null?void 0:a.assignee_id)||"",comm_type:(a==null?void 0:a.comm_type)||"",proj_type:(a==null?void 0:a.proj_type)||"",status:(a==null?void 0:a.status)||"active",summary:(a==null?void 0:a.summary)||""});n.useEffect(()=>{a&&j({branchcode:a.branchcode,campaign_code:a.campaign_code,lead_date:a.lead_date,lead_name:a.lead_name,phone:a.phone,email:a.email,assignee_id:a.assignee_id,comm_type:a.comm_type,proj_type:a.proj_type,status:a.status,summary:a.summary})},[a]);const t=o=>{const{name:S,value:f}=o.target;j(c=>({...c,[S]:f}))},u=async o=>{var f,c;o.preventDefault(),g(!0);const S={data:i};try{const x=await H.put(`${W}/campaign/leads/edit/${a.id}`,S,{headers:{Authorization:`Bearer ${M}`}});x.status===201?C():A(x.data.message||"Failed to update lead")}catch(x){A(((c=(f=x.response)==null?void 0:f.data)==null?void 0:c.message)||"An error occurred"),w.error(O||"Error updating lead")}finally{g(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(se,{position:re}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(ea,{className:"inline mr-2"}),"Edit Lead Information"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(G,{className:"inline mr-1",size:14})," Branch Code"]}),e.jsxs("select",{name:"branchcode",value:i.branchcode,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),E==null?void 0:E.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(G,{className:"inline mr-1",size:14})," Camapign Code"]}),e.jsxs("select",{name:"campaign_code",value:i.campaign_code,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Camapign"}),b==null?void 0:b.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Lead Name"]}),e.jsx("input",{name:"lead_name",value:i.lead_name,onChange:t,type:"text",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ae,{className:"inline mr-1",size:14})," Phone"]}),e.jsx("input",{name:"phone",value:i.phone,onChange:t,type:"text",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(te,{className:"inline mr-1",size:14})," Email"]}),e.jsx("input",{name:"email",value:i.email,onChange:t,type:"email",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(aa,{className:"inline mr-1",size:14})," Lead Date"]}),e.jsx("input",{name:"lead_date",value:i.lead_date,onChange:t,type:"date",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Assigned To"]}),e.jsx("select",{name:"assignee_id",value:i.assignee_id,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:_==null?void 0:_.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ee,{className:"inline mr-1",size:14})," Communication Type"]}),e.jsxs("select",{name:"comm_type",value:i.comm_type,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"call",children:"Phone Call"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"in-person",children:"In-Person"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ee,{className:"inline mr-1",size:14})," Project Type"]}),e.jsxs("select",{name:"proj_type",value:i.proj_type,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"residential",children:"Residential"}),e.jsx("option",{value:"commercial",children:"Commercial"}),e.jsx("option",{value:"industrial",children:"Industrial"}),e.jsx("option",{value:"land",children:"Land"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ee,{className:"inline mr-1",size:14})," Status"]}),e.jsxs("select",{name:"status",value:i.status,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"converted",children:"Converted"}),e.jsx("option",{value:"lost",children:"Lost"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(ta,{className:"inline mr-2"})," Notes & Summary"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:e.jsx("textarea",{name:"summary",value:i.summary,onChange:t,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",placeholder:"Enter lead summary and notes..."})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:z,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:u,className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",children:h?e.jsx(ne,{}):"Update Lead"})]})]})]})},ga=({lead:a,onSuccess:C,onCancel:z})=>{console.log("leadclientt",a);const[h,g]=n.useState(!1),[O,A]=n.useState(null),M=D(s=>s.accessToken),b=D(s=>s.permissions)[0].role,_=oe(s=>s.branchCodeOptions),i=D(s=>s.branchcode),j=b==="superadmin"?_:[{value:i,label:i}];de(s=>s.campaigncodeOptions);const[t,u]=n.useState({branchcode:"",lead_id:"",client_name:"",company_name:"",primary_phone:"",email:"",office_address:"",website:"",industry_type:"commercial",comm_type:"email",status:"active",contacts:[{name:"",designation:"",phone:"",email:""}]});n.useEffect(()=>{a&&u({branchcode:a.branchcode,lead_id:a.id,client_name:a.lead_name,primary_phone:a.phone,email:a.email,company_name:t.company_name,office_address:t.office_address,website:t.website,industry_type:t.industry_type,comm_type:t.comm_type,status:t.status,contacts:t.contacts})},[a]);const o=[{value:"commercial",label:"Commercial"},{value:"residential",label:"Residential"},{value:"industrial",label:"Industrial"},{value:"retail",label:"Retail"},{value:"hospitality",label:"Hospitality"}],S=[{value:"email",label:"Email"},{value:"call",label:"Call"},{value:"mom",label:"Meeting"},{value:"all",label:"All"},{value:"none",label:"None"}],f=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"blacklisted",label:"Blacklisted"}],c=s=>{const{name:d,value:l}=s.target;u(m=>({...m,[d]:l}))},x=(s,d)=>{const{name:l,value:m}=d.target,p=[...t.contacts];p[s]={...p[s],[l]:m},u($=>({...$,contacts:p}))},B=()=>{u(s=>({...s,contacts:[...s.contacts,{name:"",designation:"",phone:"",email:""}]}))},Q=s=>{if(t.contacts.length===1)return;const d=t.contacts.filter((l,m)=>m!==s);u(l=>({...l,contacts:d}))},L=async s=>{var l,m;s.preventDefault(),g(!0);const d={data:[{branchcode:t.branchcode,lead_id:t.lead_id,company_name:t.company_name,client_name:t.client_name,primary_phone:t.primary_phone,email:t.email,office_address:t.office_address,website:t.website,contacts:t.contacts,industry_type:t.industry_type,comm_type:t.comm_type,status:t.status}]};console.log("clientdataaa",d);try{const p=await H.post(`${W}/client/overview/create`,d,{headers:{Authorization:`Bearer ${M}`}});console.log("clientresponseeeee",p.status),p.status===201?(w.success("New Client Add Successfully!"),z(),C()):console.log("errror in create")}catch(p){A(((m=(l=p.response)==null?void 0:l.data)==null?void 0:m.message)||"An error occurred"),w.error(O||"Error creating client",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{g(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(se,{position:re}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Client Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Client Name"]}),e.jsx("input",{name:"client_name",value:t.client_name,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Client Name",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(G,{className:"inline mr-1",size:14})," Branch Code"]}),e.jsxs("select",{name:"branchcode",value:t.branchcode,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),j==null?void 0:j.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(G,{className:"inline mr-1",size:14})," Company Name"]}),e.jsx("input",{name:"company_name",value:t.company_name,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Company Name",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ae,{className:"inline mr-1",size:14})," Primary Phone"]}),e.jsx("input",{name:"primary_phone",value:t.primary_phone,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Primary Phone",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(te,{className:"inline mr-1",size:14})," Email"]}),e.jsx("input",{name:"email",value:t.email,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"email",placeholder:"Email",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(U,{className:"inline mr-1",size:14})," Industry Type"]}),e.jsx("select",{name:"industry_type",value:t.industry_type,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:o.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ra,{className:"inline mr-1",size:14})," Website"]}),e.jsx("input",{name:"website",value:t.website,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Website URL"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(U,{className:"inline mr-1",size:14})," Lead ID"]}),e.jsx("input",{name:"lead_id",value:t.lead_id,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Lead ID"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Address Information"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:[e.jsx(sa,{className:"inline mr-1",size:14})," Office Address"]}),e.jsx("textarea",{name:"office_address",value:t.office_address,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",placeholder:"Office Address",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Contacts"}),t.contacts.map((s,d)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 relative",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Contact Name"]}),e.jsx("input",{name:"name",value:s.name,onChange:l=>x(d,l),className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Contact Name",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Designation"]}),e.jsx("input",{name:"designation",value:s.designation,onChange:l=>x(d,l),className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Designation",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ae,{className:"inline mr-1",size:14})," Phone"]}),e.jsx("input",{name:"phone",value:s.phone,onChange:l=>x(d,l),className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Phone",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(te,{className:"inline mr-1",size:14})," Email"]}),e.jsx("input",{name:"email",value:s.email,onChange:l=>x(d,l),className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"email",placeholder:"Email",required:!0})]}),d>0&&e.jsx("button",{type:"button",onClick:()=>Q(d),className:"absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(be,{size:16})})]},d)),e.jsxs("button",{type:"button",onClick:B,className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:[e.jsx(na,{size:16})," Add Another Contact"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Communication & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(U,{className:"inline mr-1",size:14})," Communication Type"]}),e.jsx("select",{name:"comm_type",value:t.comm_type,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:S.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(U,{className:"inline mr-1",size:14})," Status"]}),e.jsx("select",{name:"status",value:t.status,onChange:c,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:f.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:z,disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:L,disabled:h,children:h?e.jsx(ne,{}):"Create Client"})]})]})},ua=()=>{const a=Ye({query:"(max-width: 768px)"}),[C,z]=n.useState(""),[h,g]=n.useState(1),[O,A]=n.useState(""),[M,E]=n.useState([]),[b,_]=n.useState(""),[i,j]=n.useState([]),[t,u]=n.useState(!1),[o,S]=n.useState(0),[f,c]=n.useState(null),[x,B]=n.useState(!1),[Q,L]=n.useState(!1),[s,d]=n.useState(),[l,m]=n.useState(!1),[p,$]=n.useState(!1),[I,fe]=n.useState(),[J,je]=n.useState(""),[le,xa]=n.useState(""),[K,ve]=n.useState(""),[V,ke]=n.useState(8),[X,Ne]=n.useState(!1),v=D(r=>r.accessToken),{fetchLeads:P,isStoreLoading:we}=de(),Ce=oe(r=>r.branchCodeOptions),ie=D(r=>r.branchcode),_e=[{value:"",label:"All Branches"},{value:"active",label:"Active Branches"},{value:"inactive",label:"Inactive Branches"}];n.useEffect(()=>{P(v,ie)},[v,ie]);const Se=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}],q=async(r=h,F=V,k=C,ce=b,me=le,ge=K,ue=J)=>{var xe,pe,ye,he;u(!0);try{let N=`${W}/campaign/leads/read?page=${r}&limit=${F}`;k&&(N+=`&search=${k}`),ce&&(N+=`&status=${ce}`),me&&(N+=`&manager_id=${me}`),ge&&(N+=`&branchcode=${ge}`),ue&&(N+=`&dec=${ue}`);const y=await H.get(N,{headers:{Authorization:`Bearer ${v}`}});console.log("responselead",y),E((xe=y==null?void 0:y.data)==null?void 0:xe.data),S(((ye=(pe=y==null?void 0:y.data)==null?void 0:pe.data)==null?void 0:ye.length)||0),j(((he=y==null?void 0:y.data)==null?void 0:he.data)||[])}catch(N){console.error("Error fetching branch list",N),c("Failed to fetch branches")}finally{u(!1)}};n.useEffect(()=>{q()},[h,C,b,le,K,J,V]);const Le=r=>{g(r)},ze=()=>{B(!1),w.success("Lead created successfully!"),P(v),q()},Ee=r=>{z(r),g(1)},Be=r=>{console.log("branchleaddetailsfor edit",r),d(r),L(!0)},De=r=>{d(r),$(!0)},Ae=r=>{m(!0),fe(r)},Me=async()=>{console.log("de;etedleadin submit",I);const r=Number(I.id),F={data:{branchcode:I.branchcode,campaign_code:I.campaign_code}};try{u(!0);const k=await H.delete(`${W}/campaign/leads/delete/${r}`,{data:F,headers:{Authorization:`Bearer ${v}`}});(k==null?void 0:k.status)===201&&(m(!1),w.success("Lead deleted successfully!"),P(v),q())}catch(k){console.error("Error deleting Lead",k),w.error("Failed to delete Lead")}finally{u(!1)}},$e=()=>{je(r=>r==="desc"?"":"desc"),g(1)},Pe=r=>{_(r),g(1)},qe=r=>{ve(r),g(1)},Fe=r=>{ke(r),g(1)},Te=()=>[{data:"id"},{data:"Branch Code"},{data:"Lead Code"},{data:"Lead Name"},{data:"Phone"},{data:"Email"},{data:"assignee_id"},{data:"comm_type"},{data:"proj_type"},{data:"summary"},{data:"Status"},{data:"Actions",className:"text-center"}],Oe=()=>i?i.map(r=>({id:r.id,data:[{data:r.id},{data:r.branchcode},{data:r.lead_date},{data:r.lead_name},{data:r.phone},{data:r.email},{data:r.assignee_id},{data:r.comm_type},{data:r.proj_type},{data:r.summary},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${r.status==="active"?"bg-green-800":"bg-red-700"}`}),r.status.charAt(0).toUpperCase()+r.status.slice(1)]})},{data:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"p-1 text-amber-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>De(r),title:"Convert",children:e.jsx(ca,{size:18})}),e.jsx(He,{to:`/leadsview/${r.id}`,children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(da,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Be(r),title:"Edit",children:e.jsx(la,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Ae(r),title:"Delete",children:e.jsx(be,{size:18})})]}),className:"action-cell"}]})):[],Ie=()=>{L(!1),w.success("Lead updated successfully!"),P(v),q()},Ve=()=>{L(!1),w.success("Lead to Client converted successfully!"),P(v),q()},Re=()=>{const r=Z.book_new(),F=Z.json_to_sheet(M);Z.book_append_sheet(r,F,"Branches"),Ke(r,"LeadList.xlsx")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Lead Management"}),a&&e.jsx("button",{onClick:()=>Ne(!X),className:"p-2 bg-gray-200 rounded-md",children:X?"Hide Filters":"Show Filters"})]}),e.jsx(se,{position:re,reverseOrder:!1}),e.jsx("div",{className:`flex ${a?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${a?"flex-col":"flex-row"} gap-4`,children:[e.jsx(Y,{options:Se,selectedValue:V,onSelect:Fe,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:Re,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(Je,{className:"mr-1"}),!a&&"Export Excel"]}),e.jsxs("button",{onClick:()=>B(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!a&&"New Lead"," +"]})]})}),e.jsx("div",{className:`${a&&!X?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${a?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(Y,{options:_e,selectedValue:b,onSelect:Pe,placeholder:"Branch Status",className:"w-full md:w-[200px]"}),e.jsx(Y,{options:Ce,selectedValue:K,onSelect:qe,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:we}),e.jsxs("button",{onClick:$e,className:`${a?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",J==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${a?"w-full":"w-[200px] mt-3"}`,children:e.jsx(Qe,{value:C,onChange:Ee,placeholder:"Search branches...",className:"w-full"})})]})}),t&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),f&&e.jsx("div",{className:"text-red-500 text-center py-4",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(We,{thead:Te,tbody:Oe,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Ge,{total:o,currentPage:h,defaultPageSize:V,onChange:Le,paginationLabel:"branches",isScroll:!0})})]}),e.jsx(R,{isVisible:x,className:"w-full md:w-[800px]",onClose:()=>B(!1),title:"Create New Lead",children:e.jsx(Ze,{onSuccess:ze,onCancel:()=>B(!1)})}),e.jsx(R,{isVisible:Q,className:"w-full md:w-[800px]",onClose:()=>L(!1),title:"Edit Branch",children:e.jsx(ma,{lead:s,onSuccess:Ie,onCancel:()=>L(!1)})}),e.jsx(R,{isVisible:p,className:"w-full md:w-[800px]",onClose:()=>$(!1),title:"Client Convert Form ",children:e.jsx(ga,{lead:s,onSuccess:Ve,onCancel:()=>$(!1)})}),e.jsx(R,{isVisible:l,className:"w-full md:w-[600px]",onClose:()=>m(!1),title:"Delete Branch",children:e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Are you sure you want to delete this branch? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:()=>m(!1),disabled:t,children:"Cancel"}),e.jsx("button",{type:"button",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:Me,disabled:t,children:t?e.jsx(ne,{}):"Delete Branhch"})]})]})})]})},tt=Ue(ua);export{tt as default};
