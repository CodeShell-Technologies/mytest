import{w as qe}from"./with-props-DF0D9zIo.js";import{r as t,j as e,b as Be}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as Fe}from"./DataTable-DtyPIAGZ.js";import{C as Te}from"./CustomPagination-CBTcVvJz.js";import{S as Ae}from"./SearchInput-CMdOUuSO.js";import{M as q}from"./Modal-BCIUwH-b.js";import{D as ce}from"./DrapDown-CEm3nLdF.js";import{F as ze,u as H,w as Me}from"./xlsx-DTxMWUdD.js";import{a as _,B as I,b as z}from"./api-C04JdqFc.js";import{O as oe,V as w}from"./index-DxoBGdjx.js";import{B as le}from"./ButtonLoader-Z62NVHwI.js";import{u as L}from"./AuthStore-BnYeBJES.js";import{u as Oe}from"./useBranchStore-kvv3vD_e.js";import"./useEmployeeStore-BJ_SZO4g.js";import{u as Pe}from"./use-click-outside-BhLpsQYS.js";import{H as We}from"./hash-Cmnw3-GM.js";import{L as Ge,C as He,E as Ue}from"./EditLeaveForm-ZCAHbRg3.js";import{E as Ve}from"./eye-2Mk8PZw-.js";import{S as _e}from"./square-pen-hueQTsQ_.js";import{T as Ie}from"./trash-2-AUNIB88j.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./createLucideIcon-RccWoOaL.js";import"./react-_sXfQCJm.js";/* empty css                         */import"./moment-C5S46NFB.js";import"./calendar-C_LRGMui.js";import"./clipboard-list-C2ET-QCv.js";const Ye=({onSuccess:r,onCancel:b})=>{const[y,n]=t.useState(!1),[c,p]=t.useState(null),v=L(o=>o.accessToken),x=L(o=>o.branchcode),[j,N]=t.useState({name:""}),E=o=>{const{name:d,value:i}=o.target;N(l=>({...l,[d]:i}))},f=async o=>{var i,l;o.preventDefault(),n(!0);const d={userDatas:[{branchcode:x,name:j.name}]};try{const u=await _.post(`${I}/master/software/create`,d,{headers:{Authorization:`Bearer ${v}`}});u.status===201?r():p(u.data.message||"Failed to create branch")}catch(u){p(((l=(i=u.response)==null?void 0:i.data)==null?void 0:l.message)||"An error occurred"),w.error(`${c}, Error in create Branch`,z)}finally{n(!1)}};return e.jsxs("div",{className:"text-medium dark:bg-gray-800 dark:text-gray-200",children:[e.jsx(oe,{}),c&&e.jsx("div",{className:"text-red-500 mb-4",children:c}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-5",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(We,{className:"inline mr-1",size:14})," Software Title"]}),e.jsx("input",{type:"text",className:"w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",name:"name",value:j.name,onChange:E,placeholder:"Software Name",required:!0})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",disabled:y,children:y?e.jsx(le,{}):"Create"})]})]})]})};function Qe({branch:r,onSuccess:b,onCancel:y}){const[n,c]=t.useState({name:""}),[p,v]=t.useState(!1),[x,j]=t.useState(null),N=L(d=>d.accessToken),E=L(d=>d.branchcode);t.useEffect(()=>{r&&c({name:r.name||""})},[r]);const f=d=>{const{name:i,value:l}=d.target;c(u=>({...u,[i]:l}))},o=async d=>{var l,u;d.preventDefault(),v(!0);const i={userData:{branchcode:E,name:n.name}};try{const k=await _.put(`${I}/master/software/edit/${r.id}`,i,{headers:{Authorization:`Bearer ${N}`}});k.status===201?b():j(k.data.message||"Failed to update software")}catch(k){j(((u=(l=k.response)==null?void 0:l.data)==null?void 0:u.message)||"An error occurred"),w.error(`${x}, Error in edit software`,{style:{border:"1px solid  rgb(185 28 28)",padding:"14px",width:"900px",color:" rgb(185 28 28)"},iconTheme:{primary:" rgb(185 28 28)",secondary:"#FFFAEE"}}),j(null)}finally{v(!1)}};return e.jsxs("div",{className:"text-medium dark:bg-gray-800 dark:text-gray-200",children:[x&&e.jsx("div",{className:"text-red-500 mb-4",children:x}),e.jsx(oe,{}),e.jsxs("form",{onSubmit:o,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(We,{className:"inline mr-1",size:14})," Software Title"]}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:f,className:"w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Software name"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 dark:text-gray-700  hover-effect rounded  dark:hover:bg-gray-500 transition",disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover-effect transition",disabled:p,children:p?e.jsx(le,{}):"Update"})]})]})]})}const Je=({onSuccess:r,onCancel:b})=>{const[y,n]=t.useState(!1),[c,p]=t.useState(null),v=L(o=>o.accessToken),x=L(o=>o.branchcode),[j,N]=t.useState({name:""}),E=o=>{const{name:d,value:i}=o.target;N(l=>({...l,[d]:i}))},f=async o=>{var i,l;o.preventDefault(),n(!0);const d={userDatas:[{branchcode:x,name:j.name}]};try{const u=await _.post(`${I}/master/language/create`,d,{headers:{Authorization:`Bearer ${v}`}});u.status===201?r():p(u.data.message||"Failed to create Language")}catch(u){p(((l=(i=u.response)==null?void 0:i.data)==null?void 0:l.message)||"An error occurred"),w.error(`${c}, Error in create language`,z)}finally{n(!1)}};return e.jsxs("div",{className:"text-medium dark:bg-gray-800 dark:text-gray-200",children:[e.jsx(oe,{}),c&&e.jsx("div",{className:"text-red-500 mb-4",children:c}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-5",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ge,{className:"inline mr-1",size:14})," Language Name"]}),e.jsx("input",{type:"text",className:"w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",name:"name",value:j.name,onChange:E,placeholder:"Enter Language Name",required:!0})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",disabled:y,children:y?e.jsx(le,{}):"Create"})]})]})]})};function Ke({branch:r,onSuccess:b,onCancel:y}){const[n,c]=t.useState({name:""}),[p,v]=t.useState(!1),[x,j]=t.useState(null),N=L(d=>d.accessToken),E=L(d=>d.branchcode);t.useEffect(()=>{r&&c({name:r.name||""})},[r]);const f=d=>{const{name:i,value:l}=d.target;c(u=>({...u,[i]:l}))},o=async d=>{var l,u;d.preventDefault(),v(!0);const i={userData:{branchcode:E,name:n.name}};try{const k=await _.put(`${I}/master/language/edit/${r.id}`,i,{headers:{Authorization:`Bearer ${N}`}});k.status===201?b():j(k.data.message||"Failed to update language")}catch(k){j(((u=(l=k.response)==null?void 0:l.data)==null?void 0:u.message)||"An error occurred"),w.error(`${x}, Error in edit language`,{style:{border:"1px solid  rgb(185 28 28)",padding:"14px",width:"900px",color:" rgb(185 28 28)"},iconTheme:{primary:" rgb(185 28 28)",secondary:"#FFFAEE"}}),j(null)}finally{v(!1)}};return e.jsxs("div",{className:"text-medium dark:bg-gray-800 dark:text-gray-200",children:[x&&e.jsx("div",{className:"text-red-500 mb-4",children:x}),e.jsx(oe,{}),e.jsxs("form",{onSubmit:o,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ge,{className:"inline mr-1",size:14})," Language Name"]}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:f,className:"w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Language name"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 dark:text-gray-700  hover-effect rounded  dark:hover:bg-gray-500 transition",disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover-effect transition",disabled:p,children:p?e.jsx(le,{}):"Update"})]})]})]})}const Xe=()=>{const r=Pe({query:"(max-width: 768px)"}),[b,y]=t.useState(""),[n,c]=t.useState(1),[p,v]=t.useState([]),[x,j]=t.useState(""),[N,E]=t.useState([]),[f,o]=t.useState(!1),[d,i]=t.useState(0),[l,u]=t.useState(null),[k,D]=t.useState(!1),[de,F]=t.useState(!1),[U,ie]=t.useState(),[Y,T]=t.useState(!1),[ue,me]=t.useState(""),[B,xe]=t.useState(""),[ae,he]=t.useState(""),[R,ne]=t.useState(""),[M,se]=t.useState(8),[W,Q]=t.useState(!1),S=L(a=>a.accessToken);L(a=>a.branchcode);const{branches:ge,managerOptions:De,branchCodeOptions:A,fetchBranches:O,isLoading:Le}=Oe(),pe=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];t.useEffect(()=>{O(S)},[S]);const $=async(a=n,h=M,re=b,s=x,C=ae,P=R,K=B)=>{var X,G,Z,ee;o(!0);try{let g=`${I}/master/leavetypes/read?branchcode=${P}&page=${a}&limit=${h}`;re&&(g+=`&search=${re}`),s&&(g+=`&status=${s}`),C&&(g+=`&manager_id=${C}`),P&&(g+=`&branchcode=${P}`),K&&(g+=`&dec=${K}`);const m=await _.get(g,{headers:{Authorization:`Bearer ${S}`}});console.log("responseeeeleavee",m),v((X=m==null?void 0:m.data)==null?void 0:X.data),i(((Z=(G=m==null?void 0:m.data)==null?void 0:G.data)==null?void 0:Z.totalDocuments)||0),E(((ee=m==null?void 0:m.data)==null?void 0:ee.data)||[])}catch(g){console.error("Error fetching branch list",g),u("Failed to fetch branches")}finally{o(!1)}};t.useEffect(()=>{$()},[n,b,x,ae,R,B,M]);const fe=a=>{c(a)},be=()=>{D(!1),w.success("Leave Type added successfully!",z),O(S),$()},J=a=>{y(a),c(1)},ye=a=>{ie(a),F(!0)},ve=a=>{T(!0),me(a)},je=async()=>{const a=Number(ue);try{o(!0);const h=await _.delete(`${I}/master/leavetypes/delete/${a}`,{headers:{Authorization:`Bearer ${S}`}});(h==null?void 0:h.status)===201&&(T(!1),w.success("Leave deleted successfully!",z),O(S),$())}catch(h){console.error("Error deleting leave",h),w.error("Failed to delete Leave")}finally{o(!1)}},Se=()=>{xe(a=>a==="desc"?"":"desc"),c(1)},we=a=>{ne(a),c(1)},Ne=a=>{se(a),c(1)},ke=()=>[{data:"id"},{data:"Branch Code"},{data:"Leave Type"},{data:"Year"},{data:"TotalDays"},{data:"Status"},{data:"Actions"}],Ce=()=>N?N.map(a=>({id:a.id,data:[{data:a.id},{data:a.branchcode},{data:a.name},{data:a.year},{data:a.total_days},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${a.status==="open"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${a.status==="open"?"bg-green-800":"bg-red-700"}`}),a.status.charAt(0).toUpperCase()+a.status.slice(1)]})},{data:e.jsxs("div",{className:"flex  justify-center gap-1 ",children:[e.jsx(Be,{to:`/branch/${a.id}`,children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(Ve,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>ye(a),title:"Edit",children:e.jsx(_e,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>ve(a.id),title:"Delete",children:e.jsx(Ie,{size:18})})]}),className:"action-cell"}]})):[],Ee=()=>{F(!1),w.success("Leave updated successfully!",z),O(S),$()},$e=()=>{const a=H.book_new(),h=H.json_to_sheet(p);H.book_append_sheet(a,h,"Software"),Me(a,"SoftWareList.xlsx")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen w-[850px]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Global LeaveType Management"}),r&&e.jsx("button",{onClick:()=>Q(!W),className:"p-2 bg-gray-200 rounded-md",children:W?"Hide Filters":"Show Filters"})]}),e.jsx(oe,{position:"top-center",reverseOrder:!1}),e.jsx("div",{className:`flex ${r?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${r?"flex-col":"flex-row"} gap-4`,children:[e.jsx(ce,{options:pe,selectedValue:M,onSelect:Ne,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:$e,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(ze,{className:"mr-1"}),!r&&"Export Excel"]}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!r&&"New Leave Type"," +"]})]})}),e.jsx("div",{className:`${r&&!W?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${r?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(ce,{options:A,selectedValue:R,onSelect:we,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:Le}),e.jsxs("button",{onClick:Se,className:`${r?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",B==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${r?"w-full":"w-[180px] mt-3"}`,children:e.jsx(Ae,{value:b,onChange:J,placeholder:"Search branches...",className:"w-full"})})]})}),f&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),l&&e.jsx("div",{className:"text-red-500 text-center py-4",children:l}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Fe,{thead:ke,tbody:Ce,responsive:!0,className:"min-w-[50%]"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Te,{total:d,currentPage:n,defaultPageSize:M,onChange:fe,paginationLabel:"branches",isScroll:!0})})]}),e.jsx(q,{isVisible:k,className:"w-full md:w-[800px]",onClose:()=>D(!1),title:"CREATE NEW LEAVETYPE",children:e.jsx(He,{onSuccess:be,onCancel:()=>D(!1)})}),e.jsx(q,{isVisible:de,className:"w-full md:w-[800px]",onClose:()=>F(!1),title:"EDIT LEAVE TYPE",children:e.jsx(Ue,{branch:U,onSuccess:Ee,onCancel:()=>F(!1)})}),e.jsx(q,{isVisible:Y,className:"w-full md:w-[600px]",onClose:()=>T(!1),title:"DELETE LEAVE TYPE",children:e.jsxs("div",{className:"flex flex-col gap-6 justify-center items-center",children:[e.jsx("p",{className:"text-gray-500 text-lg font-bold text-center",children:"Are you sure you want to delete this Leavetype?"}),e.jsxs("div",{className:"flex gap-4 flex-wrap justify-center",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",disabled:f,onClick:()=>T(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",disabled:f,onClick:je,children:f?e.jsx(le,{}):"Confirm"})]})]})})]})})},Ze=()=>{const r=Pe({query:"(max-width: 768px)"}),[b,y]=t.useState(""),[n,c]=t.useState(1),[p,v]=t.useState([]),[x,j]=t.useState(""),[N,E]=t.useState([]),[f,o]=t.useState(!1),[d,i]=t.useState(0),[l,u]=t.useState(null),[k,D]=t.useState(!1),[de,F]=t.useState(!1),[U,ie]=t.useState(),[Y,T]=t.useState(!1),[ue,me]=t.useState(""),[B,xe]=t.useState(""),[ae,he]=t.useState(""),[R,ne]=t.useState(""),[M,se]=t.useState(8),[W,Q]=t.useState(!1),S=L(a=>a.accessToken);L(a=>a.branchcode);const{branches:ge,managerOptions:De,branchCodeOptions:A,fetchBranches:O,isLoading:Le}=Oe(),pe=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];t.useEffect(()=>{O(S)},[S]);const $=async(a=n,h=M,re=b,s=x,C=ae,P=R,K=B)=>{var X,G,Z,ee;o(!0);try{let g=`${I}/master/language/read?branchcode=${P}&page=${a}&limit=${h}`;re&&(g+=`&search=${re}`),s&&(g+=`&status=${s}`),C&&(g+=`&manager_id=${C}`),P&&(g+=`&branchcode=${P}`),K&&(g+=`&dec=${K}`);const m=await _.get(g,{headers:{Authorization:`Bearer ${S}`}});console.log("responseeee",m),v((X=m==null?void 0:m.data)==null?void 0:X.data),i(((Z=(G=m==null?void 0:m.data)==null?void 0:G.data)==null?void 0:Z.totalDocuments)||0),E(((ee=m==null?void 0:m.data)==null?void 0:ee.data)||[])}catch(g){console.error("Error fetching branch list",g),u("Failed to fetch branches")}finally{o(!1)}};t.useEffect(()=>{$()},[n,b,x,ae,R,B,M]);const fe=a=>{c(a)},be=()=>{D(!1),w.success("Language added successfully!",z),O(S),$()},J=a=>{y(a),c(1)},ye=a=>{ie(a),F(!0)},ve=a=>{T(!0),me(a)},je=async()=>{const a=Number(ue);try{o(!0);const h=await _.delete(`${I}/master/language/delete/${a}`,{headers:{Authorization:`Bearer ${S}`}});(h==null?void 0:h.status)===201&&(T(!1),w.success("Language deleted successfully!",z),O(S),$())}catch(h){console.error("Error deleting software",h),w.error("Failed to delete software")}finally{o(!1)}},Se=()=>{xe(a=>a==="desc"?"":"desc"),c(1)},we=a=>{ne(a),c(1)},Ne=a=>{se(a),c(1)},ke=()=>[{data:"id"},{data:"Branch Code"},{data:"Software Name"},{data:"Actions"}],Ce=()=>N?N.map(a=>({id:a.id,data:[{data:a.id},{data:a.branchcode},{data:a.name},{data:e.jsxs("div",{className:"flex flex-wrap justify-center gap-5 -ml-15",children:[e.jsx(Be,{to:`/branch/${a.id}`,children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(Ve,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>ye(a),title:"Edit",children:e.jsx(_e,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>ve(a.id),title:"Delete",children:e.jsx(Ie,{size:18})})]}),className:"action-cell"}]})):[],Ee=()=>{F(!1),w.success("Language updated successfully!",z),O(S),$()},$e=()=>{const a=H.book_new(),h=H.json_to_sheet(p);H.book_append_sheet(a,h,"Software"),Me(a,"SoftWareList.xlsx")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen w-[850px]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Global Language Management"}),r&&e.jsx("button",{onClick:()=>Q(!W),className:"p-2 bg-gray-200 rounded-md",children:W?"Hide Filters":"Show Filters"})]}),e.jsx(oe,{position:"top-center",reverseOrder:!1}),e.jsx("div",{className:`flex ${r?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${r?"flex-col":"flex-row"} gap-4`,children:[e.jsx(ce,{options:pe,selectedValue:M,onSelect:Ne,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:$e,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(ze,{className:"mr-1"}),!r&&"Export Excel"]}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!r&&"New Language"," +"]})]})}),e.jsx("div",{className:`${r&&!W?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${r?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(ce,{options:A,selectedValue:R,onSelect:we,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:Le}),e.jsxs("button",{onClick:Se,className:`${r?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",B==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${r?"w-full":"w-[180px] mt-3"}`,children:e.jsx(Ae,{value:b,onChange:J,placeholder:"Search branches...",className:"w-full"})})]})}),f&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),l&&e.jsx("div",{className:"text-red-500 text-center py-4",children:l}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Fe,{thead:ke,tbody:Ce,responsive:!0,className:"min-w-[50%]"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Te,{total:d,currentPage:n,defaultPageSize:M,onChange:fe,paginationLabel:"branches",isScroll:!0})})]}),e.jsx(q,{isVisible:k,className:"w-full md:w-[800px]",onClose:()=>D(!1),title:"CREATE NEW LANGUAGE",children:e.jsx(Je,{onSuccess:be,onCancel:()=>D(!1)})}),e.jsx(q,{isVisible:de,className:"w-full md:w-[800px]",onClose:()=>F(!1),title:"EDIT SOFTWARE",children:e.jsx(Ke,{branch:U,onSuccess:Ee,onCancel:()=>F(!1)})}),e.jsx(q,{isVisible:Y,className:"w-full md:w-[600px]",onClose:()=>T(!1),title:"DELETE LANGUAGE",children:e.jsxs("div",{className:"flex flex-col gap-6 justify-center items-center",children:[e.jsx("p",{className:"text-gray-500 text-lg font-bold text-center",children:"Are you sure you want to delete this Language?"}),e.jsxs("div",{className:"flex gap-4 flex-wrap justify-center",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",disabled:f,onClick:()=>T(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",disabled:f,onClick:je,children:f?e.jsx(le,{}):"Confirm"})]})]})})]})})},et=()=>{const[r,b]=t.useState("software"),y=[{id:"software",label:"Softwares"},{id:"languages",label:"Languages"},{id:"leaves",label:"Leaves"}],n=Pe({query:"(max-width: 768px)"}),[c,p]=t.useState(""),[v,x]=t.useState(1),[j,N]=t.useState([]),[E,f]=t.useState(""),[o,d]=t.useState([]),[i,l]=t.useState(!1),[u,k]=t.useState(0),[D,de]=t.useState(null),[F,U]=t.useState(!1),[ie,Y]=t.useState(!1),[T,ue]=t.useState(),[me,B]=t.useState(!1),[xe,ae]=t.useState(""),[he,R]=t.useState(""),[ne,M]=t.useState(""),[se,W]=t.useState(""),[Q,S]=t.useState(8),[ge,De]=t.useState(!1),A=L(s=>s.accessToken);L(s=>s.branchcode);const{branches:O,managerOptions:Le,branchCodeOptions:pe,fetchBranches:$,isLoading:fe}=Oe(),be=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];t.useEffect(()=>{$(A)},[A]);const J=async(s=v,C=Q,P=c,K=E,X=ne,G=se,Z=he)=>{var ee,g,m,Re;l(!0);try{let te=`${I}/master/software/read?branchcode=${G}&page=${s}&limit=${C}`;P&&(te+=`&search=${P}`),K&&(te+=`&status=${K}`),X&&(te+=`&manager_id=${X}`),G&&(te+=`&branchcode=${G}`),Z&&(te+=`&dec=${Z}`);const V=await _.get(te,{headers:{Authorization:`Bearer ${A}`}});console.log("responseeee",V),N((ee=V==null?void 0:V.data)==null?void 0:ee.data),k(((m=(g=V==null?void 0:V.data)==null?void 0:g.data)==null?void 0:m.totalDocuments)||0),d(((Re=V==null?void 0:V.data)==null?void 0:Re.data)||[])}catch(te){console.error("Error fetching branch list",te),de("Failed to fetch branches")}finally{l(!1)}};t.useEffect(()=>{J()},[v,c,E,ne,se,he,Q]);const ye=s=>{x(s)},ve=()=>{U(!1),w.success("Software added successfully!",z),$(A),J()},je=s=>{p(s),x(1)},Se=s=>{ue(s),Y(!0)},we=s=>{B(!0),ae(s)},Ne=async()=>{const s=Number(xe);try{l(!0);const C=await _.delete(`${I}/master/software/delete/${s}`,{headers:{Authorization:`Bearer ${A}`}});(C==null?void 0:C.status)===201&&(B(!1),w.success("Software deleted successfully!",z),$(A),J())}catch(C){console.error("Error deleting software",C),w.error("Failed to delete software")}finally{l(!1)}},ke=()=>{R(s=>s==="desc"?"":"desc"),x(1)},Ce=s=>{W(s),x(1)},Ee=s=>{S(s),x(1)},$e=()=>[{data:"id"},{data:"Branch Code"},{data:"Software Name"},{data:"Actions"}],a=()=>o?o.map(s=>({id:s.id,data:[{data:s.id},{data:s.branchcode},{data:s.name},{data:e.jsxs("div",{className:"flex flex-wrap justify-center gap-5 -ml-15",children:[e.jsx(Be,{to:`/branch/${s.id}`,children:e.jsx("button",{className:"p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",title:"View",children:e.jsx(Ve,{size:18})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Se(s),title:"Edit",children:e.jsx(_e,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>we(s.id),title:"Delete",children:e.jsx(Ie,{size:18})})]}),className:"action-cell"}]})):[],h=()=>{Y(!1),w.success("Branch updated successfully!",z),$(A),J()},re=()=>{const s=H.book_new(),C=H.json_to_sheet(j);H.book_append_sheet(s,C,"Software"),Me(s,"SoftWareList.xlsx")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen w-[850px]",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 ",children:e.jsx("nav",{className:"flex -mb-px",children:y.map(s=>e.jsx("button",{onClick:()=>b(s.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${r===s.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.label},s.id))})}),e.jsxs("div",{className:"p-4 flex-grow w-full ",children:[r==="software"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col w-[850px]",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Global Software Management"}),n&&e.jsx("button",{onClick:()=>De(!ge),className:"p-2 bg-gray-200 rounded-md",children:ge?"Hide Filters":"Show Filters"})]}),e.jsx(oe,{position:"top-center",reverseOrder:!1}),e.jsx("div",{className:`flex ${n?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${n?"flex-col":"flex-row"} gap-4`,children:[e.jsx(ce,{options:be,selectedValue:Q,onSelect:Ee,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:re,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(ze,{className:"mr-1"}),!n&&"Export Excel"]}),e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!n&&"New Software"," +"]})]})}),e.jsx("div",{className:`${n&&!ge?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${n?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(ce,{options:pe,selectedValue:se,onSelect:Ce,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:fe}),e.jsxs("button",{onClick:ke,className:`${n?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",he==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${n?"w-full":"w-[180px] mt-3"}`,children:e.jsx(Ae,{value:c,onChange:je,placeholder:"Search branches...",className:"w-full"})})]})}),i&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),D&&e.jsx("div",{className:"text-red-500 text-center py-4",children:D}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Fe,{thead:$e,tbody:a,responsive:!0,className:"min-w-[50%]"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Te,{total:u,currentPage:v,defaultPageSize:Q,onChange:ye,paginationLabel:"branches",isScroll:!0})})]}),e.jsx(q,{isVisible:F,className:"w-full md:w-[800px]",onClose:()=>U(!1),title:"CREATE NEW SOFTWARE",children:e.jsx(Ye,{onSuccess:ve,onCancel:()=>U(!1)})}),e.jsx(q,{isVisible:ie,className:"w-full md:w-[800px]",onClose:()=>Y(!1),title:"EDIT SOFTWARE",children:e.jsx(Qe,{branch:T,onSuccess:h,onCancel:()=>Y(!1)})}),e.jsx(q,{isVisible:me,className:"w-full md:w-[600px]",onClose:()=>B(!1),title:"DELETE BRANCH",children:e.jsxs("div",{className:"flex flex-col gap-6 justify-center items-center",children:[e.jsx("p",{className:"text-gray-500 text-lg font-bold text-center",children:"Are you sure you want to delete this Software?"}),e.jsxs("div",{className:"flex gap-4 flex-wrap justify-center",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",disabled:i,onClick:()=>B(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",disabled:i,onClick:Ne,children:i?e.jsx(le,{}):"Confirm"})]})]})})]}),r==="languages"&&e.jsx(Ze,{}),r==="leaves"&&e.jsx(Xe,{})]})]})})},Bt=qe(et);export{Bt as default};
