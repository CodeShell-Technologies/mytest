import{r as n,j as e}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{B as v,a as w,t as I}from"./api-C04JdqFc.js";import{V as u,O as R}from"./index-DxoBGdjx.js";import{B as $}from"./ButtonLoader-Z62NVHwI.js";import{u as x}from"./AuthStore-BnYeBJES.js";import"./useEmployeeStore-BJ_SZO4g.js";import{B as L}from"./building-38OCE1f9.js";import{U as P}from"./user-DKFoNGWn.js";import{C as T}from"./calendar-C_LRGMui.js";import{I as o}from"./indian-rupee-vxz3wvmf.js";import{P as y}from"./percent-PG9oKso6.js";import{D as c}from"./dollar-sign-D2IX7NrM.js";import{C as U}from"./clipboard-list-C2ET-QCv.js";import{F as G}from"./file-text-BNGbNc3I.js";const H=["architecture","visualization","structural","drafting","hr","sales","consulting"],ne=({onSuccess:S,onCancel:C})=>{var N;const[g,p]=n.useState(!1),[z,b]=n.useState(null),f=x(r=>r.accessToken),[m,D]=n.useState([]),[l,F]=n.useState(""),[h,k]=n.useState(!1),q=(N=x(r=>r.permissions)[0])==null?void 0:N.role,A=x(r=>r.branchcode),[a,j]=n.useState({staff_id:"",basicsalary:"",hra:"",lpa:"",gross_salary:"",net_salary:"",bonus:"",pf:"",esi:"",tds:"",other_allowance:"",deductions:"",remarks:"",processondate:"",status:"active"});n.useEffect(()=>{l&&_()},[l]);const _=async()=>{k(!0);try{let r=`${v}/users/dropdown?department=${l}`;q!=="superadmin"&&(r+=`&branchcode=${A}`);const d=await w.get(r,{headers:{Authorization:`Bearer ${f}`}});if(d.data&&d.data.data){const i=d.data.data.map(t=>({value:t.staff_id,label:`${t.firstname+t.lastname} - ${t.designation}`}));D(i)}}catch{u.error("Failed to fetch staff options",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{k(!1)}},B=r=>{F(r.target.value),j(d=>({...d,staff_id:""}))},E=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],s=r=>{const{name:d,value:i}=r.target;j(t=>({...t,[d]:i}))},O=async r=>{var d,i;r.preventDefault(),p(!0);try{const t=await w.post(`${v}/users/salary/create`,{userDatas:[a]},{headers:{Authorization:`Bearer ${f}`}});t.status===201?(S(),u.success("Salary created successfully!")):b(t.data.message||"Failed to create salary")}catch(t){b(((i=(d=t.response)==null?void 0:d.data)==null?void 0:i.message)||"An error occurred"),u.error(z||"Error creating salary",{style:{border:"1px solid rgb(185 28 28)",padding:"14px",color:"rgb(185 28 28)"},iconTheme:{primary:"rgb(185 28 28)",secondary:"#FFFAEE"}})}finally{p(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(R,{position:I}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(L,{className:"inline mr-1",size:14})," Department ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsxs("select",{value:l,onChange:B,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),H.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(P,{className:"inline mr-1",size:14})," Staff ID ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),h?e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Loading staff..."}):e.jsxs("select",{name:"staff_id",value:a.staff_id,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!l||m.length===0,children:[e.jsx("option",{value:"",children:"Select Staff"}),m.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),l&&m.length===0&&!h&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"No staff found in this department"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(T,{className:"inline mr-1",size:14})," Process On Date"]}),e.jsx("input",{name:"processondate",value:a.processondate,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"date",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Salary Components"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(o,{className:"inline mr-1",size:14})," Basic Salary ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{name:"basicsalary",value:a.basicsalary,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Basic Salary",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(o,{className:"inline mr-1",size:14})," HRA"]}),e.jsx("input",{name:"hra",value:a.hra,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"HRA",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(o,{className:"inline mr-1",size:14})," LPA"]}),e.jsx("input",{name:"lpa",value:a.lpa,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"LPA",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(o,{className:"inline mr-1",size:14})," Bonus"]}),e.jsx("input",{name:"bonus",value:a.bonus,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Bonus",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Deductions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(y,{className:"inline mr-1",size:14})," PF ",e.jsx("span",{className:"text-red-700 text-lg m-2",children:"*"})]}),e.jsx("input",{name:"pf",value:a.pf,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"PF",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(y,{className:"inline mr-1",size:14})," ESI"]}),e.jsx("input",{name:"esi",value:a.esi,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"ESI",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(y,{className:"inline mr-1",size:14})," TDS"]}),e.jsx("input",{name:"tds",value:a.tds,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"TDS",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(c,{className:"inline mr-1",size:14})," Other Allowance"]}),e.jsx("input",{name:"other_allowance",value:a.other_allowance,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Other Allowance",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(c,{className:"inline mr-1",size:14})," Deductions"]}),e.jsx("input",{name:"deductions",value:a.deductions,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Deductions",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Salary Totals"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(c,{className:"inline mr-1",size:14})," Gross Salary"]}),e.jsx("input",{name:"gross_salary",value:a.gross_salary,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Gross Salary",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(c,{className:"inline mr-1",size:14})," Net Salary"]}),e.jsx("input",{name:"net_salary",value:a.net_salary,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"number",placeholder:"Net Salary",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(U,{className:"inline mr-1",size:14})," Status"]}),e.jsx("select",{name:"status",value:a.status,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:E.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(G,{className:"inline mr-1",size:14})," Remarks"]}),e.jsx("input",{name:"remarks",value:a.remarks,onChange:s,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",type:"text",placeholder:"Remarks",required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:C,disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:O,disabled:g,children:g?e.jsx($,{}):"Create Salary"})]})]})};export{ne as C};
