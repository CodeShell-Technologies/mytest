import{w as gt}from"./with-props-DF0D9zIo.js";import{r as s,j as e,b as xt}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as pt}from"./DataTable-DtyPIAGZ.js";import{C as ht}from"./CustomPagination-CBTcVvJz.js";import{S as yt}from"./SearchInput-CMdOUuSO.js";import{M as A}from"./Modal-BCIUwH-b.js";import{D as P}from"./DrapDown-CEm3nLdF.js";import{F as bt,u as W,w as ft}from"./xlsx-DTxMWUdD.js";import{t as Se,a as X,B as Z}from"./api-C04JdqFc.js";import{O as Ce,V as v}from"./index-DxoBGdjx.js";import{u as ee}from"./AuthStore-BnYeBJES.js";import{u as Pe}from"./useBranchStore-kvv3vD_e.js";import{u as jt}from"./useEmployeeStore-BJ_SZO4g.js";import{u as vt}from"./use-click-outside-BhLpsQYS.js";import{M as Nt,A as kt}from"./AddNewProject-BwdU85rY.js";import{B as wt}from"./ButtonLoader-Z62NVHwI.js";import{u as je,a as St}from"./ProjectStore-Bmk5yusB.js";import{u as Ct}from"./LeadsStore-C-d0npQs.js";import{u as Pt}from"./UseStaffFilter-Bwbq-nCs.js";import{B as _t}from"./book-user-BTUNghSh.js";import{H as Dt}from"./hash-Cmnw3-GM.js";import{c as Bt}from"./createLucideIcon-RccWoOaL.js";import{B as zt}from"./briefcase-B0VTTUxq.js";import{N as _e}from"./network-4iL8t-Of.js";import{C as ve}from"./calendar-check-DuYbAMAv.js";import{B as Et}from"./building-38OCE1f9.js";import{U as Ne}from"./user-DKFoNGWn.js";import{T as q}from"./tag-hjf6KM-t.js";import{I as ke}from"./indian-rupee-vxz3wvmf.js";import{B as Mt}from"./book-open-text-CwD5ICOx.js";import{P as $t}from"./ProjectMeetingForm-7pSkeH58.js";import{D as we}from"./index.es-Dy-HqQhS.js";/* empty css                         */import{C as Tt}from"./clipboard-type-fPi_05HQ.js";import{E as Ft}from"./eye-2Mk8PZw-.js";import{S as Ot}from"./square-pen-hueQTsQ_.js";import{T as Lt}from"./trash-2-AUNIB88j.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./react-_sXfQCJm.js";import"./moment-C5S46NFB.js";import"./video-BzePKQuD.js";import"./file-text-BNGbNc3I.js";import"./clipboard-list-C2ET-QCv.js";import"./file-QxKA-9Fo.js";import"./calendar-C_LRGMui.js";import"./clock-CzOQJT5p.js";import"./users-CXAhoVGa.js";import"./x-BfrbTbzo.js";import"./chevron-up-DjUqBI0v.js";import"./chevron-down-DOBgonSl.js";import"./plus-HifIQSWH.js";import"./clsx-B-dksMZM.js";import"./index-CyJ3O4p6.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]],qt=Bt("tent",At),Vt=({project:l,onSuccess:_,onCancel:V})=>{console.log("projectdataaa",l);const[D,d]=s.useState(!1),[te,I]=s.useState(null),E=ee(r=>r.accessToken),B=Pe(r=>r.branchCodeOptions);Ct(r=>r.campaigncodeOptions),jt(r=>r.branchEmployeeOptions);const{fetchClients:z,isStoreLoading:ae}=je(),M=je(r=>r.clientscodeOptions);console.log("clientcodefor project",M),s.useEffect(()=>{z(E)},[]);const[a,x]=s.useState({branchcode:"",campaign_code:"",client_code:"",title:"",priority:"",type:"",loc:"",budget:0,overallcost:0,start_date:"",end_date:"",handler_by:"",handler_to:"",notes:"",status:"draft"});s.useEffect(()=>{l&&x({branchcode:l.branchcode||"",campaign_code:l.campaign_code||"",client_code:l.client_code||"",title:l.title||"",priority:l.priority||"",type:l.type||"",loc:l.loc||"",budget:l.budget||"",overallcost:l.overallcost||"",start_date:l.start_date||"",end_date:l.end_date||"",handler_by:l.handler_by||"",handler_to:l.handler_to||"",notes:l.notes||"",status:l.status||""})},[l]);const{departmentOptions:p,selectedDepartment:y,staffOptions:h,isFetchingStaff:b,handleDepartmentChange:R}=Pt(a.branchcode),o=r=>{const{name:c,value:f}=r.target;x(k=>({...k,[c]:f}))},N=async r=>{var f,k;r.preventDefault(),d(!0);const c={data:{branchcode:a.branchcode,campaign_code:a.campaign_code,project_code:l.project_code,client_code:a.client_code,title:a.title,priority:a.priority,type:a.type,loc:a.loc,budget:a.budget,overallcost:a.overallcost,start_date:a.start_date,end_date:a.end_date,handler_by:a.handler_by,handler_to:a.handler_to,notes:a.notes,status:a.status}};try{const w=await X.put(`${Z}/project/overview/edit`,c,{headers:{Authorization:`Bearer ${E}`}});w.status===201?(v.success("Project Updated successfully!"),_()):I(w.data.message||"Failed to update Project")}catch(w){I(((k=(f=w.response)==null?void 0:f.data)==null?void 0:k.message)||"An error occurred"),v.error(te||"Error updating project")}finally{d(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsx(Ce,{position:Se}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(_t,{className:"inline mr-2"})," Project Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Dt,{className:"inline mr-1",size:14})," Branch Code"]}),e.jsxs("select",{name:"branchcode",value:a.branchcode,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Branch"}),B==null?void 0:B.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(qt,{className:"inline mr-1",size:14})," Camapign Code"]}),e.jsx("input",{name:"campaign_code",value:a.campaign_code,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(zt,{className:"inline mr-1",size:14})," Client Code"]}),e.jsx("input",{name:"client_code",value:a.client_code,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",readOnly:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(_e,{className:"inline mr-1",size:14})," Project Name"]}),e.jsx("input",{name:"title",value:a.title,onChange:o,type:"text",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Project Name",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Nt,{className:"inline mr-1",size:14})," Location"]}),e.jsx("input",{name:"loc",value:a.loc,onChange:o,type:"text",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Location",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ve,{className:"inline mr-1",size:14})," Start Date"]}),e.jsx("input",{name:"start_date",value:a.start_date,onChange:o,type:"date",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ve,{className:"inline mr-1",size:14})," End Date"]}),e.jsx("input",{name:"end_date",value:a.end_date,onChange:o,type:"date",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Et,{className:"inline mr-1",size:14})," Department"]}),e.jsxs("select",{value:y,onChange:r=>{R(r.target.value),x(c=>({...c,handler_by:"",handler_to:""}))},className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),p.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ne,{className:"inline mr-1",size:14})," Handler By"]}),b?e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Loading staff..."}):e.jsxs("select",{name:"handler_by",value:a.handler_by,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!y||h.length===0,children:[e.jsx("option",{value:"",children:"Select Staff"}),h.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),y&&h.length===0&&!b&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"No staff found in this department"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Ne,{className:"inline mr-1",size:14})," Handler To"]}),b?e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Loading staff..."}):e.jsxs("select",{name:"handler_to",value:a.handler_to,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,disabled:!y||h.length===0,children:[e.jsx("option",{value:"",children:"Select Staff"}),h.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),y&&h.length===0&&!b&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"No staff found in this department"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(q,{className:"inline mr-1",size:14}),"Priority"]}),e.jsxs("select",{name:"priority",value:a.priority,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select priority"}),e.jsx("option",{value:"minor",children:"Minor"}),e.jsx("option",{value:"major",children:"Major"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"blocker",children:"Blocker"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ke,{className:"inline mr-1",size:14})," Budget"]}),e.jsx("input",{name:"budget",value:a.budget,onChange:o,type:"number",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Budget"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(ke,{className:"inline mr-1",size:14})," Overall cost"]}),e.jsx("input",{name:"overallcost",value:a.overallcost,onChange:o,type:"number",className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",placeholder:"Enter Overallcost"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:"Project & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(q,{className:"inline mr-1",size:14})," Project Type"]}),e.jsxs("select",{name:"type",value:a.type,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"residential",children:"Residential"}),e.jsx("option",{value:"commercial",children:"Commercial"}),e.jsx("option",{value:"industrial",children:"Industrial"}),e.jsx("option",{value:"land",children:"Land"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(q,{className:"inline mr-1",size:14})," Status"]}),e.jsxs("select",{name:"status",value:a.status,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"inprocess",children:"In Progress"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"lead_review",children:"Lead Review"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"revised",children:"Revised"}),e.jsx("option",{value:"client_review",children:"Client_review"}),e.jsx("option",{value:"drop",children:"Drop"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(Mt,{className:"inline mr-2"})," Notes & Summary"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:e.jsx("textarea",{name:"notes",value:a.notes,onChange:o,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",placeholder:"Enter lead summary and notes..."})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:V,children:"Cancel"}),e.jsx("button",{type:"submit",onClick:N,className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",children:D?e.jsx(wt,{}):"Create Project"})]})]})},It=()=>{const l=vt({query:"(max-width: 768px)"}),[_,V]=s.useState(""),[D,d]=s.useState(1),[te,I]=s.useState(""),[E,B]=s.useState([]),[z,ae]=s.useState(""),[M,a]=s.useState([]),[x,p]=s.useState(!1),[y,h]=s.useState(0),[b,R]=s.useState(null),[o,N]=s.useState(!1),[r,c]=s.useState(!1),[f,k]=s.useState(),[w,$]=s.useState(!1),[re,De]=s.useState(null),[U,Be]=s.useState(""),[H,ze]=s.useState(""),[Q,Ee]=s.useState(""),[T,Me]=s.useState(8),[Y,$e]=s.useState(!1),S=ee(t=>t.accessToken),[Te,G]=s.useState(!1),[F,se]=s.useState({delete_type:"",status:""}),[j,le]=s.useState(null),[C,ne]=s.useState(null),[J,Fe]=s.useState(""),[K,Oe]=s.useState(""),{fetchProject:Le}=St(),Ae=ee(t=>t.branchcode),{branchCodeOptions:qe,fetchBranches:oe,isLoading:de}=Pe(),Ve=[{value:"",label:"All Priority"},{value:"minor",label:"Minor Projects"},{value:"major",label:"Major Project"},{value:"critical",label:"Critical Project"},{value:"blocker",label:"Blocker Project"}],Ie=[{value:"",label:"All Projects"},{value:"active",label:"Active Projects"},{value:"draft",label:"Draft Project"},{value:"planning",label:"Planning Project"},{value:"paused",label:"Paused Project"},{value:"completed",label:"Completed Project"},{value:"revised",label:"Revised Project"},{value:"client_review",label:"Client Review Project"},{value:"drop",label:"Drop Project"}],Re=[{value:"",label:"All Types"},{value:"upcoming",label:"Upcoming Projects"},{value:"custom",label:"Custom Projects"},{value:"deadline",label:"Deadline Projects"}],Ue=[{value:"",label:"All Payment Status"},{value:"paid",label:"Paid"},{value:"payment_closed",label:"Payment Closed"},{value:"request",label:"Payment Request"},{value:"none",label:"No Payment"}],He=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];s.useEffect(()=>{Le(S,Ae)},[S]);const O=async(t=D,n=T,m=_,u=z,L=H,me=Q,ue=U,ge=j,xe=C,pe=J,he=K)=>{var ye,be,fe;p(!0);try{let i=`${Z}/project/overview/read?page=${t}&limit=${n}`;m&&(i+=`&search=${m}`),u&&(i+=`&status=${u}`),L&&(i+=`&priority=${L}`),me&&(i+=`&branchcode=${me}`),ue&&(i+=`&dec=${ue}`),ge&&(i+=`&start_date=${ie(ge)}`),xe&&(i+=`&end_date=${ie(xe)}`),pe&&(i+=`&filter_type=${pe}`),he&&(i+=`&paystatus=${he}`);const g=await X.get(i,{headers:{Authorization:`Bearer ${S}`}});B((ye=g==null?void 0:g.data)==null?void 0:ye.data),h(((be=g==null?void 0:g.data)==null?void 0:be.totalDocuments)||0),a(((fe=g==null?void 0:g.data)==null?void 0:fe.data)||[])}catch(i){console.error("Error fetching project list",i),R("Failed to fetch project")}finally{p(!1)}},ie=t=>{const n=new Date(t);let m=""+(n.getMonth()+1),u=""+n.getDate();const L=n.getFullYear();return m.length<2&&(m="0"+m),u.length<2&&(u="0"+u),[L,m,u].join("-")};s.useEffect(()=>{O()},[D,_,z,H,Q,U,T,j,C,J,K]);const Qe=t=>{d(t)},Ye=()=>{N(!1),v.success("Project added successfully!"),oe(S),O()},Ge=t=>{V(t),d(1)},Je=t=>{k(t),c(!0)},Ke=t=>{$(!0),De(t)},We=async()=>{const t={data:{branchcode:re.branchcode,project_code:re.project_code,delete_type:F.delete_type,status:F.status}};console.log("projectdeleteddataa",t);try{p(!0);const n=await X.delete(`${Z}/project/overview/delete`,{data:t,headers:{Authorization:`Bearer ${S}`}});console.log("deleteemployeeresponse",n),(n==null?void 0:n.status)===201&&($(!1),v.success("Project Deleted Successfully!"),O(),p(!1),se({delete_type:"",status:""}))}catch(n){console.error("Error deleting branch",n),v.error("Failed to delete branch"),p(!1)}finally{p(!1)}},Xe=()=>{Be(t=>t==="desc"?"":"desc"),d(1)},Ze=t=>{ae(t),d(1)},et=t=>{ze(t),d(1)},tt=t=>{Ee(t),d(1)},at=t=>{Me(t),d(1)},ce=t=>{const{name:n,value:m}=t.target;se(u=>({...u,[n]:m}))},rt=t=>{le(t),d(1)},st=t=>{ne(t),d(1)},lt=t=>{Fe(t),d(1)},nt=t=>{Oe(t),d(1)},ot=()=>{le(null),ne(null),d(1)},dt=()=>[{data:"id"},{data:"Branch Code"},{data:"Project_Code"},{data:"Project Name"},{data:"Client_Code"},{data:"Type"},{data:"Budget"},{data:"Duration_Days"},{data:"Status"},{data:"Actions",className:"text-center"}],it=()=>M?M.map((t,n)=>({id:t.id,data:[{data:n+1},{data:t.branchcode},{data:t.project_code},{data:t.title},{data:t.client_code},{data:t.type},{data:t.budget},{data:t.duration_days},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${t.status==="active"?"bg-green-800":"bg-red-700"}`}),t.status.charAt(0).toUpperCase()+t.status.slice(1)]})},{data:e.jsxs("div",{className:"flex  justify-center gap-2",children:[e.jsx(xt,{to:`/project/${t.project_code}`,children:e.jsx("button",{className:" px-4 py-2 dark:text-blue-600 text-blue-700 rounded-sm",children:e.jsx(Ft,{className:"inline",size:20})})}),e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Je(t),title:"Edit",children:e.jsx(Ot,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Ke(t),title:"Delete",children:e.jsx(Lt,{size:18})})]}),className:"action-cell"}]})):[],ct=()=>{c(!1),v.success("Branch updated successfully!"),oe(S),O()},mt=()=>{G(!1),v.success("Meeting and Document Created successfully!")},ut=()=>{const t=W.book_new(),n=W.json_to_sheet(E);W.book_append_sheet(t,n,"Branches"),ft(t,"ProjectList.xlsx")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Project Management"}),l&&e.jsx("button",{onClick:()=>$e(!Y),className:"p-2 bg-gray-200 rounded-md",children:Y?"Hide Filters":"Show Filters"})]}),e.jsx(Ce,{position:Se,reverseOrder:!1}),e.jsx("div",{className:`flex ${l?"flex-col":"items-end justify-end"} gap-4 mb-5`,children:e.jsxs("div",{className:`flex ${l?"flex-col":"flex-row"} gap-4`,children:[e.jsx(P,{options:He,selectedValue:T,onSelect:at,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:ut,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(bt,{className:"mr-1"}),!l&&"Export Excel"]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",children:[!l&&"New Project"," +"]})]})}),e.jsx("div",{className:`${l&&!Y?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${l?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(P,{options:Ie,selectedValue:z,onSelect:Ze,placeholder:"Project Status",className:"w-full md:w-[200px]"}),e.jsx(P,{options:qe,selectedValue:Q,onSelect:tt,placeholder:"Branch Code",className:"w-full md:w-[200px]",isLoading:de}),e.jsx(P,{options:Ve,selectedValue:H,onSelect:et,placeholder:"Priority",className:"w-full md:w-[200px]",isLoading:de}),e.jsx(P,{options:Re,selectedValue:J,onSelect:lt,placeholder:"Filter Type",className:"w-full md:w-[200px]"}),e.jsx(P,{options:Ue,selectedValue:K,onSelect:nt,placeholder:"Payment Status",className:"w-full md:w-[200px]"}),e.jsxs("button",{onClick:Xe,className:`${l?"w-full":"w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,children:["Sort ",U==="desc"?"↑":"↓"]}),e.jsx("div",{className:`${l?"w-full":"w-[180px] mt-3"}`,children:e.jsx(yt,{value:_,onChange:Ge,placeholder:"Search projects...",className:"w-full"})}),e.jsxs("div",{className:"w-full md:w-[200px] z-[15]",children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1 z-500",children:"Start Date"}),e.jsx(we,{selected:j,onChange:rt,selectsStart:!0,startDate:j,endDate:C,className:"w-full p-2 border rounded-md text-sm z-[15]",placeholderText:"Select start date"})]}),e.jsxs("div",{className:"w-full md:w-[200px] z-[15]",children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1 z-[15]",children:"End Date"}),e.jsx(we,{selected:C,onChange:st,selectsEnd:!0,startDate:j,endDate:C,minDate:j,className:"w-full p-2 border rounded-md text-sm z-[15]",placeholderText:"Select end date"})]}),(j||C)&&e.jsx("button",{onClick:ot,className:"h-[40px] text-white bg-red-700 hover:bg-red-800 px-2 py-1 rounded-sm text-sm",children:"Clear Dates"})]})}),x&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),b&&e.jsx("div",{className:"text-red-500 text-center py-4",children:b}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(pt,{thead:dt,tbody:it,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(ht,{total:y,currentPage:D,defaultPageSize:T,onChange:Qe,paginationLabel:"projects",isScroll:!0})})]}),e.jsx(A,{isVisible:o,className:"w-full md:w-[800px]",onClose:()=>N(!1),title:"Create New Project",children:e.jsx(kt,{onSuccess:Ye,onCancel:()=>N(!1)})}),e.jsx(A,{isVisible:r,className:"w-full md:w-[800px]",onClose:()=>c(!1),title:"Edit Project",children:e.jsx(Vt,{project:f,onSuccess:ct,onCancel:()=>c(!1)})}),e.jsx(A,{isVisible:Te,className:"w-full md:w-[800px]",onClose:()=>G(!1),title:"Create Branch Meeting",children:e.jsx($t,{project:f,onSuccess:mt,onCancel:()=>G(!1)})}),e.jsx(A,{isVisible:w,className:"w-full md:w-[600px]",onClose:()=>$(!1),title:"Delete Project",children:e.jsxs("div",{className:"flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",children:[e.jsx(_e,{className:"inline mr-2"})," Delete Project"]}),e.jsx("p",{className:"text-gray-500 text-sm font-medium text-center",children:"Are you sure you want to delete this Project?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(Tt,{className:"inline mr-1",size:14})," Type"]}),e.jsxs("select",{name:"delete_type",value:F.delete_type,onChange:ce,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"temp",children:"Temporary"}),e.jsx("option",{value:"permanent",children:"Permanent"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[e.jsx(q,{className:"inline mr-1",size:14})," Status"]}),e.jsxs("select",{name:"status",value:F.status,onChange:ce,className:"w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",required:!0,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"revised",children:"Revised"}),e.jsx("option",{value:"client_review",children:"Client_review"}),e.jsx("option",{value:"drop",children:"Drop"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",className:"px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",onClick:()=>$(!1),disabled:x,children:"Cancel"}),e.jsx("button",{type:"button",className:"px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",onClick:We,disabled:x,children:x?"Processing...":"Confirm"})]})]})})]})},Ha=gt(It);export{Ha as default};
