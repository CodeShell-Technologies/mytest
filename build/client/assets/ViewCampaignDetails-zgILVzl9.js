import{w as T}from"./with-props-DF0D9zIo.js";import{r as s,c as U,u as $,j as e}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as V}from"./DataTable-DtyPIAGZ.js";import{C as G}from"./CustomPagination-CBTcVvJz.js";import{S as I}from"./SearchInput-CMdOUuSO.js";import{M}from"./Modal-BCIUwH-b.js";import{D as c}from"./DrapDown-CEm3nLdF.js";import{F as O,u as n,w as R}from"./xlsx-DTxMWUdD.js";import{a as z,B as q}from"./api-C04JdqFc.js";import"./index-DxoBGdjx.js";import{u as H}from"./AuthStore-BnYeBJES.js";import"./useEmployeeStore-BJ_SZO4g.js";import{A as J}from"./AddNewLead-CzoeECYc.js";import"./LeadsStore-C-d0npQs.js";import"./useBranchStore-kvv3vD_e.js";import{D as m}from"./dot-BRbGo9NO.js";import{L as K}from"./log-out-DAuSHV9-.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./createLucideIcon-RccWoOaL.js";import"./react-_sXfQCJm.js";/* empty css                         */import"./moment-C5S46NFB.js";import"./ButtonLoader-Z62NVHwI.js";import"./UseStaffFilter-Bwbq-nCs.js";import"./book-user-BTUNghSh.js";import"./hash-Cmnw3-GM.js";import"./user-DKFoNGWn.js";import"./phone-iHDF8fYQ.js";import"./calendar-check-DuYbAMAv.js";import"./building-38OCE1f9.js";import"./tag-hjf6KM-t.js";import"./book-open-text-CwD5ICOx.js";const Q=()=>{var o;const[x,g]=s.useState(""),[p,u]=s.useState(1),[h,r]=s.useState(!1),[y,f]=s.useState(""),[j,b]=s.useState([]),[N,k]=s.useState(""),[a,v]=s.useState(null),[w,i]=s.useState(!0),C=H(t=>t.accessToken),{id:S}=U(),d=decodeURIComponent(S),L=[{value:"client",label:"Client"},{value:"Project",label:"Project"},{value:"Leads",label:"Leads"},{value:"Employee",label:"Employee"}],D=[{value:"Pending",label:"Pending"},{value:"Paid",label:"Paid"},{value:"Un Paid",label:"Un-Paid"}],l=async()=>{try{i(!0);const t=await z.get(`${q}/campaign/overview/read/profile?campaign_code=${d}`,{headers:{Authorization:`Bearer ${C}`}});v(t.data.data),b(t.data.data.leads||[])}catch(t){console.error("Error fetching campaign data:",t)}finally{i(!1)}};s.useEffect(()=>{l()},[d]);const P=()=>[{data:"Lead ID"},{data:"Lead Name"},{data:"Phone"},{data:"Email"},{data:"Assignee"},{data:"Communication Type"},{data:"Status"}],_=()=>a!=null&&a.leads?a.leads.map(t=>({id:t.id,data:[{data:t.id},{data:t.lead_name},{data:t.phone},{data:t.email},{data:t.assignee_name},{data:t.comm_type},{data:e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}]})):[],A=()=>{const t=n.book_new(),B=n.json_to_sheet(j);n.book_append_sheet(t,B,"CampaignLeads"),R(t,`Campaign_${d}_Leads.xlsx`)},E=$(),F=()=>{E(-1)};return w?e.jsx("div",{className:"p-4 text-center",children:"Loading campaign data..."}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"p-4 text-red-700 mb-5",children:e.jsxs("div",{className:"flex gap-5",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Campaign View Page"}),e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 ${a.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,children:[e.jsx(m,{}),a.status.toUpperCase()]})]})}),e.jsx("div",{children:e.jsxs("button",{className:"text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",onClick:F,children:[e.jsx(K,{className:"inline rotate-180 text-gray-500 mr-3"}),"Go Back"]})})]}),e.jsxs("div",{className:"w-full max-w-full mx-auto p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-600 dark:text-white",children:"Campaign Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",children:"Campaign Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Campaign Name:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.campaginName||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Campaign Code:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.campaign_code})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Branch Code:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.branchcode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Campaign Type:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.campaigntype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${a.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,children:[e.jsx(m,{}),a.status.toUpperCase()]})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",children:"Campaign Timeline & Goals"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Start Date:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:new Date(a.startdate).toLocaleDateString()||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"End Date:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:new Date(a.enddate).toLocaleDateString()||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Current Leads:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.lead||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Goal Leads:"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.goallead||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Conversion Rate:"}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:[a.conversationrate||0,"%"]})]})]})]})})]}),a.summary&&e.jsxs("div",{className:"p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",children:"Campaign Summary"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.summary})]}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex items-end justify-end",children:[e.jsxs("button",{onClick:A,className:"text-gray-400 bg-white focus:outline-non font-medium text-xs rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-1 text-center mr-5 mb-5 flex items-center",children:[e.jsx(O,{}),"Export Excel"]}),e.jsx("button",{onClick:()=>r(!0),className:"text-white text-xs bg-red-700 focus:outline-non font-medium rounded px-3 py-2.5 text-center mr-5 mb-5 flex items-center",children:"+ Add New Lead"})]}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx(c,{options:L,selectedValue:y,onSelect:f,placeholder:"Filter By",className:"w-[150px]"}),e.jsx(c,{options:D,selectedValue:N,onSelect:k,placeholder:"Lead Status",className:"w-[150px]"}),e.jsx(I,{value:x,onChange:g,placeholder:"Search leads..."})]}),e.jsx(V,{thead:P,tbody:_}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4 mt-10",children:e.jsx(G,{total:((o=a.leads)==null?void 0:o.length)||0,currentPage:p,defaultPageSize:10,onChange:u,paginationLabel:"leads",isScroll:!0})})]})})]})]}),e.jsx(M,{isVisible:h,className:"w-[200px]",onClose:()=>r(!1),title:"Add New Lead",children:e.jsx(J,{campaignCode:a.campaign_code,onSuccess:()=>{r(!1),l()}})})]}):e.jsx("div",{className:"p-4 text-center",children:"Failed to load campaign data"})},Ae=T(Q);export{Ae as default};
