import{w as re}from"./with-props-DF0D9zIo.js";import{r as a,j as e}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as oe}from"./DataTable-DtyPIAGZ.js";import{C as le}from"./CustomPagination-CBTcVvJz.js";import{S as ne}from"./SearchInput-CMdOUuSO.js";import{M as A}from"./Modal-BCIUwH-b.js";import{D as T}from"./DrapDown-CEm3nLdF.js";import{F as ie,u as v,w as ce}from"./xlsx-DTxMWUdD.js";import{B as de,a as me}from"./api-C04JdqFc.js";import{O as pe}from"./index-DxoBGdjx.js";import{B as he}from"./ButtonLoader-Z62NVHwI.js";import{p as xe,u as ue}from"./AuthStore-BnYeBJES.js";import{c as fe}from"./react-_sXfQCJm.js";import{u as ge}from"./use-click-outside-BhLpsQYS.js";import"./useBranchStore-kvv3vD_e.js";/* empty css                         */import"./useEmployeeStore-BJ_SZO4g.js";import{L as ve,E as Se}from"./LeaveTypes-DGVd8zog.js";import{S as be}from"./square-pen-hueQTsQ_.js";import{T as ye}from"./trash-2-AUNIB88j.js";import"./index-knF4tUPh.js";/* empty css            */import"./index-DDa5wjlm.js";import"./iconBase-CajCgYY2.js";import"./createLucideIcon-RccWoOaL.js";import"./moment-C5S46NFB.js";import"./clock-CzOQJT5p.js";import"./clipboard-list-C2ET-QCv.js";import"./calendar-C_LRGMui.js";import"./file-text-BNGbNc3I.js";import"./EditLeaveForm-ZCAHbRg3.js";import"./hash-Cmnw3-GM.js";import"./eye-2Mk8PZw-.js";const je=fe(xe((i,o)=>({branchAllData:[],dropdownBranch:[],setBranchData:l=>{console.log("dattaaa",l),i({branchAllData:l,dropdownBranch:l.map(({id:n,name:c})=>({id:n,name:c}))})},getBranchAllData:()=>o().branchAllData,getDropdownBranch:()=>o().dropdownBranch,getBranchById:l=>o().branchAllData.find(n=>n.id===l),clearBranchData:()=>{i({branchAllData:[],dropdownBranch:[],branchListData:[]})}}),{name:"branch-storage",getStorage:()=>localStorage})),we=()=>{const i=ge({query:"(max-width: 768px)"}),[o,l]=a.useState(""),[n,c]=a.useState(1),[Ne,De]=a.useState(""),[$,M]=a.useState([]),[S,Be]=a.useState(""),[Ce,F]=a.useState([]),[d,b]=a.useState(!1),[O,P]=a.useState(0),[y,z]=a.useState(null),[Le,ke]=a.useState(!1),[q,p]=a.useState(!1),[Ee,Ae]=a.useState(),[I,h]=a.useState(!1),[Te,R]=a.useState(""),[j,$e]=a.useState(""),[x,_]=a.useState(""),[w,Me]=a.useState(""),[m,V]=a.useState(8),[U,Fe]=a.useState(!1),u=ue(t=>t.accessToken),[f,Oe]=a.useState("leavereq"),{branches:Pe,managerOptions:G,branchCodeOptions:ze,fetchBranches:H,isLoading:Q}=je(),J=[{value:20,label:"20 per page"},{value:40,label:"30 per page"},{value:50,label:"40 per page"},{value:80,label:"50 per page"},{value:100,label:"100 per page"},{value:200,label:"100 per page"}];a.useEffect(()=>{H(u)},[u]);const K=async(t=n,g=m,D=o,B=S,C=x,L=w,k=j)=>{var E;b(!0);try{let r=`${de}/branch/read?page=${t}&limit=${g}`;D&&(r+=`&search=${D}`),B&&(r+=`&status=${B}`),C&&(r+=`&manager_id=${C}`),L&&(r+=`&branchcode=${L}`),k&&(r+=`&dec=${k}`);const s=await me.get(r,{headers:{Authorization:`Bearer ${u}`}});M(s==null?void 0:s.data),P(((E=s==null?void 0:s.data)==null?void 0:E.length)||0),F((s==null?void 0:s.data)||[])}catch(r){console.error("Error fetching branch list",r),z("Failed to fetch branches")}finally{b(!1)}};a.useEffect(()=>{K()},[n,o,S,x,w,j,m]);const W=t=>{c(t)},X=t=>{l(t),c(1)},Y=t=>{h(!0),R(t)},Z=t=>{_(t),c(1)},ee=t=>{V(t),c(1)},N=[{id:"1",branch:"Sick Leave",name:"Bharathi",position:"Team Lead",LeaveDays:3,FromDate:"23-05-2025",ToDate:"26-05-2025",status:"apporved",date:"23-05-2025"}],te=()=>[{data:"id"},{data:"Employee Name"},{data:"Leave Type"},{data:"Leave Days"},{data:"From Date"},{data:"To Date"},{data:"Status"},{data:"Actions",className:"text-center"}],ae=()=>N?N.map(t=>({id:t.id,data:[{data:t.id},{data:t.name},{data:t.branch},{data:t.LeaveDays},{data:t.FromDate},{data:t.ToDate},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${t.status==="apporved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${t.status==="apporved"?"bg-green-800":"bg-red-700"}`}),t.status.charAt(0).toUpperCase()+t.status.slice(1)]})},{data:e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx("button",{className:"p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>p(!0),title:"Edit",children:e.jsx(be,{size:18})}),e.jsx("button",{className:"p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>Y(t.id),title:"Delete",children:e.jsx(ye,{size:18})})]}),className:"action-cell"}]})):[],se=()=>{const t=v.book_new(),g=v.json_to_sheet($);v.book_append_sheet(t,g,"Branches"),ce(t,"BranchList.xlsx")};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[f==="leavereq"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen ",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mt-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Leave Request"})}),e.jsx(pe,{position:"top-center",reverseOrder:!1}),e.jsx("div",{className:"flex items-end justify-end gap-4 mt-[-30px]",children:e.jsxs("div",{className:"flex  flex-row gap-4",children:[e.jsx(T,{options:J,selectedValue:m,onSelect:ee,placeholder:"Items per page",className:"w-full md:w-[150px]"}),e.jsxs("button",{onClick:se,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",children:[e.jsx(ie,{className:"mr-1"}),"Export Excel"]})]})}),e.jsx("div",{className:`${i&&!U?"hidden":"block"} mb-4`,children:e.jsxs("div",{className:`${i?"grid grid-cols-1 gap-3":"flex flex-wrap justify-between items-center gap-3"}`,children:[e.jsx(T,{options:G,selectedValue:x,onSelect:Z,placeholder:"Manager",className:"w-full md:w-[200px]",isLoading:Q}),e.jsx("div",{className:`${i?"w-full":"w-[200px] mt-3"}`,children:e.jsx(ne,{value:o,onChange:X,placeholder:"Search branches...",className:"w-full"})})]})}),d&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),y&&e.jsx("div",{className:"text-red-500 text-center py-4",children:y}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(oe,{thead:te,tbody:ae,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(le,{total:O,currentPage:n,defaultPageSize:m,onChange:W,paginationLabel:"branches",isScroll:!0})})]})}),f==="leavetype"&&e.jsx("div",{children:e.jsx(ve,{})}),f==="report"&&e.jsx("div",{children:"termination Content Goes Here"})]}),e.jsx(A,{isVisible:q,className:"w-full md:w-[800px]",onClose:()=>p(!1),title:"Update Leave Request",children:e.jsx(Se,{onCancel:()=>p(!1)})}),e.jsx(A,{isVisible:I,className:"w-full md:w-[600px]",onClose:()=>h(!1),title:"Delete Branch",children:e.jsxs("div",{className:"flex flex-col gap-6 justify-center items-center",children:[e.jsx("p",{className:"text-gray-500 text-lg font-bold text-center",children:"Are you sure you want to delete this Leave Details?"}),e.jsxs("div",{className:"flex gap-4 flex-wrap justify-center",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",disabled:d,onClick:()=>h(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",disabled:d,children:d?e.jsx(he,{}):"Confirm"})]})]})})]})},vt=re(we);export{vt as default};
