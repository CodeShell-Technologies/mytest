import{w as M}from"./with-props-DF0D9zIo.js";import{r as a,j as e,b as N}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{D as b}from"./index.es-Dy-HqQhS.js";/* empty css                         */import{a as w,B as S}from"./api-C04JdqFc.js";import{u as D}from"./AuthStore-BnYeBJES.js";import{C as $}from"./calendar-C_LRGMui.js";import{U as T}from"./user-round-DtkRnRSi.js";import{D as _}from"./dot-BRbGo9NO.js";import{E as C}from"./eye-2Mk8PZw-.js";import{C as z}from"./credit-card-YBFNOl8z.js";import{D as E}from"./dollar-sign-D2IX7NrM.js";import"./clsx-B-dksMZM.js";import"./index-CyJ3O4p6.js";import"./react-_sXfQCJm.js";import"./createLucideIcon-RccWoOaL.js";function O(){const[d,j]=a.useState([]),[c,m]=a.useState(!1),[x,n]=a.useState(""),[l,v]=a.useState(new Date),u=D(s=>s.accessToken);a.useEffect(()=>{f()},[l]);const f=async()=>{m(!0),n("");try{const s=l.toISOString().split("T")[0],t=await w.get(`${S}/project/milestone/read?overdue=${s}`,{headers:{Authorization:`Bearer ${u}`}});t.data.message==="View Project Milestone Info Success"?j(t.data.data):n("Failed to fetch overdue milestones")}catch(s){n("Error fetching overdue milestones"),console.error(s)}finally{m(!1)}},h=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),g=(s,t)=>s==="verified"?"amber":t==="initial"?"blue":"red";return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsx("div",{className:"text-gray-500 text-xl font-bold",children:"Milestone Reminder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-gray-500",size:20}),e.jsx(b,{selected:l,onChange:s=>v(s),dateFormat:"yyyy-MM-dd",className:"border rounded p-2"})]})]}),c&&e.jsx("div",{className:"text-center py-4",children:"Loading overdue milestones..."}),x&&e.jsx("div",{className:"text-red-500 text-center py-4",children:x}),e.jsxs("div",{className:"w-full flex flex-col justify-evenly gap-8",children:[d.length===0&&!c&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:["No overdue milestones found for ",l.toDateString()]}),d.map(s=>{const t=g(s.status,s.milestone_type),o=t==="amber"?"bg-amber-500":t==="blue"?"bg-blue-700":"bg-red-700",r=t==="amber"?"text-amber-500":t==="blue"?"text-blue-700":"text-red-700",i=t==="amber"?"hover:bg-amber-500/50":t==="blue"?"hover:bg-blue-700/50":"hover:bg-red-700/50",p=t==="amber"?"hover:text-amber-800":t==="blue"?"hover:text-blue-800":"hover:text-red-800";return e.jsxs("div",{className:"bg-white w-full h-[100%] flex rounded-sm shadow-lg",children:[e.jsx("div",{children:e.jsx("div",{className:`${o} rounded-r-lg w-4 h-[195px]`})}),e.jsxs("div",{className:"ms-4 w-full p-4",children:[e.jsxs("div",{className:"md:flex gap-5",children:[e.jsx(T,{className:"font-light text-gray-600",size:25}),e.jsxs("h1",{className:"text-xl font-medium text-gray-600",children:[s.milestone_code," - ",s.miles_title]})]}),e.jsxs("div",{className:"md:flex md:w-full justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Type: ",s.milestone_type," | Status: ",s.status]}),e.jsxs("p",{className:"text-gray-600",children:["Start: ",h(s.start_date)," | Due: ",h(s.end_date)," | Payment: ",s.paystatus]}),e.jsxs("p",{className:"text-gray-600",children:["Handler: ",s.handler_by]})]}),e.jsx("div",{className:"md:flex flex-col",children:e.jsx("div",{children:e.jsxs("p",{className:`w-[120px] h-[30px] ${o}/25 ${r} rounded-3xl`,children:[e.jsx(_,{className:"inline"})," Overdue"]})})})]}),e.jsxs("div",{className:"md:flex justify-between mt-4",children:[e.jsx("div",{className:"flex gap-8",children:e.jsx(N,{to:`/milestone/${s.milestone_code}`,children:e.jsxs("button",{className:`${o}/25 px-3 py-2 rounded-sm ${r} ${i} ${p} flex gap-1`,children:[e.jsx(C,{size:15,className:"mt-1"}),"View Detail"]})})}),e.jsx("div",{})]})]})]},s.milestone_code)})]})]})}function I(){const[d,j]=a.useState([]),[c,m]=a.useState(!1),[x,n]=a.useState(""),[l,v]=a.useState(new Date),u=D(s=>s.accessToken);a.useEffect(()=>{f()},[l]);const f=async()=>{m(!0),n("");try{const s=l.toISOString().split("T")[0],t=await w.get(`${S}/project/task/read?overdue=${s}`,{headers:{Authorization:`Bearer ${u}`}});t.data.message==="View Project Task Info Success"?j(t.data.data):n("Failed to fetch overdue tasks")}catch(s){n("Error fetching overdue tasks"),console.error(s)}finally{m(!1)}},h=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),g=s=>{switch(s){case"verified-closed":case"archived":return"green";case"inprocess":return"blue";case"rework":case"drop":return"red";case"draft":default:return"gray"}};return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsx("div",{className:"text-gray-500 text-xl font-bold",children:"Task Reminder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-gray-500",size:20}),e.jsx(b,{selected:l,onChange:s=>v(s),dateFormat:"yyyy-MM-dd",className:"border rounded p-2"})]})]}),c&&e.jsx("div",{className:"text-center py-4",children:"Loading overdue tasks..."}),x&&e.jsx("div",{className:"text-red-500 text-center py-4",children:x}),e.jsxs("div",{className:"w-full flex flex-col justify-evenly gap-8",children:[d.length===0&&!c&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:["No overdue tasks found for ",l.toDateString()]}),d.map(s=>{const t=g(s.status),o=t==="green"?"bg-green-500":t==="blue"?"bg-blue-700":t==="red"?"bg-red-700":"bg-gray-500",r=t==="green"?"text-green-500":t==="blue"?"text-blue-700":t==="red"?"text-red-700":"text-gray-500",i=t==="green"?"hover:bg-green-500/50":t==="blue"?"hover:bg-blue-700/50":t==="red"?"hover:bg-red-700/50":"hover:bg-gray-500/50",p=t==="green"?"hover:text-green-800":t==="blue"?"hover:text-blue-800":t==="red"?"hover:text-red-800":"hover:text-gray-800";return e.jsxs("div",{className:"bg-white w-full h-[100%] flex rounded-sm shadow-lg",children:[e.jsx("div",{children:e.jsx("div",{className:`${o} rounded-r-lg w-4 h-[220px]`})}),e.jsxs("div",{className:"ms-4 w-full p-4",children:[e.jsxs("div",{className:"md:flex gap-5",children:[e.jsx(T,{className:"font-light text-gray-600",size:25}),e.jsxs("h1",{className:"text-xl font-medium text-gray-600",children:["Task ID: ",s.id," - ",s.task_title]})]}),e.jsxs("div",{className:"md:flex md:w-full justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Priority: ",s.task_priority," | Status: ",s.status]}),e.jsxs("p",{className:"text-gray-600",children:["Start: ",h(s.start_date)," | Due:"," ",h(s.end_date)]}),e.jsxs("p",{className:"text-gray-600",children:["Project: ",s.projecttitle," | Milestone:"," ",s.milestonetitle]}),e.jsxs("p",{className:"text-gray-600",children:["Handler: ",s.handlername," | Participants:"," ",s.participantdetails.map(y=>y.name).join(", ")]})]}),e.jsx("div",{className:"md:flex flex-col",children:e.jsx("div",{children:e.jsxs("p",{className:`w-[120px] h-[30px] ${o}/25 ${r} rounded-3xl`,children:[e.jsx(_,{className:"inline"})," Overdue"]})})})]}),e.jsxs("div",{className:"md:flex justify-between mt-4",children:[e.jsx("div",{className:"flex gap-8",children:e.jsx(N,{to:`/task_view/${s.id}`,children:e.jsxs("button",{className:`${o}/25 px-3 py-2 rounded-sm ${r} ${i} ${p} flex gap-1`,children:[e.jsx(C,{size:15,className:"mt-1"}),"View Detail"]})})}),e.jsx("div",{})]})]})]},s.id)})]})]})}function L(){const[d,j]=a.useState([]),[c,m]=a.useState(!1),[x,n]=a.useState(""),[l,v]=a.useState(new Date),u=D(s=>s.accessToken);a.useEffect(()=>{f()},[l]);const f=async()=>{m(!0),n("");try{const s=l.toISOString().split("T")[0],t=await w.get(`${S}/project/invoice/read?overdue=${s}`,{headers:{Authorization:`Bearer ${u}`}});t.data.message==="Get Invoices with Milestones Success"?j(t.data.data):n("Failed to fetch overdue payments")}catch(s){n("Error fetching overdue payments"),console.error(s)}finally{m(!1)}},h=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),g=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(parseFloat(s));return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsx("div",{className:"text-gray-500 text-xl font-bold",children:"Payment Reminder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-gray-500",size:20}),e.jsx(b,{selected:l,onChange:s=>v(s),dateFormat:"yyyy-MM-dd",className:"border rounded p-2"})]})]}),c&&e.jsx("div",{className:"text-center py-4",children:"Loading overdue payments..."}),x&&e.jsx("div",{className:"text-red-500 text-center py-4",children:x}),e.jsxs("div",{className:"w-full flex flex-col justify-evenly gap-8",children:[d.length===0&&!c&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:["No overdue payments found for ",l.toDateString()]}),d.map((s,t)=>e.jsxs("div",{className:"bg-white w-full h-[100%] flex rounded-sm shadow-lg",children:[e.jsx("div",{children:e.jsx("div",{className:"bg-red-700 rounded-r-lg w-4 h-[240px]"})}),e.jsxs("div",{className:"ms-4 w-full p-4",children:[e.jsxs("div",{className:"md:flex gap-5",children:[e.jsx(z,{className:"font-light text-gray-600",size:25}),e.jsxs("h1",{className:"text-xl font-medium text-gray-600",children:["Invoice: ",s.invoice.invoice_no," - ",s.invoice.client_name]})]}),e.jsxs("div",{className:"md:flex md:w-full justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Project: ",s.invoice.project_title," | Status: ",s.invoice.status]}),e.jsxs("p",{className:"text-gray-600",children:["Issued: ",h(s.invoice.invoice_date)," | Due: ",h(s.invoice.due_date)]}),e.jsxs("p",{className:"text-gray-600",children:["Total: ",g(s.invoice.total_amount)," | Paid: ",g(s.invoice.paid_amount)," | Balance: ",g(s.invoice.balance_amount)]}),e.jsxs("p",{className:"text-gray-600",children:["Company: ",s.invoice.company_name]}),s.milestone_requests.map((o,r)=>e.jsxs("p",{className:"text-gray-600",children:["Milestone: ",o.miles_title," - ",g(o.milestone_amount)]},r))]}),e.jsx("div",{className:"md:flex flex-col",children:e.jsx("div",{children:e.jsxs("p",{className:"w-[120px] h-[30px] bg-red-700/25 text-red-700 rounded-3xl",children:[e.jsx(_,{className:"inline"})," Overdue"]})})})]}),e.jsxs("div",{className:"md:flex justify-between mt-4",children:[e.jsxs("div",{className:"flex gap-8",children:[e.jsx(N,{to:`/invoice/${s.invoice.invoice_id}`,children:e.jsxs("button",{className:"bg-red-700/25 px-3 py-2 rounded-sm text-red-700 hover:bg-red-700/50 hover:text-red-800 flex gap-1",children:[e.jsx(C,{size:15,className:"mt-1"}),"View Detail"]})}),e.jsxs("button",{className:"bg-red-700 px-3 py-2 text-gray-100 hover:bg-red-800 flex gap-1 rounded-sm",children:[e.jsx(E,{size:15,className:"mt-1"}),"Record Payment"]})]}),e.jsx("div",{})]})]})]},`${s.invoice.invoice_id}-${t}`))]})]})}function F(){const[d,j]=a.useState("projectover"),[c,m]=a.useState([]),[x,n]=a.useState(!1),[l,v]=a.useState(""),[u,f]=a.useState(new Date),h=D(r=>r.accessToken),g=[{id:"projectover",label:"Project"},{id:"milestone",label:"Milestone"},{id:"task",label:"Task"},{id:"payment",label:"Payment"}];a.useEffect(()=>{s()},[u]);const s=async()=>{n(!0),v("");try{const r=u.toISOString().split("T")[0],i=await w.get(`${S}/project/overview/read?overdue=${r}`,{headers:{Authorization:`Bearer ${h}`}});i.data.message==="View Project Overview Info Success"?m(i.data.data):v("Failed to fetch overdue projects")}catch(r){v("Error fetching overdue projects"),console.error(r)}finally{n(!1)}},t=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),o=r=>r==="minor"?"blue":"red";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dark:border-gray-700 mt-10 mb-10",children:e.jsx("nav",{className:"flex justify-evenly -mb-px",children:g.map((r,i)=>e.jsxs(e.Fragment,{children:[i>0&&e.jsx("span",{className:"bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"}),e.jsx("button",{onClick:()=>j(r.id),className:`font-medium text-sm ${d===r.id?"text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm":"border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm"}`,children:r.label},r.id)]}))})}),d==="projectover"&&e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsx("div",{className:"text-gray-500 text-xl font-bold",children:"Project Reminder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-gray-500",size:20}),e.jsx(b,{selected:u,onChange:r=>f(r),dateFormat:"yyyy-MM-dd",className:"border rounded p-2"})]})]}),x&&e.jsx("div",{className:"text-center py-4",children:"Loading overdue projects..."}),l&&e.jsx("div",{className:"text-red-500 text-center py-4",children:l}),e.jsxs("div",{className:"w-full flex flex-col justify-evenly gap-8",children:[c.length===0&&!x&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:["No overdue projects found for ",u.toDateString()]}),c.map(r=>{const i=o(r.type),p=i==="blue"?"bg-blue-700":"bg-red-700",y=i==="blue"?"text-blue-700":"text-red-700",k=i==="blue"?"hover:bg-blue-700/50":"hover:bg-red-700/50",P=i==="blue"?"hover:text-blue-800":"hover:text-red-800";return e.jsxs("div",{className:"bg-white w-full h-[100%] flex rounded-sm shadow-lg",children:[e.jsx("div",{children:e.jsx("div",{className:`${p} rounded-r-lg w-4 h-[195px]`})}),e.jsxs("div",{className:"ms-4 w-full p-4",children:[e.jsxs("div",{className:"md:flex gap-5",children:[e.jsx(T,{className:"font-light text-gray-600",size:25}),e.jsxs("h1",{className:"text-xl font-medium text-gray-600",children:[r.project_code," - ",r.title]})]}),e.jsxs("div",{className:"md:flex md:w-full justify-between mt-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600",children:["Type: ",r.type," | Priority: ",r.priority]}),e.jsxs("p",{className:"text-gray-600",children:["Start: ",t(r.start_date)," | Due: ",t(r.end_date)," | Status: ",r.status]}),e.jsxs("p",{className:"text-gray-600",children:["Handler: ",r.handler_by]})]}),e.jsx("div",{className:"md:flex flex-col",children:e.jsx("div",{children:e.jsxs("p",{className:`w-[120px] h-[30px] ${p}/25 ${y} rounded-3xl`,children:[e.jsx(_,{className:"inline"})," Overdue"]})})})]}),e.jsxs("div",{className:"md:flex justify-between mt-4",children:[e.jsx("div",{className:"flex gap-8",children:e.jsx(N,{to:`/project/${r.project_code}`,children:e.jsxs("button",{className:`${p}/25 px-3 py-2 rounded-sm ${y} ${k} ${P} flex gap-1`,children:[e.jsx(C,{size:15,className:"mt-1"}),"View Detail"]})})}),e.jsx("div",{})]})]})]},r.project_code)})]})]}),d==="milestone"&&e.jsx(O,{}),d==="task"&&e.jsx(I,{}),d==="payment"&&e.jsx(L,{})]})}const se=M(F);export{se as default};
