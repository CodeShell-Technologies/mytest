import{w as S}from"./with-props-DF0D9zIo.js";import{r as t,u as F,j as e}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{a as P}from"./Almino structural consultancy_Final-CGShv3XU.js";import{a as E}from"./index-DeMEeQCX.js";import{A as I,a as T}from"./index-BWPvLUBf.js";import{a as $,B as R}from"./api-C04JdqFc.js";import{u as X}from"./AuthStore-BnYeBJES.js";import"./iconBase-CajCgYY2.js";import"./react-_sXfQCJm.js";const D="/assets/signin-img-removebg-preview-D5Z0eTw8.png",A=({id:l,name:h,type:i="text",value:d,onChange:u,label:w,required:c=!1,disabled:r=!1,showPasswordToggle:s=!1,onTogglePassword:x})=>{const[m,g]=t.useState(!1),y=t.useRef(null),j=d.length>0,f=m||j;return e.jsxs("div",{className:"relative mt-6",children:[e.jsx("input",{id:l,ref:y,name:h,type:i,value:d,onChange:u,required:c,disabled:r,className:`w-full px-4 py-3 bg-transparent border-2 rounded-lg outline-none transition-all duration-200 ${r?"border-gray-300 text-gray-400 cursor-not-allowed":"border-gray-400 hover:border-gray-500 focus:border-red-700"} ${s?"pr-10":""}`,onFocus:()=>g(!0),onBlur:()=>g(!1)}),e.jsxs("label",{htmlFor:l,className:`absolute left-3 px-1 bg-white dark:bg-gray-900 transition-all duration-200 pointer-events-none ${f?"text-red-700 dark:text-red-800 text-sm -translate-y-6":"text-gray-500 text-base translate-y-0"} ${r?"text-gray-400":""}`,children:[w,c&&e.jsx("span",{className:"text-red-700 ml-1",children:"*"})]}),s&&e.jsx("button",{type:"button",onClick:x,disabled:r,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":i==="password"?"Show password":"Hide password",children:i==="password"?e.jsx(I,{size:20}):e.jsx(T,{size:20})})]})};function C(){const[l,h]=t.useState({email:"",password:""}),[i,d]=t.useState(null),[u,w]=t.useState(!1),[c,r]=t.useState(!1),[s,x]=t.useState(!1),m=t.useRef(null),g=X(o=>o.setAuthData),y=F();t.useEffect(()=>{if(c&&m.current){m.current.classList.add("animate-vibrate");const o=setTimeout(()=>{var n;(n=m.current)==null||n.classList.remove("animate-vibrate"),r(!1)},500);return()=>clearTimeout(o)}},[c]);const j=async o=>{var n,p,b,v,N,k;o.preventDefault(),d(null),x(!0);try{const a=await $.post(`${R}/users/login`,l);(a==null?void 0:a.status)===201&&(g({branchcode:(n=a==null?void 0:a.data)==null?void 0:n.data[0].branchcode,staff_id:a==null?void 0:a.data.data[0].staff_id,accessToken:a.data.token.accessToken,refreshToken:a.data.token.refreshToken,isActive:(p=a.data.data[0])==null?void 0:p.status,permissions:a.data.roleAccess,role:a.data.data[0].role}),y("/"))}catch(a){console.error("Login error:",(v=(b=a==null?void 0:a.response)==null?void 0:b.data)==null?void 0:v.error),d(((k=(N=a==null?void 0:a.response)==null?void 0:N.data)==null?void 0:k.error)||"Login failed. Please try again."),r(!0)}finally{x(!1)}},f=o=>{const{name:n,value:p}=o.target;h(b=>({...b,[n]:p}))},L=()=>{w(!u)};return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 h-screen w-full bg-gray-100 dark:bg-gray-100 relative",children:[s&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white bg-opacity-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-700"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Authenticating..."})]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("img",{className:"w-[600PX] h-[400PX] object-cover mt-[100px]",src:D,alt:"Almino Logo"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 flex flex-col justify-center",children:[e.jsx("div",{className:"w-full mx-auto flex justify-center",children:e.jsx("img",{src:P,className:"w-[100px] h-[100px]",alt:"Almino Brand"})}),e.jsxs("form",{className:"max-w-[400px] w-full mx-auto bg-white dark:bg-transparent p-4",onSubmit:j,children:[e.jsx("h2",{className:"text-transparent text-3xl font-bold text-center py-3 gradient-text",children:"Welcome Admin!"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(A,{id:"email",name:"email",type:"email",value:l.email,onChange:f,label:"User Email",required:!0,disabled:s}),e.jsx(A,{id:"password",name:"password",type:u?"text":"password",value:l.password,onChange:f,label:"Password",required:!0,disabled:s,showPasswordToggle:!0,onTogglePassword:L}),i&&e.jsx("div",{className:"text-sm text-red-500 mb-2 animate-pulse",children:i})]}),e.jsxs("button",{type:"submit",disabled:s,className:`w-full my-5 py-3 text-white bg-red-700 hover:bg-red-800 rounded-lg transition-all ${s?"opacity-70 cursor-not-allowed":""}`,children:["Sign In ",e.jsx(E,{className:"inline",size:25})]})]})]}),e.jsx("style",{jsx:!0,global:!0,children:`
        @keyframes vibrate {
          0% {
            transform: translateX(0);
          }
          25% {
            transform: translateX(-5px);
          }
          50% {
            transform: translateX(5px);
          }
          75% {
            transform: translateX(-5px);
          }
          100% {
            transform: translateX(0);
          }
        }
        .animate-vibrate {
          animation: vibrate 0.1s linear;
        }
      `})]})}const G=S(C);export{G as default};
