import{w as Ze}from"./with-props-DF0D9zIo.js";import{j as e,r as s}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import{O as ye,V as U}from"./index-DxoBGdjx.js";import{D as fe}from"./DataTable-DtyPIAGZ.js";import{C as Ke,b as Je,L as Qe,B as Xe,c as et,p as tt,a as at,d as st}from"./index-SUJt3Dgp.js";import{t as rt}from"./bundle-mjs-BJOqOzcM.js";import{C as Se}from"./CustomPagination-CBTcVvJz.js";import"./SearchInput-CMdOUuSO.js";import{D as M}from"./DrapDown-CEm3nLdF.js";import{F as _e,u as O,w as Ne}from"./xlsx-DTxMWUdD.js";import{t as ve,B as oe,a as le}from"./api-C04JdqFc.js";import{u as q}from"./AuthStore-BnYeBJES.js";import{u as ke}from"./useBranchStore-kvv3vD_e.js";import{u as we}from"./use-click-outside-BhLpsQYS.js";import{D as Ce}from"./index.es-Dy-HqQhS.js";/* empty css                         */import{S as Pe}from"./square-kanban-CCTPh8t8.js";import{U as Be}from"./user-check-BVVInUPf.js";import{c as Fe}from"./createLucideIcon-RccWoOaL.js";import{X as Ie}from"./x-BfrbTbzo.js";import{U as Me}from"./users-CXAhoVGa.js";import{D as Oe}from"./dollar-sign-D2IX7NrM.js";import{C as ze}from"./credit-card-YBFNOl8z.js";import{F as Ue}from"./flag-GJ94Fqe2.js";import{C as Ge}from"./clipboard-list-C2ET-QCv.js";import{C as Ve}from"./calendar-C_LRGMui.js";import{F as Le}from"./file-text-BNGbNc3I.js";import{C as ot}from"./circle-alert-CIGxBCHF.js";import{C as lt}from"./circle-check-big-DhDS6nah.js";import{T as nt}from"./trending-up-mD_L3rqa.js";import{C as Ye}from"./clock-CzOQJT5p.js";import{A as dt,a as ct}from"./arrow-up-narrow-wide-BXfcg2ON.js";import{H as it}from"./hourglass-BDGbSW0U.js";import{B as He,L as qe}from"./list-DzQOn6sg.js";import{B as mt}from"./building-38OCE1f9.js";import{b as pt}from"./index-DDa5wjlm.js";import{k as xt}from"./index-DTbJanog.js";import"./index-knF4tUPh.js";/* empty css            */import"./react-_sXfQCJm.js";import"./clsx-B-dksMZM.js";import"./index-CyJ3O4p6.js";import"./iconBase-CajCgYY2.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],gt=Fe("archive",ht);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 17V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11Z",key:"kg77oy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M15 22v-4a2 2 0 0 1 2-2h4",key:"1gnbqr"}]],Ae=Fe("calendar-fold",ut);/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ee=Fe("chart-pie",jt);Ke.register(Je,Qe,Xe,et,tt,at);const ft=({data:E,className:L,theme:y="light"})=>{const _={label:"Dataset",backgroundColor:"rgba(59, 130, 246, 0.7)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,borderRadius:6,barPercentage:.9,categoryPercentage:.6},C={labels:E.labels||[],datasets:E.datasets.map((W,z)=>({..._,...W,backgroundColor:W.backgroundColor||`${We(z)}BB`,borderColor:W.borderColor||We(z)}))},X={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:y==="dark"?"#e5e7eb":"#6b7280",font:{size:12,weight:"500"}}},title:{display:!!E.title,text:E.title,color:y==="dark"?"#f9fafb":"rgb(156 163 175)",font:{size:18,weight:"600"},padding:{top:1,bottom:2}},tooltip:{backgroundColor:y==="dark"?"#1f2937":"#ffffff",titleColor:y==="dark"?"#e5e7eb":"#111827",bodyColor:y==="dark"?"#e5e7eb":"#111827",borderColor:y==="dark"?"#374151":"#e5e7eb",borderWidth:1,padding:5,titleFont:{size:14},bodyFont:{size:12}}},scales:{x:{grid:{display:!1},ticks:{color:y==="dark"?"#9ca3af":"#6b7280"}},y:{grid:{color:y==="dark"?"rgba(229, 231, 235, 0.1)":"rgba(0,0,0,0.05)"},ticks:{color:y==="dark"?"#9ca3af":"#6b7280"}}}};return e.jsx("div",{className:rt("p-5 rounded-xl shadow-md transition-all duration-300","dark:bg-gray-800 dark:border-gray-700 bg-white border border-gray-200",L),children:e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(st,{data:C,options:X})})})};function We(E){const L=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#d946ef","#0ea5e9","#84cc16"];return L[E%L.length]}const bt=()=>{var A,p;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(""),[a,Z]=s.useState(10),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState(null),[u,P]=s.useState([]),[w,F]=s.useState([]),S=q(o=>o.accessToken),[R,d]=s.useState("timesheetreport"),{branchCodeOptions:ne,fetchBranches:se,isLoading:k}=ke(),ie=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];s.useEffect(()=>{se(S)},[S]),s.useEffect(()=>{(async()=>{if(!j){P([]);return}C(!0);try{const f=`${oe}/users/read?branchcode=${j}`,g=await le.get(f,{headers:{Authorization:`Bearer ${S}`}});if(g.data&&g.data.data){const t=g.data.data.map(n=>({value:n.staff_id,label:`${n.firstname} ${n.lastname} (${n.staff_id})`}));P(t)}}catch(f){console.error("Error fetching staff list",f),U.error("Failed to fetch staff")}finally{C(!1)}})()},[j,S]),s.useEffect(()=>{(async()=>{if(!j){F([]);return}C(!0);try{const f=`${oe}/project/overview/dropdown?branchcode=${j}`,g=await le.get(f,{headers:{Authorization:`Bearer ${S}`}});if(g.data&&g.data.data){const t=g.data.data.map(n=>({value:n.project_code,label:n.title}));F(t)}}catch(f){console.error("Error fetching project list",f),U.error("Failed to fetch projects")}finally{C(!1)}})()},[j,S]);const me=async()=>{var o,f;if(!v||!c){J(null);return}C(!0);try{let g=`${oe}/report/tasksummary/read?project_code=${encodeURIComponent(c)}&staff_id=${encodeURIComponent(v)}`;if(b){const n=ee(b);g+=`&start_date=${n}`}if(K){const n=ee(K);g+=`&end_date=${n}`}const t=await le.get(g,{headers:{Authorization:`Bearer ${S}`}});t.data&&(J(t.data),W(((f=(o=t.data.data)==null?void 0:o.summary)==null?void 0:f.length)||0))}catch(g){console.error("Error fetching time sheet report",g),U.error("Failed to fetch time sheet report"),te("Failed to fetch report")}finally{C(!1)}},ee=o=>{if(!o)return"";const f=new Date(o),g=f.getFullYear().toString().slice(-2),t=(f.getMonth()+1).toString().padStart(2,"0"),n=f.getDate().toString().padStart(2,"0");return`${g}-${t}-${n}`},de=o=>{y(o)},re=o=>{Y(o),G(""),V(""),y(1)},pe=o=>{G(o),y(1)},xe=o=>{V(o),y(1)},H=o=>{Z(o),y(1)},ce=o=>{const[f,g]=o;ae(f),Q(g)},he=()=>{var g;if(!((g=m==null?void 0:m.data)!=null&&g.summary)){U.error("No data to export");return}const o=O.book_new(),f=O.json_to_sheet(m.data.summary);O.book_append_sheet(o,f,"TimeSheetReport"),Ne(o,"TimeSheetReport.xlsx")},ge=()=>[{data:"Task ID"},{data:"Task Title"},{data:"Priority"},{data:"Status"},{data:"Subtask"},{data:"Rating"},{data:"Duration (mins)"},{data:"Delay_By"},{data:"Delay Reason"},{data:"Last Check-in"},{data:"Last Check-out"}],h=()=>{var o;return(o=m==null?void 0:m.data)!=null&&o.summary?m.data.summary.map((f,g)=>({id:f.task_id||g,data:[{data:f.task_id},{data:f.task_title},{data:f.task_priority},{data:f.task_status},{data:f.subtask_title},{data:f.rating},{data:f.total_duration_minutes},{data:f.delay_by||"Task Ontime"},{data:f.delay_reason||"No Delay Reason"},{data:new Date(f.last_check_in).toLocaleString()},{data:new Date(f.last_check_out).toLocaleString()}]})):[]},D=[{id:"timesheetreport",label:"Time Sheet Report"},{id:"ProjectTimesheetReport",label:"Project Time Sheet Report"},{id:"usertimesheet",label:"Employee Time Sheet Report"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"border-b m-5 border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex -mb-px",children:D.map(o=>e.jsx("button",{onClick:()=>d(o.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${R===o.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:o.label},o.id))})}),R=="timesheetreport"&&e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Time Sheet Report"}),E&&e.jsx("button",{onClick:()=>setShowFilters(!showFilters),className:"p-2 bg-gray-200 rounded-md",children:showFilters?"Hide Filters":"Show Filters"})]}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-19",children:[e.jsx(M,{options:ne,selectedValue:j,onSelect:re,placeholder:"Select Branch",className:"w-full",isLoading:k}),e.jsx(M,{options:u,selectedValue:v,onSelect:pe,placeholder:"Select Staff",className:"w-full",disabled:!j,isLoading:_}),e.jsx(M,{options:w,selectedValue:c,onSelect:xe,placeholder:"Select Project",className:"w-full",disabled:!j,isLoading:_}),e.jsx("div",{className:"w-full",children:e.jsx(Ce,{selectsRange:!0,startDate:b,endDate:K,onChange:ce,placeholderText:"Select date range",className:"w-full p-2 border rounded",isClearable:!0})})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex gap-19",children:[e.jsx(M,{options:ie,selectedValue:a,onSelect:H,placeholder:"Items per page",className:"w-[245px]"}),e.jsxs("button",{onClick:he,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[245px]",disabled:!((A=m==null?void 0:m.data)!=null&&A.summary),children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})]}),e.jsx("button",{onClick:me,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",disabled:!v||!c||_,children:_?"Loading...":"Generate Report"})]})]}),m&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-red-700 font-semibold mb-2",children:"Report Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:[e.jsx(Pe,{className:"inline",size:20})," Project Code"]}),e.jsx("p",{className:"font-medium",children:m.data.project_code})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:[e.jsx(Be,{className:"inline",size:20})," Staff ID"]}),e.jsx("p",{className:"font-medium",children:v})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:[e.jsx(Ae,{className:"inline",size:20})," Date Range"]}),e.jsxs("p",{className:"font-medium",children:[b?ee(b):"N/A"," - ",K?ee(K):"N/A"]})]})]})]}),_&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),z&&e.jsx("div",{className:"text-red-500 text-center py-4",children:z}),((p=m==null?void 0:m.data)==null?void 0:p.summary)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:ge,tbody:h,responsive:!0,className:"min-w-full"})}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:a,onChange:de,paginationLabel:"tasks",isScroll:!0})})]}),!_&&!m&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:j?!v||!c?"Please select both Staff and Project to generate report":"Click 'Generate Report' to view data":"Please select a Branch to view available options"})]})]})})},yt=()=>{const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(10),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState([]),[u,P]=s.useState(""),[w,F]=s.useState("ASC"),S=q(o=>o.accessToken),R=q(o=>o.role),d=q(o=>o.branchcode),{branchCodeOptions:ne,fetchBranches:se,isLoading:k}=ke(),ie=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],me=[{value:"client_name",label:"Client Name"},{value:"company_name",label:"Company Name"},{value:"total_projects",label:"Total Projects"},{value:"minor_priority_projects",label:"Minor Priority Projects"},{value:"major_priority_projects",label:"Major Priority Projects"},{value:"critical_priority_projects",label:"Critical Priority Projects"},{value:"blocker_priority_projects",label:"Blocker Priority Projects"},{value:"draft_projects",label:"Draft Projects"},{value:"planning_projects",label:"Planning Projects"},{value:"inprocess_projects",label:"In Process Projects"},{value:"active_projects",label:"Active Projects"},{value:"lead_review_projects",label:"Lead Review Projects"},{value:"completed_projects",label:"Completed Projects"},{value:"revised_projects",label:"Revised Projects"},{value:"client_review_projects",label:"Client Review Projects"},{value:"drop_projects",label:"Dropped Projects"},{value:"total_milestones",label:"Total Milestones"},{value:"total_tasks",label:"Total Tasks"}],ee=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];s.useEffect(()=>{se(S)},[S]),s.useEffect(()=>{(async()=>{const f=R==="superadmin"?j:d;if(!f){Q([]);return}C(!0);try{const g=`${oe}/client/overview/dropdown?branchcode=${f}`,t=await le.get(g,{headers:{Authorization:`Bearer ${S}`}});if(t.data&&t.data.data){const n=t.data.data.map(l=>({value:l.client_code,label:`${l.client_name} (${l.client_code})`}));Q(n)}}catch(g){console.error("Error fetching client list",g),U.error("Failed to fetch clients")}finally{C(!1)}})()},[j,d,S,R]);const de=async()=>{var o;C(!0);try{let f=`${oe}/report/branchsummary/read`;const g=new URLSearchParams;v&&g.append("client_code",v),m&&g.append("start_date",re(m)),b&&g.append("end_date",re(b)),u&&g.append("sortField",u),w&&g.append("sortDirection",w);const t=R==="superadmin"?j:d;t&&g.append("branchcode",t),f+=`?${g.toString()}`;const n=await le.get(f,{headers:{Authorization:`Bearer ${S}`}});n.data&&(Z(n.data),W(((o=n.data.data)==null?void 0:o.length)||0))}catch(f){console.error("Error fetching client summary report",f),U.error("Failed to fetch client summary report"),te("Failed to fetch report")}finally{C(!1)}},re=o=>{if(!o)return"";const f=new Date(o),g=f.getFullYear(),t=(f.getMonth()+1).toString().padStart(2,"0"),n=f.getDate().toString().padStart(2,"0");return`${g}-${t}-${n}`},pe=o=>{y(o)},xe=o=>{Y(o),G(""),y(1)},H=o=>{G(o),y(1)},ce=o=>{V(o),y(1)},he=o=>{const[f,g]=o;J(f),ae(g)},ge=o=>{P(o)},h=o=>{F(o)},D=()=>{if(!(a!=null&&a.data)){U.error("No data to export");return}const o=O.book_new(),f=a.data.map(t=>({"Client Code":t.client_code,"Client Name":t.client_name,"Branch Code":t.branchcode,"Company Name":t.company_name,Email:t.email,"Communication Type":t.comm_type,"Created On":t.created_on?new Date(t.created_on).toLocaleDateString():"N/A","Total Projects":t.total_projects,"Minor Priority Projects":t.minor_priority_projects,"Major Priority Projects":t.major_priority_projects,"Critical Priority Projects":t.critical_priority_projects,"Blocker Priority Projects":t.blocker_priority_projects,"Draft Projects":t.draft_projects,"Planning Projects":t.planning_projects,"In Process Projects":t.inprocess_projects,"Active Projects":t.active_projects,"Lead Review Projects":t.lead_review_projects,"Completed Projects":t.completed_projects,"Revised Projects":t.revised_projects,"Client Review Projects":t.client_review_projects,"Dropped Projects":t.drop_projects,"Total Milestones":t.total_milestones,"Draft Milestones":t.draft_milestones,"In Process Milestones":t.inprocess_milestones,"Archived Milestones":t.archived_milestones,"Dropped Milestones":t.drop_milestones,"Verified Milestones":t.verified_milestones,"Total Tasks":t.total_tasks,"Minor Priority Tasks":t.minor_priority_task,"Major Priority Tasks":t.major_priority_task,"Critical Priority Tasks":t.critical_priority_task,"Blocker Priority Tasks":t.blocker_priority_task,"In Process Tasks":t.inprocess_tasks,"Archived Tasks":t.archived_tasks,"Verified/Closed Tasks":t.verified_closed_tasks})),g=O.json_to_sheet(f);O.book_append_sheet(o,g,"Client Summary"),Ne(o,"ClientSummaryReport.xlsx")},A=()=>[{data:"Client Code"},{data:"Client Name"},{data:"Company"},{data:"Total Projects"},{data:"Draft"},{data:"In Process"},{data:"Completed"},{data:"Total Tasks"},{data:"Created On"}],p=()=>a!=null&&a.data?a.data.map((o,f)=>({id:o.client_code,data:[{data:o.client_code},{data:o.client_name},{data:o.company_name},{data:o.total_projects},{data:o.draft_projects},{data:o.inprocess_projects},{data:o.completed_projects},{data:o.total_tasks},{data:o.created_on?new Date(o.created_on).toLocaleDateString():"N/A"}]})):[];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow ",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Client Summary Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5 ml-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-40",children:[R==="superadmin"&&e.jsx(M,{options:ne,selectedValue:j,onSelect:xe,placeholder:"Select Branch",className:"w-full",isLoading:k}),e.jsx(M,{options:K,selectedValue:v,onSelect:H,placeholder:"Select Client",className:"w-full",disabled:R==="superadmin"?!j:!1,isLoading:_}),e.jsx("div",{className:"w-full",children:e.jsx(Ce,{selectsRange:!0,startDate:m,endDate:b,onChange:he,placeholderText:"Select date range",className:"w-full p-2 border rounded",isClearable:!0})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-40",children:[e.jsx(M,{options:me,selectedValue:u,onSelect:ge,placeholder:"Sort By Field",className:"w-full"}),e.jsx(M,{options:ee,selectedValue:w,onSelect:h,placeholder:"Sort Direction",className:"w-full"}),e.jsx(M,{options:ie,selectedValue:c,onSelect:ce,placeholder:"Items per page",className:"w-full"})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("button",{onClick:D,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",disabled:!(a!=null&&a.data),children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]}),e.jsx("button",{onClick:de,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 mr-[48px] ",disabled:_,children:_?"Loading...":"Generate Report"})]})]}),a&&e.jsx(e.Fragment,{children:a.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(fe,{thead:A,tbody:p,responsive:!0,className:"min-w-full"}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:c,onChange:pe,paginationLabel:"clients",isScroll:!0})})]}),v&&a.data.length===1&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-red-700 font-semibold mb-4",children:"Detailed Client Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Client Code"]}),e.jsx("p",{className:"font-medium text-lg",children:a.data[0].client_code})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Client Name"]}),e.jsx("p",{className:"font-medium text-lg",children:a.data[0].client_name})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Company"]}),e.jsx("p",{className:"font-medium text-lg",children:a.data[0].company_name})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Projects Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Projects"}),e.jsx("p",{className:"font-medium",children:a.data[0].total_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Draft"}),e.jsx("p",{className:"font-medium",children:a.data[0].draft_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:a.data[0].inprocess_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"font-medium",children:a.data[0].completed_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Dropped"}),e.jsx("p",{className:"font-medium",children:a.data[0].drop_projects})]})]}),e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Priority Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Minor"}),e.jsx("p",{className:"font-medium",children:a.data[0].minor_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Major"}),e.jsx("p",{className:"font-medium",children:a.data[0].major_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Critical"}),e.jsx("p",{className:"font-medium",children:a.data[0].critical_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Blocker"}),e.jsx("p",{className:"font-medium",children:a.data[0].blocker_priority_projects})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Milestones Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Milestones"}),e.jsx("p",{className:"font-medium",children:a.data[0].total_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Draft"}),e.jsx("p",{className:"font-medium",children:a.data[0].draft_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:a.data[0].inprocess_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified"}),e.jsx("p",{className:"font-medium",children:a.data[0].verified_milestones})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Tasks Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Tasks"}),e.jsx("p",{className:"font-medium",children:a.data[0].total_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:a.data[0].inprocess_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified/Closed"}),e.jsx("p",{className:"font-medium",children:a.data[0].verified_closed_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Archived"}),e.jsx("p",{className:"font-medium",children:a.data[0].archived_tasks})]})]})]})]})]}):e.jsx("div",{className:"text-center py-10 text-gray-500",children:"No data found for the selected filters"})}),!_&&!a&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:R==="superadmin"&&!j?"Please select a Branch to view available clients":"Click 'Generate Report' to view data"})]})})})},_t=()=>{const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(10),[c,V]=s.useState(null),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(""),[K,Q]=s.useState("ASC"),u=q(h=>h.accessToken),P=q(h=>h.role),w=q(h=>h.branchcode),{branchCodeOptions:F,fetchBranches:S,isLoading:R}=ke(),d=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],ne=[{value:"branchcode",label:"Branch Code"},{value:"total_projects",label:"Total Projects"},{value:"minor_priority_projects",label:"Minor Priority Projects"},{value:"major_priority_projects",label:"Major Priority Projects"},{value:"critical_priority_projects",label:"Critical Priority Projects"},{value:"blocker_priority_projects",label:"Blocker Priority Projects"},{value:"draft_projects",label:"Draft Projects"},{value:"inprocess_projects",label:"In Process Projects"},{value:"completed_projects",label:"Completed Projects"},{value:"total_milestones",label:"Total Milestones"},{value:"total_tasks",label:"Total Tasks"}],se=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];s.useEffect(()=>{S(u)},[u]);const k=async()=>{C(!0);try{let h=`${oe}/report/branchsummary/read`;const D=new URLSearchParams,A=P==="superadmin"?j:w;A&&D.append("branchcode",A),a&&D.append("start_date",me(a)),m&&D.append("end_date",me(m)),b&&D.append("sortField",b),K&&D.append("sortDirection",K),h+=`?${D.toString()}`;const p=await le.get(h,{headers:{Authorization:`Bearer ${u}`}});if(p.data){const o=ie(p.data.data);V({...p.data,data:o,aggregated:!0}),W(o.length)}}catch(h){console.error("Error fetching branch summary report",h),U.error("Failed to fetch branch summary report"),te("Failed to fetch report")}finally{C(!1)}},ie=h=>{if(!h||h.length===0)return[];const D={};return h.forEach(A=>{D[A.branchcode]||(D[A.branchcode]={branchcode:A.branchcode,total_projects:0,minor_priority_projects:0,major_priority_projects:0,critical_priority_projects:0,blocker_priority_projects:0,draft_projects:0,planning_projects:0,inprocess_projects:0,active_projects:0,lead_review_projects:0,completed_projects:0,revised_projects:0,client_review_projects:0,drop_projects:0,total_milestones:0,draft_milestones:0,inprocess_milestones:0,archived_milestones:0,drop_milestones:0,verified_milestones:0,total_tasks:0,minor_priority_task:0,major_priority_task:0,critical_priority_task:0,blocker_priority_task:0,inprocess_tasks:0,archived_tasks:0,verified_closed_tasks:0,client_count:0});const p=D[A.branchcode];Object.keys(A).forEach(o=>{typeof A[o]=="string"&&!isNaN(A[o])&&A[o]!==""&&(p[o]=(p[o]||0)+parseInt(A[o]))}),p.client_count+=1}),Object.values(D)},me=h=>{if(!h)return"";const D=new Date(h),A=D.getFullYear(),p=(D.getMonth()+1).toString().padStart(2,"0"),o=D.getDate().toString().padStart(2,"0");return`${A}-${p}-${o}`},ee=h=>{y(h)},de=h=>{Y(h),y(1)},re=h=>{G(h),y(1)},pe=h=>{const[D,A]=h;Z(D),J(A)},xe=h=>{ae(h)},H=h=>{Q(h)},ce=()=>{if(!(c!=null&&c.data)){U.error("No data to export");return}const h=O.book_new(),D=c.data.map(p=>({"Branch Code":p.branchcode,"Total Clients":p.client_count,"Total Projects":p.total_projects,"Minor Priority Projects":p.minor_priority_projects,"Major Priority Projects":p.major_priority_projects,"Critical Priority Projects":p.critical_priority_projects,"Blocker Priority Projects":p.blocker_priority_projects,"Draft Projects":p.draft_projects,"Planning Projects":p.planning_projects,"In Process Projects":p.inprocess_projects,"Active Projects":p.active_projects,"Lead Review Projects":p.lead_review_projects,"Completed Projects":p.completed_projects,"Revised Projects":p.revised_projects,"Client Review Projects":p.client_review_projects,"Dropped Projects":p.drop_projects,"Total Milestones":p.total_milestones,"Draft Milestones":p.draft_milestones,"In Process Milestones":p.inprocess_milestones,"Archived Milestones":p.archived_milestones,"Dropped Milestones":p.drop_milestones,"Verified Milestones":p.verified_milestones,"Total Tasks":p.total_tasks,"Minor Priority Tasks":p.minor_priority_task,"Major Priority Tasks":p.major_priority_task,"Critical Priority Tasks":p.critical_priority_task,"Blocker Priority Tasks":p.blocker_priority_task,"In Process Tasks":p.inprocess_tasks,"Archived Tasks":p.archived_tasks,"Verified/Closed Tasks":p.verified_closed_tasks})),A=O.json_to_sheet(D);O.book_append_sheet(h,A,"Branch Summary"),Ne(h,"BranchSummaryReport.xlsx")},he=()=>[{data:"Branch Code"},{data:"Total Clients"},{data:"Total Projects"},{data:"Draft Projects"},{data:"In Process"},{data:"Completed"},{data:"Total Milestones"},{data:"Total Tasks"}],ge=()=>c!=null&&c.data?c.data.map((h,D)=>({id:h.branchcode,data:[{data:h.branchcode},{data:h.client_count},{data:h.total_projects},{data:h.draft_projects},{data:h.inprocess_projects},{data:h.completed_projects},{data:h.total_milestones},{data:h.total_tasks}]})):[];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow ",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Branch Summary Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5 ml-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-40",children:[P==="superadmin"&&e.jsx(M,{options:F,selectedValue:j,onSelect:de,placeholder:"Select Branch",className:"w-full",isLoading:R}),e.jsx("div",{className:"w-full",children:e.jsx(Ce,{selectsRange:!0,startDate:a,endDate:m,onChange:pe,placeholderText:"Select date range",className:"w-full p-2 border rounded",isClearable:!0})}),e.jsx(M,{options:d,selectedValue:v,onSelect:re,placeholder:"Items per page",className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-40",children:[e.jsx(M,{options:ne,selectedValue:b,onSelect:xe,placeholder:"Sort By Field",className:"w-full"}),e.jsx(M,{options:se,selectedValue:K,onSelect:H,placeholder:"Sort Direction",className:"w-full"}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{onClick:k,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 w-full",disabled:_,children:_?"Loading...":"Generate Report"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:ce,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",disabled:!(c!=null&&c.data),children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})})]}),c&&e.jsx(e.Fragment,{children:c.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(fe,{thead:he,tbody:ge,responsive:!0,className:"min-w-full"}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:v,onChange:ee,paginationLabel:"branches",isScroll:!0})})]}),j&&c.data.length===1&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-red-700 font-semibold mb-4",children:"Detailed Branch Summary"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Branch Code"]}),e.jsx("p",{className:"font-medium text-lg",children:c.data[0].branchcode})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Projects Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Projects"}),e.jsx("p",{className:"font-medium",children:c.data[0].total_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Clients"}),e.jsx("p",{className:"font-medium",children:c.data[0].client_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Draft"}),e.jsx("p",{className:"font-medium",children:c.data[0].draft_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:c.data[0].inprocess_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"font-medium",children:c.data[0].completed_projects})]})]}),e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Priority Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Minor"}),e.jsx("p",{className:"font-medium",children:c.data[0].minor_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Major"}),e.jsx("p",{className:"font-medium",children:c.data[0].major_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Critical"}),e.jsx("p",{className:"font-medium",children:c.data[0].critical_priority_projects})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Blocker"}),e.jsx("p",{className:"font-medium",children:c.data[0].blocker_priority_projects})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Milestones Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Milestones"}),e.jsx("p",{className:"font-medium",children:c.data[0].total_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Draft"}),e.jsx("p",{className:"font-medium",children:c.data[0].draft_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:c.data[0].inprocess_milestones})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified"}),e.jsx("p",{className:"font-medium",children:c.data[0].verified_milestones})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Tasks Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Tasks"}),e.jsx("p",{className:"font-medium",children:c.data[0].total_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Process"}),e.jsx("p",{className:"font-medium",children:c.data[0].inprocess_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified/Closed"}),e.jsx("p",{className:"font-medium",children:c.data[0].verified_closed_tasks})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Archived"}),e.jsx("p",{className:"font-medium",children:c.data[0].archived_tasks})]})]})]})]})]}):e.jsx("div",{className:"text-center py-10 text-gray-500",children:"No data found for the selected filters"})}),!_&&!c&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:P==="superadmin"&&!j?"Please select a Branch to view report":"Click 'Generate Report' to view data"})]})})})},Nt=()=>{var x;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(10),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState([]),[u,P]=s.useState(!1),w=[{project_id:"PRJ-001",project_name:"VasundraConstruction",client_name:"Vasundra",project_value:"50000",paid_amount:"30000",pending_amount:"20000",start_date:"2023-01-01",end_date:"2023-12-31",status:"Active",team_lead_name:"Nasrin Fathima",milestones_count:"5",tasks_count:"20"}],F=q(r=>r.accessToken),S=q(r=>r.permissions),R=q(r=>r.branchcode),d=((x=S[0])==null?void 0:x.role)||"employee",{branchCodeOptions:ne,fetchBranches:se,isLoading:k}=ke(),ie=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],me=()=>d==="superadmin"?ne:d==="team-lead"?ne.filter(r=>r.value===R):[];s.useEffect(()=>{(d==="superadmin"||d==="team-lead")&&se(F)},[F,d]),s.useEffect(()=>{d==="team-lead"&&Y(R)},[d,R]),s.useEffect(()=>{(d==="superadmin"||d==="team-lead")&&(async()=>{if(!j){Q([]);return}try{const i=`${oe}/teams/read?branchcode=${j}`,T=await le.get(i,{headers:{Authorization:`Bearer ${F}`}});if(T.data&&T.data.data){const I=T.data.data.map(B=>({value:B.team_id,label:B.team_name}));Q(I)}}catch(i){console.error("Error fetching teams",i),U.error("Failed to fetch teams")}})()},[j,F,d]);const ee=r=>{if(!r||!r.data||r.data.length===0)return!0;const i=r.data[0];return(i.project_value==="0"||!i.project_value)&&(i.paid_amount==="0"||!i.paid_amount)&&(i.pending_amount==="0"||!i.pending_amount)&&(i.milestones_count==="0"||!i.milestones_count)&&(i.tasks_count==="0"||!i.tasks_count)},de=async()=>{if(!v||!m||!b){Z(null);return}C(!0);try{const r=pe(m),i=pe(b),T=`${oe}/teamview/report/read?startdate=${r}&enddate=${i}&teamid=${encodeURIComponent(v)}&page=${L}&limit=${c}`,I=await le.get(T,{headers:{Authorization:`Bearer ${F}`}});I.data&&(P(ee(I.data)),Z(I.data),W(I.data.totalDocuments||0))}catch(r){console.error("Error fetching project data",r),U.error("Failed to fetch project data"),te("Failed to fetch data")}finally{C(!1)}},re=()=>u?w:(a==null?void 0:a.data)||[],pe=r=>{if(!r)return"";const i=new Date(r),T=i.getFullYear(),I=(i.getMonth()+1).toString().padStart(2,"0"),B=i.getDate().toString().padStart(2,"0");return`${T}-${I}-${B}`},xe=r=>{y(r)},H=r=>{Y(r),G(""),y(1)},ce=r=>{G(r),y(1)},he=r=>{V(r),y(1)},ge=r=>{const[i,T]=r;J(i),ae(T)},h=()=>{J(null),ae(null)},D=()=>{const r=re();if(r.length===0){U.error("No data to export");return}const i=r.map(B=>({"Project ID":B.project_id,"Project Name":B.project_name,"Client Name":B.client_name,"Project Value":p(B.project_value),"Paid Amount":p(B.paid_amount),"Pending Amount":p(B.pending_amount),"Start Date":B.start_date,"End Date":B.end_date,Status:B.status,"Team Lead":B.team_lead_name,Milestones:B.milestones_count,Tasks:B.tasks_count})),T=O.book_new(),I=O.json_to_sheet(i);O.book_append_sheet(T,I,"TeamProjectReport"),Ne(T,"TeamProjectReport.xlsx")},A=()=>{de()},p=r=>!r||isNaN(r)?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),o=r=>!r||isNaN(r)?"0":parseInt(r).toLocaleString("en-IN"),f=r=>{switch(r.toLowerCase()){case"draft":return e.jsx(Le,{className:"inline mr-1 text-gray-500",size:16});case"planning":return e.jsx(Ge,{className:"inline mr-1 text-blue-500",size:16});case"in process":return e.jsx(Ye,{className:"inline mr-1 text-yellow-500",size:16});case"active":return e.jsx(nt,{className:"inline mr-1 text-green-500",size:16});case"completed":return e.jsx(lt,{className:"inline mr-1 text-purple-500",size:16});case"lead review":return e.jsx(Be,{className:"inline mr-1 text-indigo-500",size:16});case"client review":return e.jsx(Ue,{className:"inline mr-1 text-orange-500",size:16});case"archived":return e.jsx(gt,{className:"inline mr-1 text-gray-400",size:16});case"drop":return e.jsx(ot,{className:"inline mr-1 text-red-500",size:16});default:return e.jsx(Le,{className:"inline mr-1 text-gray-500",size:16})}},g=()=>[{data:"Project ID"},{data:"Project Name"},{data:"Client"},{data:"Value"},{data:"Status"},{data:"Start Date"},{data:"End Date"},{data:"Milestones"},{data:"Tasks"}],t=()=>{const r=re();return r.length===0?[]:r.map((i,T)=>({id:i.project_id||T,data:[{data:i.project_id},{data:i.project_name},{data:i.client_name},{data:p(i.project_value)},{data:e.jsxs("span",{className:`flex items-center ${i.status==="Completed"?"text-green-600":i.status==="Active"?"text-blue-600":i.status==="In Process"?"text-yellow-600":i.status==="Draft"?"text-gray-600":"text-gray-800"}`,children:[f(i.status),i.status]})},{data:i.start_date||"N/A"},{data:i.end_date||"N/A"},{data:o(i.milestones_count)},{data:o(i.tasks_count)}]}))},l=(()=>{const r=re();return r.length===0?null:r.reduce((i,T)=>({totalProjects:i.totalProjects+1,totalValue:i.totalValue+(parseFloat(T.project_value)||0),totalPaid:i.totalPaid+(parseFloat(T.paid_amount)||0),totalPending:i.totalPending+(parseFloat(T.pending_amount)||0),milestones:i.milestones+(parseInt(T.milestones_count)||0),tasks:i.tasks+(parseInt(T.tasks_count)||0)}),{totalProjects:0,totalValue:0,totalPaid:0,totalPending:0,milestones:0,tasks:0})})();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",children:"Team Project Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:`grid grid-cols-1 ${d!=="superadmin"&&d!=="team-lead"?"md:grid-cols-2 lg:grid-cols-2 gap-3":"md:grid-cols-4 lg:grid-cols-4 gap-20"}`,children:[(d==="superadmin"||d==="team-lead")&&e.jsx(M,{options:me(),selectedValue:j,onSelect:H,placeholder:"Select Branch",className:"w-[245px]",isLoading:k,disabled:d==="team-lead"}),(d==="superadmin"||d==="team-lead")&&e.jsx(M,{options:K,selectedValue:v,onSelect:ce,placeholder:"Select Team",className:"w-[245px]",disabled:d==="team-lead"?!R:!j,isLoading:_}),e.jsxs("div",{className:"w-[245px] relative",children:[e.jsx(Ce,{selectsRange:!0,startDate:m,endDate:b,onChange:ge,placeholderText:"Select date range",className:"w-full p-2 border rounded h-[40px]",isClearable:!0}),(m||b)&&e.jsx("button",{onClick:h,className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:e.jsx(Ie,{size:16})})]}),e.jsx(M,{options:ie,selectedValue:c,onSelect:he,placeholder:"Items per page",className:"w-[245px]"})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[e.jsx("div",{className:`flex ${d!=="superadmin"&&d!=="team-lead"?"gap-91":"gap-19"}`,children:e.jsxs("button",{onClick:D,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",disabled:!(a!=null&&a.data)&&!u,children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})}),e.jsx("button",{onClick:A,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",disabled:(d!=="team-lead"&&d!=="superadmin"?!1:!v||!m||!b)||_,children:_?"Loading...":"Generate Report"})]})]}),_&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),z&&e.jsx("div",{className:"text-red-500 text-center py-4",children:z}),((a==null?void 0:a.data)||u)&&e.jsxs(e.Fragment,{children:[l&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-[var(--color-primary)] font-semibold mb-2",children:"Project Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-1",size:16})," Total Projects"]}),e.jsx("p",{className:"font-medium",children:o(l.totalProjects)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Oe,{className:"mr-1",size:16})," Total Value"]}),e.jsx("p",{className:"font-medium",children:p(l.totalValue)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(ze,{className:"mr-1",size:16})," Paid Amount"]}),e.jsx("p",{className:"font-medium",children:p(l.totalPaid)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ee,{className:"mr-1",size:16})," Pending Amount"]}),e.jsx("p",{className:"font-medium",children:p(l.totalPending)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ue,{className:"mr-1",size:16})," Total Milestones"]}),e.jsx("p",{className:"font-medium",children:o(l.milestones)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ge,{className:"mr-1",size:16})," Total Tasks"]}),e.jsx("p",{className:"font-medium",children:o(l.tasks)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ve,{className:"mr-1",size:16})," Date Range"]}),e.jsxs("p",{className:"font-medium",children:[m?new Date(m).toLocaleDateString():"N/A"," ","-"," ",b?new Date(b).toLocaleDateString():"N/A"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Le,{className:"mr-2",size:20})," Project Details"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:g,tbody:t,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:c,onChange:xe,paginationLabel:"projects",isScroll:!0})})]}),!_&&!a&&!u&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:d!=="team-lead"&&d!=="superadmin"?!m||!b?"Please select date range to generate report":"Click 'Generate Report' to view project details":d==="team-lead"?R?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Team and date range":"Loading branch information...":j?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Team":"Please select Branch to view available options"})]})})})},vt=()=>{var he,ge,h,D,A,p,o,f,g;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(10),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState([]),u=q(t=>t.accessToken),[P,w]=s.useState("projectOoverviewreport"),{branchCodeOptions:F,fetchBranches:S,isLoading:R}=ke(),d=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}];s.useEffect(()=>{S(u)},[u]);const ne=[{id:"projectOoverviewreport",label:"Project Report"},{id:"clientproject",label:"Client Project Report"},{id:"branchwiseproject",label:"Branchwise Project Report"},{id:"teamwiseproject",label:"Teamwise Project Report"}];s.useEffect(()=>{(async()=>{if(!j){Q([]);return}C(!0);try{const n=`${oe}/project/overview/dropdown?branchcode=${j}`,l=await le.get(n,{headers:{Authorization:`Bearer ${u}`}});if(l.data&&l.data.data){const x=l.data.data.map(r=>({value:r.project_code,label:`${r.title} (${r.project_code})`}));Q(x)}}catch(n){console.error("Error fetching project list",n),U.error("Failed to fetch projects")}finally{C(!1)}})()},[j,u]);const se=async()=>{var t,n;if(!v){Z(null);return}C(!0);try{let l=`${oe}/report/projectoverview/read?project_code=${encodeURIComponent(v)}`;if(m){const r=k(m);l+=`&start_date=${r}`}if(b){const r=k(b);l+=`&end_date=${r}`}const x=await le.get(l,{headers:{Authorization:`Bearer ${u}`}});if(x.data){Z(x.data);const r=((n=(t=x.data.data)==null?void 0:t.milestones_summary)==null?void 0:n.reduce((i,T)=>{var I;return i+(((I=T.taskparticipantsummary)==null?void 0:I.length)||0)},0))||0;W(r)}}catch(l){console.error("Error fetching project overview report",l),U.error("Failed to fetch project overview report"),te("Failed to fetch report")}finally{C(!1)}},k=t=>{if(!t)return"";const n=new Date(t),l=n.getFullYear().toString().slice(-2),x=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");return`${l}-${x}-${r}`},ie=t=>{y(t)},me=t=>{Y(t),G(""),y(1)},ee=t=>{G(t),y(1)},de=t=>{V(t),y(1)},re=t=>{const[n,l]=t;J(n),ae(l)},pe=()=>{var i,T,I,B,De,Te,$e;if(!(a!=null&&a.data)){U.error("No data to export");return}const t=O.book_new(),n=[{"Project Code":a.data.project_code,Title:((i=a.data.project_details)==null?void 0:i.title)||"N/A","Start Date":(T=a.data.project_details)!=null&&T.start_date?new Date(a.data.project_details.start_date).toLocaleDateString():"N/A","End Date":(I=a.data.project_details)!=null&&I.end_date?new Date(a.data.project_details.end_date).toLocaleDateString():"N/A",Status:((B=a.data.project_details)==null?void 0:B.status)||"N/A","Total Task Duration (mins)":((De=a.data.project_details)==null?void 0:De.total_task_duration)||0,"Overall Working Hours":((Te=a.data.project_details)==null?void 0:Te.overall_working_hours)||0}],l=O.json_to_sheet(n);O.book_append_sheet(t,l,"Project Summary");const x=(($e=a.data.milestones_summary)==null?void 0:$e.flatMap(Re=>{var N;return(N=Re.taskparticipantsummary)==null?void 0:N.map($=>({"Milestone Code":Re.milestone_code,"Staff ID":$.staff_id,"Staff Name":`${$.firstname} ${$.lastname}`,"Total Tasks":$.total_tasks,"Draft Tasks":$.total_draft,"In Progress":$.total_inprogress,"Verified/Closed":$.total_verified_closed,Archived:$.total_archived,Dropped:$.total_drop,"Total Duration (mins)":$.total_duration_minutes}))}))||[],r=O.json_to_sheet(x);O.book_append_sheet(t,r,"Milestones Data"),Ne(t,"ProjectOverviewReport.xlsx")},xe=()=>[{data:"Milestone Code"},{data:"Staff ID"},{data:"Staff Name"},{data:"Total Tasks"},{data:"Draft"},{data:"In Progress"},{data:"Verified/Closed"},{data:"Archived"},{data:"Dropped"},{data:"Duration (mins)"}],H=()=>{var t;return(t=a==null?void 0:a.data)!=null&&t.milestones_summary?a.data.milestones_summary.flatMap((n,l)=>{var x;return(x=n.taskparticipantsummary)==null?void 0:x.map((r,i)=>({id:`${n.milestone_code}-${r.staff_id}-${i}`,data:[{data:n.milestone_code},{data:r.staff_id},{data:`${r.firstname} ${r.lastname}`},{data:r.total_tasks},{data:r.total_draft},{data:r.total_inprogress},{data:r.total_verified_closed},{data:r.total_archived},{data:r.total_drop},{data:r.total_duration_minutes}]}))}):[]},ce=t=>{if(!t)return"0m";const n=Math.floor(t/60),l=t%60;return n>0?`${n}h ${l}m`:`${l}m`};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-7 mt-7 ml-8",children:e.jsx("nav",{className:"flex -mb-px",children:ne.map(t=>e.jsx("button",{onClick:()=>w(t.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${P===t.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.label},t.id))})}),P==="projectOoverviewreport"&&e.jsxs("div",{className:"p-4 flex-grow ml-2 ",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-3",children:"Project Overview Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5 ml-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-40",children:[e.jsx(M,{options:F,selectedValue:j,onSelect:me,placeholder:"Select Branch",className:"w-full",isLoading:R}),e.jsx(M,{options:K,selectedValue:v,onSelect:ee,placeholder:"Select Project",className:"w-full",disabled:!j,isLoading:_}),e.jsx("div",{className:"w-full",children:e.jsx(Ce,{selectsRange:!0,startDate:m,endDate:b,onChange:re,placeholderText:"Select date range",className:"w-full p-2 border rounded",isClearable:!0})})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex gap-40",children:[e.jsx(M,{options:d,selectedValue:c,onSelect:de,placeholder:"Items per page",className:"w-[285px]"}),e.jsxs("button",{onClick:pe,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",disabled:!(a!=null&&a.data),children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})]}),e.jsx("button",{onClick:se,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 mr-[48px] ",disabled:!v||_,children:_?"Loading...":"Generate Report"})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-red-700 font-semibold mb-4",children:"Project Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Project Code"]}),e.jsx("p",{className:"font-medium text-lg",children:a.data.project_code})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Pe,{className:"inline mr-2",size:16})," Title"]}),e.jsx("p",{className:"font-medium text-lg",children:((he=a.data.project_details)==null?void 0:he.title)||"N/A"})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Ae,{className:"inline mr-2",size:16})," Status"]}),e.jsx("p",{className:"font-medium text-lg capitalize",children:((ge=a.data.project_details)==null?void 0:ge.status)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Ae,{className:"inline mr-2",size:16})," Start Date"]}),e.jsx("p",{className:"font-medium",children:(h=a.data.project_details)!=null&&h.start_date?new Date(a.data.project_details.start_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Ae,{className:"inline mr-2",size:16})," End Date"]}),e.jsx("p",{className:"font-medium",children:(D=a.data.project_details)!=null&&D.end_date?new Date(a.data.project_details.end_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Be,{className:"inline mr-2",size:16})," Total Duration"]}),e.jsx("p",{className:"font-medium",children:ce((A=a.data.project_details)==null?void 0:A.total_task_duration)})]}),e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 rounded shadow",children:[e.jsxs("p",{className:"text-sm text-red-700 mb-1",children:[e.jsx(Be,{className:"inline mr-2",size:16})," Working Hours"]}),e.jsxs("p",{className:"font-medium",children:[((o=(p=a.data.project_details)==null?void 0:p.overall_working_hours)==null?void 0:o.toFixed(2))||0," hours"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Milestones Summary"}),(f=a.data.milestones_summary)==null?void 0:f.map((t,n)=>{var l;return e.jsxs("div",{className:"mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"font-medium text-red-700",children:["Milestone: ",t.milestone_code]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Total Tasks: "}),t.total_tasks," |",e.jsx("span",{className:"ml-2 font-medium",children:"Duration: "}),ce(t.overall_task_duration)]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Draft"}),e.jsx("p",{className:"font-medium",children:t.total_draft})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"In Progress"}),e.jsx("p",{className:"font-medium",children:t.total_inprogress})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Verified/Closed"}),e.jsx("p",{className:"font-medium",children:t.total_verified_closed})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded shadow text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Archived"}),e.jsx("p",{className:"font-medium",children:t.total_archived})]})]}),((l=t.taskparticipantsummary)==null?void 0:l.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Participants:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:xe,tbody:()=>t.taskparticipantsummary.map((x,r)=>({id:`${t.milestone_code}-${x.staff_id}-${r}`,data:[{data:t.milestone_code},{data:x.staff_id},{data:`${x.firstname} ${x.lastname}`},{data:x.total_tasks},{data:x.total_draft},{data:x.total_inprogress},{data:x.total_verified_closed},{data:x.total_archived},{data:x.total_drop},{data:x.total_duration_minutes}]})),responsive:!0,className:"min-w-full"})})]})]},n)})]}),((g=a.data.milestones_summary)==null?void 0:g.some(t=>{var n;return((n=t.taskparticipantsummary)==null?void 0:n.length)>0}))&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Participants Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:xe,tbody:H,responsive:!0,className:"min-w-full"})}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:c,onChange:ie,paginationLabel:"participants",isScroll:!0})})]})]}),!_&&!a&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:j?v?"Click 'Generate Report' to view data":"Please select a Project to generate report":"Please select a Branch to view available projects"})]}),P==="clientproject"&&e.jsx(yt,{}),P==="branchwiseproject"&&e.jsx(_t,{}),P==="teamwiseproject"&&e.jsx(Nt,{})]})})},wt=()=>{var g,t,n;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(10),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState([]),[u,P]=s.useState(""),w=q(l=>l.accessToken),F=q(l=>l.permissions),S=q(l=>l.staff_id),R=q(l=>l.branchcode),d=((g=F[0])==null?void 0:g.role)||"employee",{branchCodeOptions:ne,fetchBranches:se,isLoading:k}=ke(),ie=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],me=()=>d==="superadmin"?ne:d==="team-lead"?ne.filter(l=>l.value===R):[];s.useEffect(()=>{(d==="superadmin"||d==="team-lead")&&se(w)},[w,d]),s.useEffect(()=>{d==="team-lead"&&Y(R)},[d,R]),s.useEffect(()=>{d!=="team-lead"&&d!=="superadmin"&&G(S)},[d,S]),s.useEffect(()=>{(d==="superadmin"||d==="team-lead")&&(async()=>{if(d==="superadmin"&&!j||d==="team-lead"&&!R){Q([]);return}C(!0);try{const r=`${oe}/users/read?branchcode=${d==="team-lead"?R:j}`,i=await le.get(r,{headers:{Authorization:`Bearer ${w}`}});if(i.data&&i.data.data){const T=i.data.data.map(I=>({value:I.staff_id,label:`${I.firstname} ${I.lastname} (${I.staff_id})`}));Q(T)}}catch(x){console.error("Error fetching staff list",x),U.error("Failed to fetch staff")}finally{C(!1)}})()},[j,w,d,R]);const ee=async()=>{var x,r;const l=d!=="team-lead"&&d!=="superadmin"?S:v;if(!l||!m||!b){Z(null);return}C(!0);try{const i=de(m),T=de(b);let I=`${oe}/report/usersummary/read?staff_id=${encodeURIComponent(l)}&start_date=${i}&end_date=${T}`;u&&(I+=`&dec=${u}`);const B=await le.get(I,{headers:{Authorization:`Bearer ${w}`}});B.data&&(Z(B.data),W(((r=(x=B.data.data)==null?void 0:x.projectsummary)==null?void 0:r.length)||0))}catch(i){console.error("Error fetching user summary data",i),U.error("Failed to fetch user summary data"),te("Failed to fetch data")}finally{C(!1)}},de=l=>{if(!l)return"";const x=new Date(l),r=x.getFullYear(),i=(x.getMonth()+1).toString().padStart(2,"0"),T=x.getDate().toString().padStart(2,"0");return`${r}-${i}-${T}`},re=l=>{y(l)},pe=l=>{Y(l),G(""),y(1)},xe=l=>{G(l),y(1)},H=l=>{V(l),y(1)},ce=l=>{const[x,r]=l;J(x),ae(r)},he=()=>{P(l=>l==="desc"?"":"desc")},ge=()=>{var i;if(!((i=a==null?void 0:a.data)!=null&&i.projectsummary)||a.data.projectsummary.length===0){U.error("No data to export");return}const l=a.data.projectsummary.flatMap(T=>T.milestones_summary.flatMap(I=>I.taskparticipantsummary.map(B=>({project_code:T.project_code,milestone_code:I.milestone_code,staff_id:B.staff_id,staff_name:`${B.firstname} ${B.lastname}`,total_tasks:B.total_tasks,total_duration_minutes:B.total_duration_minutes,total_working_hours:(B.total_duration_minutes/60).toFixed(2),status:T.status})))),x=O.book_new(),r=O.json_to_sheet(l);O.book_append_sheet(x,r,"UserSummaryReport"),Ne(x,"UserSummaryReport.xlsx")},h=()=>{ee()},D=l=>{if(isNaN(l))return"0 minutes";const x=Math.floor(l/60),r=Math.round(l%60);return x>0&&r>0?`${x} hour${x!==1?"s":""} ${r} minute${r!==1?"s":""}`:x>0?`${x} hour${x!==1?"s":""}`:`${r} minute${r!==1?"s":""}`},A=()=>[{data:"Project Code"},{data:"Status"},{data:"Total Tasks"},{data:"Total Duration"}],p=()=>{var l;return(l=a==null?void 0:a.data)!=null&&l.projectsummary?a.data.projectsummary.map((x,r)=>({id:x.project_code||r,data:[{data:x.project_code},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${x.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${x.status==="completed"?"bg-green-800":"bg-red-700"}`}),x.status.charAt(0).toUpperCase()+x.status.slice(1)]})},{data:x.total_tasks},{data:D(x.total_duration_minutes)}]})):[]},o=()=>[{data:"Milestone Code"},{data:"Total Tasks"},{data:"In Progress"},{data:"Completed"},{data:"Total Duration"}],f=()=>{var x;return(x=a==null?void 0:a.data)!=null&&x.projectsummary?a.data.projectsummary.flatMap(r=>r.milestones_summary.map(i=>({...i,project_code:r.project_code}))).map((r,i)=>({id:r.milestone_code||i,data:[{data:r.milestone_code},{data:r.total_tasks},{data:r.total_inprogress},{data:r.total_verified_closed},{data:D(r.overall_task_duration)}]})):[]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",children:"User Work Summary Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:`grid grid-cols-1 ${d!=="superadmin"&&d!=="team-lead"?"md:grid-cols-2 lg:grid-cols-2 gap-3":"md:grid-cols-4 lg:grid-cols-4 gap-20"}`,children:[(d==="superadmin"||d==="team-lead")&&e.jsx(M,{options:me(),selectedValue:j,onSelect:pe,placeholder:"Select Branch",className:"w-[245px]",isLoading:k,disabled:d==="team-lead"}),(d==="superadmin"||d==="team-lead")&&e.jsx(M,{options:K,selectedValue:v,onSelect:xe,placeholder:"Select Staff",className:"w-[245px]",disabled:d==="team-lead"?!R:!j,isLoading:_}),e.jsx("div",{className:"w-[245px]",children:e.jsx(Ce,{selectsRange:!0,startDate:m,endDate:b,onChange:ce,placeholderText:"Select date range",className:"w-full p-2 border rounded h-[40px]",isClearable:!0})}),e.jsx(M,{options:ie,selectedValue:c,onSelect:H,placeholder:"Items per page",className:"w-[245px]"})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[e.jsxs("div",{className:`flex ${d!=="superadmin"&&d!=="team-lead"?"gap-91":"gap-19"}`,children:[e.jsxs("button",{onClick:he,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect px-18 h-[40px] rounded-sm",children:[u==="desc"?e.jsx(dt,{className:"mr-1"}):e.jsx(ct,{className:"mr-1"}),"Sort ",u==="desc"?"Desc":"Asc"]}),e.jsxs("button",{onClick:ge,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",disabled:!((t=a==null?void 0:a.data)!=null&&t.projectsummary),children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})]}),e.jsx("button",{onClick:h,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",disabled:(d!=="team-lead"&&d!=="superadmin"?!m||!b:!v||!m||!b)||_,children:_?"Loading...":"Generate Report"})]})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-red-700 font-semibold mb-2",children:"User Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Be,{className:"mr-1",size:16})," Staff ID"]}),e.jsx("p",{className:"font-medium",children:a.data.staff_id})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ye,{className:"mr-1",size:16})," Date Range"]}),e.jsxs("p",{className:"font-medium",children:[new Date(a.data.start_date).toLocaleDateString()," - ",new Date(a.data.end_date).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(it,{className:"mr-1",size:16})," Total Working Hours"]}),e.jsx("p",{className:"font-medium",children:D(a.data.total_duration_minutes)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(He,{className:"mr-1",size:16})," Projects Worked"]}),e.jsx("p",{className:"font-medium",children:a.data.total_projects_worked})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(qe,{className:"mr-1",size:16})," Total Tasks"]}),e.jsx("p",{className:"font-medium",children:a.data.total_tasks})]})]})]}),_&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),z&&e.jsx("div",{className:"text-red-500 text-center py-4",children:z}),((n=a==null?void 0:a.data)==null?void 0:n.projectsummary)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(He,{className:"mr-2",size:20})," Project Summary"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:A,tbody:p,responsive:!0,className:"min-w-full"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(qe,{className:"mr-2",size:20})," Milestone Summary"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:o,tbody:f,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:c,onChange:re,paginationLabel:"projects",isScroll:!0})})]}),!_&&!a&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:d!=="team-lead"&&d!=="superadmin"?!m||!b?"Please select date range to generate report":"Click 'Generate Report' to view your work summary":d==="team-lead"?R?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Staff and date range":"Loading branch information...":j?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Staff":"Please select Branch to view available options"})]})})})},St=()=>{var g;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(10),[c,V]=s.useState(null),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(!1),[K,Q]=s.useState("branchpay"),u=[{team_id:"BRCH-01/TEAM/01",team_name:"Archetech Team",branchcode:"BRANCH-01",team_lead_id:"BRANCH/01/02",team_lead_name:"Keerthana",total_project_count:"3",total_project_amount:"50000",total_paid_amount:"15000",total_pending_amount:"35000",total_project_draft:"1",total_project_planning:"1",total_project_inprocess:"1",total_project_active:"1",total_project_completed:"0"}],P=q(t=>t.accessToken),w=q(t=>t.permissions),F=q(t=>t.branchcode),S=((g=w[0])==null?void 0:g.role)||"employee",{branchCodeOptions:R,fetchBranches:d,isLoading:ne}=ke(),se=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],k=()=>S==="superadmin"?R:S==="team-lead"?R.filter(t=>t.value===F):[];s.useEffect(()=>{(S==="superadmin"||S==="team-lead")&&d(P)},[P,S]),s.useEffect(()=>{S==="team-lead"&&Y(F)},[S,F]);const ie=t=>!t||!t.data||t.data.length===0?!0:t.data.every(n=>n.total_project_amount==="0"&&n.total_paid_amount==="0"&&n.total_pending_amount==="0"&&n.total_project_count==="0"),me=async()=>{if(!j||!a||!m){V(null);return}C(!0);try{const t=de(a),n=de(m),l=`${oe}/teamview/report/read?branchcode=${j}&startdate=${t}&enddate=${n}&page=${L}&limit=${v}`,x=await le.get(l,{headers:{Authorization:`Bearer ${P}`}});x.data&&(ae(ie(x.data)),V(x.data),W(x.data.totalDocuments||0))}catch(t){console.error("Error fetching payment data",t),U.error("Failed to fetch payment data"),te("Failed to fetch data")}finally{C(!1)}},ee=()=>b?u:(c==null?void 0:c.data)||[],de=t=>{if(!t)return"";const n=new Date(t),l=n.getFullYear(),x=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");return`${l}-${x}-${r}`},re=t=>{y(t)},pe=t=>{Y(t),y(1)},xe=t=>{G(t),y(1)},H=t=>{const[n,l]=t;Z(n),J(l)},ce=()=>{Z(null),J(null)},he=()=>{const t=ee();if(t.length===0){U.error("No data to export");return}const n=t.map(r=>({"Team Name":r.team_name,"Team Lead":r.team_lead_name,"Total Projects":r.total_project_count,"Total Amount":h(r.total_project_amount),"Paid Amount":h(r.total_paid_amount),"Pending Amount":h(r.total_pending_amount),"Draft Projects":r.total_project_draft,"Planning Projects":r.total_project_planning,"In Process Projects":r.total_project_inprocess,"Active Projects":r.total_project_active,"Completed Projects":r.total_project_completed})),l=O.book_new(),x=O.json_to_sheet(n);O.book_append_sheet(l,x,"BranchPaymentReport"),Ne(l,"BranchPaymentReport.xlsx")},ge=()=>{me()},h=t=>!t||isNaN(t)?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),D=t=>!t||isNaN(t)?"0":parseInt(t).toLocaleString("en-IN"),p=(()=>{const t=ee();return t.length===0?null:{totalProjects:t.reduce((n,l)=>n+parseInt(l.total_project_count||"0"),0),totalAmount:t.reduce((n,l)=>n+parseInt(l.total_project_amount||"0"),0),totalPaid:t.reduce((n,l)=>n+parseInt(l.total_paid_amount||"0"),0),totalPending:t.reduce((n,l)=>n+parseInt(l.total_pending_amount||"0"),0)}})(),o=()=>[{data:"Team Name"},{data:"Team Lead"},{data:"Total Projects"},{data:"Total Amount"},{data:"Paid Amount"},{data:"Pending Amount"}],f=()=>{const t=ee();return t.length===0?[]:t.map((n,l)=>({id:n.team_id||l,data:[{data:n.team_name},{data:n.team_lead_name},{data:D(n.total_project_count)},{data:h(n.total_project_amount)},{data:h(n.total_paid_amount)},{data:h(n.total_pending_amount)}]}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",children:"Branch Payment Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(S==="superadmin"||S==="team-lead")&&e.jsx(M,{options:k(),selectedValue:j,onSelect:pe,placeholder:"Select Branch",className:"w-[245px]",isLoading:ne,disabled:S==="team-lead"}),e.jsxs("div",{className:"w-[245px] relative",children:[e.jsx(Ce,{selectsRange:!0,startDate:a,endDate:m,onChange:H,placeholderText:"Select date range",className:"w-full p-2 border rounded h-[40px]",isClearable:!0}),(a||m)&&e.jsx("button",{onClick:ce,className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:e.jsx(Ie,{size:16})})]}),e.jsx(M,{options:se,selectedValue:v,onSelect:xe,placeholder:"Items per page",className:"w-[245px]"})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[e.jsx("div",{className:"flex gap-19",children:e.jsxs("button",{onClick:he,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",disabled:!(c!=null&&c.data)&&!b,children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})}),e.jsx("button",{onClick:ge,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",disabled:(S!=="team-lead"&&S!=="superadmin"?!1:!j||!a||!m)||_,children:_?"Loading...":"Generate Report"})]})]}),_&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),z&&e.jsx("div",{className:"text-red-500 text-center py-4",children:z}),((c==null?void 0:c.data)||b)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-[var(--color-primary)] font-semibold mb-2",children:"Branch Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(mt,{className:"mr-1",size:16})," Branch"]}),e.jsx("p",{className:"font-medium",children:j})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Oe,{className:"mr-1",size:16})," Total Amount"]}),e.jsx("p",{className:"font-medium",children:h(p==null?void 0:p.totalAmount)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(ze,{className:"mr-1",size:16})," Total Paid"]}),e.jsx("p",{className:"font-medium",children:h(p==null?void 0:p.totalPaid)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ee,{className:"mr-1",size:16})," Total Pending"]}),e.jsx("p",{className:"font-medium",children:h(p==null?void 0:p.totalPending)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-1",size:16})," Total Projects"]}),e.jsx("p",{className:"font-medium",children:D(p==null?void 0:p.totalProjects)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ve,{className:"mr-1",size:16})," Date Range"]}),e.jsxs("p",{className:"font-medium",children:[a?new Date(a).toLocaleDateString():"N/A"," ","-"," ",m?new Date(m).toLocaleDateString():"N/A"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(ze,{className:"mr-2",size:20})," Team Payment Summary"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:o,tbody:f,responsive:!0,className:"min-w-full"})})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:v,onChange:re,paginationLabel:"records",isScroll:!0})})]}),!_&&!c&&!b&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:S!=="team-lead"&&S!=="superadmin"?!a||!m?"Please select date range to generate report":"Click 'Generate Report' to view payment summary":S==="team-lead"?F?!a||!m?"Please select date range":"Click 'Generate Report' to view data":"Loading branch information...":j?!a||!m?"Please select date range":"Click 'Generate Report' to view data":"Please select Branch to view available options"})]})})})},kt=()=>{var x,r,i,T,I,B,De,Te,$e,Re;const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(1),[_,C]=s.useState(!1),[X,W]=s.useState(0),[z,te]=s.useState(null),[j,Y]=s.useState(""),[v,G]=s.useState(""),[c,V]=s.useState(10),[a,Z]=s.useState(null),[m,J]=s.useState(null),[b,ae]=s.useState(null),[K,Q]=s.useState([]),[u,P]=s.useState(!1),[w,F]=s.useState("branchpay"),S={team_id:"BRCH-01/TEAM/01",team_name:"ArchetechTeam",branchcode:"BRANCH-01",team_lead_id:"BRANCH/01/02",team_lead_name:"Keerthana",total_project_count:"4",total_project_amount:"50000",total_paid_amount:"15000",total_pending_amount:"35000",total_project_draft:"1",total_project_planning:"1",total_project_inprocess:"1",total_project_active:"1",total_project_lead_review:"0",total_project_completed:"0",total_project_revised:"0",total_project_client_review:"0",total_project_drop:"0",total_milestone_count:"8",total_milestone_draft:"2",total_milestone_archived:"1",total_milestone_inprocess:"3",total_milestone_verified:"2",total_milestone_drop:"0",total_task_count:"24",total_task_draft:"5",total_task_archived:"3",total_task_inprocess:"10",total_task_verified_closed:"6",total_task_drop:"0"},R=[{id:"branchpay",label:"Branchwise Payment Report"},{id:"teampay",label:"Teamwise Payment Report"}],d=q(N=>N.accessToken),ne=q(N=>N.permissions),se=q(N=>N.branchcode),k=((x=ne[0])==null?void 0:x.role)||"employee",{branchCodeOptions:ie,fetchBranches:me,isLoading:ee}=ke(),de=[{value:10,label:"10 per page"},{value:20,label:"20 per page"},{value:50,label:"50 per page"},{value:100,label:"100 per page"}],re=()=>k==="superadmin"?ie:k==="team-lead"?ie.filter(N=>N.value===se):[];s.useEffect(()=>{(k==="superadmin"||k==="team-lead")&&me(d)},[d,k]),s.useEffect(()=>{k==="team-lead"&&Y(se)},[k,se]),s.useEffect(()=>{(k==="superadmin"||k==="team-lead")&&(async()=>{if(!j){Q([]);return}try{const $=`${oe}/teams/read?branchcode=${j}`,je=await le.get($,{headers:{Authorization:`Bearer ${d}`}});if(je.data&&je.data.data){const be=je.data.data.map(ue=>({value:ue.team_id,label:ue.team_name}));Q(be)}}catch($){console.error("Error fetching teams",$),U.error("Failed to fetch teams")}})()},[j,d,k]);const pe=N=>{if(!N||!N.data||N.data.length===0)return!0;const $=N.data[0];return $.total_project_amount==="0"&&$.total_paid_amount==="0"&&$.total_pending_amount==="0"&&$.total_project_count==="0"},xe=async()=>{if(!v||!m||!b){Z(null);return}C(!0);try{const N=ce(m),$=ce(b),je=`${oe}/teamview/report/read?startdate=${N}&enddate=${$}&teamid=${encodeURIComponent(v)}&page=${L}&limit=${c}`,be=await le.get(je,{headers:{Authorization:`Bearer ${d}`}});be.data&&(P(pe(be.data)),Z(be.data),W(be.data.totalDocuments||0))}catch(N){console.error("Error fetching payment data",N),U.error("Failed to fetch payment data"),te("Failed to fetch data")}finally{C(!1)}},H=()=>u?[S]:(a==null?void 0:a.data)||[],ce=N=>{if(!N)return"";const $=new Date(N),je=$.getFullYear(),be=($.getMonth()+1).toString().padStart(2,"0"),ue=$.getDate().toString().padStart(2,"0");return`${je}-${be}-${ue}`},he=N=>{y(N)},ge=N=>{Y(N),G(""),y(1)},h=N=>{G(N),y(1)},D=N=>{V(N),y(1)},A=N=>{const[$,je]=N;J($),ae(je)},p=()=>{J(null),ae(null)},o=()=>{const N=H();if(N.length===0){U.error("No data to export");return}const $=N.map(ue=>({"Team Name":ue.team_name,"Team Lead":ue.team_lead_name,"Total Projects":ue.total_project_count,"Total Amount":g(ue.total_project_amount),"Paid Amount":g(ue.total_paid_amount),"Pending Amount":g(ue.total_pending_amount),"Draft Projects":ue.total_project_draft,"Planning Projects":ue.total_project_planning,"In Process Projects":ue.total_project_inprocess,"Active Projects":ue.total_project_active,"Completed Projects":ue.total_project_completed})),je=O.book_new(),be=O.json_to_sheet($);O.book_append_sheet(je,be,"TeamPaymentReport"),Ne(je,"TeamPaymentReport.xlsx")},f=()=>{xe()},g=N=>!N||isNaN(N)?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(N),t=N=>!N||isNaN(N)?"0":parseInt(N).toLocaleString("en-IN"),n=()=>[{data:"Team Name"},{data:"Team Lead"},{data:"Total Projects"},{data:"Total Amount"},{data:"Paid Amount"},{data:"Pending Amount"}],l=()=>{const N=H();return N.length===0?[]:N.map(($,je)=>({id:$.team_id||je,data:[{data:$.team_name},{data:$.team_lead_name},{data:t($.total_project_count)},{data:g($.total_project_amount)},{data:g($.total_paid_amount)},{data:g($.total_pending_amount)}]}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mt-7 mb-7 ml-8",children:e.jsx("nav",{className:"flex -mb-px",children:R.map(N=>e.jsx("button",{onClick:()=>F(N.id),className:`mr-8 py-4 px-1 border-b-2 font-medium text-sm ${w===N.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:N.label},N.id))})}),w==="teampay"&&e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",children:"Team Payment Report"}),u&&e.jsx("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm",children:"Showing demo data"})]}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:`grid grid-cols-1 ${k!=="superadmin"&&k!=="team-lead"?"md:grid-cols-2 lg:grid-cols-2 gap-3":"md:grid-cols-4 lg:grid-cols-4 gap-20"}`,children:[(k==="superadmin"||k==="team-lead")&&e.jsx(M,{options:re(),selectedValue:j,onSelect:ge,placeholder:"Select Branch",className:"w-[245px]",isLoading:ee,disabled:k==="team-lead"}),(k==="superadmin"||k==="team-lead")&&e.jsx(M,{options:K,selectedValue:v,onSelect:h,placeholder:"Select Team",className:"w-[245px]",disabled:k==="team-lead"?!se:!j,isLoading:_}),e.jsxs("div",{className:"w-[245px] relative",children:[e.jsx(Ce,{selectsRange:!0,startDate:m,endDate:b,onChange:A,placeholderText:"Select date range",className:"w-full p-2 border rounded h-[40px]",isClearable:!0}),(m||b)&&e.jsx("button",{onClick:p,className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:e.jsx(Ie,{size:16})})]}),e.jsx(M,{options:de,selectedValue:c,onSelect:D,placeholder:"Items per page",className:"w-[245px]"})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[e.jsx("div",{className:`flex ${k!=="superadmin"&&k!=="team-lead"?"gap-91":"gap-19"}`,children:e.jsxs("button",{onClick:o,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",disabled:!(a!=null&&a.data)&&!u,children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})}),e.jsx("button",{onClick:f,className:"flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",disabled:(k!=="team-lead"&&k!=="superadmin"?!1:!v||!m||!b)||_,children:_?"Loading...":"Generate Report"})]})]}),_&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),z&&e.jsx("div",{className:"text-red-500 text-center py-4",children:z}),((a==null?void 0:a.data)||u)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg text-[var(--color-primary)] font-semibold mb-2",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Me,{className:"mr-1",size:16})," Team Name"]}),e.jsx("p",{className:"font-medium",children:((r=H()[0])==null?void 0:r.team_name)||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Oe,{className:"mr-1",size:16})," Total Amount"]}),e.jsx("p",{className:"font-medium",children:g((i=H()[0])==null?void 0:i.total_project_amount)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(ze,{className:"mr-1",size:16})," Paid Amount"]}),e.jsx("p",{className:"font-medium",children:g((T=H()[0])==null?void 0:T.total_paid_amount)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ee,{className:"mr-1",size:16})," Pending Amount"]}),e.jsx("p",{className:"font-medium",children:g((I=H()[0])==null?void 0:I.total_pending_amount)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center",children:[e.jsx(Ve,{className:"mr-1",size:16})," Date Range"]}),e.jsxs("p",{className:"font-medium",children:[m?new Date(m).toLocaleDateString():"N/A"," ","-"," ",b?new Date(b).toLocaleDateString():"N/A"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(ze,{className:"mr-2",size:20})," Payment Summary"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:n,tbody:l,responsive:!0,className:"min-w-full"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Ee,{className:"mr-2",size:20})," Project Status Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Draft Projects"}),e.jsx("p",{className:"text-2xl font-semibold",children:t((B=H()[0])==null?void 0:B.total_project_draft)})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Planning Projects"}),e.jsx("p",{className:"text-2xl font-semibold",children:t((De=H()[0])==null?void 0:De.total_project_planning)})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-300 mb-2",children:"In Process Projects"}),e.jsx("p",{className:"text-2xl font-semibold",children:t((Te=H()[0])==null?void 0:Te.total_project_inprocess)})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-semibold",children:t(($e=H()[0])==null?void 0:$e.total_project_active)})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-700 rounded-lg shadow",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Completed Projects"}),e.jsx("p",{className:"text-2xl font-semibold",children:t((Re=H()[0])==null?void 0:Re.total_project_completed)})]})]})]}),e.jsx("div",{className:"bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Se,{total:X,currentPage:L,defaultPageSize:c,onChange:he,paginationLabel:"records",isScroll:!0})})]}),!_&&!a&&!u&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:k!=="team-lead"&&k!=="superadmin"?!m||!b?"Please select date range to generate report":"Click 'Generate Report' to view payment summary":k==="team-lead"?se?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Team and date range":"Loading branch information...":j?v?!m||!b?"Please select date range":"Click 'Generate Report' to view data":"Please select Team":"Please select Branch to view available options"})]}),w==="branchpay"&&e.jsx(St,{})]})})},Ct=()=>{const E=we({query:"(max-width: 768px)"}),[L,y]=s.useState(!1),[_,C]=s.useState([]),[X,W]=s.useState([]),[z,te]=s.useState(""),[j,Y]=s.useState([]),[v,G]=s.useState(""),c=q(u=>u.accessToken),V=q(u=>u.role),a=q(u=>u.branchcode),[Z,m]=s.useState({title:"Campaign Performance",labels:[],datasets:[{label:"Conversion Rate (%)",data:[],backgroundColor:"rgba(34, 197, 94, 0.7)"}]});s.useEffect(()=>{V==="superadmin"&&(async()=>{try{const P=await le.get(`${oe}/branch/dropdown`,{headers:{Authorization:`Bearer ${c}`}});P.data&&P.data.data&&W(P.data.data.map(w=>({value:w.branchcode,label:`${w.branchcode} - ${w.name}`})))}catch(P){console.error("Error fetching branches",P),U.error("Failed to fetch branches")}})()},[c,V]),s.useEffect(()=>{(async()=>{const P=V==="superadmin"?z:a;if(!P){Y([]);return}y(!0);try{const w=await le.get(`${oe}/campaign/overview/dropdown?branchcode=${P}`,{headers:{Authorization:`Bearer ${c}`}});if(w.data&&w.data.data){const F=w.data.data.map(S=>({value:S.campaign_code,label:`${S.campaignname} (${S.campaign_code})`}));Y(F)}}catch(w){console.error("Error fetching campaigns",w),U.error("Failed to fetch campaigns")}finally{y(!1)}})()},[z,a,c,V]),s.useEffect(()=>{(async()=>{const P=V==="superadmin"?z:a;if(!P){C([]);return}y(!0);try{let w=`${oe}/campaign/report/read/profile?branchcode=${P}`;v&&(w+=`&campaign_code=${v}`);const F=await le.get(w,{headers:{Authorization:`Bearer ${c}`}});if(F.data&&F.data.data){C(F.data.data);const S=F.data.data.map(d=>d.campaignname),R=F.data.data.map(d=>parseFloat(d.conversion_rate)||0);m({title:"Campaign Conversion Rates",labels:S,datasets:[{label:"Conversion Rate (%)",data:R,backgroundColor:"rgba(34, 197, 94, 0.7)"}]})}}catch(w){console.error("Error fetching campaign report",w),U.error("Failed to fetch campaign report")}finally{y(!1)}})()},[z,a,v,c,V]);const J=u=>{te(u),G("")},b=u=>{G(u)},ae=()=>{if(!_||_.length===0){U.error("No data to export");return}const u=O.book_new(),P=O.json_to_sheet(_.map(w=>({"Branch Code":w.branchcode,"Campaign Code":w.campaign_code,"Campaign Name":w.campaignname,"Total Leads":w.total_leads,"Leads Assigned":w.leads_assigned,"Total Followups":w.total_followups,"Active Followups":w.active_followups,"Goal Leads":w.goallead,"Conversion Rate (%)":w.conversion_rate})));O.book_append_sheet(u,P,"Campaign Report"),Ne(u,"CampaignReport.xlsx")},K=()=>[{data:"Branch Code"},{data:"Campaign Code"},{data:"Campaign Name"},{data:"Total Leads"},{data:"Leads Assigned"},{data:"Conversion Rate"},{data:"Goal Leads"}],Q=()=>_.map(u=>({id:u.campaign_code,data:[{data:u.branchcode},{data:u.campaign_code},{data:u.campaignname},{data:u.total_leads},{data:u.leads_assigned},{data:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm inline-flex items-center ${parseFloat(u.conversion_rate)>=50?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${parseFloat(u.conversion_rate)>=50?"bg-green-800":"bg-red-700"}`}),u.conversion_rate," %"]})},{data:u.goallead}]}));return e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",children:"Campaign Report"})}),e.jsx(ye,{position:ve,reverseOrder:!1}),e.jsxs("div",{className:"flex flex-col gap-4 mb-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V==="superadmin"&&e.jsx(M,{options:X,selectedValue:z,onSelect:J,placeholder:"Select Branch",className:"w-[250px]",disabled:L}),e.jsx(M,{options:j,selectedValue:v,onSelect:b,placeholder:"Select Campaign",className:"w-[250px]",disabled:L||V==="superadmin"&&!z})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:ae,className:"flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",disabled:L||_.length===0,children:[e.jsx(_e,{className:"mr-1"}),!E&&"Export Excel"]})})]}),L&&e.jsx("div",{className:"text-center py-4",children:"Loading..."}),!L&&_.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex text-gray-700 mb-5 justify-between gap-3",children:[e.jsxs("div",{className:"bg-white w-[250px] h-[230px] flex flex-col justify-items-start justify-evenly rounded-lg shadow-lg ps-8",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-bold font-bold text-xl text-gray-700",children:"Total Client & Leads"})}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"bg-green-400 w-[40px] h-[40px] rounded-full p-1",children:e.jsx(xt,{className:"text-gray-50 text-center",size:28})}),e.jsx("p",{className:"text-gray-500 font-xl mt-2",children:"2 | 50"})]}),e.jsx("div",{children:e.jsx("p",{className:"font-light text-sm",children:"Branch Detail"})})]}),e.jsxs("div",{className:"bg-white w-[250px] h-[230px] flex flex-col justify-items-start justify-evenly rounded-lg shadow-lg ps-8",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-bold font-bold text-xl text-gray-700",children:"Lead Conversion Rate"})}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"bg-indigo-500 w-[40px] h-[40px] rounded-full p-1",children:e.jsx(pt,{className:"text-gray-50 text-center",size:28})}),e.jsx("p",{className:"text-gray-500 font-xl mt-2",children:"2%"})]}),e.jsx("div",{children:e.jsx("p",{className:"font-light text-sm",children:"Leads Detail"})})]}),e.jsx("div",{children:e.jsx(ft,{data:Z,theme:"light",className:"h-[250px]  w-[550px]"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fe,{thead:K,tbody:Q,responsive:!0,className:"min-w-full"})})]}),!L&&_.length===0&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:V==="superadmin"&&!z?"Please select a branch to view campaign reports":"No campaign data available for the selected filters"})]})})},Pt=()=>{const[E,L]=s.useState("leadAnalysis"),[y,_]=s.useState(!1),[C,X]=s.useState(!1),W=[{id:"leadAnalysis",label:"Lead Analysis"},{id:"projectwisereport",label:"Project Summary"},{id:"paymentinsight",label:"Payment Summary"},{id:"employeereport",label:"Employee Summary"}];return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"dark:border-gray-700",children:e.jsx("nav",{className:"flex justify-evenly -mb-px",children:W.map((z,te)=>e.jsxs(e.Fragment,{children:[te>0&&e.jsx("span",{className:"bg-gray-300 w-[50px] h-[2px] mt-5 items-center"}),e.jsx("button",{onClick:()=>L(z.id),className:`font-medium text-sm  ${E===z.id?"text-gray-200 bg-red-700 w-[180px] h-[40px] rounded-sm":"border-transparent text-gray-700 hover:text-red-700 bg-gray-200 w-[180px] h-[40px] rounded-sm"}`,children:z.label},z.id)]}))})}),e.jsxs("div",{className:"p-4 flex-grow",children:[E==="leadAnalysis"&&e.jsx(e.Fragment,{children:e.jsx(Ct,{})}),E=="EmployeeReport"&&e.jsx(bt,{}),E==="projectwisereport"&&e.jsx(vt,{}),E==="employeereport"&&e.jsx(wt,{}),E==="paymentinsight"&&e.jsx(kt,{})]})]})},fa=Ze(Pt);export{fa as default};
