const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-4HENfCPg-DR773atM.js","assets/url-DQYFKQ_E-DsOcrHNn.js","assets/api-C04JdqFc.js","assets/AuthStore-BnYeBJES.js","assets/react-_sXfQCJm.js","assets/chunk-AYJ5UCUI-nSEPIBkT.js","assets/DataTable-DtyPIAGZ.js","assets/index-knF4tUPh.js","assets/app-B5JlI6j0.css","assets/CustomPagination-CBTcVvJz.js","assets/SearchInput-CMdOUuSO.js","assets/index-DxoBGdjx.js","assets/useBranchStore-kvv3vD_e.js","assets/moment-C5S46NFB.js","assets/react-datepicker-agoxPcWL.css","assets/index-BepDdkdq-CvXgvN1D.js"])))=>i.map(i=>d[i]);
import{a as lv,B as hv}from"./api-C04JdqFc.js";import{p as N1}from"./AuthStore-BnYeBJES.js";import{R as zs,r as U,j as D}from"./chunk-AYJ5UCUI-nSEPIBkT.js";import"./DataTable-DtyPIAGZ.js";import"./CustomPagination-CBTcVvJz.js";import"./SearchInput-CMdOUuSO.js";import"./index-DxoBGdjx.js";import"./useBranchStore-kvv3vD_e.js";/* empty css                         */import"./moment-C5S46NFB.js";import{c as F1}from"./react-_sXfQCJm.js";const W1="modulepreload",j1=function(i){return"/"+i},cv={},Ml=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(e.map(u=>{if(u=j1(u),u in cv)return;cv[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":W1,c||(g.as="script"),g.crossOrigin="",g.href=u,h&&g.setAttribute("nonce",h),document.head.appendChild(g),c)return new Promise((v,w)=>{g.addEventListener("load",v),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};var B1=Object.defineProperty,$1=(i,t,e)=>t in i?B1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,ft=(i,t,e)=>($1(i,typeof t!="symbol"?t+"":t,e),e),Sm=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)},o=(i,t,e)=>(Sm(i,t,"read from private field"),e?e.call(i):t.get(i)),m=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},A=(i,t,e,n)=>(Sm(i,t,"write to private field"),t.set(i,e),e),ai=(i,t,e,n)=>({set _(s){A(i,t,s)},get _(){return o(i,t,n)}}),b=(i,t,e)=>(Sm(i,t,"access private method"),e),Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function rI(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),e}var Pa=function(i){return i&&i.Math===Math&&i},Oi=Pa(typeof globalThis=="object"&&globalThis)||Pa(typeof window=="object"&&window)||Pa(typeof self=="object"&&self)||Pa(typeof Ga=="object"&&Ga)||Pa(typeof Ga=="object"&&Ga)||function(){return this}()||Function("return this")(),km={},Qn=function(i){try{return!!i()}catch{return!0}},U1=Qn,Qs=!U1(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),H1=Qn,J0=!H1(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),z1=J0,Rl=Function.prototype.call,Cm=z1?Rl.bind(Rl):function(){return Rl.apply(Rl,arguments)},ty={},ey={}.propertyIsEnumerable,iy=Object.getOwnPropertyDescriptor,V1=iy&&!ey.call({1:2},1);ty.f=V1?function(i){var t=iy(this,i);return!!t&&t.enumerable}:ey;var ny=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}},sy=J0,ry=Function.prototype,Cf=ry.call,G1=sy&&ry.bind.bind(Cf,Cf),gn=sy?G1:function(i){return function(){return Cf.apply(i,arguments)}},ay=gn,q1=ay({}.toString),Y1=ay("".slice),K1=function(i){return Y1(q1(i),8,-1)},X1=gn,Q1=Qn,Z1=K1,Nd=Object,J1=X1("".split),tA=Q1(function(){return!Nd("z").propertyIsEnumerable(0)})?function(i){return Z1(i)==="String"?J1(i,""):Nd(i)}:Nd,oy=function(i){return i==null},eA=oy,iA=TypeError,ly=function(i){if(eA(i))throw new iA("Can't call method on "+i);return i},nA=tA,sA=ly,Mm=function(i){return nA(sA(i))},Fd=typeof document=="object"&&document.all,Ni=typeof Fd>"u"&&Fd!==void 0?function(i){return typeof i=="function"||i===Fd}:function(i){return typeof i=="function"},rA=Ni,rd=function(i){return typeof i=="object"?i!==null:rA(i)},Wd=Oi,aA=Ni,oA=function(i){return aA(i)?i:void 0},hy=function(i,t){return arguments.length<2?oA(Wd[i]):Wd[i]&&Wd[i][t]},lA=gn,hA=lA({}.isPrototypeOf),cA=typeof navigator<"u"&&String(navigator.userAgent)||"",cy=Oi,jd=cA,uv=cy.process,dv=cy.Deno,fv=uv&&uv.versions||dv&&dv.version,pv=fv&&fv.v8,fi,ou;pv&&(fi=pv.split("."),ou=fi[0]>0&&fi[0]<4?1:+(fi[0]+fi[1]));!ou&&jd&&(fi=jd.match(/Edge\/(\d+)/),(!fi||fi[1]>=74)&&(fi=jd.match(/Chrome\/(\d+)/),fi&&(ou=+fi[1])));var uA=ou,gv=uA,dA=Qn,fA=Oi,pA=fA.String,uy=!!Object.getOwnPropertySymbols&&!dA(function(){var i=Symbol("symbol detection");return!pA(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&gv&&gv<41}),gA=uy,dy=gA&&!Symbol.sham&&typeof Symbol.iterator=="symbol",mA=hy,vA=Ni,yA=hA,wA=dy,bA=Object,fy=wA?function(i){return typeof i=="symbol"}:function(i){var t=mA("Symbol");return vA(t)&&yA(t.prototype,bA(i))},AA=String,xA=function(i){try{return AA(i)}catch{return"Object"}},EA=Ni,_A=xA,SA=TypeError,py=function(i){if(EA(i))return i;throw new SA(_A(i)+" is not a function")},kA=py,CA=oy,MA=function(i,t){var e=i[t];return CA(e)?void 0:kA(e)},Bd=Cm,$d=Ni,Ud=rd,RA=TypeError,TA=function(i,t){var e,n;if(t==="string"&&$d(e=i.toString)&&!Ud(n=Bd(e,i))||$d(e=i.valueOf)&&!Ud(n=Bd(e,i))||t!=="string"&&$d(e=i.toString)&&!Ud(n=Bd(e,i)))return n;throw new RA("Can't convert object to primitive value")},gy={exports:{}},mv=Oi,PA=Object.defineProperty,Rm=function(i,t){try{PA(mv,i,{value:t,configurable:!0,writable:!0})}catch{mv[i]=t}return t},LA=Oi,IA=Rm,vv="__core-js_shared__",yv=gy.exports=LA[vv]||IA(vv,{});(yv.versions||(yv.versions=[])).push({version:"3.37.1",mode:"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Tm=gy.exports,wv=Tm,my=function(i,t){return wv[i]||(wv[i]=t||{})},DA=ly,OA=Object,NA=function(i){return OA(DA(i))},FA=gn,WA=NA,jA=FA({}.hasOwnProperty),Zs=Object.hasOwn||function(i,t){return jA(WA(i),t)},BA=gn,$A=0,UA=Math.random(),HA=BA(1 .toString),vy=function(i){return"Symbol("+(i===void 0?"":i)+")_"+HA(++$A+UA,36)},zA=Oi,VA=my,bv=Zs,GA=vy,qA=uy,YA=dy,Vr=zA.Symbol,Hd=VA("wks"),KA=YA?Vr.for||Vr:Vr&&Vr.withoutSetter||GA,XA=function(i){return bv(Hd,i)||(Hd[i]=qA&&bv(Vr,i)?Vr[i]:KA("Symbol."+i)),Hd[i]},QA=Cm,Av=rd,xv=fy,ZA=MA,JA=TA,tx=XA,ex=TypeError,ix=tx("toPrimitive"),nx=function(i,t){if(!Av(i)||xv(i))return i;var e=ZA(i,ix),n;if(e){if(t===void 0&&(t="default"),n=QA(e,i,t),!Av(n)||xv(n))return n;throw new ex("Can't convert object to primitive value")}return t===void 0&&(t="number"),JA(i,t)},sx=nx,rx=fy,yy=function(i){var t=sx(i,"string");return rx(t)?t:t+""},ax=Oi,Ev=rd,Mf=ax.document,ox=Ev(Mf)&&Ev(Mf.createElement),lx=function(i){return ox?Mf.createElement(i):{}},hx=Qs,cx=Qn,ux=lx,wy=!hx&&!cx(function(){return Object.defineProperty(ux("div"),"a",{get:function(){return 7}}).a!==7}),dx=Qs,fx=Cm,px=ty,gx=ny,mx=Mm,vx=yy,yx=Zs,wx=wy,_v=Object.getOwnPropertyDescriptor;km.f=dx?_v:function(i,t){if(i=mx(i),t=vx(t),wx)try{return _v(i,t)}catch{}if(yx(i,t))return gx(!fx(px.f,i,t),i[t])};var ad={},bx=Qs,Ax=Qn,xx=bx&&Ax(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Ex=rd,_x=String,Sx=TypeError,by=function(i){if(Ex(i))return i;throw new Sx(_x(i)+" is not an object")},kx=Qs,Cx=wy,Mx=xx,Tl=by,Sv=yy,Rx=TypeError,zd=Object.defineProperty,Tx=Object.getOwnPropertyDescriptor,Vd="enumerable",Gd="configurable",qd="writable";ad.f=kx?Mx?function(i,t,e){if(Tl(i),t=Sv(t),Tl(e),typeof i=="function"&&t==="prototype"&&"value"in e&&qd in e&&!e[qd]){var n=Tx(i,t);n&&n[qd]&&(i[t]=e.value,e={configurable:Gd in e?e[Gd]:n[Gd],enumerable:Vd in e?e[Vd]:n[Vd],writable:!1})}return zd(i,t,e)}:zd:function(i,t,e){if(Tl(i),t=Sv(t),Tl(e),Cx)try{return zd(i,t,e)}catch{}if("get"in e||"set"in e)throw new Rx("Accessors not supported");return"value"in e&&(i[t]=e.value),i};var Px=Qs,Lx=ad,Ix=ny,Ay=Px?function(i,t,e){return Lx.f(i,t,Ix(1,e))}:function(i,t,e){return i[t]=e,i},xy={exports:{}},Rf=Qs,Dx=Zs,Ey=Function.prototype,Ox=Rf&&Object.getOwnPropertyDescriptor,Nx=Dx(Ey,"name"),Fx=Nx&&(!Rf||Rf&&Ox(Ey,"name").configurable),Wx={CONFIGURABLE:Fx},jx=gn,Bx=Ni,Tf=Tm,$x=jx(Function.toString);Bx(Tf.inspectSource)||(Tf.inspectSource=function(i){return $x(i)});var Ux=Tf.inspectSource,Hx=Oi,zx=Ni,kv=Hx.WeakMap,Vx=zx(kv)&&/native code/.test(String(kv)),Gx=my,qx=vy,Cv=Gx("keys"),Yx=function(i){return Cv[i]||(Cv[i]=qx(i))},_y={},Kx=Vx,Sy=Oi,Xx=Ay,Yd=Zs,Kd=Tm,Qx=Yx,Zx=_y,Mv="Object already initialized",Rv=Sy.TypeError,Jx=Sy.WeakMap,Pf,lu,Lf,tE=function(i){return Lf(i)?lu(i):Pf(i,{})};if(Kx||Kd.state){var gi=Kd.state||(Kd.state=new Jx);gi.get=gi.get,gi.has=gi.has,gi.set=gi.set,Pf=function(i,t){if(gi.has(i))throw new Rv(Mv);return t.facade=i,gi.set(i,t),t},lu=function(i){return gi.get(i)||{}},Lf=function(i){return gi.has(i)}}else{var nr=Qx("state");Zx[nr]=!0,Pf=function(i,t){if(Yd(i,nr))throw new Rv(Mv);return t.facade=i,Xx(i,nr,t),t},lu=function(i){return Yd(i,nr)?i[nr]:{}},Lf=function(i){return Yd(i,nr)}}var eE={get:lu,enforce:tE},Pm=gn,iE=Qn,nE=Ni,Pl=Zs,If=Qs,sE=Wx.CONFIGURABLE,rE=Ux,ky=eE,aE=ky.enforce,oE=ky.get,Tv=String,sh=Object.defineProperty,lE=Pm("".slice),hE=Pm("".replace),cE=Pm([].join),uE=If&&!iE(function(){return sh(function(){},"length",{value:8}).length!==8}),dE=String(String).split("String"),fE=xy.exports=function(i,t,e){lE(Tv(t),0,7)==="Symbol("&&(t="["+hE(Tv(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!Pl(i,"name")||sE&&i.name!==t)&&(If?sh(i,"name",{value:t,configurable:!0}):i.name=t),uE&&e&&Pl(e,"arity")&&i.length!==e.arity&&sh(i,"length",{value:e.arity});try{e&&Pl(e,"constructor")&&e.constructor?If&&sh(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch{}var n=aE(i);return Pl(n,"source")||(n.source=cE(dE,typeof t=="string"?t:"")),i};Function.prototype.toString=fE(function(){return nE(this)&&oE(this).source||rE(this)},"toString");var pE=xy.exports,gE=Ni,mE=ad,vE=pE,yE=Rm,wE=function(i,t,e,n){n||(n={});var s=n.enumerable,r=n.name!==void 0?n.name:t;if(gE(e)&&vE(e,r,n),n.global)s?i[t]=e:yE(t,e);else{try{n.unsafe?i[t]&&(s=!0):delete i[t]}catch{}s?i[t]=e:mE.f(i,t,{value:e,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return i},Cy={},bE=Math.ceil,AE=Math.floor,xE=Math.trunc||function(i){var t=+i;return(t>0?AE:bE)(t)},EE=xE,My=function(i){var t=+i;return t!==t||t===0?0:EE(t)},_E=My,SE=Math.max,kE=Math.min,CE=function(i,t){var e=_E(i);return e<0?SE(e+t,0):kE(e,t)},ME=My,RE=Math.min,TE=function(i){var t=ME(i);return t>0?RE(t,9007199254740991):0},PE=TE,LE=function(i){return PE(i.length)},IE=Mm,DE=CE,OE=LE,NE=function(i){return function(t,e,n){var s=IE(t),r=OE(s);if(r===0)return!i&&-1;var a=DE(n,r),l;if(i&&e!==e){for(;r>a;)if(l=s[a++],l!==l)return!0}else for(;r>a;a++)if((i||a in s)&&s[a]===e)return i||a||0;return!i&&-1}},FE={indexOf:NE(!1)},WE=gn,Xd=Zs,jE=Mm,BE=FE.indexOf,$E=_y,Pv=WE([].push),UE=function(i,t){var e=jE(i),n=0,s=[],r;for(r in e)!Xd($E,r)&&Xd(e,r)&&Pv(s,r);for(;t.length>n;)Xd(e,r=t[n++])&&(~BE(s,r)||Pv(s,r));return s},HE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zE=UE,VE=HE,GE=VE.concat("length","prototype");Cy.f=Object.getOwnPropertyNames||function(i){return zE(i,GE)};var Ry={};Ry.f=Object.getOwnPropertySymbols;var qE=hy,YE=gn,KE=Cy,XE=Ry,QE=by,ZE=YE([].concat),JE=qE("Reflect","ownKeys")||function(i){var t=KE.f(QE(i)),e=XE.f;return e?ZE(t,e(i)):t},Lv=Zs,t_=JE,e_=km,i_=ad,n_=function(i,t,e){for(var n=t_(t),s=i_.f,r=e_.f,a=0;a<n.length;a++){var l=n[a];!Lv(i,l)&&!(e&&Lv(e,l))&&s(i,l,r(t,l))}},s_=Qn,r_=Ni,a_=/#|\.prototype\./,Al=function(i,t){var e=l_[o_(i)];return e===c_?!0:e===h_?!1:r_(t)?s_(t):!!t},o_=Al.normalize=function(i){return String(i).replace(a_,".").toLowerCase()},l_=Al.data={},h_=Al.NATIVE="N",c_=Al.POLYFILL="P",u_=Al,Ll=Oi,d_=km.f,f_=Ay,p_=wE,g_=Rm,m_=n_,v_=u_,y_=function(i,t){var e=i.target,n=i.global,s=i.stat,r,a,l,h,u,c;if(n?a=Ll:s?a=Ll[e]||g_(e,{}):a=Ll[e]&&Ll[e].prototype,a)for(l in t){if(u=t[l],i.dontCallGetSet?(c=d_(a,l),h=c&&c.value):h=a[l],r=v_(n?l:e+(s?".":"#")+l,i.forced),!r&&h!==void 0){if(typeof u==typeof h)continue;m_(u,h)}(i.sham||h&&h.sham)&&f_(u,"sham",!0),p_(a,l,u,i)}},Ty={},Iv=py,w_=TypeError,b_=function(i){var t,e;this.promise=new i(function(n,s){if(t!==void 0||e!==void 0)throw new w_("Bad Promise constructor");t=n,e=s}),this.resolve=Iv(t),this.reject=Iv(e)};Ty.f=function(i){return new b_(i)};var A_=y_,x_=Ty;A_({target:"Promise",stat:!0},{withResolvers:function(){var i=x_.f(this);return{promise:i.promise,resolve:i.resolve,reject:i.reject}}});function E_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Py={exports:{}},zt=Py.exports={},Si,ki;function Df(){throw new Error("setTimeout has not been defined")}function Of(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Si=setTimeout:Si=Df}catch{Si=Df}try{typeof clearTimeout=="function"?ki=clearTimeout:ki=Of}catch{ki=Of}})();function Ly(i){if(Si===setTimeout)return setTimeout(i,0);if((Si===Df||!Si)&&setTimeout)return Si=setTimeout,setTimeout(i,0);try{return Si(i,0)}catch{try{return Si.call(null,i,0)}catch{return Si.call(this,i,0)}}}function __(i){if(ki===clearTimeout)return clearTimeout(i);if((ki===Of||!ki)&&clearTimeout)return ki=clearTimeout,clearTimeout(i);try{return ki(i)}catch{try{return ki.call(null,i)}catch{return ki.call(this,i)}}}var cn=[],la=!1,Ls,rh=-1;function S_(){!la||!Ls||(la=!1,Ls.length?cn=Ls.concat(cn):rh=-1,cn.length&&Iy())}function Iy(){if(!la){var i=Ly(S_);la=!0;for(var t=cn.length;t;){for(Ls=cn,cn=[];++rh<t;)Ls&&Ls[rh].run();rh=-1,t=cn.length}Ls=null,la=!1,__(i)}}zt.nextTick=function(i){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];cn.push(new Dy(i,t)),cn.length===1&&!la&&Ly(Iy)};function Dy(i,t){this.fun=i,this.array=t}Dy.prototype.run=function(){this.fun.apply(null,this.array)};zt.title="browser";zt.browser=!0;zt.env={};zt.argv=[];zt.version="";zt.versions={};function mn(){}zt.on=mn;zt.addListener=mn;zt.once=mn;zt.off=mn;zt.removeListener=mn;zt.removeAllListeners=mn;zt.emit=mn;zt.prependListener=mn;zt.prependOnceListener=mn;zt.listeners=function(i){return[]};zt.binding=function(i){throw new Error("process.binding is not supported")};zt.cwd=function(){return"/"};zt.chdir=function(i){throw new Error("process.chdir is not supported")};zt.umask=function(){return 0};var k_=Py.exports;const ut=E_(k_);var Se=function(){return Se=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Se.apply(this,arguments)};function Vs(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}function C_(i){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=i(e)),t[e]}}var M_=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,R_=C_(function(i){return M_.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),Ft="-ms-",Vo="-moz-",kt="-webkit-",Oy="comm",od="rule",Lm="decl",T_="@import",Ny="@keyframes",P_="@layer",Fy=Math.abs,Im=String.fromCharCode,Nf=Object.assign;function L_(i,t){return oe(i,0)^45?(((t<<2^oe(i,0))<<2^oe(i,1))<<2^oe(i,2))<<2^oe(i,3):0}function Wy(i){return i.trim()}function Qi(i,t){return(i=t.exec(i))?i[0]:i}function mt(i,t,e){return i.replace(t,e)}function ah(i,t,e){return i.indexOf(t,e)}function oe(i,t){return i.charCodeAt(t)|0}function Aa(i,t,e){return i.slice(t,e)}function Ti(i){return i.length}function jy(i){return i.length}function qa(i,t){return t.push(i),i}function I_(i,t){return i.map(t).join("")}function Dv(i,t){return i.filter(function(e){return!Qi(e,t)})}var ld=1,xa=1,By=0,oi=0,Yt=0,Ma="";function hd(i,t,e,n,s,r,a,l){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:ld,column:xa,length:a,return:"",siblings:l}}function yn(i,t){return Nf(hd("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function sr(i){for(;i.root;)i=yn(i.root,{children:[i]});qa(i,i.siblings)}function D_(){return Yt}function O_(){return Yt=oi>0?oe(Ma,--oi):0,xa--,Yt===10&&(xa=1,ld--),Yt}function pi(){return Yt=oi<By?oe(Ma,oi++):0,xa++,Yt===10&&(xa=1,ld++),Yt}function Us(){return oe(Ma,oi)}function oh(){return oi}function cd(i,t){return Aa(Ma,i,t)}function Ff(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N_(i){return ld=xa=1,By=Ti(Ma=i),oi=0,[]}function F_(i){return Ma="",i}function Qd(i){return Wy(cd(oi-1,Wf(i===91?i+2:i===40?i+1:i)))}function W_(i){for(;(Yt=Us())&&Yt<33;)pi();return Ff(i)>2||Ff(Yt)>3?"":" "}function j_(i,t){for(;--t&&pi()&&!(Yt<48||Yt>102||Yt>57&&Yt<65||Yt>70&&Yt<97););return cd(i,oh()+(t<6&&Us()==32&&pi()==32))}function Wf(i){for(;pi();)switch(Yt){case i:return oi;case 34:case 39:i!==34&&i!==39&&Wf(Yt);break;case 40:i===41&&Wf(i);break;case 92:pi();break}return oi}function B_(i,t){for(;pi()&&i+Yt!==57&&!(i+Yt===84&&Us()===47););return"/*"+cd(t,oi-1)+"*"+Im(i===47?i:pi())}function $_(i){for(;!Ff(Us());)pi();return cd(i,oi)}function U_(i){return F_(lh("",null,null,null,[""],i=N_(i),0,[0],i))}function lh(i,t,e,n,s,r,a,l,h){for(var u=0,c=0,f=a,g=0,v=0,w=0,x=1,E=1,_=1,C=0,R="",P=s,I=r,F=n,L=R;E;)switch(w=C,C=pi()){case 40:if(w!=108&&oe(L,f-1)==58){ah(L+=mt(Qd(C),"&","&\f"),"&\f",Fy(u?l[u-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:L+=Qd(C);break;case 9:case 10:case 13:case 32:L+=W_(w);break;case 92:L+=j_(oh()-1,7);continue;case 47:switch(Us()){case 42:case 47:qa(H_(B_(pi(),oh()),t,e,h),h);break;default:L+="/"}break;case 123*x:l[u++]=Ti(L)*_;case 125*x:case 59:case 0:switch(C){case 0:case 125:E=0;case 59+c:_==-1&&(L=mt(L,/\f/g,"")),v>0&&Ti(L)-f&&qa(v>32?Nv(L+";",n,e,f-1,h):Nv(mt(L," ","")+";",n,e,f-2,h),h);break;case 59:L+=";";default:if(qa(F=Ov(L,t,e,u,c,s,l,R,P=[],I=[],f,r),r),C===123)if(c===0)lh(L,t,F,F,P,r,f,l,I);else switch(g===99&&oe(L,3)===110?100:g){case 100:case 108:case 109:case 115:lh(i,F,F,n&&qa(Ov(i,F,F,0,0,s,l,R,s,P=[],f,I),I),s,I,f,l,n?P:I);break;default:lh(L,F,F,F,[""],I,0,l,I)}}u=c=v=0,x=_=1,R=L="",f=a;break;case 58:f=1+Ti(L),v=w;default:if(x<1){if(C==123)--x;else if(C==125&&x++==0&&O_()==125)continue}switch(L+=Im(C),C*x){case 38:_=c>0?1:(L+="\f",-1);break;case 44:l[u++]=(Ti(L)-1)*_,_=1;break;case 64:Us()===45&&(L+=Qd(pi())),g=Us(),c=f=Ti(R=L+=$_(oh())),C++;break;case 45:w===45&&Ti(L)==2&&(x=0)}}return r}function Ov(i,t,e,n,s,r,a,l,h,u,c,f){for(var g=s-1,v=s===0?r:[""],w=jy(v),x=0,E=0,_=0;x<n;++x)for(var C=0,R=Aa(i,g+1,g=Fy(E=a[x])),P=i;C<w;++C)(P=Wy(E>0?v[C]+" "+R:mt(R,/&\f/g,v[C])))&&(h[_++]=P);return hd(i,t,e,s===0?od:l,h,u,c,f)}function H_(i,t,e,n){return hd(i,t,e,Oy,Im(D_()),Aa(i,2,-2),0,n)}function Nv(i,t,e,n,s){return hd(i,t,e,Lm,Aa(i,0,n),Aa(i,n+1,-1),n,s)}function $y(i,t,e){switch(L_(i,t)){case 5103:return kt+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kt+i+i;case 4789:return Vo+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return kt+i+Vo+i+Ft+i+i;case 5936:switch(oe(i,t+11)){case 114:return kt+i+Ft+mt(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return kt+i+Ft+mt(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return kt+i+Ft+mt(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return kt+i+Ft+i+i;case 6165:return kt+i+Ft+"flex-"+i+i;case 5187:return kt+i+mt(i,/(\w+).+(:[^]+)/,kt+"box-$1$2"+Ft+"flex-$1$2")+i;case 5443:return kt+i+Ft+"flex-item-"+mt(i,/flex-|-self/g,"")+(Qi(i,/flex-|baseline/)?"":Ft+"grid-row-"+mt(i,/flex-|-self/g,""))+i;case 4675:return kt+i+Ft+"flex-line-pack"+mt(i,/align-content|flex-|-self/g,"")+i;case 5548:return kt+i+Ft+mt(i,"shrink","negative")+i;case 5292:return kt+i+Ft+mt(i,"basis","preferred-size")+i;case 6060:return kt+"box-"+mt(i,"-grow","")+kt+i+Ft+mt(i,"grow","positive")+i;case 4554:return kt+mt(i,/([^-])(transform)/g,"$1"+kt+"$2")+i;case 6187:return mt(mt(mt(i,/(zoom-|grab)/,kt+"$1"),/(image-set)/,kt+"$1"),i,"")+i;case 5495:case 3959:return mt(i,/(image-set\([^]*)/,kt+"$1$`$1");case 4968:return mt(mt(i,/(.+:)(flex-)?(.*)/,kt+"box-pack:$3"+Ft+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+kt+i+i;case 4200:if(!Qi(i,/flex-|baseline/))return Ft+"grid-column-align"+Aa(i,t)+i;break;case 2592:case 3360:return Ft+mt(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,Qi(n.props,/grid-\w+-end/)})?~ah(i+(e=e[t].value),"span",0)?i:Ft+mt(i,"-start","")+i+Ft+"grid-row-span:"+(~ah(e,"span",0)?Qi(e,/\d+/):+Qi(e,/\d+/)-+Qi(i,/\d+/))+";":Ft+mt(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return Qi(n.props,/grid-\w+-start/)})?i:Ft+mt(mt(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return mt(i,/(.+)-inline(.+)/,kt+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ti(i)-1-t>6)switch(oe(i,t+1)){case 109:if(oe(i,t+4)!==45)break;case 102:return mt(i,/(.+:)(.+)-([^]+)/,"$1"+kt+"$2-$3$1"+Vo+(oe(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~ah(i,"stretch",0)?$y(mt(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return mt(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,l,h,u){return Ft+s+":"+r+u+(a?Ft+s+"-span:"+(l?h:+h-+r)+u:"")+i});case 4949:if(oe(i,t+6)===121)return mt(i,":",":"+kt)+i;break;case 6444:switch(oe(i,oe(i,14)===45?18:11)){case 120:return mt(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+kt+(oe(i,14)===45?"inline-":"")+"box$3$1"+kt+"$2$3$1"+Ft+"$2box$3")+i;case 100:return mt(i,":",":"+Ft)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return mt(i,"scroll-","scroll-snap-")+i}return i}function hu(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function z_(i,t,e,n){switch(i.type){case P_:if(i.children.length)break;case T_:case Lm:return i.return=i.return||i.value;case Oy:return"";case Ny:return i.return=i.value+"{"+hu(i.children,n)+"}";case od:if(!Ti(i.value=i.props.join(",")))return""}return Ti(e=hu(i.children,n))?i.return=i.value+"{"+e+"}":""}function V_(i){var t=jy(i);return function(e,n,s,r){for(var a="",l=0;l<t;l++)a+=i[l](e,n,s,r)||"";return a}}function G_(i){return function(t){t.root||(t=t.return)&&i(t)}}function q_(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case Lm:i.return=$y(i.value,i.length,e);return;case Ny:return hu([yn(i,{value:mt(i.value,"@","@"+kt)})],n);case od:if(i.length)return I_(e=i.props,function(s){switch(Qi(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":sr(yn(i,{props:[mt(s,/:(read-\w+)/,":"+Vo+"$1")]})),sr(yn(i,{props:[s]})),Nf(i,{props:Dv(e,n)});break;case"::placeholder":sr(yn(i,{props:[mt(s,/:(plac\w+)/,":"+kt+"input-$1")]})),sr(yn(i,{props:[mt(s,/:(plac\w+)/,":"+Vo+"$1")]})),sr(yn(i,{props:[mt(s,/:(plac\w+)/,Ft+"input-$1")]})),sr(yn(i,{props:[s]})),Nf(i,{props:Dv(e,n)});break}return""})}}var Y_={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gs=typeof ut<"u"&&ut.env!==void 0&&(ut.env.REACT_APP_SC_ATTR||ut.env.SC_ATTR)||"data-styled",Uy="active",Hy="data-styled-version",ud="6.1.11",Dm=`/*!sc*/
`,Om=typeof window<"u"&&"HTMLElement"in window,K_=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof ut<"u"&&ut.env!==void 0&&ut.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ut.env.REACT_APP_SC_DISABLE_SPEEDY!==""?ut.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ut.env.REACT_APP_SC_DISABLE_SPEEDY:typeof ut<"u"&&ut.env!==void 0&&ut.env.SC_DISABLE_SPEEDY!==void 0&&ut.env.SC_DISABLE_SPEEDY!==""?ut.env.SC_DISABLE_SPEEDY!=="false"&&ut.env.SC_DISABLE_SPEEDY:ut.env.NODE_ENV!=="production"),Fv=/invalid hook call/i,Il=new Set,X_=function(i,t){if(ut.env.NODE_ENV!=="production"){var e=t?' with the id of "'.concat(t,'"'):"",n="The component ".concat(i).concat(e,` has been created dynamically.
`)+`You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,s=console.error;try{var r=!0;console.error=function(a){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];Fv.test(a)?(r=!1,Il.delete(n)):s.apply(void 0,Vs([a],l,!1))},U.useRef(),r&&!Il.has(n)&&(console.warn(n),Il.add(n))}catch(a){Fv.test(a.message)&&Il.delete(n)}finally{console.error=s}}},dd=Object.freeze([]),Ea=Object.freeze({});function Q_(i,t,e){return e===void 0&&(e=Ea),i.theme!==e.theme&&i.theme||t||e.theme}var jf=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Z_=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,J_=/(^-|-$)/g;function Wv(i){return i.replace(Z_,"-").replace(J_,"")}var tS=/(a)(d)/gi,Dl=52,jv=function(i){return String.fromCharCode(i+(i>25?39:97))};function Bf(i){var t,e="";for(t=Math.abs(i);t>Dl;t=t/Dl|0)e=jv(t%Dl)+e;return(jv(t%Dl)+e).replace(tS,"$1-$2")}var Zd,zy=5381,Es=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},Vy=function(i){return Es(zy,i)};function Gy(i){return Bf(Vy(i)>>>0)}function qy(i){return ut.env.NODE_ENV!=="production"&&typeof i=="string"&&i||i.displayName||i.name||"Component"}function Jd(i){return typeof i=="string"&&(ut.env.NODE_ENV==="production"||i.charAt(0)===i.charAt(0).toLowerCase())}var Yy=typeof Symbol=="function"&&Symbol.for,Ky=Yy?Symbol.for("react.memo"):60115,eS=Yy?Symbol.for("react.forward_ref"):60112,iS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Xy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sS=((Zd={})[eS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Zd[Ky]=Xy,Zd);function Bv(i){return("type"in(t=i)&&t.type.$$typeof)===Ky?Xy:"$$typeof"in i?sS[i.$$typeof]:iS;var t}var rS=Object.defineProperty,aS=Object.getOwnPropertyNames,$v=Object.getOwnPropertySymbols,oS=Object.getOwnPropertyDescriptor,lS=Object.getPrototypeOf,Uv=Object.prototype;function Qy(i,t,e){if(typeof t!="string"){if(Uv){var n=lS(t);n&&n!==Uv&&Qy(i,n,e)}var s=aS(t);$v&&(s=s.concat($v(t)));for(var r=Bv(i),a=Bv(t),l=0;l<s.length;++l){var h=s[l];if(!(h in nS||e&&e[h]||a&&h in a||r&&h in r)){var u=oS(t,h);try{rS(i,h,u)}catch{}}}}return i}function qs(i){return typeof i=="function"}function Nm(i){return typeof i=="object"&&"styledComponentId"in i}function Is(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function $f(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function _a(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function Uf(i,t,e){if(e===void 0&&(e=!1),!e&&!_a(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=Uf(i[n],t[n]);else if(_a(t))for(var n in t)i[n]=Uf(i[n],t[n]);return i}function Fm(i,t){Object.defineProperty(i,"toString",{value:t})}var hS=ut.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`,18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function cS(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];for(var e=i[0],n=[],s=1,r=i.length;s<r;s+=1)n.push(i[s]);return n.forEach(function(a){e=e.replace(/%[a-z]/,a)}),e}function dn(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return ut.env.NODE_ENV==="production"?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):new Error(cS.apply(void 0,Vs([hS[i]],t,!1)).trim())}var uS=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw dn(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),h=(a=0,e.length);a<h;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,a=s;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(Dm);return e},i}(),dS=1<<30,hh=new Map,cu=new Map,ch=1,Ol=function(i){if(hh.has(i))return hh.get(i);for(;cu.has(ch);)ch++;var t=ch++;if(ut.env.NODE_ENV!=="production"&&((0|t)<0||t>dS))throw dn(16,"".concat(t));return hh.set(i,t),cu.set(t,i),t},fS=function(i,t){ch=t+1,hh.set(i,t),cu.set(t,i)},pS="style[".concat(Gs,"][").concat(Hy,'="').concat(ud,'"]'),gS=new RegExp("^".concat(Gs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),mS=function(i,t,e){for(var n,s=e.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(t,n)},vS=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(Dm),s=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var h=l.match(gS);if(h){var u=0|parseInt(h[1],10),c=h[2];u!==0&&(fS(c,u),mS(i,c,h[3]),i.getTag().insertRules(u,s)),s.length=0}else s.push(l)}}};function yS(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Zy=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(l){var h=Array.from(l.querySelectorAll("style[".concat(Gs,"]")));return h[h.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(Gs,Uy),n.setAttribute(Hy,ud);var a=yS();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},wS=function(){function i(t){this.element=Zy(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===e)return a}throw dn(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),bS=function(){function i(t){this.element=Zy(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),AS=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),Hv=Om,xS={isServer:!Om,useCSSOMInjection:!K_},Jy=function(){function i(t,e,n){t===void 0&&(t=Ea),e===void 0&&(e={});var s=this;this.options=Se(Se({},xS),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&Om&&Hv&&(Hv=!1,function(r){for(var a=document.querySelectorAll(pS),l=0,h=a.length;l<h;l++){var u=a[l];u&&u.getAttribute(Gs)!==Uy&&(vS(r,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),Fm(this,function(){return function(r){for(var a=r.getTag(),l=a.length,h="",u=function(f){var g=function(_){return cu.get(_)}(f);if(g===void 0)return"continue";var v=r.names.get(g),w=a.getGroup(f);if(v===void 0||w.length===0)return"continue";var x="".concat(Gs,".g").concat(f,'[id="').concat(g,'"]'),E="";v!==void 0&&v.forEach(function(_){_.length>0&&(E+="".concat(_,","))}),h+="".concat(w).concat(x,'{content:"').concat(E,'"}').concat(Dm)},c=0;c<l;c++)u(c);return h}(s)})}return i.registerId=function(t){return Ol(t)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(Se(Se({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new AS(s):n?new wS(s):new bS(s)}(this.options),new uS(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(Ol(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(Ol(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(Ol(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),ES=/&/g,_S=/^\s*\/\/.*$/gm;function tw(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=tw(e.children,t)),e})}function SS(i){var t,e,n,s=Ea,r=s.options,a=r===void 0?Ea:r,l=s.plugins,h=l===void 0?dd:l,u=function(g,v,w){return w.startsWith(e)&&w.endsWith(e)&&w.replaceAll(e,"").length>0?".".concat(t):g},c=h.slice();c.push(function(g){g.type===od&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(ES,e).replace(n,u))}),a.prefix&&c.push(q_),c.push(z_);var f=function(g,v,w,x){v===void 0&&(v=""),w===void 0&&(w=""),x===void 0&&(x="&"),t=x,e=v,n=new RegExp("\\".concat(e,"\\b"),"g");var E=g.replace(_S,""),_=U_(w||v?"".concat(w," ").concat(v," { ").concat(E," }"):E);a.namespace&&(_=tw(_,a.namespace));var C=[];return hu(_,V_(c.concat(G_(function(R){return C.push(R)})))),C};return f.hash=h.length?h.reduce(function(g,v){return v.name||dn(15),Es(g,v.name)},zy).toString():"",f}var kS=new Jy,Hf=SS(),ew=zs.createContext({shouldForwardProp:void 0,styleSheet:kS,stylis:Hf});ew.Consumer;zs.createContext(void 0);function zv(){return U.useContext(ew)}var zf=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=Hf);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,Fm(this,function(){throw dn(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=Hf),this.name+t.hash},i}(),CS=function(i){return i>="A"&&i<="Z"};function Vv(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;CS(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var iw=function(i){return i==null||i===!1||i===""},nw=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!iw(r)&&(Array.isArray(r)&&r.isCss||qs(r)?n.push("".concat(Vv(s),":"),r,";"):_a(r)?n.push.apply(n,Vs(Vs(["".concat(s," {")],nw(r),!1),["}"],!1)):n.push("".concat(Vv(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in Y_||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Hs(i,t,e,n){if(iw(i))return[];if(Nm(i))return[".".concat(i.styledComponentId)];if(qs(i)){if(!qs(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return ut.env.NODE_ENV==="production"||typeof s!="object"||Array.isArray(s)||s instanceof zf||_a(s)||s===null||console.error("".concat(qy(i)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),Hs(s,t,e,n)}var r;return i instanceof zf?e?(i.inject(e,n),[i.getName(n)]):[i]:_a(i)?nw(i):Array.isArray(i)?Array.prototype.concat.apply(dd,i.map(function(a){return Hs(a,t,e,n)})):[i.toString()]}function MS(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(qs(e)&&!Nm(e))return!1}return!0}var RS=Vy(ud),TS=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=ut.env.NODE_ENV==="production"&&(n===void 0||n.isStatic)&&MS(t),this.componentId=e,this.baseHash=Es(RS,e),this.baseStyle=n,Jy.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=Is(s,this.staticRulesId);else{var r=$f(Hs(this.rules,t,e,n)),a=Bf(Es(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}s=Is(s,a),this.staticRulesId=a}else{for(var h=Es(this.baseHash,n.hash),u="",c=0;c<this.rules.length;c++){var f=this.rules[c];if(typeof f=="string")u+=f,ut.env.NODE_ENV!=="production"&&(h=Es(h,f));else if(f){var g=$f(Hs(f,t,e,n));h=Es(h,g+c),u+=g}}if(u){var v=Bf(h>>>0);e.hasNameForId(this.componentId,v)||e.insertRules(this.componentId,v,n(u,".".concat(v),void 0,this.componentId)),s=Is(s,v)}}return s},i}(),uu=zs.createContext(void 0);uu.Consumer;function PS(i){var t=zs.useContext(uu),e=U.useMemo(function(){return function(n,s){if(!n)throw dn(14);if(qs(n)){var r=n(s);if(ut.env.NODE_ENV!=="production"&&(r===null||Array.isArray(r)||typeof r!="object"))throw dn(7);return r}if(Array.isArray(n)||typeof n!="object")throw dn(8);return s?Se(Se({},s),n):n}(i.theme,t)},[i.theme,t]);return i.children?zs.createElement(uu.Provider,{value:e},i.children):null}var tf={},Gv=new Set;function LS(i,t,e){var n=Nm(i),s=i,r=!Jd(i),a=t.attrs,l=a===void 0?dd:a,h=t.componentId,u=h===void 0?function(P,I){var F=typeof P!="string"?"sc":Wv(P);tf[F]=(tf[F]||0)+1;var L="".concat(F,"-").concat(Gy(ud+F+tf[F]));return I?"".concat(I,"-").concat(L):L}(t.displayName,t.parentComponentId):h,c=t.displayName,f=c===void 0?function(P){return Jd(P)?"styled.".concat(P):"Styled(".concat(qy(P),")")}(i):c,g=t.displayName&&t.componentId?"".concat(Wv(t.displayName),"-").concat(t.componentId):t.componentId||u,v=n&&s.attrs?s.attrs.concat(l).filter(Boolean):l,w=t.shouldForwardProp;if(n&&s.shouldForwardProp){var x=s.shouldForwardProp;if(t.shouldForwardProp){var E=t.shouldForwardProp;w=function(P,I){return x(P,I)&&E(P,I)}}else w=x}var _=new TS(e,g,n?s.componentStyle:void 0);function C(P,I){return function(F,L,S){var k=F.attrs,O=F.componentStyle,N=F.defaultProps,B=F.foldedComponentIds,$=F.styledComponentId,Y=F.target,X=zs.useContext(uu),z=zv(),W=F.shouldForwardProp||z.shouldForwardProp;ut.env.NODE_ENV!=="production"&&U.useDebugValue($);var at=Q_(L,X,N)||Ea,G=function(J,nt,et){for(var vt,q=Se(Se({},nt),{className:void 0,theme:et}),Q=0;Q<J.length;Q+=1){var dt=qs(vt=J[Q])?vt(q):vt;for(var gt in dt)q[gt]=gt==="className"?Is(q[gt],dt[gt]):gt==="style"?Se(Se({},q[gt]),dt[gt]):dt[gt]}return nt.className&&(q.className=Is(q.className,nt.className)),q}(k,L,at),bt=G.as||Y,pt={};for(var H in G)G[H]===void 0||H[0]==="$"||H==="as"||H==="theme"&&G.theme===at||(H==="forwardedAs"?pt.as=G.forwardedAs:W&&!W(H,bt)||(pt[H]=G[H],W||ut.env.NODE_ENV!=="development"||R_(H)||Gv.has(H)||!jf.has(bt)||(Gv.add(H),console.warn('styled-components: it looks like an unknown prop "'.concat(H,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var it=function(J,nt){var et=zv(),vt=J.generateAndInjectStyles(nt,et.styleSheet,et.stylis);return ut.env.NODE_ENV!=="production"&&U.useDebugValue(vt),vt}(O,G);ut.env.NODE_ENV!=="production"&&F.warnTooManyClasses&&F.warnTooManyClasses(it);var tt=Is(B,$);return it&&(tt+=" "+it),G.className&&(tt+=" "+G.className),pt[Jd(bt)&&!jf.has(bt)?"class":"className"]=tt,pt.ref=S,U.createElement(bt,pt)}(R,P,I)}C.displayName=f;var R=zs.forwardRef(C);return R.attrs=v,R.componentStyle=_,R.displayName=f,R.shouldForwardProp=w,R.foldedComponentIds=n?Is(s.foldedComponentIds,s.styledComponentId):"",R.styledComponentId=g,R.target=n?s.target:i,Object.defineProperty(R,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(P){this._foldedDefaultProps=n?function(I){for(var F=[],L=1;L<arguments.length;L++)F[L-1]=arguments[L];for(var S=0,k=F;S<k.length;S++)Uf(I,k[S],!0);return I}({},s.defaultProps,P):P}}),ut.env.NODE_ENV!=="production"&&(X_(f,g),R.warnTooManyClasses=function(P,I){var F={},L=!1;return function(S){if(!L&&(F[S]=!0,Object.keys(F).length>=200)){var k=I?' with the id of "'.concat(I,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(P).concat(k,`.
`)+`Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),L=!0,F={}}}}(f,g)),Fm(R,function(){return".".concat(R.styledComponentId)}),r&&Qy(R,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),R}function qv(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var Yv=function(i){return Object.assign(i,{isCss:!0})};function fd(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(qs(i)||_a(i))return Yv(Hs(qv(dd,Vs([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?Hs(n):Yv(Hs(qv(n,t)))}function Vf(i,t,e){if(e===void 0&&(e=Ea),!t)throw dn(1,t);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(t,e,fd.apply(void 0,Vs([s],r,!1)))};return n.attrs=function(s){return Vf(i,t,Se(Se({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return Vf(i,t,Se(Se({},e),s))},n}var sw=function(i){return Vf(LS,i)},wt=sw;jf.forEach(function(i){wt[i]=sw(i)});function IS(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];ut.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var n=$f(fd.apply(void 0,Vs([i],t,!1))),s=Gy(n);return new zf(s,n)}ut.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`);var Nl="__sc-".concat(Gs,"__");ut.env.NODE_ENV!=="production"&&ut.env.NODE_ENV!=="test"&&typeof window<"u"&&(window[Nl]||(window[Nl]=0),window[Nl]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window[Nl]+=1);const DS="Document {{ currentFileNo }} of {{ allFilesCount }}",OS="No renderer for file type: {{{ fileType }}}",NS="Download file",FS="Your file is broken. Please check it on your machine.",WS="Recipients",jS="Sender",BS="Loading...",$S="Page {{ currentPage }}/{{ allPagesCount }}",US={documentNavInfo:DS,noRendererMessage:OS,downloadButtonLabel:NS,brokenFile:FS,msgPluginRecipients:WS,msgPluginSender:jS,pdfPluginLoading:BS,pdfPluginPageNumber:$S},HS="Dokument {{ currentFileNo }} z {{ allFilesCount }}",zS="Brak funckji renderujÄcej dla: {{{ fileType }}}",VS="Pobierz plik",GS="TwÃ³j plik jest uszkodzony. SprawdÅº go na swoim komputerze.",qS="Odbiorcy",YS="Nadawca",KS="Wczytywanie...",XS="Strona {{ currentPage }}/{{ allPagesCount }}",QS={documentNavInfo:HS,noRendererMessage:zS,downloadButtonLabel:VS,brokenFile:GS,msgPluginRecipients:qS,msgPluginSender:YS,pdfPluginLoading:KS,pdfPluginPageNumber:XS},ZS="Documento {{ currentFileNo }} de {{ allFilesCount }}",JS="No hay procesador para el tipo de archivo: {{{ fileType }}}",tk="Descargar archivo",ek="Tu archivo estÃ¡ roto. CompruÃ©balo en tu mÃ¡quina.",ik="Destinatarios",nk="Remitente",sk="Cargando...",rk="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",ak={documentNavInfo:ZS,noRendererMessage:JS,downloadButtonLabel:tk,brokenFile:ek,msgPluginRecipients:ik,msgPluginSender:nk,pdfPluginLoading:sk,pdfPluginPageNumber:rk},ok="Dokument {{ currentFileNo }} von {{ allFilesCount }}",lk="Kein Renderer fÃ¼r Dateityp: {{{ fileType }}}",hk="Datei herunterladen",ck="Ihre Datei ist defekt. Bitte Ã¼berprÃ¼fen Sie sie auf Ihrem Rechner.",uk="EmpfÃ¤nger",dk="Absender",fk="Wird geladen...",pk="Seite {{ currentPage }}/{{ allPagesCount }}",gk={documentNavInfo:ok,noRendererMessage:lk,downloadButtonLabel:hk,brokenFile:ck,msgPluginRecipients:uk,msgPluginSender:dk,pdfPluginLoading:fk,pdfPluginPageNumber:pk},mk="Documento {{ currentFileNo }} di {{ allFilesCount }}",vk="Nessun renderer per il tipo di file: {{{ fileType }}}",yk="Scarica file",wk="Il tuo file Ã¨ danneggiato. Controllalo sul tuo computer.",bk="Destinatari",Ak="Mittente",xk="Caricamento in corso...",Ek="Pagina {{ currentPage }}/{{ allPagesCount }}",_k={documentNavInfo:mk,noRendererMessage:vk,downloadButtonLabel:yk,brokenFile:wk,msgPluginRecipients:bk,msgPluginSender:Ak,pdfPluginLoading:xk,pdfPluginPageNumber:Ek},Sk="Documento {{ currentFileNo }} de {{ allFilesCount }}",kk="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",Ck="Baixar arquivo",Mk="Seu arquivo estÃ¡ quebrado. Por favor, verifique-o em sua mÃ¡quina.",Rk="DestinatÃ¡rios",Tk="Remetente",Pk="Carregando...",Lk="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",Ik={documentNavInfo:Sk,noRendererMessage:kk,downloadButtonLabel:Ck,brokenFile:Mk,msgPluginRecipients:Rk,msgPluginSender:Tk,pdfPluginLoading:Pk,pdfPluginPageNumber:Lk},Dk="Document {{ currentFileNo }} de {{ allFilesCount }}",Ok="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",Nk="TÃ©lÃ©charger le fichier",Fk="Votre fichier est cassÃ©. Veuillez le vÃ©rifier sur votre machine.",Wk="Destinataires",jk="ExpÃ©diteur",Bk="Chargement...",$k="Page {{ currentPage }}/{{ allPagesCount }}",Uk={documentNavInfo:Dk,noRendererMessage:Ok,downloadButtonLabel:Nk,brokenFile:Fk,msgPluginRecipients:Wk,msgPluginSender:jk,pdfPluginLoading:Bk,pdfPluginPageNumber:$k},Hk="ÙØ³ØªÙØ¯ {{ currentFileNo }} ÙÙ {{ allFilesCount }}",zk="{{{ fileType }}} : ÙØ§ ÙÙÙÙÙØ§ Ø¹Ø±Ø¶ ÙØ°Ø§ Ø§ÙÙÙØ¹ ÙÙ Ø§ÙÙÙÙØ§Øª",Vk="ØªØ­ÙÙÙ Ø§ÙÙÙÙ",Gk="Ø§ÙÙÙÙ ØªØ§ÙÙØ ÙØ±Ø¬Ù Ø§ÙØªØ­ÙÙ ÙÙÙ Ø¹ÙÙ Ø¬ÙØ§Ø²Ù Ø§ÙØ®Ø§Øµ.",qk="Ø§ÙÙØ³ØªÙÙÙÙ",Yk="Ø§ÙÙØ±Ø³Ù",Kk="ØªØ­ÙÙÙ ...",Xk=" {{ allPagesCount }} \\ {{ currentPage }} ØµÙØ­Ø© ",Qk={documentNavInfo:Hk,noRendererMessage:zk,downloadButtonLabel:Vk,brokenFile:Gk,msgPluginRecipients:qk,msgPluginSender:Yk,pdfPluginLoading:Kk,pdfPluginPageNumber:Xk},Zk="Dokument {{ currentFileNo }} od {{ allFilesCount }}",Jk="Ne postoji pregledaÄ za tip fajla: {{ fileType }}",tC="Preuzimanje fajla",eC="VaÅ¡ fajl nije dobar. Molimo Vas da probate da ga otvorite na vaÅ¡em raÄunaru.",iC="Primaoci",nC="PoÅ¡iljalac",sC="UÄitavanje...",rC="Strana {{ currentPage }}/{{ allPagesCount }}",aC={documentNavInfo:Zk,noRendererMessage:Jk,downloadButtonLabel:tC,brokenFile:eC,msgPluginRecipients:iC,msgPluginSender:nC,pdfPluginLoading:sC,pdfPluginPageNumber:rC},oC="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} od {{ allFilesCount }}",lC="ÐÐµ Ð¿Ð¾ÑÑÐ¾ÑÐ¸ Ð¿ÑÐµÐ³Ð»ÐµÐ´Ð°Ñ Ð·Ð° ÑÐ¸Ð¿ ÑÐ°ÑÐ»Ð°: {{ fileType }}",hC="ÐÑÐµÑÐ·Ð¸Ð¼Ð°ÑÐµ ÑÐ°ÑÐ»Ð°",cC="ÐÐ°Ñ ÑÐ°ÑÐ» Ð½Ð¸ÑÐµ Ð´Ð¾Ð±Ð°Ñ. ÐÐ¾Ð»Ð¸Ð¼Ð¾ ÐÐ°Ñ Ð´Ð° Ð¿ÑÐ¾Ð±Ð°ÑÐµ Ð´Ð° Ð³Ð° Ð¾ÑÐ²Ð¾ÑÐ¸ÑÐµ Ð½Ð° Ð²Ð°ÑÐµÐ¼ ÑÐ°ÑÑÐ½Ð°ÑÑ.",uC="ÐÑÐ¸Ð¼Ð°Ð¾ÑÐ¸",dC="ÐÐ¾ÑÐ¸ÑÐ°Ð»Ð°Ñ",fC="Ð£ÑÐ¸ÑÐ°Ð²Ð°ÑÐµ...",pC="Ð¡ÑÑÐ°Ð½Ð° {{ currentPage }}/{{ allPagesCount }}",gC={documentNavInfo:oC,noRendererMessage:lC,downloadButtonLabel:hC,brokenFile:cC,msgPluginRecipients:uC,msgPluginSender:dC,pdfPluginLoading:fC,pdfPluginPageNumber:pC},mC="ãã¡ã¤ã« {{ currentFileNo }} / {{ allFilesCount }}",vC="ãã¡ã¤ã«ã¿ã¤ãã«å¯¾å¿ããã¬ã³ãã©ã¼ã¯ããã¾ãã: {{ fileType }}",yC="ãã¦ã³ã­ã¼ã",wC="ãã¡ã¤ã«ãå£ãã¦ãã¾ããããªãã®ãã·ã³ã§ãã¡ã¤ã«ãç¢ºèªãã¦ãã ããã",bC="åä¿¡è",AC="éä¿¡è",xC="ã­ã¼ãã£ã³ã°ä¸­...",EC="ãã¼ã¸ {{ currentPage }}/{{ allPagesCount }}",_C={documentNavInfo:mC,noRendererMessage:vC,downloadButtonLabel:yC,brokenFile:wC,msgPluginRecipients:bC,msgPluginSender:AC,pdfPluginLoading:xC,pdfPluginPageNumber:EC},SC="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} Ð¸Ð· {{ allFilesCount }}",kC="ÐÐ°Ð½Ð½ÑÐ¹ ÑÐ¸Ð¿ ÑÐ°Ð¹Ð»Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑÑÑ ÑÐµÐ½Ð´ÐµÑÐ¾Ð¼: {{{ fileType }}}",CC="Ð¡ÐºÐ°ÑÐ°ÑÑ ÑÐ°Ð¹Ð»",MC="ÐÐ°Ñ ÑÐ°Ð¹Ð» ÑÐ»Ð¾Ð¼Ð°Ð½. ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°, Ð¿ÑÐ¾Ð²ÐµÑÑÑÐµ ÐµÐ³Ð¾ Ð½Ð° ÑÐ²Ð¾ÑÐ¼ ÐºÐ¾Ð¼ÑÑÑÐµÑÐµ.",RC="ÐÐ¾Ð»ÑÑÐ°ÑÐµÐ»Ð¸",TC="ÐÑÐ¿ÑÐ°Ð²Ð¸ÑÐµÐ»Ñ",PC="ÐÐ°Ð³ÑÑÐ·ÐºÐ°...",LC="Ð¡ÑÑÐ°Ð½Ð¸ÑÐ° {{ currentPage }}/{{ allPagesCount }}",IC={documentNavInfo:SC,noRendererMessage:kC,downloadButtonLabel:CC,brokenFile:MC,msgPluginRecipients:RC,msgPluginSender:TC,pdfPluginLoading:PC,pdfPluginPageNumber:LC},DC="Dokument {{ currentFileNo }} av {{ allFilesCount }}",OC="Ingen renderare fÃ¶r filtypen: {{{ fileType }}}",NC="Ladda ner",FC="Filen Ã¤r trasig. Var vÃ¤nlig kontrollera den pÃ¥ din maskin.",WC="Mottagare",jC="AvsÃ¤ndare",BC="Laddar...",$C="Sida {{ currentPage }}/{{ allPagesCount }}",UC={documentNavInfo:DC,noRendererMessage:OC,downloadButtonLabel:NC,brokenFile:FC,msgPluginRecipients:WC,msgPluginSender:jC,pdfPluginLoading:BC,pdfPluginPageNumber:$C},Gf={en:US,pl:QS,es:ak,de:gk,it:_k,pt:Ik,fr:Uk,ar:Qk,sr:aC,sr_cyr:gC,ja:_C,ru:IC,se:UC},Wm="en",rw="SET_ALL_DOCUMENTS",aw="SET_DOCUMENT_LOADING",ow="NEXT_DOCUMENT",lw="PREVIOUS_DOCUMENT",hw="UPDATE_CURRENT_DOCUMENT",cw="SET_RENDERER_RECT",uw="SET_MAIN_CONFIG",HC=(i,t)=>({type:rw,documents:i,initialActiveDocument:t}),ef=i=>({type:aw,value:i}),jm=()=>({type:ow}),Bm=()=>({type:lw}),qf=i=>({type:hw,document:i}),zC=i=>({type:cw,rect:i}),VC=i=>({type:uw,config:i}),du={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:Wm},GC=(i=du,t)=>{switch(t.type){case rw:{const{documents:e,initialActiveDocument:n}=t;return{...i,documents:e,currentDocument:n||e[0]||null,currentFileNo:n&&e.includes(n)?e.indexOf(n):du.currentFileNo}}case aw:{const{value:e}=t;return{...i,documentLoading:e}}case ow:{if(i.currentFileNo>=i.documents.length-1)return i;const e=i.currentFileNo+1;return i.onDocumentChange&&i.onDocumentChange(i.documents[e]),{...i,currentFileNo:e,currentDocument:i.documents[e],documentLoading:!0}}case lw:{if(i.currentFileNo<=0)return i;const e=i.currentFileNo-1;return i.onDocumentChange&&i.onDocumentChange(i.documents[e]),{...i,currentFileNo:i.currentFileNo-1,currentDocument:i.documents[e],documentLoading:!0}}case hw:{const{document:e}=t;return{...i,currentDocument:e,currentFileNo:i.documents.findIndex(n=>n.uri===e.uri)}}case cw:{const{rect:e}=t;return{...i,rendererRect:e}}case uw:{const{config:e}=t;return{...i,config:e}}default:return i}},Zn=U.createContext({state:du,dispatch:()=>null}),qC=U.forwardRef((i,t)=>{const{children:e,documents:n,config:s,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,initialActiveDocument:h,language:u,activeDocument:c,onDocumentChange:f}=i,[g,v]=U.useReducer(GC,{...du,documents:n||[],currentDocument:n&&n.length?h||n[0]:void 0,config:s,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,currentFileNo:h?n.findIndex(w=>w===h)??0:0,language:u&&Gf[u]?u:Wm,activeDocument:c,onDocumentChange:f});return U.useEffect(()=>{v(HC(n,h)),s&&v(VC(s))},[n,s,h]),U.useEffect(()=>{c&&v(qf(c))},[c]),U.useImperativeHandle(t,()=>({prev(){v(Bm())},next(){v(jm())}}),[v]),D.jsx(Zn.Provider,{value:{state:g,dispatch:v},children:e})}),YC=fd`
  background-color: ${i=>i.theme.primary};
  color: ${i=>i.theme.textPrimary};
`,KC=fd`
  background-color: ${i=>i.theme.secondary};
  color: ${i=>i.theme.textSecondary};
`,pd=wt.button`
  ${YC}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${i=>i.disabled?.4:1};
  pointer-events: ${i=>i.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,dw=wt.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${i=>i.theme.primary};
  color: ${i=>i.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;wt(pd)``;const XC=wt(pd)`
  ${KC}
`,QC=i=>D.jsx(fw,{...i}),ZC=i=>D.jsx(fw,{...i,reverse:!0}),fw=({color:i,size:t,reverse:e})=>D.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${e?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:D.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:i||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),JC=i=>{const{color:t,size:e}=i;return D.jsx("svg",{width:e||"100%",height:e||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:D.jsxs("g",{children:[D.jsx("path",{fill:t||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),D.jsx("path",{fill:t||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),D.jsx("path",{fill:t||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),D.jsx("path",{fill:t||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),D.jsx("path",{fill:t||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),D.jsx("path",{fill:t||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),D.jsx("path",{fill:t||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),D.jsx("path",{fill:t||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var tM=Object.prototype.toString,Ra=Array.isArray||function(i){return tM.call(i)==="[object Array]"};function $m(i){return typeof i=="function"}function eM(i){return Ra(i)?"array":typeof i}function nf(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Kv(i,t){return i!=null&&typeof i=="object"&&t in i}function iM(i,t){return i!=null&&typeof i!="object"&&i.hasOwnProperty&&i.hasOwnProperty(t)}var nM=RegExp.prototype.test;function sM(i,t){return nM.call(i,t)}var rM=/\S/;function aM(i){return!sM(rM,i)}var oM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function lM(i){return String(i).replace(/[&<>"'`=\/]/g,function(t){return oM[t]})}var hM=/\s*/,cM=/\s+/,Xv=/\s*=/,uM=/\s*\}/,dM=/#|\^|\/|>|\{|&|=|!/;function fM(i,t){if(!i)return[];var e=!1,n=[],s=[],r=[],a=!1,l=!1,h="",u=0;function c(){if(a&&!l)for(;r.length;)delete s[r.pop()];else r=[];a=!1,l=!1}var f,g,v;function w(S){if(typeof S=="string"&&(S=S.split(cM,2)),!Ra(S)||S.length!==2)throw new Error("Invalid tags: "+S);f=new RegExp(nf(S[0])+"\\s*"),g=new RegExp("\\s*"+nf(S[1])),v=new RegExp("\\s*"+nf("}"+S[1]))}w(t||qe.tags);for(var x=new xl(i),E,_,C,R,P,I;!x.eos();){if(E=x.pos,C=x.scanUntil(f),C)for(var F=0,L=C.length;F<L;++F)R=C.charAt(F),aM(R)?(r.push(s.length),h+=R):(l=!0,e=!0,h+=" "),s.push(["text",R,E,E+1]),E+=1,R===`
`&&(c(),h="",u=0,e=!1);if(!x.scan(f))break;if(a=!0,_=x.scan(dM)||"name",x.scan(hM),_==="="?(C=x.scanUntil(Xv),x.scan(Xv),x.scanUntil(g)):_==="{"?(C=x.scanUntil(v),x.scan(uM),x.scanUntil(g),_="&"):C=x.scanUntil(g),!x.scan(g))throw new Error("Unclosed tag at "+x.pos);if(_==">"?P=[_,C,E,x.pos,h,u,e]:P=[_,C,E,x.pos],u++,s.push(P),_==="#"||_==="^")n.push(P);else if(_==="/"){if(I=n.pop(),!I)throw new Error('Unopened section "'+C+'" at '+E);if(I[1]!==C)throw new Error('Unclosed section "'+I[1]+'" at '+E)}else _==="name"||_==="{"||_==="&"?l=!0:_==="="&&w(C)}if(c(),I=n.pop(),I)throw new Error('Unclosed section "'+I[1]+'" at '+x.pos);return gM(pM(s))}function pM(i){for(var t=[],e,n,s=0,r=i.length;s<r;++s)e=i[s],e&&(e[0]==="text"&&n&&n[0]==="text"?(n[1]+=e[1],n[3]=e[3]):(t.push(e),n=e));return t}function gM(i){for(var t=[],e=t,n=[],s,r,a=0,l=i.length;a<l;++a)switch(s=i[a],s[0]){case"#":case"^":e.push(s),n.push(s),e=s[4]=[];break;case"/":r=n.pop(),r[5]=s[2],e=n.length>0?n[n.length-1][4]:t;break;default:e.push(s)}return t}function xl(i){this.string=i,this.tail=i,this.pos=0}xl.prototype.eos=function(){return this.tail===""};xl.prototype.scan=function(i){var t=this.tail.match(i);if(!t||t.index!==0)return"";var e=t[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e};xl.prototype.scanUntil=function(i){var t=this.tail.search(i),e;switch(t){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=e.length,e};function Sa(i,t){this.view=i,this.cache={".":this.view},this.parent=t}Sa.prototype.push=function(i){return new Sa(i,this)};Sa.prototype.lookup=function(i){var t=this.cache,e;if(t.hasOwnProperty(i))e=t[i];else{for(var n=this,s,r,a,l=!1;n;){if(i.indexOf(".")>0)for(s=n.view,r=i.split("."),a=0;s!=null&&a<r.length;)a===r.length-1&&(l=Kv(s,r[a])||iM(s,r[a])),s=s[r[a++]];else s=n.view[i],l=Kv(n.view,i);if(l){e=s;break}n=n.parent}t[i]=e}return $m(e)&&(e=e.call(this.view)),e};function Le(){this.templateCache={_cache:{},set:function(i,t){this._cache[i]=t},get:function(i){return this._cache[i]},clear:function(){this._cache={}}}}Le.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Le.prototype.parse=function(i,t){var e=this.templateCache,n=i+":"+(t||qe.tags).join(":"),s=typeof e<"u",r=s?e.get(n):void 0;return r==null&&(r=fM(i,t),s&&e.set(n,r)),r};Le.prototype.render=function(i,t,e,n){var s=this.getConfigTags(n),r=this.parse(i,s),a=t instanceof Sa?t:new Sa(t,void 0);return this.renderTokens(r,a,e,i,n)};Le.prototype.renderTokens=function(i,t,e,n,s){for(var r="",a,l,h,u=0,c=i.length;u<c;++u)h=void 0,a=i[u],l=a[0],l==="#"?h=this.renderSection(a,t,e,n,s):l==="^"?h=this.renderInverted(a,t,e,n,s):l===">"?h=this.renderPartial(a,t,e,s):l==="&"?h=this.unescapedValue(a,t):l==="name"?h=this.escapedValue(a,t,s):l==="text"&&(h=this.rawValue(a)),h!==void 0&&(r+=h);return r};Le.prototype.renderSection=function(i,t,e,n,s){var r=this,a="",l=t.lookup(i[1]);function h(f){return r.render(f,t,e,s)}if(l){if(Ra(l))for(var u=0,c=l.length;u<c;++u)a+=this.renderTokens(i[4],t.push(l[u]),e,n,s);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")a+=this.renderTokens(i[4],t.push(l),e,n,s);else if($m(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(t.view,n.slice(i[3],i[5]),h),l!=null&&(a+=l)}else a+=this.renderTokens(i[4],t,e,n,s);return a}};Le.prototype.renderInverted=function(i,t,e,n,s){var r=t.lookup(i[1]);if(!r||Ra(r)&&r.length===0)return this.renderTokens(i[4],t,e,n,s)};Le.prototype.indentPartial=function(i,t,e){for(var n=t.replace(/[^ \t]/g,""),s=i.split(`
`),r=0;r<s.length;r++)s[r].length&&(r>0||!e)&&(s[r]=n+s[r]);return s.join(`
`)};Le.prototype.renderPartial=function(i,t,e,n){if(e){var s=this.getConfigTags(n),r=$m(e)?e(i[1]):e[i[1]];if(r!=null){var a=i[6],l=i[5],h=i[4],u=r;l==0&&h&&(u=this.indentPartial(r,h,a));var c=this.parse(u,s);return this.renderTokens(c,t,e,u,n)}}};Le.prototype.unescapedValue=function(i,t){var e=t.lookup(i[1]);if(e!=null)return e};Le.prototype.escapedValue=function(i,t,e){var n=this.getConfigEscape(e)||qe.escape,s=t.lookup(i[1]);if(s!=null)return typeof s=="number"&&n===qe.escape?String(s):n(s)};Le.prototype.rawValue=function(i){return i[1]};Le.prototype.getConfigTags=function(i){return Ra(i)?i:i&&typeof i=="object"?i.tags:void 0};Le.prototype.getConfigEscape=function(i){if(i&&typeof i=="object"&&!Ra(i))return i.escape};var qe={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(i){yl.templateCache=i},get templateCache(){return yl.templateCache}},yl=new Le;qe.clearCache=function(){return yl.clearCache()};qe.parse=function(i,t){return yl.parse(i,t)};qe.render=function(i,t,e,n){if(typeof i!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+eM(i)+'" was given as the first argument for mustache#render(template, view, partials)');return yl.render(i,t,e,n)};qe.escape=lM;qe.Scanner=xl;qe.Context=Sa;qe.Writer=Le;const Js=()=>{const{state:{language:i}}=U.useContext(Zn),t=Gf[Wm];return{t:U.useCallback((e,n)=>{const s=Gf[i];return s[e]?qe.render(s[e],n):t[e]?qe.render(t[e],n):e},[i,t])}},mM=()=>{const{state:{currentDocument:i,currentFileNo:t,documents:e},dispatch:n}=U.useContext(Zn),{t:s}=Js();if(e.length<=1||!i)return null;let r=i.uri||"";const a=r==null?void 0:r.split("/");return a.length&&(r=a[a.length-1]),D.jsxs(vM,{id:"doc-nav",children:[D.jsx("p",{id:"doc-nav-info",children:s("documentNavInfo",{currentFileNo:t+1,allFilesCount:e.length})}),D.jsx(pw,{id:"doc-nav-prev",onClick:()=>n(Bm()),disabled:t===0,children:D.jsx(QC,{color:"#fff",size:"60%"})}),D.jsx(yM,{id:"doc-nav-next",onClick:()=>n(jm()),disabled:t>=e.length-1,children:D.jsx(ZC,{color:"#fff",size:"60%"})})]})},vM=wt.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${i=>i.theme.textPrimary};
`,pw=wt(XC)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,yM=wt(pw)`
  margin: 0 5px;
`,gw=(i,t)=>{var e;if(!i)return"";let n="";if(i.fileName)n=i.fileName;else{n=i.uri||"",n=decodeURI(n),t||(n=(e=n==null?void 0:n.split("?"))==null?void 0:e[0]);const s=n==null?void 0:n.split("/");s.length&&(n=s[s.length-1])}return n},wM=()=>{var i,t;const{state:{config:e,currentDocument:n}}=U.useContext(Zn);if(!n||(i=e==null?void 0:e.header)!=null&&i.disableFileName)return null;const s=gw(n,((t=e==null?void 0:e.header)==null?void 0:t.retainURLParams)||!1);return D.jsx(bM,{id:"file-name","data-testid":"file-name",children:s})},bM=wt.div`
  flex: 1;
  text-align: left;
  color: ${i=>i.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,AM=()=>{var i,t,e;const{state:n,dispatch:s}=U.useContext(Zn),{config:r}=n;return(i=r==null?void 0:r.header)!=null&&i.disableHeader?null:((e=(t=r==null?void 0:r.header)==null?void 0:t.overrideComponent)==null?void 0:e.call(t,n,()=>s(Bm()),()=>s(jm())))||D.jsxs(xM,{id:"header-bar","data-testid":"header-bar",children:[D.jsx(wM,{}),D.jsx(mM,{})]})},xM=wt.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${i=>i.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,Um=({documentURI:i,signal:t,fileLoaderComplete:e,readerTypeFunction:n,headers:s})=>fetch(i,{signal:t,headers:s}).then(async r=>{const a=await r.blob(),l=new FileReader;switch(l.addEventListener("loadend",()=>e(l)),n){case"arrayBuffer":l.readAsArrayBuffer(a);break;case"binaryString":l.readAsBinaryString(a);break;case"dataURL":l.readAsDataURL(a);break;case"text":l.readAsText(a);break}}).catch(r=>r),EM=i=>Um({...i,readerTypeFunction:"arrayBuffer"}),mw=i=>Um({...i,readerTypeFunction:"dataURL"}),vw=i=>Um({...i,readerTypeFunction:"text"}),_M=mw,SM=()=>{const{state:{currentDocument:i,pluginRenderers:t}}=U.useContext(Zn),[e,n]=U.useState();return U.useEffect(()=>{if(!i)return;if(!i.fileType){n(void 0);return}const s=[];t==null||t.forEach(a=>{i.fileType!==void 0&&a.fileTypes.indexOf(i.fileType)>=0&&s.push(a)});const[r]=s.sort((a,l)=>l.weight-a.weight);n(r&&r!==void 0?()=>r:null)},[i,t]),{CurrentRenderer:e}},kM=()=>{const{state:i,dispatch:t}=U.useContext(Zn),{currentFileNo:e,currentDocument:n,prefetchMethod:s}=i,{CurrentRenderer:r}=SM(),a=(n==null?void 0:n.uri)||"";return U.useEffect(()=>{if(!n||n.fileType!==void 0)return;const l=new AbortController,{signal:h}=l;return fetch(a,{method:s||a.startsWith("blob:")?"GET":"HEAD",signal:h,headers:i==null?void 0:i.requestHeaders}).then(u=>{const c=u.headers.get("content-type"),f=(c==null?void 0:c.split(";"))||[],g=f.length?f[0]:void 0;t(qf({...n,fileType:g||void 0}))}).catch(u=>{if((u==null?void 0:u.name)!=="AbortError")throw u}),()=>{l.abort()}},[e,a,n]),U.useEffect(()=>{var l;if(!n||r===void 0)return;const h=new AbortController,{signal:u}=h,c={documentURI:a,signal:u,fileLoaderComplete:f=>{if(!n||!f){t(ef(!1));return}const g={...n};f.result!==null&&(g.fileData=f.result),t(qf(g)),t(ef(!1))},headers:i==null?void 0:i.requestHeaders};return r===null?t(ef(!1)):r.fileLoader!==void 0?(l=r.fileLoader)==null||l.call(r,c):_M(c),()=>{h.abort()}},[r,e]),{state:i,dispatch:t,CurrentRenderer:r}},CM=()=>{const[i,t]=U.useState({width:void 0,height:void 0});return U.useEffect(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),i},Qv=({children:i})=>{var t,e;const{state:n}=U.useContext(Zn),{config:s}=n,[r,a]=U.useState(((t=s==null?void 0:s.loadingRenderer)==null?void 0:t.showLoadingTimeout)===!1);return U.useEffect(()=>{var l;setTimeout(()=>{a(!0)},typeof((l=s==null?void 0:s.loadingRenderer)==null?void 0:l.showLoadingTimeout)=="number"?s.loadingRenderer.showLoadingTimeout:500)},[(e=s==null?void 0:s.loadingRenderer)==null?void 0:e.showLoadingTimeout]),r?D.jsx(D.Fragment,{children:i}):null},MM=({documents:i,documentLoading:t,config:e,currentDocument:n,fileName:s,CurrentRenderer:r,state:a,t:l})=>{var h,u;if(i.length)if(t){if(e&&(h=e==null?void 0:e.loadingRenderer)!=null&&h.overrideComponent){const c=e.loadingRenderer.overrideComponent;return D.jsx(Qv,{children:D.jsx(c,{document:n,fileName:s})})}return D.jsx(Qv,{children:D.jsx(TM,{id:"loading-renderer","data-testid":"loading-renderer",children:D.jsx(LM,{children:D.jsx(JC,{color:"#444",size:40})})})})}else{if(r)return D.jsx(r,{mainState:a});if(r===void 0)return null;if(e&&(u=e==null?void 0:e.noRenderer)!=null&&u.overrideComponent){const c=e.noRenderer.overrideComponent;return D.jsx(c,{document:n,fileName:s})}return D.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[l("noRendererMessage",{fileType:(n==null?void 0:n.fileType)??""}),D.jsx(IM,{id:"no-renderer-download",href:n==null?void 0:n.uri,download:n==null?void 0:n.uri,children:l("downloadButtonLabel")})]})}else return D.jsx("div",{id:"no-documents"})},RM=()=>{var i;const{state:t,dispatch:e,CurrentRenderer:n}=kM(),{documents:s,documentLoading:r,currentDocument:a,config:l}=t,h=CM(),{t:u}=Js(),c=U.useCallback(g=>{g&&e(zC(g==null?void 0:g.getBoundingClientRect()))},[h,e]),f=gw(a,((i=l==null?void 0:l.header)==null?void 0:i.retainURLParams)||!1);return D.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:c,children:D.jsx(MM,{state:t,documents:s,documentLoading:r,config:l,currentDocument:a,fileName:f,CurrentRenderer:n,t:u})})},TM=wt.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,PM=IS`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,LM=wt.div`
  animation-name: ${PM};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,IM=wt(dw)`
  width: 130px;
  height: 30px;
  background-color: ${i=>i.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,Zv={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},fn=i=>{const{mainState:{currentDocument:t},children:e}=i;return t?D.jsx(DM,{id:"image-renderer",...i,children:e||D.jsx(OM,{id:"image-img",src:t.fileData})}):null};fn.fileTypes=[];fn.weight=0;const DM=wt.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,OM=wt.img`
  max-width: 95%;
  max-height: 95%;
`,Hm=i=>D.jsx(fn,{...i});Hm.fileTypes=["bmp","image/bmp"];Hm.weight=0;const gd=({mainState:{currentDocument:i}})=>(U.useEffect(()=>{const t=i==null?void 0:i.fileData;let e="";const n=(t==null?void 0:t.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(h,u)=>(e=u,"")))||"";let s=window.atob(n);if(e){const h=new Uint8Array(s.length);for(let u=0;u<s.length;u++)h[u]=s.charCodeAt(u);s=new TextDecoder(e).decode(h)}const r=document.getElementById("html-body"),a=(r==null?void 0:r.contentWindow)&&r.contentWindow;if(!a)return;const l=a.document;l.open(),l.write(`${s}`),l.close()},[i]),D.jsx(NM,{id:"html-renderer",children:D.jsx(FM,{id:"html-body",sandbox:"allow-same-origin"})}));gd.fileTypes=["htm","html","text/htm","text/html"];gd.weight=0;gd.fileLoader=mw;const NM=wt.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,FM=wt.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${i=>i.theme.secondary};
`,zm=i=>D.jsx(fn,{...i});zm.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];zm.weight=0;const md=({mainState:{currentDocument:i}})=>i?D.jsx(WM,{id:"msdoc-renderer",children:D.jsx(jM,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(i.uri)}`,frameBorder:"0"})}):null,ts={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};md.fileTypes=[...ts.odt,...ts.doc,...ts.docx,...ts.xls,...ts.xlsx,...ts.ppt,...ts.pptx];md.weight=0;md.fileLoader=({fileLoaderComplete:i})=>i();const WM=wt.div`
  width: 100%;
`,jM=wt.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;var Jt={},vd={};vd.byteLength=UM;vd.toByteArray=zM;vd.fromByteArray=qM;var Li=[],ei=[],BM=typeof Uint8Array<"u"?Uint8Array:Array,sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rr=0,$M=sf.length;rr<$M;++rr)Li[rr]=sf[rr],ei[sf.charCodeAt(rr)]=rr;ei[45]=62;ei[95]=63;function yw(i){var t=i.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=i.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function UM(i){var t=yw(i),e=t[0],n=t[1];return(e+n)*3/4-n}function HM(i,t,e){return(t+e)*3/4-e}function zM(i){var t,e=yw(i),n=e[0],s=e[1],r=new BM(HM(i,n,s)),a=0,l=s>0?n-4:n,h;for(h=0;h<l;h+=4)t=ei[i.charCodeAt(h)]<<18|ei[i.charCodeAt(h+1)]<<12|ei[i.charCodeAt(h+2)]<<6|ei[i.charCodeAt(h+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=t&255;return s===2&&(t=ei[i.charCodeAt(h)]<<2|ei[i.charCodeAt(h+1)]>>4,r[a++]=t&255),s===1&&(t=ei[i.charCodeAt(h)]<<10|ei[i.charCodeAt(h+1)]<<4|ei[i.charCodeAt(h+2)]>>2,r[a++]=t>>8&255,r[a++]=t&255),r}function VM(i){return Li[i>>18&63]+Li[i>>12&63]+Li[i>>6&63]+Li[i&63]}function GM(i,t,e){for(var n,s=[],r=t;r<e;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(VM(n));return s.join("")}function qM(i){for(var t,e=i.length,n=e%3,s=[],r=16383,a=0,l=e-n;a<l;a+=r)s.push(GM(i,a,a+r>l?l:a+r));return n===1?(t=i[e-1],s.push(Li[t>>2]+Li[t<<4&63]+"==")):n===2&&(t=(i[e-2]<<8)+i[e-1],s.push(Li[t>>10]+Li[t>>4&63]+Li[t<<2&63]+"=")),s.join("")}var Vm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Vm.read=function(i,t,e,n,s){var r,a,l=s*8-n-1,h=(1<<l)-1,u=h>>1,c=-7,f=e?s-1:0,g=e?-1:1,v=i[t+f];for(f+=g,r=v&(1<<-c)-1,v>>=-c,c+=l;c>0;r=r*256+i[t+f],f+=g,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=n;c>0;a=a*256+i[t+f],f+=g,c-=8);if(r===0)r=1-u;else{if(r===h)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,n),r=r-u}return(v?-1:1)*a*Math.pow(2,r-n)};Vm.write=function(i,t,e,n,s,r){var a,l,h,u=r*8-s-1,c=(1<<u)-1,f=c>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:r-1,w=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+f>=1?t+=g/h:t+=g*Math.pow(2,1-f),t*h>=2&&(a++,h/=2),a+f>=c?(l=0,a=c):a+f>=1?(l=(t*h-1)*Math.pow(2,s),a=a+f):(l=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;i[e+v]=l&255,v+=w,l/=256,s-=8);for(a=a<<s|l,u+=s;u>0;i[e+v]=a&255,v+=w,a/=256,u-=8);i[e+v-w]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const t=vd,e=Vm,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=I,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s;const{Uint8Array:r,ArrayBuffer:a,SharedArrayBuffer:l}=globalThis;c.TYPED_ARRAY_SUPPORT=h(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const d=new r(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,r.prototype),Object.setPrototypeOf(d,p),d.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(d){if(d>s)throw new RangeError('The value "'+d+'" is invalid for option "size"');const p=new r(d);return Object.setPrototypeOf(p,c.prototype),p}function c(d,p,y){if(typeof d=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(d)}return f(d,p,y)}c.poolSize=8192;function f(d,p,y){if(typeof d=="string")return x(d,p);if(a.isView(d))return _(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(ht(d,a)||d&&ht(d.buffer,a)||typeof l<"u"&&(ht(d,l)||d&&ht(d.buffer,l)))return C(d,p,y);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=d.valueOf&&d.valueOf();if(M!=null&&M!==d)return c.from(M,p,y);const T=R(d);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return c.from(d[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}c.from=function(d,p,y){return f(d,p,y)},Object.setPrototypeOf(c.prototype,r.prototype),Object.setPrototypeOf(c,r);function g(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function v(d,p,y){return g(d),d<=0?u(d):p!==void 0?typeof y=="string"?u(d).fill(p,y):u(d).fill(p):u(d)}c.alloc=function(d,p,y){return v(d,p,y)};function w(d){return g(d),u(d<0?0:P(d)|0)}c.allocUnsafe=function(d){return w(d)},c.allocUnsafeSlow=function(d){return w(d)};function x(d,p){if((typeof p!="string"||p==="")&&(p="utf8"),!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const y=F(d,p)|0;let M=u(y);const T=M.write(d,p);return T!==y&&(M=M.slice(0,T)),M}function E(d){const p=d.length<0?0:P(d.length)|0,y=u(p);for(let M=0;M<p;M+=1)y[M]=d[M]&255;return y}function _(d){if(ht(d,r)){const p=new r(d);return C(p.buffer,p.byteOffset,p.byteLength)}return E(d)}function C(d,p,y){if(p<0||d.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');let M;return p===void 0&&y===void 0?M=new r(d):y===void 0?M=new r(d,p):M=new r(d,p,y),Object.setPrototypeOf(M,c.prototype),M}function R(d){if(c.isBuffer(d)){const p=P(d.length)|0,y=u(p);return y.length===0||d.copy(y,0,0,p),y}if(d.length!==void 0)return typeof d.length!="number"||Ce(d.length)?u(0):E(d);if(d.type==="Buffer"&&Array.isArray(d.data))return E(d.data)}function P(d){if(d>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return d|0}function I(d){return+d!=d&&(d=0),c.alloc(+d)}c.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==c.prototype},c.compare=function(d,p){if(ht(d,r)&&(d=c.from(d,d.offset,d.byteLength)),ht(p,r)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(d)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===p)return 0;let y=d.length,M=p.length;for(let T=0,j=Math.min(y,M);T<j;++T)if(d[T]!==p[T]){y=d[T],M=p[T];break}return y<M?-1:M<y?1:0},c.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(d,p){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return c.alloc(0);let y;if(p===void 0)for(p=0,y=0;y<d.length;++y)p+=d[y].length;const M=c.allocUnsafe(p);let T=0;for(y=0;y<d.length;++y){let j=d[y];if(ht(j,r))T+j.length>M.length?(c.isBuffer(j)||(j=c.from(j)),j.copy(M,T)):r.prototype.set.call(M,j,T);else if(c.isBuffer(j))j.copy(M,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=j.length}return M};function F(d,p){if(c.isBuffer(d))return d.length;if(a.isView(d)||ht(d,a))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const y=d.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&y===0)return 0;let T=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return te(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Mt(d).length;default:if(T)return M?-1:te(d).length;p=(""+p).toLowerCase(),T=!0}}c.byteLength=F;function L(d,p,y){let M=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(d||(d="utf8");;)switch(d){case"hex":return H(this,p,y);case"utf8":case"utf-8":return W(this,p,y);case"ascii":return bt(this,p,y);case"latin1":case"binary":return pt(this,p,y);case"base64":return z(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,p,y);default:if(M)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),M=!0}}c.prototype._isBuffer=!0;function S(d,p,y){const M=d[p];d[p]=d[y],d[y]=M}c.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<d;p+=2)S(this,p,p+1);return this},c.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<d;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},c.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<d;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},c.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?W(this,0,d):L.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(d){if(!c.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:c.compare(this,d)===0},c.prototype.inspect=function(){let d="";const p=i.INSPECT_MAX_BYTES;return d=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(d+=" ... "),"<Buffer "+d+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(d,p,y,M,T){if(ht(d,r)&&(d=c.from(d,d.offset,d.byteLength)),!c.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(p===void 0&&(p=0),y===void 0&&(y=d?d.length:0),M===void 0&&(M=0),T===void 0&&(T=this.length),p<0||y>d.length||M<0||T>this.length)throw new RangeError("out of range index");if(M>=T&&p>=y)return 0;if(M>=T)return-1;if(p>=y)return 1;if(p>>>=0,y>>>=0,M>>>=0,T>>>=0,this===d)return 0;let j=T-M,V=y-p;const Nt=Math.min(j,V),le=this.slice(M,T),Wt=d.slice(p,y);for(let Ot=0;Ot<Nt;++Ot)if(le[Ot]!==Wt[Ot]){j=le[Ot],V=Wt[Ot];break}return j<V?-1:V<j?1:0};function k(d,p,y,M,T){if(d.length===0)return-1;if(typeof y=="string"?(M=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Ce(y)&&(y=T?0:d.length-1),y<0&&(y=d.length+y),y>=d.length){if(T)return-1;y=d.length-1}else if(y<0)if(T)y=0;else return-1;if(typeof p=="string"&&(p=c.from(p,M)),c.isBuffer(p))return p.length===0?-1:O(d,p,y,M,T);if(typeof p=="number")return p=p&255,typeof r.prototype.indexOf=="function"?T?r.prototype.indexOf.call(d,p,y):r.prototype.lastIndexOf.call(d,p,y):O(d,[p],y,M,T);throw new TypeError("val must be string, number or Buffer")}function O(d,p,y,M,T){let j=1,V=d.length,Nt=p.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(d.length<2||p.length<2)return-1;j=2,V/=2,Nt/=2,y/=2}function le(Ot,Vt){return j===1?Ot[Vt]:Ot.readUInt16BE(Vt*j)}let Wt;if(T){let Ot=-1;for(Wt=y;Wt<V;Wt++)if(le(d,Wt)===le(p,Ot===-1?0:Wt-Ot)){if(Ot===-1&&(Ot=Wt),Wt-Ot+1===Nt)return Ot*j}else Ot!==-1&&(Wt-=Wt-Ot),Ot=-1}else for(y+Nt>V&&(y=V-Nt),Wt=y;Wt>=0;Wt--){let Ot=!0;for(let Vt=0;Vt<Nt;Vt++)if(le(d,Wt+Vt)!==le(p,Vt)){Ot=!1;break}if(Ot)return Wt}return-1}c.prototype.includes=function(d,p,y){return this.indexOf(d,p,y)!==-1},c.prototype.indexOf=function(d,p,y){return k(this,d,p,y,!0)},c.prototype.lastIndexOf=function(d,p,y){return k(this,d,p,y,!1)};function N(d,p,y,M){y=Number(y)||0;const T=d.length-y;M?(M=Number(M),M>T&&(M=T)):M=T;const j=p.length;M>j/2&&(M=j/2);let V;for(V=0;V<M;++V){const Nt=parseInt(p.substr(V*2,2),16);if(Ce(Nt))return V;d[y+V]=Nt}return V}function B(d,p,y,M){return Ut(te(p,d.length-y),d,y,M)}function $(d,p,y,M){return Ut($t(p),d,y,M)}function Y(d,p,y,M){return Ut(Mt(p),d,y,M)}function X(d,p,y,M){return Ut(Ct(p,d.length-y),d,y,M)}c.prototype.write=function(d,p,y,M){if(p===void 0)M="utf8",y=this.length,p=0;else if(y===void 0&&typeof p=="string")M=p,y=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(y)?(y=y>>>0,M===void 0&&(M="utf8")):(M=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-p;if((y===void 0||y>T)&&(y=T),d.length>0&&(y<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let j=!1;for(;;)switch(M){case"hex":return N(this,d,p,y);case"utf8":case"utf-8":return B(this,d,p,y);case"ascii":case"latin1":case"binary":return $(this,d,p,y);case"base64":return Y(this,d,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,d,p,y);default:if(j)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),j=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(d,p,y){return p===0&&y===d.length?t.fromByteArray(d):t.fromByteArray(d.slice(p,y))}function W(d,p,y){y=Math.min(d.length,y);const M=[];let T=p;for(;T<y;){const j=d[T];let V=null,Nt=j>239?4:j>223?3:j>191?2:1;if(T+Nt<=y){let le,Wt,Ot,Vt;switch(Nt){case 1:j<128&&(V=j);break;case 2:le=d[T+1],(le&192)===128&&(Vt=(j&31)<<6|le&63,Vt>127&&(V=Vt));break;case 3:le=d[T+1],Wt=d[T+2],(le&192)===128&&(Wt&192)===128&&(Vt=(j&15)<<12|(le&63)<<6|Wt&63,Vt>2047&&(Vt<55296||Vt>57343)&&(V=Vt));break;case 4:le=d[T+1],Wt=d[T+2],Ot=d[T+3],(le&192)===128&&(Wt&192)===128&&(Ot&192)===128&&(Vt=(j&15)<<18|(le&63)<<12|(Wt&63)<<6|Ot&63,Vt>65535&&Vt<1114112&&(V=Vt))}}V===null?(V=65533,Nt=1):V>65535&&(V-=65536,M.push(V>>>10&1023|55296),V=56320|V&1023),M.push(V),T+=Nt}return G(M)}const at=4096;function G(d){const p=d.length;if(p<=at)return String.fromCharCode.apply(String,d);let y="",M=0;for(;M<p;)y+=String.fromCharCode.apply(String,d.slice(M,M+=at));return y}function bt(d,p,y){let M="";y=Math.min(d.length,y);for(let T=p;T<y;++T)M+=String.fromCharCode(d[T]&127);return M}function pt(d,p,y){let M="";y=Math.min(d.length,y);for(let T=p;T<y;++T)M+=String.fromCharCode(d[T]);return M}function H(d,p,y){const M=d.length;(!p||p<0)&&(p=0),(!y||y<0||y>M)&&(y=M);let T="";for(let j=p;j<y;++j)T+=Me[d[j]];return T}function it(d,p,y){const M=d.slice(p,y);let T="";for(let j=0;j<M.length-1;j+=2)T+=String.fromCharCode(M[j]+M[j+1]*256);return T}c.prototype.slice=function(d,p){const y=this.length;d=~~d,p=p===void 0?y:~~p,d<0?(d+=y,d<0&&(d=0)):d>y&&(d=y),p<0?(p+=y,p<0&&(p=0)):p>y&&(p=y),p<d&&(p=d);const M=this.subarray(d,p);return Object.setPrototypeOf(M,c.prototype),M};function tt(d,p,y){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+p>y)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(d,p,y){d=d>>>0,p=p>>>0,y||tt(d,p,this.length);let M=this[d],T=1,j=0;for(;++j<p&&(T*=256);)M+=this[d+j]*T;return M},c.prototype.readUintBE=c.prototype.readUIntBE=function(d,p,y){d=d>>>0,p=p>>>0,y||tt(d,p,this.length);let M=this[d+--p],T=1;for(;p>0&&(T*=256);)M+=this[d+--p]*T;return M},c.prototype.readUint8=c.prototype.readUInt8=function(d,p){return d=d>>>0,p||tt(d,1,this.length),this[d]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(d,p){return d=d>>>0,p||tt(d,2,this.length),this[d]|this[d+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(d,p){return d=d>>>0,p||tt(d,2,this.length),this[d]<<8|this[d+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},c.prototype.readBigUInt64LE=ee(function(d){d=d>>>0,K(d,"offset");const p=this[d],y=this[d+7];(p===void 0||y===void 0)&&At(d,this.length-8);const M=p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,T=this[++d]+this[++d]*2**8+this[++d]*2**16+y*2**24;return BigInt(M)+(BigInt(T)<<BigInt(32))}),c.prototype.readBigUInt64BE=ee(function(d){d=d>>>0,K(d,"offset");const p=this[d],y=this[d+7];(p===void 0||y===void 0)&&At(d,this.length-8);const M=p*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],T=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+y;return(BigInt(M)<<BigInt(32))+BigInt(T)}),c.prototype.readIntLE=function(d,p,y){d=d>>>0,p=p>>>0,y||tt(d,p,this.length);let M=this[d],T=1,j=0;for(;++j<p&&(T*=256);)M+=this[d+j]*T;return T*=128,M>=T&&(M-=Math.pow(2,8*p)),M},c.prototype.readIntBE=function(d,p,y){d=d>>>0,p=p>>>0,y||tt(d,p,this.length);let M=p,T=1,j=this[d+--M];for(;M>0&&(T*=256);)j+=this[d+--M]*T;return T*=128,j>=T&&(j-=Math.pow(2,8*p)),j},c.prototype.readInt8=function(d,p){return d=d>>>0,p||tt(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},c.prototype.readInt16LE=function(d,p){d=d>>>0,p||tt(d,2,this.length);const y=this[d]|this[d+1]<<8;return y&32768?y|4294901760:y},c.prototype.readInt16BE=function(d,p){d=d>>>0,p||tt(d,2,this.length);const y=this[d+1]|this[d]<<8;return y&32768?y|4294901760:y},c.prototype.readInt32LE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},c.prototype.readInt32BE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},c.prototype.readBigInt64LE=ee(function(d){d=d>>>0,K(d,"offset");const p=this[d],y=this[d+7];(p===void 0||y===void 0)&&At(d,this.length-8);const M=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(y<<24);return(BigInt(M)<<BigInt(32))+BigInt(p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),c.prototype.readBigInt64BE=ee(function(d){d=d>>>0,K(d,"offset");const p=this[d],y=this[d+7];(p===void 0||y===void 0)&&At(d,this.length-8);const M=(p<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(M)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+y)}),c.prototype.readFloatLE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),e.read(this,d,!0,23,4)},c.prototype.readFloatBE=function(d,p){return d=d>>>0,p||tt(d,4,this.length),e.read(this,d,!1,23,4)},c.prototype.readDoubleLE=function(d,p){return d=d>>>0,p||tt(d,8,this.length),e.read(this,d,!0,52,8)},c.prototype.readDoubleBE=function(d,p){return d=d>>>0,p||tt(d,8,this.length),e.read(this,d,!1,52,8)};function J(d,p,y,M,T,j){if(!c.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>T||p<j)throw new RangeError('"value" argument is out of bounds');if(y+M>d.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(d,p,y,M){if(d=+d,p=p>>>0,y=y>>>0,!M){const V=Math.pow(2,8*y)-1;J(this,d,p,y,V,0)}let T=1,j=0;for(this[p]=d&255;++j<y&&(T*=256);)this[p+j]=d/T&255;return p+y},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(d,p,y,M){if(d=+d,p=p>>>0,y=y>>>0,!M){const V=Math.pow(2,8*y)-1;J(this,d,p,y,V,0)}let T=y-1,j=1;for(this[p+T]=d&255;--T>=0&&(j*=256);)this[p+T]=d/j&255;return p+y},c.prototype.writeUint8=c.prototype.writeUInt8=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,1,255,0),this[p]=d&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,2,65535,0),this[p]=d&255,this[p+1]=d>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,2,65535,0),this[p]=d>>>8,this[p+1]=d&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,4,4294967295,0),this[p+3]=d>>>24,this[p+2]=d>>>16,this[p+1]=d>>>8,this[p]=d&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,4,4294967295,0),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4};function nt(d,p,y,M,T){rt(p,M,T,d,y,7);let j=Number(p&BigInt(4294967295));d[y++]=j,j=j>>8,d[y++]=j,j=j>>8,d[y++]=j,j=j>>8,d[y++]=j;let V=Number(p>>BigInt(32)&BigInt(4294967295));return d[y++]=V,V=V>>8,d[y++]=V,V=V>>8,d[y++]=V,V=V>>8,d[y++]=V,y}function et(d,p,y,M,T){rt(p,M,T,d,y,7);let j=Number(p&BigInt(4294967295));d[y+7]=j,j=j>>8,d[y+6]=j,j=j>>8,d[y+5]=j,j=j>>8,d[y+4]=j;let V=Number(p>>BigInt(32)&BigInt(4294967295));return d[y+3]=V,V=V>>8,d[y+2]=V,V=V>>8,d[y+1]=V,V=V>>8,d[y]=V,y+8}c.prototype.writeBigUInt64LE=ee(function(d,p=0){return nt(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ee(function(d,p=0){return et(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(d,p,y,M){if(d=+d,p=p>>>0,!M){const Nt=Math.pow(2,8*y-1);J(this,d,p,y,Nt-1,-Nt)}let T=0,j=1,V=0;for(this[p]=d&255;++T<y&&(j*=256);)d<0&&V===0&&this[p+T-1]!==0&&(V=1),this[p+T]=(d/j>>0)-V&255;return p+y},c.prototype.writeIntBE=function(d,p,y,M){if(d=+d,p=p>>>0,!M){const Nt=Math.pow(2,8*y-1);J(this,d,p,y,Nt-1,-Nt)}let T=y-1,j=1,V=0;for(this[p+T]=d&255;--T>=0&&(j*=256);)d<0&&V===0&&this[p+T+1]!==0&&(V=1),this[p+T]=(d/j>>0)-V&255;return p+y},c.prototype.writeInt8=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,1,127,-128),d<0&&(d=255+d+1),this[p]=d&255,p+1},c.prototype.writeInt16LE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,2,32767,-32768),this[p]=d&255,this[p+1]=d>>>8,p+2},c.prototype.writeInt16BE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,2,32767,-32768),this[p]=d>>>8,this[p+1]=d&255,p+2},c.prototype.writeInt32LE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,4,2147483647,-2147483648),this[p]=d&255,this[p+1]=d>>>8,this[p+2]=d>>>16,this[p+3]=d>>>24,p+4},c.prototype.writeInt32BE=function(d,p,y){return d=+d,p=p>>>0,y||J(this,d,p,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4},c.prototype.writeBigInt64LE=ee(function(d,p=0){return nt(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ee(function(d,p=0){return et(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function vt(d,p,y,M,T,j){if(y+M>d.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function q(d,p,y,M,T){return p=+p,y=y>>>0,T||vt(d,p,y,4),e.write(d,p,y,M,23,4),y+4}c.prototype.writeFloatLE=function(d,p,y){return q(this,d,p,!0,y)},c.prototype.writeFloatBE=function(d,p,y){return q(this,d,p,!1,y)};function Q(d,p,y,M,T){return p=+p,y=y>>>0,T||vt(d,p,y,8),e.write(d,p,y,M,52,8),y+8}c.prototype.writeDoubleLE=function(d,p,y){return Q(this,d,p,!0,y)},c.prototype.writeDoubleBE=function(d,p,y){return Q(this,d,p,!1,y)},c.prototype.copy=function(d,p,y,M){if(!c.isBuffer(d))throw new TypeError("argument should be a Buffer");if(y||(y=0),!M&&M!==0&&(M=this.length),p>=d.length&&(p=d.length),p||(p=0),M>0&&M<y&&(M=y),M===y||d.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),d.length-p<M-y&&(M=d.length-p+y);const T=M-y;return this===d&&typeof r.prototype.copyWithin=="function"?this.copyWithin(p,y,M):r.prototype.set.call(d,this.subarray(y,M),p),T},c.prototype.fill=function(d,p,y,M){if(typeof d=="string"){if(typeof p=="string"?(M=p,p=0,y=this.length):typeof y=="string"&&(M=y,y=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!c.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(d.length===1){const j=d.charCodeAt(0);(M==="utf8"&&j<128||M==="latin1")&&(d=j)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(p<0||this.length<p||this.length<y)throw new RangeError("Out of range index");if(y<=p)return this;p=p>>>0,y=y===void 0?this.length:y>>>0,d||(d=0);let T;if(typeof d=="number")for(T=p;T<y;++T)this[T]=d;else{const j=c.isBuffer(d)?d:c.from(d,M),V=j.length;if(V===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(T=0;T<y-p;++T)this[T+p]=j[T%V]}return this};const dt={};function gt(d,p,y){dt[d]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(d,p){return`The "${d}" argument must be of type number. Received type ${typeof p}`},TypeError),gt("ERR_OUT_OF_RANGE",function(d,p,y){let M=`The value of "${d}" is out of range.`,T=y;return Number.isInteger(y)&&Math.abs(y)>2**32?T=lt(String(y)):typeof y=="bigint"&&(T=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(T=lt(T)),T+="n"),M+=` It must be ${p}. Received ${T}`,M},RangeError);function lt(d){let p="",y=d.length;const M=d[0]==="-"?1:0;for(;y>=M+4;y-=3)p=`_${d.slice(y-3,y)}${p}`;return`${d.slice(0,y)}${p}`}function _t(d,p,y){K(p,"offset"),(d[p]===void 0||d[p+y]===void 0)&&At(p,d.length-(y+1))}function rt(d,p,y,M,T,j){if(d>y||d<p){const V=typeof p=="bigint"?"n":"";let Nt;throw p===0||p===BigInt(0)?Nt=`>= 0${V} and < 2${V} ** ${(j+1)*8}${V}`:Nt=`>= -(2${V} ** ${(j+1)*8-1}${V}) and < 2 ** ${(j+1)*8-1}${V}`,new dt.ERR_OUT_OF_RANGE("value",Nt,d)}_t(M,T,j)}function K(d,p){if(typeof d!="number")throw new dt.ERR_INVALID_ARG_TYPE(p,"number",d)}function At(d,p,y){throw Math.floor(d)!==d?(K(d,y),new dt.ERR_OUT_OF_RANGE("offset","an integer",d)):p<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,d)}const Rt=/[^+/0-9A-Za-z-_]/g;function Bt(d){if(d=d.split("=")[0],d=d.trim().replace(Rt,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function te(d,p){p=p||1/0;let y;const M=d.length;let T=null;const j=[];for(let V=0;V<M;++V){if(y=d.charCodeAt(V),y>55295&&y<57344){if(!T){if(y>56319){(p-=3)>-1&&j.push(239,191,189);continue}else if(V+1===M){(p-=3)>-1&&j.push(239,191,189);continue}T=y;continue}if(y<56320){(p-=3)>-1&&j.push(239,191,189),T=y;continue}y=(T-55296<<10|y-56320)+65536}else T&&(p-=3)>-1&&j.push(239,191,189);if(T=null,y<128){if((p-=1)<0)break;j.push(y)}else if(y<2048){if((p-=2)<0)break;j.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;j.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;j.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return j}function $t(d){const p=[];for(let y=0;y<d.length;++y)p.push(d.charCodeAt(y)&255);return p}function Ct(d,p){let y,M,T;const j=[];for(let V=0;V<d.length&&!((p-=2)<0);++V)y=d.charCodeAt(V),M=y>>8,T=y%256,j.push(T),j.push(M);return j}function Mt(d){return t.toByteArray(Bt(d))}function Ut(d,p,y,M){let T;for(T=0;T<M&&!(T+y>=p.length||T>=d.length);++T)p[T+y]=d[T];return T}function ht(d,p){return d instanceof p||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===p.name}function Ce(d){return d!==d}const Me=function(){const d="0123456789abcdef",p=new Array(256);for(let y=0;y<16;++y){const M=y*16;for(let T=0;T<16;++T)p[M+T]=d[y]+d[T]}return p}();function ee(d){return typeof BigInt>"u"?Ye:d}function Ye(){throw new Error("BigInt not supported")}})(Jt);const Yf=Jt.Buffer,YM=Jt.Blob,KM=Jt.BlobOptions,XM=Jt.Buffer,QM=Jt.File,ZM=Jt.FileOptions,JM=Jt.INSPECT_MAX_BYTES,t2=Jt.SlowBuffer,e2=Jt.TranscodeEncoding,i2=Jt.atob,n2=Jt.btoa,s2=Jt.constants,r2=Jt.isAscii,a2=Jt.isUtf8,o2=Jt.kMaxLength,l2=Jt.kStringMaxLength,h2=Jt.resolveObjectURL,c2=Jt.transcode,aI=Object.freeze(Object.defineProperty({__proto__:null,Blob:YM,BlobOptions:KM,Buffer:XM,File:QM,FileOptions:ZM,INSPECT_MAX_BYTES:JM,SlowBuffer:t2,TranscodeEncoding:e2,atob:i2,btoa:n2,constants:s2,default:Yf,isAscii:r2,isUtf8:a2,kMaxLength:o2,kStringMaxLength:l2,resolveObjectURL:h2,transcode:c2},Symbol.toStringTag,{value:"Module"}));var Go={};Go.d=(i,t)=>{for(var e in t)Go.o(t,e)&&!Go.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Go.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var ot=globalThis.pdfjsLib={};Go.d(ot,{AbortException:()=>er,AnnotationEditorLayer:()=>AT,AnnotationEditorParamsType:()=>ct,AnnotationEditorType:()=>Et,AnnotationEditorUIManager:()=>wl,AnnotationLayer:()=>mT,AnnotationMode:()=>Nn,CMapCompressionType:()=>Xf,ColorPicker:()=>Hb,DOMSVGFactory:()=>Ym,DrawLayer:()=>xT,FeatureTest:()=>Ue,GlobalWorkerOptions:()=>Xn,ImageKind:()=>uh,InvalidPDFException:()=>bw,MissingPDFException:()=>tr,OPS:()=>ui,Outliner:()=>Cg,PDFDataRangeTransport:()=>pb,PDFDateString:()=>Cw,PDFWorker:()=>lc,PasswordResponses:()=>p2,PermissionFlag:()=>f2,PixelsPerInch:()=>ka,RenderingCancelledException:()=>Km,TextLayer:()=>Tu,UnexpectedResponseException:()=>Ad,Util:()=>Z,VerbosityLevel:()=>yd,XfaLayer:()=>vb,build:()=>KR,createValidAbsoluteUrl:()=>y2,fetchData:()=>Cd,getDocument:()=>WR,getFilenameFromUrl:()=>M2,getPdfFilenameFromUrl:()=>R2,getXfaPageViewport:()=>T2,isDataScheme:()=>Xm,isPdfFile:()=>Qm,noContextMenu:()=>$e,normalizeUnicode:()=>_2,renderTextLayer:()=>RR,setLayerDimensions:()=>Ys,shadow:()=>St,updateTextLayer:()=>TR,version:()=>YR});const ke=typeof ut=="object"&&ut+""=="[object process]"&&!ut.versions.nw&&!(ut.versions.electron&&ut.type&&ut.type!=="browser"),ww=[1,0,0,1,0,0],Kf=[.001,0,0,.001,0,0],u2=1e7,rf=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Nn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d2="pdfjs_internal_editor_",Et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},f2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},fe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},uh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},La={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yd={ERRORS:0,WARNINGS:1,INFOS:5},Xf={NONE:0,BINARY:1},ui={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},p2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wd=yd.WARNINGS;function g2(i){Number.isInteger(i)&&(wd=i)}function m2(){return wd}function bd(i){wd>=yd.INFOS&&console.log(`Info: ${i}`)}function yt(i){wd>=yd.WARNINGS&&console.log(`Warning: ${i}`)}function Pt(i){throw new Error(i)}function Qt(i,t){i||Pt(t)}function v2(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function y2(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=E2(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(v2(n))return n}catch{}return null}function St(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Jn=function(){function i(t,e){this.constructor===i&&Pt("Cannot initialize BaseException."),this.message=t,this.name=e}return i.prototype=new Error,i.constructor=i,i}();class Qf extends Jn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Zf extends Jn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class bw extends Jn{constructor(t){super(t,"InvalidPDFException")}}class tr extends Jn{constructor(t){super(t,"MissingPDFException")}}class Ad extends Jn{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class w2 extends Jn{constructor(t){super(t,"FormatError")}}class er extends Jn{constructor(t){super(t,"AbortException")}}function Aw(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Pt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function xd(i){typeof i!="string"&&Pt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function b2(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Gm(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function A2(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function x2(){try{return new Function(""),!0}catch{return!1}}class Ue{static get isLittleEndian(){return St(this,"isLittleEndian",A2())}static get isEvalSupported(){return St(this,"isEvalSupported",x2())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?St(this,"platform",{isMac:navigator.platform.includes("Mac")}):St(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return St(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const af=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Ia,Fl,fu,Jf;class Z{static makeHexColor(t,e,n){return`#${af[t]}${af[e]}${af[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,h=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,u=l+h||1,c=l-h||1;return[Math.sqrt(u),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(t,e,n,s,r,a,l,h,u){return u?(u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,h),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,h)):u=[Math.min(t,l),Math.min(e,h),Math.max(t,l),Math.max(e,h)],b(this,fu,Jf).call(this,t,n,r,l,e,s,a,h,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),u),b(this,fu,Jf).call(this,t,n,r,l,e,s,a,h,3*(-e+3*(s-a)+h),6*(e-2*s+a),3*(s-e),u),u}}Ia=new WeakSet,Fl=function(i,t,e,n,s,r,a,l,h,u){if(h<=0||h>=1)return;const c=1-h,f=h*h,g=f*h,v=c*(c*(c*i+3*h*t)+3*f*e)+g*n,w=c*(c*(c*s+3*h*r)+3*f*a)+g*l;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],w),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],w)},fu=new WeakSet,Jf=function(i,t,e,n,s,r,a,l,h,u,c,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&b(this,Ia,Fl).call(this,i,t,e,n,s,r,a,l,-c/u,f);return}const g=u**2-4*c*h;if(g<0)return;const v=Math.sqrt(g),w=2*h;b(this,Ia,Fl).call(this,i,t,e,n,s,r,a,l,(-u+v)/w,f),b(this,Ia,Fl).call(this,i,t,e,n,s,r,a,l,(-u-v)/w,f)},m(Z,Ia),m(Z,fu);function E2(i){return decodeURIComponent(escape(i))}let of=null,Jv=null;function _2(i){return of||(of=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Jv=new Map([["ï¬","Å¿t"]])),i.replaceAll(of,(t,e,n)=>e?e.normalize("NFKC"):Jv.get(n))}function S2(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return Aw(i)}const xw="pdfjs_internal_id_",Fi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Ed{constructor(){this.constructor===Ed&&Pt("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}class _d{constructor(){this.constructor===_d&&Pt("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Pt("Abstract method `_createCanvas` called.")}}class Sd{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===Sd&&Pt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Xf.BINARY:Xf.NONE;return this._fetchData(e,n).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Pt("Abstract method `_fetchData` called.")}}class kd{constructor({baseUrl:t=null}){this.constructor===kd&&Pt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Pt("Abstract method `_fetchData` called.")}}class qm{constructor(){this.constructor===qm&&Pt("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Pt("Abstract method `_createSVG` called.")}}const ji="http://www.w3.org/2000/svg",ur=class{};ft(ur,"CSS",96),ft(ur,"PDF",72),ft(ur,"PDF_TO_CSS_UNITS",ur.CSS/ur.PDF);let ka=ur;var Ds,sn,wn,ze,dh,dr,he,pe,as,fr,Os,Gr,Ya,fh,tp,Ew,ph,ep,os,pr,gr,Da,mr,Ka,gh,ip,vr,Xa;class k2 extends Ed{constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),m(this,he),m(this,as),m(this,Os),m(this,Ya),m(this,tp),m(this,ph),m(this,os),m(this,gr),m(this,mr),m(this,gh),m(this,vr),m(this,Ds,void 0),m(this,sn,void 0),m(this,wn,void 0),m(this,ze,void 0),m(this,dh,void 0),m(this,dr,0),A(this,wn,t),A(this,ze,e)}addFilter(t){if(!t)return"none";let e=o(this,he,pe).get(t);if(e)return e;const[n,s,r]=b(this,Ya,fh).call(this,t),a=t.length===1?n:`${n}${s}${r}`;if(e=o(this,he,pe).get(a),e)return o(this,he,pe).set(t,e),e;const l=`g_${o(this,wn)}_transfer_map_${ai(this,dr)._++}`,h=`url(#${l})`;o(this,he,pe).set(t,h),o(this,he,pe).set(a,h);const u=b(this,os,pr).call(this,l);return b(this,mr,Ka).call(this,n,s,r,u),h}addHCMFilter(t,e){var n;const s=`${t}-${e}`,r="base";let a=o(this,as,fr).get(r);if((a==null?void 0:a.key)===s||(a?((n=a.filter)==null||n.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},o(this,as,fr).set(r,a)),!t||!e))return a.url;const l=b(this,vr,Xa).call(this,t);t=Z.makeHexColor(...l);const h=b(this,vr,Xa).call(this,e);if(e=Z.makeHexColor(...h),o(this,Os,Gr).style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const u=new Array(256);for(let w=0;w<=255;w++){const x=w/255;u[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const c=u.join(","),f=`g_${o(this,wn)}_hcm_filter`,g=a.filter=b(this,os,pr).call(this,f);b(this,mr,Ka).call(this,c,c,c,g),b(this,ph,ep).call(this,g);const v=(w,x)=>{const E=l[w]/255,_=h[w]/255,C=new Array(x+1);for(let R=0;R<=x;R++)C[R]=E+R/x*(_-E);return C.join(",")};return b(this,mr,Ka).call(this,v(0,5),v(1,5),v(2,5),g),a.url=`url(#${f})`,a.url}addAlphaFilter(t){let e=o(this,he,pe).get(t);if(e)return e;const[n]=b(this,Ya,fh).call(this,[t]),s=`alpha_${n}`;if(e=o(this,he,pe).get(s),e)return o(this,he,pe).set(t,e),e;const r=`g_${o(this,wn)}_alpha_map_${ai(this,dr)._++}`,a=`url(#${r})`;o(this,he,pe).set(t,a),o(this,he,pe).set(s,a);const l=b(this,os,pr).call(this,r);return b(this,gh,ip).call(this,n,l),a}addLuminosityFilter(t){let e=o(this,he,pe).get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=b(this,Ya,fh).call(this,[t]),s=`luminosity_${n}`):s="luminosity",e=o(this,he,pe).get(s),e)return o(this,he,pe).set(t,e),e;const r=`g_${o(this,wn)}_luminosity_map_${ai(this,dr)._++}`,a=`url(#${r})`;o(this,he,pe).set(t,a),o(this,he,pe).set(s,a);const l=b(this,os,pr).call(this,r);return b(this,tp,Ew).call(this,l),t&&b(this,gh,ip).call(this,n,l),a}addHighlightHCMFilter(t,e,n,s,r){var a;const l=`${e}-${n}-${s}-${r}`;let h=o(this,as,fr).get(t);if((h==null?void 0:h.key)===l||(h?((a=h.filter)==null||a.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},o(this,as,fr).set(t,h)),!e||!n))return h.url;const[u,c]=[e,n].map(b(this,vr,Xa).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[v,w]=[s,r].map(b(this,vr,Xa).bind(this));g<f&&([f,g,v,w]=[g,f,w,v]),o(this,Os,Gr).style.color="";const x=(C,R,P)=>{const I=new Array(256),F=(g-f)/P,L=C/255,S=(R-C)/(255*P);let k=0;for(let O=0;O<=P;O++){const N=Math.round(f+O*F),B=L+O*S;for(let $=k;$<=N;$++)I[$]=B;k=N+1}for(let O=k;O<256;O++)I[O]=I[k-1];return I.join(",")},E=`g_${o(this,wn)}_hcm_${t}_filter`,_=h.filter=b(this,os,pr).call(this,E);return b(this,ph,ep).call(this,_),b(this,mr,Ka).call(this,x(v[0],w[0],5),x(v[1],w[1],5),x(v[2],w[2],5),_),h.url=`url(#${E})`,h.url}destroy(t=!1){t&&o(this,as,fr).size!==0||(o(this,sn)&&(o(this,sn).parentNode.parentNode.remove(),A(this,sn,null)),o(this,Ds)&&(o(this,Ds).clear(),A(this,Ds,null)),A(this,dr,0))}}Ds=new WeakMap,sn=new WeakMap,wn=new WeakMap,ze=new WeakMap,dh=new WeakMap,dr=new WeakMap,he=new WeakSet,pe=function(){return o(this,Ds)||A(this,Ds,new Map)},as=new WeakSet,fr=function(){return o(this,dh)||A(this,dh,new Map)},Os=new WeakSet,Gr=function(){if(!o(this,sn)){const i=o(this,ze).createElement("div"),{style:t}=i;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const e=o(this,ze).createElementNS(ji,"svg");e.setAttribute("width",0),e.setAttribute("height",0),A(this,sn,o(this,ze).createElementNS(ji,"defs")),i.append(e),e.append(o(this,sn)),o(this,ze).body.append(i)}return o(this,sn)},Ya=new WeakSet,fh=function(i){if(i.length===1){const l=i[0],h=new Array(256);for(let c=0;c<256;c++)h[c]=l[c]/255;const u=h.join(",");return[u,u,u]}const[t,e,n]=i,s=new Array(256),r=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,r[l]=e[l]/255,a[l]=n[l]/255;return[s.join(","),r.join(","),a.join(",")]},tp=new WeakSet,Ew=function(i){const t=o(this,ze).createElementNS(ji,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(t)},ph=new WeakSet,ep=function(i){const t=o(this,ze).createElementNS(ji,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(t)},os=new WeakSet,pr=function(i){const t=o(this,ze).createElementNS(ji,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",i),o(this,Os,Gr).append(t),t},gr=new WeakSet,Da=function(i,t,e){const n=o(this,ze).createElementNS(ji,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",e),i.append(n)},mr=new WeakSet,Ka=function(i,t,e,n){const s=o(this,ze).createElementNS(ji,"feComponentTransfer");n.append(s),b(this,gr,Da).call(this,s,"feFuncR",i),b(this,gr,Da).call(this,s,"feFuncG",t),b(this,gr,Da).call(this,s,"feFuncB",e)},gh=new WeakSet,ip=function(i,t){const e=o(this,ze).createElementNS(ji,"feComponentTransfer");t.append(e),b(this,gr,Da).call(this,e,"feFuncA",i)},vr=new WeakSet,Xa=function(i){return o(this,Os,Gr).style.color=i,Zm(getComputedStyle(o(this,Os,Gr)).getPropertyValue("color"))};class C2 extends _d{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function Cd(i,t="text"){if(Qa(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class _w extends Sd{_fetchData(t,e){return Cd(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):xd(n),compressionType:e}))}}class Sw extends kd{_fetchData(t){return Cd(t,"arraybuffer").then(e=>new Uint8Array(e))}}class Ym extends qm{_createSVG(t){return document.createElementNS(ji,t)}}class El{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=r;const l=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,c,f,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,c=0,f=0,g=1;break;case 90:u=0,c=1,f=1,g=0;break;case 270:u=0,c=-1,f=-1,g=0;break;case 0:u=1,c=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let v,w,x,E;u===0?(v=Math.abs(h-t[1])*e+s,w=Math.abs(l-t[0])*e+r,x=(t[3]-t[1])*e,E=(t[2]-t[0])*e):(v=Math.abs(l-t[0])*e+s,w=Math.abs(h-t[1])*e+r,x=(t[2]-t[0])*e,E=(t[3]-t[1])*e),this.transform=[u*e,c*e,f*e,g*e,v-u*e*l-f*e*h,w-c*e*l-g*e*h],this.width=x,this.height=E}get rawDims(){const{viewBox:t}=this;return St(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new El({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return Z.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Z.applyTransform([t[0],t[1]],this.transform),n=Z.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Z.applyInverseTransform([t,e],this.transform)}}class Km extends Jn{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Xm(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Qm(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function M2(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function R2(i,t="document.pdf"){if(typeof i!="string")return t;if(Xm(i))return yt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class t0{constructor(){ft(this,"started",Object.create(null)),ft(this,"times",[])}time(t){t in this.started&&yt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||yt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Qa(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function $e(i){i.preventDefault()}function kw(i){console.log("Deprecated API usage: "+i)}let lf;class Cw{static toDateObject(t){if(!t||typeof t!="string")return null;lf||(lf=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=lf.exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const u=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=c,l+=f):u==="+"&&(a-=c,l-=f),new Date(Date.UTC(n,s,r,a,l,h))}}function T2(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new El({viewBox:r,scale:t,rotation:e})}function Zm(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(yt(`Not a valid color format: "${i}"`),[0,0,0])}function P2(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Zm(n))}t.remove()}function jt(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function Wi(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function Ys(i,t,e=!1,n=!0){if(t instanceof El){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,l=Ue.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,c=l?`round(${h}, 1px)`:`calc(${h})`,f=l?`round(${u}, 1px)`:`calc(${u})`;!e||t.rotation%180===0?(a.width=c,a.height=f):(a.width=f,a.height=c)}n&&i.setAttribute("data-main-rotation",t.rotation)}var yr,wr,rn,qr,np,Mw,sp,e0,rp,i0,qo,pu,ap,Rw,mh,op;const Tw=class Pw{constructor(t){m(this,sp),m(this,rp),m(this,qo),m(this,ap),m(this,mh),m(this,yr,null),m(this,wr,null),m(this,rn,void 0),m(this,qr,null),A(this,rn,t)}render(){const t=A(this,yr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",$e),t.addEventListener("pointerdown",b(Pw,np,Mw));const e=A(this,qr,document.createElement("div"));e.className="buttons",t.append(e);const n=o(this,rn).toolbarPosition;if(n){const{style:s}=t,r=o(this,rn)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return b(this,ap,Rw).call(this),t}hide(){var t;o(this,yr).classList.add("hidden"),(t=o(this,wr))==null||t.hideDropdown()}show(){o(this,yr).classList.remove("hidden")}addAltTextButton(t){b(this,qo,pu).call(this,t),o(this,qr).prepend(t,o(this,mh,op))}addColorPicker(t){A(this,wr,t);const e=t.renderButton();b(this,qo,pu).call(this,e),o(this,qr).prepend(e,o(this,mh,op))}remove(){var t;o(this,yr).remove(),(t=o(this,wr))==null||t.destroy(),A(this,wr,null)}};yr=new WeakMap,wr=new WeakMap,rn=new WeakMap,qr=new WeakMap,np=new WeakSet,Mw=function(i){i.stopPropagation()},sp=new WeakSet,e0=function(i){o(this,rn)._focusEventsAllowed=!1,i.preventDefault(),i.stopPropagation()},rp=new WeakSet,i0=function(i){o(this,rn)._focusEventsAllowed=!0,i.preventDefault(),i.stopPropagation()},qo=new WeakSet,pu=function(i){i.addEventListener("focusin",b(this,sp,e0).bind(this),{capture:!0}),i.addEventListener("focusout",b(this,rp,i0).bind(this),{capture:!0}),i.addEventListener("contextmenu",$e)},ap=new WeakSet,Rw=function(){const i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",`pdfjs-editor-remove-${o(this,rn).editorType}-button`),b(this,qo,pu).call(this,i),i.addEventListener("click",t=>{o(this,rn)._uiManager.delete()}),o(this,qr).append(i)},mh=new WeakSet,op=function(){const i=document.createElement("div");return i.className="divider",i},m(Tw,np);let L2=Tw;var vh,_s,gu,lp,Lw,hp,Iw,cp,n0;class I2{constructor(t){m(this,lp),m(this,hp),m(this,cp),m(this,vh,null),m(this,_s,null),m(this,gu,void 0),A(this,gu,t)}show(t,e,n){const[s,r]=b(this,hp,Iw).call(this,e,n),{style:a}=o(this,_s)||A(this,_s,b(this,lp,Lw).call(this));t.append(o(this,_s)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,_s).remove()}}vh=new WeakMap,_s=new WeakMap,gu=new WeakMap,lp=new WeakSet,Lw=function(){const i=A(this,_s,document.createElement("div"));i.className="editToolbar",i.setAttribute("role","toolbar"),i.addEventListener("contextmenu",$e);const t=A(this,vh,document.createElement("div"));return t.className="buttons",i.append(t),b(this,cp,n0).call(this),i},hp=new WeakSet,Iw=function(i,t){let e=0,n=0;for(const s of i){const r=s.y+s.height;if(r<e)continue;const a=s.x+(t?s.width:0);if(r>e){n=a,e=r;continue}t?a>n&&(n=a):a<n&&(n=a)}return[t?1-n:n,e]},cp=new WeakSet,n0=function(){const i=document.createElement("button");i.className="highlightButton",i.tabIndex=0,i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");i.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),i.addEventListener("contextmenu",$e),i.addEventListener("click",()=>{o(this,gu).highlightSelection("floating_button")}),o(this,vh).append(i)};function mu(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function D2(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var up;class O2{constructor(){m(this,up,0)}get id(){return`${d2}${ai(this,up)._++}`}}up=new WeakMap;var vu,dp,je,yh,fp;const Dw=class{constructor(){m(this,yh),m(this,vu,S2()),m(this,dp,0),m(this,je,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',e=new OffscreenCanvas(1,3).getContext("2d"),n=new Image;n.src=t;const s=n.decode().then(()=>(e.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]===0));return St(this,"_isSVGFittingCanvas",s)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return b(this,yh,fp).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return b(this,yh,fp).call(this,t,t)}async getFromId(t){o(this,je)||A(this,je,new Map);const e=o(this,je).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=o(this,je).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){o(this,je)||A(this,je,new Map);const e=o(this,je).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${o(this,vu)}_`)}};vu=new WeakMap,dp=new WeakMap,je=new WeakMap,yh=new WeakSet,fp=async function(i,t){o(this,je)||A(this,je,new Map);let e=o(this,je).get(i);if(e===null)return null;if(e!=null&&e.bitmap)return e.refCounter+=1,e;try{e||(e={bitmap:null,id:`image_${o(this,vu)}_${ai(this,dp)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(e.url=t,n=await Cd(t,"blob")):n=e.file=t,n.type==="image/svg+xml"){const s=Dw._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((h,u)=>{a.onload=()=>{e.bitmap=a,e.isSvg=!0,h()},r.onload=async()=>{const c=e.svgUrl=r.result;a.src=await s?`${c}#svgView(preserveAspectRatio(none))`:c},a.onerror=r.onerror=u});r.readAsDataURL(n),await l}else e.bitmap=await createImageBitmap(n);e.refCounter=1}catch(n){console.error(n),e=null}return o(this,je).set(i,e),e&&o(this,je).set(e.id,e),e};let N2=Dw;var ce,ls,wh,Xt;class F2{constructor(t=128){m(this,ce,[]),m(this,ls,!1),m(this,wh,void 0),m(this,Xt,-1),A(this,wh,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&t(),o(this,ls))return;const h={cmd:t,undo:e,post:n,type:r};if(o(this,Xt)===-1){o(this,ce).length>0&&(o(this,ce).length=0),A(this,Xt,0),o(this,ce).push(h);return}if(a&&o(this,ce)[o(this,Xt)].type===r){l&&(h.undo=o(this,ce)[o(this,Xt)].undo),o(this,ce)[o(this,Xt)]=h;return}const u=o(this,Xt)+1;u===o(this,wh)?o(this,ce).splice(0,1):(A(this,Xt,u),u<o(this,ce).length&&o(this,ce).splice(u)),o(this,ce).push(h)}undo(){if(o(this,Xt)===-1)return;A(this,ls,!0);const{undo:t,post:e}=o(this,ce)[o(this,Xt)];t(),e==null||e(),A(this,ls,!1),A(this,Xt,o(this,Xt)-1)}redo(){if(o(this,Xt)<o(this,ce).length-1){A(this,Xt,o(this,Xt)+1),A(this,ls,!0);const{cmd:t,post:e}=o(this,ce)[o(this,Xt)];t(),e==null||e(),A(this,ls,!1)}}hasSomethingToUndo(){return o(this,Xt)!==-1}hasSomethingToRedo(){return o(this,Xt)<o(this,ce).length-1}destroy(){A(this,ce,null)}}ce=new WeakMap,ls=new WeakMap,wh=new WeakMap,Xt=new WeakMap;var pp,Ow;class _l{constructor(t){m(this,pp),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ue.platform;for(const[n,s,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(b(this,pp,Ow).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}pp=new WeakSet,Ow=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Nw=class Fw{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return P2(t),St(this,"_colors",t)}convert(t){const e=Zm(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return Fw._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Z.makeHexColor(...e):t}};ft(Nw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let W2=Nw;var Qe,se,ye,Za,bn,br,vi,Ja,Ar,Bi,An,xr,yu,bh,$i,to,Ss,Ci,gp,ks,Ah,Er,xh,eo,xe,Tt,xn,_r,io,Eh,_h,Sh,kh,Ch,Mh,Rh,Th,Ph,Lh,Ih,Dh,Oh,hs,Ui,En,Nh,Yo,Fh,mp,s0,vp,Ww,Ko,wu,yp,jw,wp,Bw,bp,$w,Wh,Ap,jh,xp,Bh,Ep,$h,_p,Uh,Sp,be,Te,Zi,Ln,kp,Uw,Cp,Hw,Hh,Mp,Rp,zw,Sr,no,zh,Tp;const Pp=class Lp{constructor(t,e,n,s,r,a,l,h,u){m(this,Yo),m(this,mp),m(this,vp),m(this,Ko),m(this,yp),m(this,wp),m(this,bp),m(this,Wh),m(this,jh),m(this,Bh),m(this,$h),m(this,Uh),m(this,be),m(this,Zi),m(this,kp),m(this,Cp),m(this,Hh),m(this,Rp),m(this,Sr),m(this,zh),m(this,Qe,null),m(this,se,new Map),m(this,ye,new Map),m(this,Za,null),m(this,bn,null),m(this,br,null),m(this,vi,new F2),m(this,Ja,0),m(this,Ar,new Set),m(this,Bi,null),m(this,An,null),m(this,xr,new Set),m(this,yu,!1),m(this,bh,null),m(this,$i,null),m(this,to,null),m(this,Ss,!1),m(this,Ci,null),m(this,gp,new O2),m(this,ks,!1),m(this,Ah,!1),m(this,Er,null),m(this,xh,null),m(this,eo,null),m(this,xe,Et.NONE),m(this,Tt,new Set),m(this,xn,null),m(this,_r,null),m(this,io,null),m(this,Eh,this.blur.bind(this)),m(this,_h,this.focus.bind(this)),m(this,Sh,this.copy.bind(this)),m(this,kh,this.cut.bind(this)),m(this,Ch,this.paste.bind(this)),m(this,Mh,this.keydown.bind(this)),m(this,Rh,this.keyup.bind(this)),m(this,Th,this.onEditingAction.bind(this)),m(this,Ph,this.onPageChanging.bind(this)),m(this,Lh,this.onScaleChanging.bind(this)),m(this,Ih,b(this,vp,Ww).bind(this)),m(this,Dh,this.onRotationChanging.bind(this)),m(this,Oh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),m(this,hs,[0,0]),m(this,Ui,null),m(this,En,null),m(this,Nh,null),A(this,En,t),A(this,Nh,e),A(this,Za,n),this._eventBus=s,this._eventBus._on("editingaction",o(this,Th)),this._eventBus._on("pagechanging",o(this,Ph)),this._eventBus._on("scalechanging",o(this,Lh)),this._eventBus._on("rotationchanging",o(this,Dh)),b(this,yp,jw).call(this),b(this,jh,xp).call(this),A(this,bn,r.annotationStorage),A(this,bh,r.filterFactory),A(this,_r,a),A(this,to,l||null),A(this,yu,h),A(this,eo,u||null),this.viewParameters={realScale:ka.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Lp.prototype,e=a=>o(a,En).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:h}=l;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return St(this,"_keyboardManager",new _l([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,En).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,En).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e;b(this,Bh,Ep).call(this),b(this,Wh,Ap).call(this),this._eventBus._off("editingaction",o(this,Th)),this._eventBus._off("pagechanging",o(this,Ph)),this._eventBus._off("scalechanging",o(this,Lh)),this._eventBus._off("rotationchanging",o(this,Dh));for(const n of o(this,ye).values())n.destroy();o(this,ye).clear(),o(this,se).clear(),o(this,xr).clear(),A(this,Qe,null),o(this,Tt).clear(),o(this,vi).destroy(),(t=o(this,Za))==null||t.destroy(),(e=o(this,Ci))==null||e.hide(),A(this,Ci,null),o(this,$i)&&(clearTimeout(o(this,$i)),A(this,$i,null)),o(this,Ui)&&(clearTimeout(o(this,Ui)),A(this,Ui,null)),b(this,wp,Bw).call(this)}async mlGuess(t){var e;return((e=o(this,eo))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!o(this,eo)}get hcmFilter(){return St(this,"hcmFilter",o(this,_r)?o(this,bh).addHCMFilter(o(this,_r).foreground,o(this,_r).background):"none")}get direction(){return St(this,"direction",getComputedStyle(o(this,En)).direction)}get highlightColors(){return St(this,"highlightColors",o(this,to)?new Map(o(this,to).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return St(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){A(this,xh,t)}editAltText(t){var e;(e=o(this,Za))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){A(this,Ja,t-1)}focusMainContainer(){o(this,En).focus()}findParent(t,e){for(const n of o(this,ye).values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){o(this,Nh).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,xr).add(t)}removeShouldRescale(t){o(this,xr).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ka.PDF_TO_CSS_UNITS;for(const e of o(this,xr))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=e,l=e.toString(),h=b(this,Yo,Fh).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(u){e.empty(),o(this,xe)===Et.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Et.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const c of o(this,ye).values())if(c.hasTextLayer(h)){c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:l});break}}}addToAnnotationStorage(t){!t.isEmpty()&&o(this,bn)&&!o(this,bn).has(t.id)&&o(this,bn).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,Ss)&&(A(this,Ss,!1),b(this,Ko,wu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Tt))if(e.div.contains(t)){A(this,Er,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Er))return;const[t,e]=o(this,Er);A(this,Er,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus()}addEditListeners(){b(this,jh,xp).call(this),b(this,$h,_p).call(this)}removeEditListeners(){b(this,Bh,Ep).call(this),b(this,Uh,Sp).call(this)}copy(t){var e;if(t.preventDefault(),(e=o(this,Qe))==null||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of o(this,Tt)){const r=s.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of o(this,An))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){yt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const h of n){const u=s.deserialize(h);if(!u)return;r.push(u)}const a=()=>{for(const h of r)b(this,Hh,Mp).call(this,h);b(this,zh,Tp).call(this,r)},l=()=>{for(const h of r)h.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){yt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,xe)!==Et.NONE&&!this.isEditorHandlingKeyboard&&Lp._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Ss)&&(A(this,Ss,!1),b(this,Ko,wu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(b(this,bp,$w).call(this),b(this,$h,_p).call(this),b(this,be,Te).call(this,{isEditing:o(this,xe)!==Et.NONE,isEmpty:b(this,Sr,no).call(this),hasSomethingToUndo:o(this,vi).hasSomethingToUndo(),hasSomethingToRedo:o(this,vi).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,Wh,Ap).call(this),b(this,Uh,Sp).call(this),b(this,be,Te).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,An)){A(this,An,t);for(const e of o(this,An))b(this,Zi,Ln).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,gp).id}get currentLayer(){return o(this,ye).get(o(this,Ja))}getLayer(t){return o(this,ye).get(t)}get currentPageIndex(){return o(this,Ja)}addLayer(t){o(this,ye).set(t.pageIndex,t),o(this,ks)?t.enable():t.disable()}removeLayer(t){o(this,ye).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(o(this,xe)!==t){if(A(this,xe,t),t===Et.NONE){this.setEditingState(!1),b(this,Cp,Hw).call(this);return}this.setEditingState(!0),b(this,kp,Uw).call(this),this.unselectAll();for(const s of o(this,ye).values())s.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const s of o(this,se).values())if(s.annotationElementId===e){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,xe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(o(this,An)){switch(t){case ct.CREATE:this.currentLayer.addNewEditor();return;case ct.HIGHLIGHT_DEFAULT_COLOR:(n=o(this,xh))==null||n.updateColor(e);break;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,io)||A(this,io,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of o(this,Tt))s.updateParams(t,e);for(const s of o(this,An))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var s;for(const r of o(this,se).values())r.editorType===t&&r.show(e);(((s=o(this,io))==null?void 0:s.get(ct.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,Zi,Ln).call(this,[[ct.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,Ah)!==t){A(this,Ah,t);for(const e of o(this,ye).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of o(this,se).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return o(this,se).get(t)}addEditor(t){o(this,se).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(o(this,$i)&&clearTimeout(o(this,$i)),A(this,$i,setTimeout(()=>{this.focusMainContainer(),A(this,$i,null)},0))),o(this,se).delete(t.id),this.unselect(t),(!t.annotationElementId||!o(this,Ar).has(t.annotationElementId))&&((e=o(this,bn))==null||e.remove(t.id))}addDeletedAnnotationElement(t){o(this,Ar).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,Ar).has(t)}removeDeletedAnnotationElement(t){o(this,Ar).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,Qe)!==t&&(A(this,Qe,t),t&&b(this,Zi,Ln).call(this,t.propertiesToUpdate))}updateUI(t){o(this,Rp,zw)===t&&b(this,Zi,Ln).call(this,t.propertiesToUpdate)}toggleSelected(t){if(o(this,Tt).has(t)){o(this,Tt).delete(t),t.unselect(),b(this,be,Te).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Tt).add(t),t.select(),b(this,Zi,Ln).call(this,t.propertiesToUpdate),b(this,be,Te).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of o(this,Tt))e!==t&&e.unselect();o(this,Tt).clear(),o(this,Tt).add(t),t.select(),b(this,Zi,Ln).call(this,t.propertiesToUpdate),b(this,be,Te).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Tt).has(t)}get firstSelectedEditor(){return o(this,Tt).values().next().value}unselect(t){t.unselect(),o(this,Tt).delete(t),b(this,be,Te).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Tt).size!==0}get isEnterHandled(){return o(this,Tt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){o(this,vi).undo(),b(this,be,Te).call(this,{hasSomethingToUndo:o(this,vi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,Sr,no).call(this)})}redo(){o(this,vi).redo(),b(this,be,Te).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,vi).hasSomethingToRedo(),isEmpty:b(this,Sr,no).call(this)})}addCommands(t){o(this,vi).add(t),b(this,be,Te).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,Sr,no).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...o(this,Tt)],e=()=>{for(const s of t)s.remove()},n=()=>{for(const s of t)b(this,Hh,Mp).call(this,s)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=o(this,Qe))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,Qe)||this.hasSelection}selectAll(){for(const t of o(this,Tt))t.commit();b(this,zh,Tp).call(this,o(this,se).values())}unselectAll(){if(!(o(this,Qe)&&(o(this,Qe).commitOrRemove(),o(this,xe)!==Et.NONE))&&this.hasSelection){for(const t of o(this,Tt))t.unselect();o(this,Tt).clear(),b(this,be,Te).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,hs)[0]+=t,o(this,hs)[1]+=e;const[s,r]=o(this,hs),a=[...o(this,Tt)];o(this,Ui)&&clearTimeout(o(this,Ui)),A(this,Ui,setTimeout(()=>{A(this,Ui,null),o(this,hs)[0]=o(this,hs)[1]=0,this.addCommands({cmd:()=>{for(const h of a)o(this,se).has(h.id)&&h.translateInPage(s,r)},undo:()=>{for(const h of a)o(this,se).has(h.id)&&h.translateInPage(-s,-r)},mustExec:!1})},1e3));for(const h of a)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Bi,new Map);for(const t of o(this,Tt))o(this,Bi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Bi))return!1;this.disableUserSelect(!1);const t=o(this,Bi);A(this,Bi,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},l]of t)l.newX=s,l.newY=r,l.newPageIndex=a,e||(e=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(s,r,a,l)=>{if(o(this,se).has(s.id)){const h=o(this,ye).get(l);h?s._setParentAndPosition(h,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of t)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,Bi))for(const n of o(this,Bi).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Tt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,Qe)===t}getActive(){return o(this,Qe)}getMode(){return o(this,xe)}get imageManager(){return St(this,"imageManager",new N2)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,c=e.rangeCount;u<c;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,c,f,g)=>({x:(c-s)/a,y:1-(u+f-n)/r,width:g/a,height:f/r});break;case"180":l=(u,c,f,g)=>({x:1-(u+f-n)/r,y:1-(c+g-s)/a,width:f/r,height:g/a});break;case"270":l=(u,c,f,g)=>({x:1-(c+g-s)/a,y:(u-n)/r,width:g/a,height:f/r});break;default:l=(u,c,f,g)=>({x:(u-n)/r,y:(c-s)/a,width:f/r,height:g/a});break}const h=[];for(let u=0,c=e.rangeCount;u<c;u++){const f=e.getRangeAt(u);if(!f.collapsed)for(const{x:g,y:v,width:w,height:x}of f.getClientRects())w===0||x===0||h.push(l(g,v,w,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,br)||A(this,br,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,br))==null||e.delete(t)}renderAnnotationElement(t){var e;const n=(e=o(this,br))==null?void 0:e.get(t.data.id);if(!n)return;const s=o(this,bn).getRawValue(n);s&&(o(this,xe)===Et.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};Qe=new WeakMap,se=new WeakMap,ye=new WeakMap,Za=new WeakMap,bn=new WeakMap,br=new WeakMap,vi=new WeakMap,Ja=new WeakMap,Ar=new WeakMap,Bi=new WeakMap,An=new WeakMap,xr=new WeakMap,yu=new WeakMap,bh=new WeakMap,$i=new WeakMap,to=new WeakMap,Ss=new WeakMap,Ci=new WeakMap,gp=new WeakMap,ks=new WeakMap,Ah=new WeakMap,Er=new WeakMap,xh=new WeakMap,eo=new WeakMap,xe=new WeakMap,Tt=new WeakMap,xn=new WeakMap,_r=new WeakMap,io=new WeakMap,Eh=new WeakMap,_h=new WeakMap,Sh=new WeakMap,kh=new WeakMap,Ch=new WeakMap,Mh=new WeakMap,Rh=new WeakMap,Th=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Oh=new WeakMap,hs=new WeakMap,Ui=new WeakMap,En=new WeakMap,Nh=new WeakMap,Yo=new WeakSet,Fh=function({anchorNode:i}){return i.nodeType===Node.TEXT_NODE?i.parentElement:i},mp=new WeakSet,s0=function(){const i=document.getSelection();if(!i||i.isCollapsed)return;const t=b(this,Yo,Fh).call(this,i).closest(".textLayer"),e=this.getSelectionBoxes(t);e&&(o(this,Ci)||A(this,Ci,new I2(this)),o(this,Ci).show(t,e,this.direction==="ltr"))},vp=new WeakSet,Ww=function(){var i,t,e;const n=document.getSelection();if(!n||n.isCollapsed){o(this,xn)&&((i=o(this,Ci))==null||i.hide(),A(this,xn,null),b(this,be,Te).call(this,{hasSelectedText:!1}));return}const{anchorNode:s}=n;if(s!==o(this,xn)){if(!b(this,Yo,Fh).call(this,n).closest(".textLayer")){o(this,xn)&&((t=o(this,Ci))==null||t.hide(),A(this,xn,null),b(this,be,Te).call(this,{hasSelectedText:!1}));return}if((e=o(this,Ci))==null||e.hide(),A(this,xn,s),b(this,be,Te).call(this,{hasSelectedText:!0}),!(o(this,xe)!==Et.HIGHLIGHT&&o(this,xe)!==Et.NONE)&&(o(this,xe)===Et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Ss,this.isShiftKeyDown),!this.isShiftKeyDown)){const r=a=>{a.type==="pointerup"&&a.button!==0||(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),a.type==="pointerup"&&b(this,Ko,wu).call(this,"main_toolbar"))};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}}},Ko=new WeakSet,wu=function(i=""){o(this,xe)===Et.HIGHLIGHT?this.highlightSelection(i):o(this,yu)&&b(this,mp,s0).call(this)},yp=new WeakSet,jw=function(){document.addEventListener("selectionchange",o(this,Ih))},wp=new WeakSet,Bw=function(){document.removeEventListener("selectionchange",o(this,Ih))},bp=new WeakSet,$w=function(){window.addEventListener("focus",o(this,_h)),window.addEventListener("blur",o(this,Eh))},Wh=new WeakSet,Ap=function(){window.removeEventListener("focus",o(this,_h)),window.removeEventListener("blur",o(this,Eh))},jh=new WeakSet,xp=function(){window.addEventListener("keydown",o(this,Mh)),window.addEventListener("keyup",o(this,Rh))},Bh=new WeakSet,Ep=function(){window.removeEventListener("keydown",o(this,Mh)),window.removeEventListener("keyup",o(this,Rh))},$h=new WeakSet,_p=function(){document.addEventListener("copy",o(this,Sh)),document.addEventListener("cut",o(this,kh)),document.addEventListener("paste",o(this,Ch))},Uh=new WeakSet,Sp=function(){document.removeEventListener("copy",o(this,Sh)),document.removeEventListener("cut",o(this,kh)),document.removeEventListener("paste",o(this,Ch))},be=new WeakSet,Te=function(i){Object.entries(i).some(([t,e])=>o(this,Oh)[t]!==e)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Oh),i)}),o(this,xe)===Et.HIGHLIGHT&&i.hasSelectedEditor===!1&&b(this,Zi,Ln).call(this,[[ct.HIGHLIGHT_FREE,!0]]))},Zi=new WeakSet,Ln=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},kp=new WeakSet,Uw=function(){if(!o(this,ks)){A(this,ks,!0);for(const i of o(this,ye).values())i.enable();for(const i of o(this,se).values())i.enable()}},Cp=new WeakSet,Hw=function(){if(this.unselectAll(),o(this,ks)){A(this,ks,!1);for(const i of o(this,ye).values())i.disable();for(const i of o(this,se).values())i.disable()}},Hh=new WeakSet,Mp=function(i){const t=o(this,ye).get(i.pageIndex);t?t.addOrRebuild(i):(this.addEditor(i),this.addToAnnotationStorage(i))},Rp=new WeakSet,zw=function(){let i=null;for(i of o(this,Tt));return i},Sr=new WeakSet,no=function(){if(o(this,se).size===0)return!0;if(o(this,se).size===1)for(const i of o(this,se).values())return i.isEmpty();return!1},zh=new WeakSet,Tp=function(i){for(const t of o(this,Tt))t.unselect();o(this,Tt).clear();for(const t of i)t.isEmpty()||(o(this,Tt).add(t),t.select());b(this,be,Te).call(this,{hasSelectedEditor:this.hasSelection})},ft(Pp,"TRANSLATE_SMALL",1),ft(Pp,"TRANSLATE_BIG",10);let wl=Pp;var Fn,Wn,bi,In,Pi,so,qn,Vh,Ip;const Gh=class qh{constructor(t){m(this,Vh),m(this,Fn,""),m(this,Wn,!1),m(this,bi,null),m(this,In,null),m(this,Pi,null),m(this,so,!1),m(this,qn,null),A(this,qn,t)}static initialize(t){qh._l10nPromise||(qh._l10nPromise=t)}async render(){const t=A(this,bi,document.createElement("button"));t.className="altText";const e=await qh._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",$e),t.addEventListener("pointerdown",s=>s.stopPropagation());const n=s=>{s.preventDefault(),o(this,qn)._uiManager.editAltText(o(this,qn))};return t.addEventListener("click",n,{capture:!0}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(A(this,so,!0),n(s))}),await b(this,Vh,Ip).call(this),t}finish(){o(this,bi)&&(o(this,bi).focus({focusVisible:o(this,so)}),A(this,so,!1))}isEmpty(){return!o(this,Fn)&&!o(this,Wn)}get data(){return{altText:o(this,Fn),decorative:o(this,Wn)}}set data({altText:t,decorative:e}){o(this,Fn)===t&&o(this,Wn)===e||(A(this,Fn,t),A(this,Wn,e),b(this,Vh,Ip).call(this))}toggle(t=!1){o(this,bi)&&(!t&&o(this,Pi)&&(clearTimeout(o(this,Pi)),A(this,Pi,null)),o(this,bi).disabled=!t)}destroy(){var t;(t=o(this,bi))==null||t.remove(),A(this,bi,null),A(this,In,null)}};Fn=new WeakMap,Wn=new WeakMap,bi=new WeakMap,In=new WeakMap,Pi=new WeakMap,so=new WeakMap,qn=new WeakMap,Vh=new WeakSet,Ip=async function(){var i;const t=o(this,bi);if(!t)return;if(!o(this,Fn)&&!o(this,Wn)){t.classList.remove("done"),(i=o(this,In))==null||i.remove();return}t.classList.add("done"),Gh._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(s=>{t.setAttribute("aria-label",s)});let e=o(this,In);if(!e){A(this,In,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const s=e.id=`alt-text-tooltip-${o(this,qn).id}`;t.setAttribute("aria-describedby",s);const r=100;t.addEventListener("mouseenter",()=>{A(this,Pi,setTimeout(()=>{A(this,Pi,null),o(this,In).classList.add("show"),o(this,qn)._reportTelemetry({action:"alt_text_tooltip"})},r))}),t.addEventListener("mouseleave",()=>{var a;o(this,Pi)&&(clearTimeout(o(this,Pi)),A(this,Pi,null)),(a=o(this,In))==null||a.classList.remove("show")})}e.innerText=o(this,Wn)?await Gh._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):o(this,Fn),e.parentNode||t.append(e);const n=o(this,qn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},ft(Gh,"_l10nPromise",null);let r0=Gh;var Mi,Oe,ro,kr,Ee,Yr,ao,oo,Re,bu,Kr,Hi,Yh,Cr,Yn,zi,lo,ho,Ze,Kh,Dp,Xh,Op,Au,Np,Qh,hf,Fp,Vw,Wp,a0,Zh,cf,xu,jp,Eu,Bp,$p,Gw,Up,qw,Hp,Yw,zp,Kw,_u,Vp,Xr,Xo;const Vi=class ue{constructor(t){m(this,Xh),m(this,Qh),m(this,Fp),m(this,Wp),m(this,Zh),m(this,xu),m(this,Eu),m(this,$p),m(this,Up),m(this,Hp),m(this,zp),m(this,_u),m(this,Xr),m(this,Mi,null),m(this,Oe,null),m(this,ro,!1),m(this,kr,!1),m(this,Ee,null),m(this,Yr,null),m(this,ao,this.focusin.bind(this)),m(this,oo,this.focusout.bind(this)),m(this,Re,null),m(this,bu,""),m(this,Kr,!1),m(this,Hi,null),m(this,Yh,!1),m(this,Cr,!1),m(this,Yn,!1),m(this,zi,null),m(this,lo,0),m(this,ho,0),m(this,Ze,null),ft(this,"_initialOptions",Object.create(null)),ft(this,"_isVisible",!0),ft(this,"_uiManager",null),ft(this,"_focusEventsAllowed",!0),ft(this,"_l10nPromise",null),m(this,Kh,!1),m(this,Dp,ue._zIndex++),this.constructor===ue&&Pt("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,h]=this.parentDimensions;this.x=t.x/l,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=ue.prototype._resizeWithKeyboard,e=wl.TRANSLATE_SMALL,n=wl.TRANSLATE_BIG;return St(this,"_resizerKeyboardManager",new _l([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return St(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new j2({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(ue._l10nPromise||(ue._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),n!=null&&n.strings)for(const r of n.strings)ue._l10nPromise.set(r,t.get(r));if(ue._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ue._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Pt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Kh)}set _isDraggable(t){var e;A(this,Kh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,Dp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,Xr,Xo).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,Kr)?A(this,Kr,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=t.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(t.preventDefault(),(e=this.parent)!=null&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){b(this,Xh,Op).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,Hi)||A(this,Hi,[this.x,this.y]),b(this,Xh,Op).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){o(this,Hi)||A(this,Hi,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:c}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,c)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,h]=this.getBaseTranslation();r+=l,a+=h,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!o(this,Hi)&&(o(this,Hi)[0]!==this.x||o(this,Hi)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=ue,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:s,y:r,width:a,height:l}=this;if(a*=e,l*=n,s*=e,r*=n,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(n-l,r));break;case 90:s=Math.max(0,Math.min(e-l,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(n,Math.max(l,r));break;case 270:s=Math.min(e,Math.max(l,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=e,this.y=r/=n;const[h,u]=this.getBaseTranslation();s+=h,r+=u;const{style:c}=this.div;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return b(n=ue,Au,Np).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return b(n=ue,Au,Np).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,s=e*t,r=n*t;return Ue.isCSSRoundSupported?[Math.round(s),Math.round(r)]:[s,r]}setDims(t,e){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,o(this,kr)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!o(this,kr)&&e.endsWith("%");if(s&&r)return;const[a,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!o(this,kr)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=o(this,Oe))==null||t.finish()}async addEditToolbar(){return o(this,Re)||o(this,Cr)?o(this,Re):(A(this,Re,new L2(this)),this.div.append(o(this,Re).render()),o(this,Oe)&&o(this,Re).addAltTextButton(await o(this,Oe).render()),o(this,Re))}removeEditToolbar(){var t;o(this,Re)&&(o(this,Re).remove(),A(this,Re,null),(t=o(this,Oe))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,Oe)||(r0.initialize(ue._l10nPromise),A(this,Oe,new r0(this)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,Oe))==null?void 0:t.data}set altTextData(t){o(this,Oe)&&(o(this,Oe).data=t)}hasAltText(){var t;return!((t=o(this,Oe))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,ro)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",o(this,ao)),this.div.addEventListener("focusout",o(this,oo));const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),mu(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Kr,!0),this._isDraggable){b(this,$p,Gw).call(this,t);return}b(this,Eu,Bp).call(this,t)}moveInDOM(){o(this,zi)&&clearTimeout(o(this,zi)),A(this,zi,setTimeout(()=>{var t;A(this,zi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,h]=this.pageTranslation,u=t/s,c=e/s,f=this.x*r,g=this.y*a,v=this.width*r,w=this.height*a;switch(n){case 0:return[f+u+l,a-g-c-w+h,f+u+v+l,a-g-c+h];case 90:return[f+c+l,a-g+u+h,f+c+w+l,a-g+u+v+h];case 180:return[f-u-v+l,a-g+c+h,f-u+l,a-g+c+w+h];case 270:return[f-c-w+l,a-g-u-v+h,f-c+l,a-g-u+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,l=r-n,h=a-s;switch(this.rotation){case 0:return[n,e-a,l,h];case 90:return[n,e-s,h,l];case 180:return[r,e-s,l,h];case 270:return[r,e-a,h,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){A(this,Cr,!0)}disableEditMode(){A(this,Cr,!1)}isInEditMode(){return o(this,Cr)}shouldGetKeyboardEvents(){return o(this,Yn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;(t=this.div)==null||t.addEventListener("focusin",o(this,ao)),(e=this.div)==null||e.addEventListener("focusout",o(this,oo))}rotate(t){}serialize(t=!1,e=null){Pt("An editor must be serializable")}static deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation;const[r,a]=s.pageDimensions,[l,h,u,c]=s.getRectInCurrentCoords(t.rect,a);return s.x=l/r,s.y=h/a,s.width=u/r,s.height=c/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",o(this,ao)),this.div.removeEventListener("focusout",o(this,oo)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,zi)&&(clearTimeout(o(this,zi)),A(this,zi,null)),b(this,Xr,Xo).call(this),this.removeEditToolbar(),o(this,Ze)){for(const t of o(this,Ze).values())clearTimeout(t);A(this,Ze,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,Fp,Vw).call(this),o(this,Ee).classList.remove("hidden"),mu(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Yr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ee).children;if(!o(this,Mi)){A(this,Mi,Array.from(e));const a=b(this,Up,qw).bind(this),l=b(this,Hp,Yw).bind(this);for(const h of o(this,Mi)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a),h.addEventListener("blur",l),h.addEventListener("focus",b(this,zp,Kw).bind(this,u)),ue._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(c=>h.setAttribute("aria-label",c))}}const n=o(this,Mi)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(o(this,Mi).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)o(this,Ee).append(o(this,Ee).firstChild);else if(r>s)for(let l=0;l<r-s;l++)o(this,Ee).firstChild.before(o(this,Ee).lastChild);let a=0;for(const l of e){const h=o(this,Mi)[a++].getAttribute("data-resizer-name");ue._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(u=>l.setAttribute("aria-label",u))}}b(this,_u,Vp).call(this,0),A(this,Yn,!0),o(this,Ee).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,Yn)&&b(this,xu,jp).call(this,o(this,bu),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){b(this,Xr,Xo).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!o(this,Re)){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=o(this,Re))==null||s.show())});return}(e=o(this,Re))==null||e.show()}unselect(){var t,e,n,s;(t=o(this,Ee))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=o(this,Re))==null||s.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,Yh)}set isEditing(t){A(this,Yh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,kr,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,Ze)||A(this,Ze,new Map);const{action:n}=t;let s=o(this,Ze).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),o(this,Ze).delete(n),o(this,Ze).size===0&&A(this,Ze,null)},ue._telemetryTimeout),o(this,Ze).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,ro,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,ro,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Mi=new WeakMap,Oe=new WeakMap,ro=new WeakMap,kr=new WeakMap,Ee=new WeakMap,Yr=new WeakMap,ao=new WeakMap,oo=new WeakMap,Re=new WeakMap,bu=new WeakMap,Kr=new WeakMap,Hi=new WeakMap,Yh=new WeakMap,Cr=new WeakMap,Yn=new WeakMap,zi=new WeakMap,lo=new WeakMap,ho=new WeakMap,Ze=new WeakMap,Kh=new WeakMap,Dp=new WeakMap,Xh=new WeakSet,Op=function([i,t],e,n){[e,n]=this.screenToPageTranslation(e,n),this.x+=e/i,this.y+=n/t,this.fixAndSetPosition()},Au=new WeakSet,Np=function(i,t,e){switch(e){case 90:return[t,-i];case 180:return[-i,-t];case 270:return[-t,i];default:return[i,t]}},Qh=new WeakSet,hf=function(i){switch(i){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}},Fp=new WeakSet,Vw=function(){if(o(this,Ee))return;A(this,Ee,document.createElement("div")),o(this,Ee).classList.add("resizers");const i=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of i){const e=document.createElement("div");o(this,Ee).append(e),e.classList.add("resizer",t),e.setAttribute("data-resizer-name",t),e.addEventListener("pointerdown",b(this,Wp,a0).bind(this,t)),e.addEventListener("contextmenu",$e),e.tabIndex=-1}this.div.prepend(o(this,Ee))},Wp=new WeakSet,a0=function(i,t){var e;t.preventDefault();const{isMac:n}=Ue.platform;if(t.button!==0||t.ctrlKey&&n)return;(e=o(this,Oe))==null||e.toggle(!1);const s=b(this,xu,jp).bind(this,i),r=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",$e);const l=this.x,h=this.y,u=this.width,c=this.height,f=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const v=()=>{var w;this.parent.togglePointerEvents(!0),(w=o(this,Oe))==null||w.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",v),window.removeEventListener("blur",v),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",$e),this.parent.div.style.cursor=f,this.div.style.cursor=g,b(this,Zh,cf).call(this,l,h,u,c)};window.addEventListener("pointerup",v),window.addEventListener("blur",v)},Zh=new WeakSet,cf=function(i,t,e,n){const s=this.x,r=this.y,a=this.width,l=this.height;s===i&&r===t&&a===e&&l===n||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=r;const[h,u]=this.parentDimensions;this.setDims(h*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=e,this.height=n,this.x=i,this.y=t;const[h,u]=this.parentDimensions;this.setDims(h*e,u*n),this.fixAndSetPosition()},mustExec:!0})},xu=new WeakSet,jp=function(i,t){const[e,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,l=this.height,h=Vi.MIN_SIZE/e,u=Vi.MIN_SIZE/n,c=z=>Math.round(z*1e4)/1e4,f=b(this,Qh,hf).call(this,this.rotation),g=(z,W)=>[f[0]*z+f[2]*W,f[1]*z+f[3]*W],v=b(this,Qh,hf).call(this,360-this.rotation),w=(z,W)=>[v[0]*z+v[2]*W,v[1]*z+v[3]*W];let x,E,_=!1,C=!1;switch(i){case"topLeft":_=!0,x=(z,W)=>[0,0],E=(z,W)=>[z,W];break;case"topMiddle":x=(z,W)=>[z/2,0],E=(z,W)=>[z/2,W];break;case"topRight":_=!0,x=(z,W)=>[z,0],E=(z,W)=>[0,W];break;case"middleRight":C=!0,x=(z,W)=>[z,W/2],E=(z,W)=>[0,W/2];break;case"bottomRight":_=!0,x=(z,W)=>[z,W],E=(z,W)=>[0,0];break;case"bottomMiddle":x=(z,W)=>[z/2,W],E=(z,W)=>[z/2,0];break;case"bottomLeft":_=!0,x=(z,W)=>[0,W],E=(z,W)=>[z,0];break;case"middleLeft":C=!0,x=(z,W)=>[0,W/2],E=(z,W)=>[z,W/2];break}const R=x(a,l),P=E(a,l);let I=g(...P);const F=c(s+I[0]),L=c(r+I[1]);let S=1,k=1,[O,N]=this.screenToPageTranslation(t.movementX,t.movementY);if([O,N]=w(O/e,N/n),_){const z=Math.hypot(a,l);S=k=Math.max(Math.min(Math.hypot(P[0]-R[0]-O,P[1]-R[1]-N)/z,1/a,1/l),h/a,u/l)}else C?S=Math.max(h,Math.min(1,Math.abs(P[0]-R[0]-O)))/a:k=Math.max(u,Math.min(1,Math.abs(P[1]-R[1]-N)))/l;const B=c(a*S),$=c(l*k);I=g(...E(B,$));const Y=F-I[0],X=L-I[1];this.width=B,this.height=$,this.x=Y,this.y=X,this.setDims(e*B,n*$),this.fixAndSetPosition()},Eu=new WeakSet,Bp=function(i){const{isMac:t}=Ue.platform;i.ctrlKey&&!t||i.shiftKey||i.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},$p=new WeakSet,Gw=function(i){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let e,n;t&&(this.div.classList.add("moving"),e={passive:!0,capture:!0},A(this,lo,i.clientX),A(this,ho,i.clientY),n=r=>{const{clientX:a,clientY:l}=r,[h,u]=this.screenToPageTranslation(a-o(this,lo),l-o(this,ho));A(this,lo,a),A(this,ho,l),this._uiManager.dragSelectedEditors(h,u)},window.addEventListener("pointermove",n,e));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,e)),A(this,Kr,!1),this._uiManager.endDragSession()||b(this,Eu,Bp).call(this,i)};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},Up=new WeakSet,qw=function(i){Vi._resizerKeyboardManager.exec(this,i)},Hp=new WeakSet,Yw=function(i){var t;o(this,Yn)&&((t=i.relatedTarget)==null?void 0:t.parentNode)!==o(this,Ee)&&b(this,Xr,Xo).call(this)},zp=new WeakSet,Kw=function(i){A(this,bu,o(this,Yn)?i:"")},_u=new WeakSet,Vp=function(i){if(o(this,Mi))for(const t of o(this,Mi))t.tabIndex=i},Xr=new WeakSet,Xo=function(){if(A(this,Yn,!1),b(this,_u,Vp).call(this,-1),o(this,Yr)){const{savedX:i,savedY:t,savedWidth:e,savedHeight:n}=o(this,Yr);b(this,Zh,cf).call(this,i,t,e,n),A(this,Yr,null)}},m(Vi,Au),ft(Vi,"_borderLineWidth",-1),ft(Vi,"_colorManager",new W2),ft(Vi,"_zIndex",1),ft(Vi,"_telemetryTimeout",1e3);let Dt=Vi;class j2 extends Dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const o0=3285377520,Ke=4294901760,mi=65535;class Xw{constructor(t){this.h1=t?t&4294967295:o0,this.h2=t?t&4294967295:o0}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,E=t.length;x<E;x++){const _=t.charCodeAt(x);_<=255?e[n++]=_:(e[n++]=_>>>8,e[n++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let l=0,h=0,u=this.h1,c=this.h2;const f=3432918353,g=461845907,v=f&mi,w=g&mi;for(let x=0;x<s;x++)x&1?(l=a[x],l=l*f&Ke|l*v&mi,l=l<<15|l>>>17,l=l*g&Ke|l*w&mi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(h=a[x],h=h*f&Ke|h*v&mi,h=h<<15|h>>>17,h=h*g&Ke|h*w&mi,c^=h,c=c<<13|c>>>19,c=c*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*f&Ke|l*v&mi,l=l<<15|l>>>17,l=l*g&Ke|l*w&mi,s&1?u^=l:c^=l}this.h1=u,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ke|t*36045&mi,e=e*4283543511&Ke|((e<<16|t>>>16)*2950163797&Ke)>>>16,t^=e>>>1,t=t*444984403&Ke|t*60499&mi,e=e*3301882366&Ke|((e<<16|t>>>16)*3120437893&Ke)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Gp=Object.freeze({map:null,hash:"",transfer:void 0});var ha,ge,qp,Qw;class Jm{constructor(){m(this,qp),m(this,ha,!1),m(this,ge,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=o(this,ge).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return o(this,ge).get(t)}remove(t){if(o(this,ge).delete(t),o(this,ge).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,ge).values())if(e instanceof Dt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=o(this,ge).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,o(this,ge).set(t,e);s&&b(this,qp,Qw).call(this),e instanceof Dt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,ge).has(t)}getAll(){return o(this,ge).size>0?Gm(o(this,ge)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return o(this,ge).size}resetModified(){o(this,ha)&&(A(this,ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Zw(this)}get serializable(){if(o(this,ge).size===0)return Gp;const t=new Map,e=new Xw,n=[],s=Object.create(null);let r=!1;for(const[a,l]of o(this,ge)){const h=l instanceof Dt?l.serialize(!1,s):l;h&&(t.set(a,h),e.update(`${a}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Gp}get editorStats(){let t=null;const e=new Map;for(const n of o(this,ge).values()){if(!(n instanceof Dt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,h]of Object.entries(s)){if(l==="type")continue;let u=a.get(l);u||(u=new Map,a.set(l,u));const c=u.get(h)??0;u.set(h,c+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}}ha=new WeakMap,ge=new WeakMap,qp=new WeakSet,Qw=function(){o(this,ha)||(A(this,ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Jh;class Zw extends Jm{constructor(t){super(),m(this,Jh,void 0);const{map:e,hash:n,transfer:s}=t.serializable,r=structuredClone(e,s?{transfer:s}:null);A(this,Jh,{map:r,hash:n,transfer:s})}get print(){Pt("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Jh)}}Jh=new WeakMap;var co;class B2{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){m(this,co,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,co).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||o(this,co).has(t.loadedName))){if(Qt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=t,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),o(this,co).add(n),e==null||e(t)}catch{yt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Pt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw yt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return St(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let t=!1;return(ke||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),St(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Qt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return St(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,P){return R.charCodeAt(P)<<24|R.charCodeAt(P+1)<<16|R.charCodeAt(P+2)<<8|R.charCodeAt(P+3)&255}function s(R,P,I,F){const L=R.substring(0,P),S=R.substring(P+I);return L+F+S}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const h=l.getContext("2d");let u=0;function c(R,P){if(++u>30){yt("Load test font never loaded."),P();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(c.bind(null,R,P))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=s(g,976,f.length,f);const v=16,w=1482184792;let x=n(g,v);for(r=0,a=f.length-3;r<a;r+=4)x=x-w+n(f,r)|0;r<f.length&&(x=x-w+n(f+"XXX",r)|0),g=s(g,v,4,b2(x));const E=`url(data:font/opentype;base64,${btoa(g)});`,_=`@font-face {font-family:"${f}";src:${E}}`;this.insertRule(_);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const R of[t.loadedName,f]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=R,C.append(P)}this._document.body.append(C),c(f,()=>{C.remove(),e.complete()})}}co=new WeakMap;class $2{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e=Aw(this.data),n=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${n}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${n}}`}return(t=this._inspectFont)==null||t.call(this,this,n),s}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){yt(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case Fi.BEZIER_CURVE_TO:{const[l,h,u,c,f,g]=n.slice(r,r+6);s.push(v=>v.bezierCurveTo(l,h,u,c,f,g)),r+=6}break;case Fi.MOVE_TO:{const[l,h]=n.slice(r,r+2);s.push(u=>u.moveTo(l,h)),r+=2}break;case Fi.LINE_TO:{const[l,h]=n.slice(r,r+2);s.push(u=>u.lineTo(l,h)),r+=2}break;case Fi.QUADRATIC_CURVE_TO:{const[l,h,u,c]=n.slice(r,r+4);s.push(f=>f.quadraticCurveTo(l,h,u,c)),r+=4}break;case Fi.RESTORE:s.push(l=>l.restore());break;case Fi.SAVE:s.push(l=>l.save());break;case Fi.SCALE:Qt(s.length===2,"Scale command is only valid at the third position.");break;case Fi.TRANSFORM:{const[l,h,u,c,f,g]=n.slice(r,r+6);s.push(v=>v.transform(l,h,u,c,f,g)),r+=6}break;case Fi.TRANSLATE:{const[l,h]=n.slice(r,r+2);s.push(u=>u.translate(l,h)),r+=2}break}return this.compiledGlyphs[e]=function(r,a){s[0](r),s[1](r),r.scale(a,-a);for(let l=2,h=s.length;l<h;l++)s[l](r)}}}if(ke){var Yp=Promise.withResolvers(),Su=null;(async()=>{const i=await Ml(()=>import("./empty-GlqisfcO-CRMO4_-l.js"),[]),t=await Ml(()=>import("./index-4HENfCPg-DR773atM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(a=>a.i),e=await Ml(()=>import("./index-BepDdkdq-CvXgvN1D.js"),__vite__mapDeps([15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(a=>a.i),n=await Ml(()=>import("./url-DQYFKQ_E-DsOcrHNn.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(a=>a.u);let s,r;return new Map(Object.entries({fs:i,http:t,https:e,url:n,canvas:s,path2d:r}))})().then(i=>{Su=i,Yp.resolve()},i=>{yt(`loadPackages: ${i}`),Su=new Map,Yp.resolve()})}class Di{static get promise(){return Yp.promise}static get(t){return Su==null?void 0:Su.get(t)}}const Jw=function(i){return Di.get("fs").promises.readFile(i).then(t=>new Uint8Array(t))};class U2 extends Ed{}class H2 extends _d{_createCanvas(t,e){return Di.get("canvas").createCanvas(t,e)}}class z2 extends Sd{_fetchData(t,e){return Jw(t).then(n=>({cMapData:n,compressionType:e}))}}class V2 extends kd{_fetchData(t){return Jw(t)}}const Pe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Kp(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class Sl{constructor(){this.constructor===Sl&&Pt("Cannot initialize BaseShadingPattern.")}getPattern(){Pt("Abstract method `getPattern` called.")}}class G2 extends Sl{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Pe.STROKE||s===Pe.FILL){const a=e.current.getClippedPathBoundingBox(s,jt(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,h,!0),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=Z.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),Kp(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);r.setTransform(f)}else Kp(t,this._bbox),r=this._createGradient(t);return r}}function uf(i,t,e,n,s,r,a,l){const h=t.coords,u=t.colors,c=i.data,f=i.width*4;let g;h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=r,r=a,a=g),h[n+1]>h[s+1]&&(g=n,n=s,s=g,g=a,a=l,l=g),h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=r,r=a,a=g);const v=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,E=(h[n+1]+t.offsetY)*t.scaleY,_=(h[s]+t.offsetX)*t.scaleX,C=(h[s+1]+t.offsetY)*t.scaleY;if(w>=C)return;const R=u[r],P=u[r+1],I=u[r+2],F=u[a],L=u[a+1],S=u[a+2],k=u[l],O=u[l+1],N=u[l+2],B=Math.round(w),$=Math.round(C);let Y,X,z,W,at,G,bt,pt;for(let H=B;H<=$;H++){if(H<E){const et=H<w?0:(w-H)/(w-E);Y=v-(v-x)*et,X=R-(R-F)*et,z=P-(P-L)*et,W=I-(I-S)*et}else{let et;H>C?et=1:E===C?et=0:et=(E-H)/(E-C),Y=x-(x-_)*et,X=F-(F-k)*et,z=L-(L-O)*et,W=S-(S-N)*et}let it;H<w?it=0:H>C?it=1:it=(w-H)/(w-C),at=v-(v-_)*it,G=R-(R-k)*it,bt=P-(P-O)*it,pt=I-(I-N)*it;const tt=Math.round(Math.min(Y,at)),J=Math.round(Math.max(Y,at));let nt=f*H+tt*4;for(let et=tt;et<=J;et++)it=(Y-et)/(Y-at),it<0?it=0:it>1&&(it=1),c[nt++]=X-(X-G)*it|0,c[nt++]=z-(z-bt)*it|0,c[nt++]=W-(W-pt)*it|0,c[nt++]=255}}function q2(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,h=Math.floor(n.length/l)-1,u=l-1;for(r=0;r<h;r++){let c=r*l;for(let f=0;f<u;f++,c++)uf(i,e,n[c],n[c+1],n[c+l],s[c],s[c+1],s[c+l]),uf(i,e,n[c+l+1],n[c+1],n[c+l],s[c+l+1],s[c+1],s[c+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)uf(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Y2 extends Sl{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const s=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-s,l=Math.ceil(this._bounds[3])-r,h=Math.min(Math.ceil(Math.abs(a*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(l*t[1]*1.1)),3e3),c=a/h,f=l/u,g={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-r,scaleX:1/c,scaleY:1/f},v=h+2*2,w=u+2*2,x=n.getCanvas("mesh",v,w,!1),E=x.context,_=E.createImageData(h,u);if(e){const C=_.data;for(let R=0,P=C.length;R<P;R+=4)C[R]=e[0],C[R+1]=e[1],C[R+2]=e[2],C[R+3]=255}for(const C of this._figures)q2(_,C,g);return E.putImageData(_,2,2),{canvas:x.canvas,offsetX:s-2*c,offsetY:r-2*f,scaleX:c,scaleY:f}}getPattern(t,e,n,s){Kp(t,this._bbox);let r;if(s===Pe.SHADING)r=Z.singularValueDecompose2dScale(jt(t));else if(r=Z.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=Z.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,s===Pe.SHADING?null:this._background,e.cachedCanvases);return s!==Pe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class K2 extends Sl{getPattern(){return"hotpink"}}function X2(i){switch(i[0]){case"RadialAxial":return new G2(i);case"Mesh":return new Y2(i);case"Dummy":return new K2}throw new Error(`Unknown IR type: ${i[0]}`)}const l0={COLORED:1,UNCOLORED:2},tb=class eb{constructor(t,e,n,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,s=this.xstep,r=this.ystep,a=this.paintType,l=this.tilingType,h=this.color,u=this.canvasGraphicsFactory;bd("TilingType: "+l);const c=n[0],f=n[1],g=n[2],v=n[3],w=Z.singularValueDecompose2dScale(this.matrix),x=Z.singularValueDecompose2dScale(this.baseTransform),E=[w[0]*x[0],w[1]*x[1]],_=this.getSizeAndScale(s,this.ctx.canvas.width,E[0]),C=this.getSizeAndScale(r,this.ctx.canvas.height,E[1]),R=t.cachedCanvases.getCanvas("pattern",_.size,C.size,!0),P=R.context,I=u.createCanvasGraphics(P);I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,a,h);let F=c,L=f,S=g,k=v;return c<0&&(F=0,S+=Math.abs(c)),f<0&&(L=0,k+=Math.abs(f)),P.translate(-(_.scale*F),-(C.scale*L)),I.transform(_.scale,0,0,C.scale,0,0),P.save(),this.clipBbox(I,F,L,S,k),I.baseTransform=jt(I.ctx),I.executeOperatorList(e),I.endDrawing(),{canvas:R.canvas,scaleX:_.scale,scaleY:C.scale,offsetX:F,offsetY:L}}getSizeAndScale(t,e,n){t=Math.abs(t);const s=Math.max(eb.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(jt(t.ctx),[e,n,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case l0.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case l0.UNCOLORED:const l=Z.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new w2(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let r=n;s!==Pe.SHADING&&(r=Z.transform(r,e.baseTransform),this.matrix&&(r=Z.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const h=t.createPattern(a.canvas,"repeat");return h.setTransform(l),h}};ft(tb,"MAX_PATTERN_SIZE",3e3);let Q2=tb;function Z2({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ue.isLittleEndian?4278190080:255,[h,u]=a?[r,l]:[l,r],c=n>>3,f=n&7,g=i.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<s;w++){for(const E=t+c;t<E;t++){const _=t<g?i[t]:255;e[v++]=_&128?u:h,e[v++]=_&64?u:h,e[v++]=_&32?u:h,e[v++]=_&16?u:h,e[v++]=_&8?u:h,e[v++]=_&4?u:h,e[v++]=_&2?u:h,e[v++]=_&1?u:h}if(f===0)continue;const x=t<g?i[t++]:255;for(let E=0;E<f;E++)e[v++]=x&1<<7-E?u:h}return{srcPos:t,destPos:v}}const h0=16,c0=100,J2=15,u0=10,d0=1e3,Fe=16;function tR(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,s,r,a,l){t.transform(e,n,s,r,a,l),this.__originalTransform(e,n,s,r,a,l)},i.setTransform=function(e,n,s,r,a,l){t.setTransform(e,n,s,r,a,l),this.__originalSetTransform(e,n,s,r,a,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,l){t.bezierCurveTo(e,n,s,r,a,l),this.__originalBezierCurveTo(e,n,s,r,a,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class eR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Wl(i,t,e,n,s,r,a,l,h,u){const[c,f,g,v,w,x]=jt(i);if(f===0&&g===0){const C=a*c+w,R=Math.round(C),P=l*v+x,I=Math.round(P),F=(a+h)*c+w,L=Math.abs(Math.round(F)-R)||1,S=(l+u)*v+x,k=Math.abs(Math.round(S)-I)||1;return i.setTransform(Math.sign(c),0,0,Math.sign(v),R,I),i.drawImage(t,e,n,s,r,0,0,L,k),i.setTransform(c,f,g,v,w,x),[L,k]}if(c===0&&v===0){const C=l*g+w,R=Math.round(C),P=a*f+x,I=Math.round(P),F=(l+u)*g+w,L=Math.abs(Math.round(F)-R)||1,S=(a+h)*f+x,k=Math.abs(Math.round(S)-I)||1;return i.setTransform(0,Math.sign(f),Math.sign(g),0,R,I),i.drawImage(t,e,n,s,r,0,0,k,L),i.setTransform(c,f,g,v,w,x),[k,L]}i.drawImage(t,e,n,s,r,a,l,h,u);const E=Math.hypot(c,f),_=Math.hypot(g,v);return[E*h,_*u]}function iR(i){const{width:t,height:e}=i;if(t>d0||e>d0)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,h,u;const c=t+7&-8;let f=new Uint8Array(c*e),g=0;for(const E of i.data){let _=128;for(;_>0;)f[g++]=E&_?0:255,_>>=1}let v=0;for(g=0,f[g]!==0&&(a[0]=1,++v),h=1;h<t;h++)f[g]!==f[g+1]&&(a[h]=f[g]?2:1,++v),g++;for(f[g]!==0&&(a[h]=2,++v),l=1;l<e;l++){g=l*c,u=l*r,f[g-c]!==f[g]&&(a[u]=f[g]?1:8,++v);let E=(f[g]?4:0)+(f[g-c]?8:0);for(h=1;h<t;h++)E=(E>>2)+(f[g+1]?4:0)+(f[g-c+1]?8:0),s[E]&&(a[u+h]=s[E],++v),g++;if(f[g-c]!==f[g]&&(a[u+h]=f[g]?2:4,++v),v>n)return null}for(g=c*(e-1),u=l*r,f[g]!==0&&(a[u]=8,++v),h=1;h<t;h++)f[g]!==f[g+1]&&(a[u+h]=f[g]?4:8,++v),g++;if(f[g]!==0&&(a[u+h]=4,++v),v>n)return null;const w=new Int32Array([0,r,-1,0,-r,0,0,0,1]),x=new Path2D;for(l=0;v&&l<=e;l++){let E=l*r;const _=E+t;for(;E<_&&!a[E];)E++;if(E===_)continue;x.moveTo(E%r,l);const C=E;let R=a[E];do{const P=w[R];do E+=P;while(!a[E]);const I=a[E];I!==5&&I!==10?(R=I,a[E]=0):(R=I&51*R>>4,a[E]&=R>>2|R<<2),x.lineTo(E%r,E/r|0),a[E]||--v}while(C!==E);--l}return f=null,a=null,function(E){E.save(),E.scale(1/t,-1/e),E.translate(0,-e),E.fill(x),E.beginPath(),E.restore()}}class f0{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ww,this.textMatrixScale=1,this.fontMatrix=Kf,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=fe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Z.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Z.applyTransform(e,t),s=Z.applyTransform(e.slice(2),t),r=Z.applyTransform([e[0],e[3]],t),a=Z.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){Z.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,r,a,l,h,u,c){const f=Z.bezierBoundingBox(e,n,s,r,a,l,h,u,c);c||this.updateRectMinMax(t,f)}getPathBoundingBox(t=Pe.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Pe.STROKE){e||Pt("Stroke bounding box must include transform.");const s=Z.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=Z.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Pe.FILL,e=null){return Z.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function p0(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Fe,r=(e-s)/Fe,a=s===0?r:r+1,l=i.createImageData(n,Fe);let h=0,u;const c=t.data,f=l.data;let g,v,w,x;if(t.kind===uh.GRAYSCALE_1BPP){const E=c.byteLength,_=new Uint32Array(f.buffer,0,f.byteLength>>2),C=_.length,R=n+7>>3,P=4294967295,I=Ue.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(w=g<r?Fe:s,u=0,v=0;v<w;v++){const F=E-h;let L=0;const S=F>R?n:F*8-7,k=S&-8;let O=0,N=0;for(;L<k;L+=8)N=c[h++],_[u++]=N&128?P:I,_[u++]=N&64?P:I,_[u++]=N&32?P:I,_[u++]=N&16?P:I,_[u++]=N&8?P:I,_[u++]=N&4?P:I,_[u++]=N&2?P:I,_[u++]=N&1?P:I;for(;L<S;L++)O===0&&(N=c[h++],O=128),_[u++]=N&O?P:I,O>>=1}for(;u<C;)_[u++]=0;i.putImageData(l,0,g*Fe)}}else if(t.kind===uh.RGBA_32BPP){for(v=0,x=n*Fe*4,g=0;g<r;g++)f.set(c.subarray(h,h+x)),h+=x,i.putImageData(l,0,v),v+=Fe;g<a&&(x=n*s*4,f.set(c.subarray(h,h+x)),i.putImageData(l,0,v))}else if(t.kind===uh.RGB_24BPP)for(w=Fe,x=n*w,g=0;g<a;g++){for(g>=r&&(w=s,x=n*w),u=0,v=x;v--;)f[u++]=c[h++],f[u++]=c[h++],f[u++]=c[h++],f[u++]=255;i.putImageData(l,0,g*Fe)}else throw new Error(`bad image kind: ${t.kind}`)}function g0(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Fe,r=(e-s)/Fe,a=s===0?r:r+1,l=i.createImageData(n,Fe);let h=0;const u=t.data,c=l.data;for(let f=0;f<a;f++){const g=f<r?Fe:s;({srcPos:h}=Z2({src:u,srcPos:h,dest:c,width:n,height:g,nonBlackColor:0})),i.putImageData(l,0,f*Fe)}}function Oa(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function jl(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!ke){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function m0(i,t){if(t)return!0;const e=Z.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ka.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const nR=["butt","round","square"],sR=["miter","round","bevel"],rR={},v0={};var tc,Xp,ec,Qp;const aR=class ib{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},h,u){m(this,tc),m(this,ec),this.ctx=t,this.current=new f0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new eR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const h=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...jt(this.compositeCtx))}this.ctx.save(),jl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=jt(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,a=t.fnArray;let l=e||0;const h=r.length;if(h===l)return l;const u=h-l>u0&&typeof n=="function",c=u?Date.now()+J2:0;let f=0;const g=this.commonObjs,v=this.objs;let w;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(w=a[l],w!==ui.dependency)this[w].apply(this,r[l]);else for(const x of r[l]){const E=x.startsWith("g_")?g:v;if(!E.has(x))return E.get(x,n),l}if(l++,l===h)return l;if(u&&++f>u0){if(Date.now()>c)return n(),l;f=0}}}endDrawing(){b(this,tc,Xp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,ec,Qp).call(this)}_scaleImage(t,e){const n=t.width,s=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,h=s,u="prescale1",c,f;for(;r>2&&l>1||a>2&&h>1;){let g=l,v=h;r>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/g),a>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/v),c=this.cachedCanvases.getCanvas(u,g,v),f=c.context,f.clearRect(0,0,g,v),f.drawImage(t,0,0,l,h,0,0,g,v),t=c.canvas,l=g,h=v,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,l=jt(e);let h,u,c,f;if((t.bitmap||t.data)&&t.count>1){const S=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),r]),h=this._cachedBitmapsMap.get(S),h||(h=new Map,this._cachedBitmapsMap.set(S,h));const k=h.get(u);if(k&&!a){const O=Math.round(Math.min(l[0],l[2])+l[4]),N=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:k,offsetX:O,offsetY:N}}c=k}c||(f=this.cachedCanvases.getCanvas("maskCanvas",n,s),g0(f.context,t));let g=Z.transform(l,[1/n,0,0,-1/s,0,0]);g=Z.transform(g,[1,0,0,1,0,-s]);const[v,w,x,E]=Z.getAxialAlignedBoundingBox([0,0,n,s],g),_=Math.round(x-v)||1,C=Math.round(E-w)||1,R=this.cachedCanvases.getCanvas("fillCanvas",_,C),P=R.context,I=v,F=w;P.translate(-I,-F),P.transform(...g),c||(c=this._scaleImage(f.canvas,Wi(P)),c=c.img,h&&a&&h.set(u,c)),P.imageSmoothingEnabled=m0(jt(P),t.interpolate),Wl(P,c,0,0,c.width,c.height,0,0,n,s),P.globalCompositeOperation="source-in";const L=Z.transform(Wi(P),[1,0,0,1,-I,-F]);return P.fillStyle=a?r.getPattern(e,this,L,Pe.FILL):r,P.fillRect(0,0,n,s),h&&!a&&(this.cachedCanvases.delete("fillCanvas"),h.set(u,R.canvas)),{canvas:R.canvas,offsetX:Math.round(I),offsetY:Math.round(F)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=nR[t]}setLineJoin(t){this.ctx.lineJoin=sR[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...jt(this.suspendedCtx)),Oa(this.suspendedCtx,r),tR(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oa(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],l=s[2]-r,h=s[3]-a;l===0||h===0||(this.genericComposeSMask(e.context,n,l,h,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,l,h,u,c,f){let g=t.canvas,v=h-c,w=u-f;if(a){if(v<0||w<0||v+n>g.width||w+s>g.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,s),_=E.context;_.drawImage(g,-v,-w),a.some(C=>C!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=Z.makeHexColor(...a),_.fillRect(0,0,n,s),_.globalCompositeOperation="source-over"),g=E.canvas,v=w=0}else if(a.some(E=>E!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(v,w,n,s),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=Z.makeHexColor(...a),t.fillRect(v,w,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(h,u,n,s),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(g,v,w,n,s,h,u,n,s),e.restore()}save(){this.inSMaskMode?(Oa(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Oa(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,r,a){this.ctx.transform(t,e,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,r=this.current;let a=r.x,l=r.y,h,u;const c=jt(s),f=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,g=f?n.slice(0):null;for(let v=0,w=0,x=t.length;v<x;v++)switch(t[v]|0){case ui.rectangle:a=e[w++],l=e[w++];const E=e[w++],_=e[w++],C=a+E,R=l+_;s.moveTo(a,l),E===0||_===0?s.lineTo(C,R):(s.lineTo(C,l),s.lineTo(C,R),s.lineTo(a,R)),f||r.updateRectMinMax(c,[a,l,C,R]),s.closePath();break;case ui.moveTo:a=e[w++],l=e[w++],s.moveTo(a,l),f||r.updatePathMinMax(c,a,l);break;case ui.lineTo:a=e[w++],l=e[w++],s.lineTo(a,l),f||r.updatePathMinMax(c,a,l);break;case ui.curveTo:h=a,u=l,a=e[w+4],l=e[w+5],s.bezierCurveTo(e[w],e[w+1],e[w+2],e[w+3],a,l),r.updateCurvePathMinMax(c,h,u,e[w],e[w+1],e[w+2],e[w+3],a,l,g),w+=6;break;case ui.curveTo2:h=a,u=l,s.bezierCurveTo(a,l,e[w],e[w+1],e[w+2],e[w+3]),r.updateCurvePathMinMax(c,h,u,a,l,e[w],e[w+1],e[w+2],e[w+3],g),a=e[w+2],l=e[w+3],w+=4;break;case ui.curveTo3:h=a,u=l,a=e[w+2],l=e[w+3],s.bezierCurveTo(e[w],e[w+1],a,l,a,l),r.updateCurvePathMinMax(c,h,u,e[w],e[w+1],a,l,a,l,g),w+=4;break;case ui.closePath:s.closePath();break}f&&r.updateScalingPathMinMax(c,g),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n!=null&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,Wi(e),Pe.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,Wi(e),Pe.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rR}eoClip(){this.pendingClip=v0}beginText(){this.current.textMatrix=ww,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var n;const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||Kf,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&yt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const a=s.loadedName||"sans-serif",l=((n=s.systemFontInfo)==null?void 0:n.css)||`"${a}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const u=s.italic?"italic":"normal";let c=e;e<h0?c=h0:e>c0&&(c=c0),this.current.fontSizeScale=e/c,this.ctx.font=`${u} ${h} ${c}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,r,a){this.current.textMatrix=[t,e,n,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const r=this.ctx,a=this.current,l=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,c=h&fe.FILL_STROKE_MASK,f=!!(h&fe.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile;let v;(l.disableFontFace||f||g)&&(v=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||g?(r.save(),r.translate(e,n),r.beginPath(),v(r,u),s&&r.setTransform(...s),(c===fe.FILL||c===fe.FILL_STROKE)&&r.fill(),(c===fe.STROKE||c===fe.FILL_STROKE)&&r.stroke(),r.restore()):((c===fe.FILL||c===fe.FILL_STROKE)&&r.fillText(t,e,n),(c===fe.STROKE||c===fe.FILL_STROKE)&&r.strokeText(t,e,n)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:jt(r),x:e,y:n,fontSize:u,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return St(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,h=e.wordSpacing,u=e.fontDirection,c=e.textHScale*u,f=t.length,g=n.vertical,v=g?1:-1,w=n.defaultVMetrics,x=s*e.fontMatrix[0],E=e.textRenderingMode===fe.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(c,-1):r.scale(c,1);let _;if(e.patternFill){r.save();const F=e.fillColor.getPattern(r,this,Wi(r),Pe.FILL);_=jt(r),r.restore(),r.fillStyle=F}let C=e.lineWidth;const R=e.textMatrixScale;if(R===0||C===0){const F=e.textRenderingMode&fe.FILL_STROKE_MASK;(F===fe.STROKE||F===fe.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=R;if(a!==1&&(r.scale(a,a),C/=a),r.lineWidth=C,n.isInvalidPDFjsFont){const F=[];let L=0;for(const S of t)F.push(S.unicode),L+=S.width;r.fillText(F.join(""),0,0),e.x+=L*x*c,r.restore(),this.compose();return}let P=0,I;for(I=0;I<f;++I){const F=t[I];if(typeof F=="number"){P+=v*F*s/1e3;continue}let L=!1;const S=(F.isSpace?h:0)+l,k=F.fontChar,O=F.accent;let N,B,$=F.width;if(g){const X=F.vmetric||w,z=-(F.vmetric?X[1]:$*.5)*x,W=X[2]*x;$=X?-X[0]:$,N=z/a,B=(P+W)/a}else N=P/a,B=0;if(n.remeasure&&$>0){const X=r.measureText(k).width*1e3/s*a;if($<X&&this.isFontSubpixelAAEnabled){const z=$/X;L=!0,r.save(),r.scale(z,1),N/=z}else $!==X&&(N+=($-X)/2e3*s/a)}if(this.contentVisible&&(F.isInFont||n.missingFile)){if(E&&!O)r.fillText(k,N,B);else if(this.paintChar(k,N,B,_),O){const X=N+s*O.offset.x/a,z=B-s*O.offset.y/a;this.paintChar(O.fontChar,X,z,_)}}const Y=g?$*x-S*u:$*x+S*u;P+=Y,L&&r.restore()}g?e.y-=P:e.x+=P*c,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,h=n.charSpacing,u=n.wordSpacing,c=n.textHScale*a,f=n.fontMatrix||Kf,g=t.length,v=n.textRenderingMode===fe.INVISIBLE;let w,x,E,_;if(!(v||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(c,a),w=0;w<g;++w){if(x=t[w],typeof x=="number"){_=l*x*r/1e3,this.ctx.translate(_,0),n.x+=_*c;continue}const C=(x.isSpace?u:0)+h,R=s.charProcOperatorList[x.operatorListId];if(!R){yt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(R),this.restore()),E=Z.applyTransform([x.width,0],f)[0]*r+C,e.translate(E,0),n.x+=E*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||jt(this.ctx),r={createCanvasGraphics:a=>new ib(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Q2(t,n,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const s=Z.makeHexColor(t,e,n);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,n){const s=Z.makeHexColor(t,e,n);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=X2(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Wi(e),Pe.SHADING);const s=Wi(e);if(s){const{width:r,height:a}=e.canvas,[l,h,u,c]=Z.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(l,h,u-l,c-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Pt("Should not call beginInlineImage")}beginImageData(){Pt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=jt(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(jt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||bd("TODO: Support non-isolated groups."),t.knockout&&yt("Knockout groups not supported.");const n=jt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Z.getAxialAlignedBoundingBox(t.bbox,jt(e));const r=[0,0,e.canvas.width,e.canvas.height];s=Z.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,h,u]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(c,h,u),g=f.context;g.translate(-a,-l),g.transform(...n),t.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),Oa(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=jt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Z.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(b(this,tc,Xp).call(this),jl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[h,u]=Z.singularValueDecompose2dScale(jt(this.ctx)),{viewportScale:c}=this,f=Math.ceil(a*this.outputScaleX*c),g=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:v,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(h,0,0,-u,0,l*u),jl(this.ctx)}else jl(this.ctx),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.endPath()}this.current=new f0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,ec,Qp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=iR(t)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const h=jt(l);l.transform(e,n,s,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-h[4],u.offsetY-h[5]);for(let c=0,f=a.length;c<f;c+=2){const g=Z.transform(h,[e,n,s,r,a[c],a[c+1]]),[v,w]=Z.applyTransform([0,0],g);l.drawImage(u.canvas,v,w)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:l,height:h,transform:u}=r,c=this.cachedCanvases.getCanvas("maskCanvas",l,h),f=c.context;f.save();const g=this.getObject(a,r);g0(f,g),f.globalCompositeOperation="source-in",f.fillStyle=s?n.getPattern(f,this,Wi(e),Pe.FILL):n,f.fillRect(0,0,l,h),f.restore(),e.save(),e.transform(...u),e.scale(1,-1),Wl(e,c.canvas,0,0,l,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){yt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){yt("Dependent image isn't ready yet");return}const a=r.width,l=r.height,h=[];for(let u=0,c=s.length;u<c;u+=2)h.push({transform:[e,0,0,n,s[u],s[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!ke){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,n).context;p0(l,t),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,Wi(s));s.imageSmoothingEnabled=m0(jt(s),t.interpolate),Wl(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;p0(l,t),s=this.applyTransferMapsToCanvas(l)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Wl(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===v0?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const h=Math.abs(e),u=Math.abs(r);if(h===u)if(t===0)a=l=1/h;else{const c=h*t;a=l=c<1?1/c:1}else if(t===0)a=1/h,l=1/u;else{const c=h*t,f=u*t;a=c<1?1/c:1,l=f<1?1/f:1}}else{const h=Math.abs(e*r-n*s),u=Math.hypot(e,n),c=Math.hypot(s,r);if(t===0)a=c/h,l=u/h;else{const f=t*h;a=c>f?c/f:1,l=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const l=Math.max(s,r);e.setLineDash(a.map(h=>h/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};tc=new WeakSet,Xp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ec=new WeakSet,Qp=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const t=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ic=aR;for(const i in ui)ic.prototype[i]!==void 0&&(ic.prototype[ui[i]]=ic.prototype[i]);var ku,Cu;class Xn{static get workerPort(){return o(this,ku)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,ku,t)}static get workerSrc(){return o(this,Cu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,Cu,t)}}ku=new WeakMap,Cu=new WeakMap,m(Xn,ku,null),m(Xn,Cu,"");const Bl={DATA:1,ERROR:2},Gt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ve(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Pt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new er(i.message);case"MissingPDFException":return new tr(i.message);case"PasswordException":return new Qf(i.message,i.code);case"UnexpectedResponseException":return new Ad(i.message,i.status);case"UnknownErrorException":return new Zf(i.message,i.details);default:return new Zf(i.message,i.toString())}}var Zp,nb,Jp,sb,uo,$l;class fo{constructor(t,e,n){m(this,Zp),m(this,Jp),m(this,uo),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const r=s.data;if(r.targetName!==this.sourceName)return;if(r.stream){b(this,Jp,sb).call(this,r);return}if(r.callback){const l=r.callbackId,h=this.callbackCapabilities[l];if(!h)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],r.callback===Bl.DATA)h.resolve(r.data);else if(r.callback===Bl.ERROR)h.reject(Ve(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const l=this.sourceName,h=r.sourceName;new Promise(function(u){u(a(r.data))}).then(function(u){n.postMessage({sourceName:l,targetName:h,callback:Bl.DATA,callbackId:r.callbackId,data:u})},function(u){n.postMessage({sourceName:l,targetName:h,callback:Bl.ERROR,callbackId:r.callbackId,reason:Ve(u)})});return}if(r.streamId){b(this,Zp,nb).call(this,r);return}a(r.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,h.postMessage({sourceName:a,targetName:l,stream:Gt.PULL,streamId:r,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Qt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:a,targetName:l,stream:Gt.CANCEL,streamId:r,reason:Ve(u)}),c.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Zp=new WeakSet,nb=function(i){const t=i.streamId,e=this.sourceName,n=i.sourceName,s=this.comObj,r=this,a=this.actionHandler[i.action],l={enqueue(h,u=1,c){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:e,targetName:n,stream:Gt.ENQUEUE,streamId:t,chunk:h},c)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:e,targetName:n,stream:Gt.CLOSE,streamId:t}),delete r.streamSinks[t])},error(h){Qt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:e,targetName:n,stream:Gt.ERROR,streamId:t,reason:Ve(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:i.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(h){h(a(i.data,l))}).then(function(){s.postMessage({sourceName:e,targetName:n,stream:Gt.START_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:e,targetName:n,stream:Gt.START_COMPLETE,streamId:t,reason:Ve(h)})})},Jp=new WeakSet,sb=function(i){const t=i.streamId,e=this.sourceName,n=i.sourceName,s=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(i.stream){case Gt.START_COMPLETE:i.success?r.startCall.resolve():r.startCall.reject(Ve(i.reason));break;case Gt.PULL_COMPLETE:i.success?r.pullCall.resolve():r.pullCall.reject(Ve(i.reason));break;case Gt.PULL:if(!a){s.postMessage({sourceName:e,targetName:n,stream:Gt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&i.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=i.desiredSize,new Promise(function(l){var h;l((h=a.onPull)==null?void 0:h.call(a))}).then(function(){s.postMessage({sourceName:e,targetName:n,stream:Gt.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:e,targetName:n,stream:Gt.PULL_COMPLETE,streamId:t,reason:Ve(l)})});break;case Gt.ENQUEUE:if(Qt(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(i.chunk);break;case Gt.CLOSE:if(Qt(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),b(this,uo,$l).call(this,r,t);break;case Gt.ERROR:Qt(r,"error should have stream controller"),r.controller.error(Ve(i.reason)),b(this,uo,$l).call(this,r,t);break;case Gt.CANCEL_COMPLETE:i.success?r.cancelCall.resolve():r.cancelCall.reject(Ve(i.reason)),b(this,uo,$l).call(this,r,t);break;case Gt.CANCEL:if(!a)break;new Promise(function(l){var h;l((h=a.onCancel)==null?void 0:h.call(a,Ve(i.reason)))}).then(function(){s.postMessage({sourceName:e,targetName:n,stream:Gt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:e,targetName:n,stream:Gt.CANCEL_COMPLETE,streamId:t,reason:Ve(l)})}),a.sinkCapability.reject(Ve(i.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},uo=new WeakSet,$l=async function(i,t){var e,n,s;await Promise.allSettled([(e=i.startCall)==null?void 0:e.promise,(n=i.pullCall)==null?void 0:n.promise,(s=i.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Mr,nc;class oR{constructor({parsedData:t,rawData:e}){m(this,Mr,void 0),m(this,nc,void 0),A(this,Mr,t),A(this,nc,e)}getRaw(){return o(this,nc)}get(t){return o(this,Mr).get(t)??null}getAll(){return Gm(o(this,Mr))}has(t){return o(this,Mr).has(t)}}Mr=new WeakMap,nc=new WeakMap;const _n=Symbol("INTERNAL");var sc,rc,ac,po;class lR{constructor(t,{name:e,intent:n,usage:s}){m(this,sc,!1),m(this,rc,!1),m(this,ac,!1),m(this,po,!0),A(this,sc,!!(t&ii.DISPLAY)),A(this,rc,!!(t&ii.PRINT)),this.name=e,this.intent=n,this.usage=s}get visible(){if(o(this,ac))return o(this,po);if(!o(this,po))return!1;const{print:t,view:e}=this.usage;return o(this,sc)?(e==null?void 0:e.viewState)!=="OFF":o(this,rc)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==_n&&Pt("Internal method `_setVisible` called."),A(this,ac,n),A(this,po,e)}}sc=new WeakMap,rc=new WeakMap,ac=new WeakMap,po=new WeakMap;var cs,Lt,go,mo,Mu,tg;class hR{constructor(t,e=ii.DISPLAY){if(m(this,Mu),m(this,cs,null),m(this,Lt,new Map),m(this,go,null),m(this,mo,null),this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,mo,t.order);for(const n of t.groups)o(this,Lt).set(n.id,new lR(e,n));if(t.baseState==="OFF")for(const n of o(this,Lt).values())n._setVisible(_n,!1);for(const n of t.on)o(this,Lt).get(n)._setVisible(_n,!0);for(const n of t.off)o(this,Lt).get(n)._setVisible(_n,!1);A(this,go,this.getHash())}}isVisible(t){if(o(this,Lt).size===0)return!0;if(!t)return bd("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,Lt).has(t.id)?o(this,Lt).get(t.id).visible:(yt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Mu,tg).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,Lt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(o(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,Lt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(!o(this,Lt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,Lt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(!o(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,Lt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(o(this,Lt).get(e).visible)return!1}return!0}return yt(`Unknown optional content policy ${t.policy}.`),!0}return yt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=o(this,Lt).get(t);if(!n){yt(`Optional content group not found: ${t}`);return}n._setVisible(_n,!!e,!0),A(this,cs,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=o(this,Lt).get(s);if(r)switch(n){case"ON":r._setVisible(_n,!0);break;case"OFF":r._setVisible(_n,!1);break;case"Toggle":r._setVisible(_n,!r.visible);break}}A(this,cs,null)}get hasInitialVisibility(){return o(this,go)===null||this.getHash()===o(this,go)}getOrder(){return o(this,Lt).size?o(this,mo)?o(this,mo).slice():[...o(this,Lt).keys()]:null}getGroups(){return o(this,Lt).size>0?Gm(o(this,Lt)):null}getGroup(t){return o(this,Lt).get(t)||null}getHash(){if(o(this,cs)!==null)return o(this,cs);const t=new Xw;for(const[e,n]of o(this,Lt))t.update(`${e}:${n.visible}`);return A(this,cs,t.hexdigest())}}cs=new WeakMap,Lt=new WeakMap,go=new WeakMap,mo=new WeakMap,Mu=new WeakSet,tg=function(i){const t=i.length;if(t<2)return!0;const e=i[0];for(let n=1;n<t;n++){const s=i[n];let r;if(Array.isArray(s))r=b(this,Mu,tg).call(this,s);else if(o(this,Lt).has(s))r=o(this,Lt).get(s).visible;else return yt(`Optional content group not found: ${s}`),!0;switch(e){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return e==="And"};class cR{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,u)=>{this._onReceiveData({begin:h,chunk:u})}),t.addProgressListener((h,u)=>{this._onProgress({loaded:h,total:u})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Qt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new uR(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new dR(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class uR{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Qm(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dR{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function fR(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let c=l(e);return c=unescape(c),c=h(c),c=u(c),r(c)}if(e=a(i),e){const c=u(e);return r(c)}if(e=n("filename","i").exec(i),e){e=e[1];let c=l(e);return c=u(c),r(c)}function n(c,f){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(c,f){if(c){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const g=new TextDecoder(c,{fatal:!0}),v=xd(f);f=g.decode(v),t=!1}catch{}}return f}function r(c){return t&&/[\x80-\xff]/.test(c)&&(c=s("utf-8",c),t&&(c=s("iso-8859-1",c))),c}function a(c){const f=[];let g;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=v.exec(c))!==null;){let[,x,E,_]=g;if(x=parseInt(x,10),x in f){if(x===0)break;continue}f[x]=[E,_]}const w=[];for(let x=0;x<f.length&&x in f;++x){let[E,_]=f[x];_=l(_),E&&(_=unescape(_),x===0&&(_=h(_))),w.push(_)}return w.join("")}function l(c){if(c.startsWith('"')){const f=c.slice(1).split('\\"');for(let g=0;g<f.length;++g){const v=f[g].indexOf('"');v!==-1&&(f[g]=f[g].slice(0,v),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}c=f.join('"')}return c}function h(c){const f=c.indexOf("'");if(f===-1)return c;const g=c.slice(0,f),v=c.slice(f+1).replace(/^[^']*'/,"");return s(g,v)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),s(g,w);try{w=atob(w)}catch{}return s(g,w)})}return""}function tv({getResponseHeader:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function ev(i){const t=i("Content-Disposition");if(t){let e=fR(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Qm(e))return e}return null}function Md(i,t){return i===404||i===0&&t.startsWith("file:")?new tr('Missing PDF "'+t+'".'):new Ad(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function rb(i){return i===200||i===206}function ab(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ob(i){const t=new Headers;for(const e in i){const n=i[e];n!==void 0&&t.append(e,n)}return t}function lb(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(yt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class y0{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new pR(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new gR(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class pR{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=ob(this._stream.httpHeaders);const n=e.url;fetch(n,ab(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!rb(s.status))throw Md(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=h=>s.headers.get(h),{allowRangeRequests:a,suggestedLength:l}=tv({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=ev(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new er("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lb(e),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class gR{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=ob(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const r=s.url;fetch(r,ab(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!rb(a.status))throw Md(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:lb(e),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const df=200,ff=206;function mR(i){const t=i.response;return typeof t!="string"?t:xd(t).buffer}class vR{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const s={begin:t,end:e};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&e.setRequestHeader(r,a)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=ff):s.expectedStatus=df,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){var n,s,r;const a=this.pendingRequests[t];if(!a)return;const l=a.xhr;if(l.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),l.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],l.status===0&&this.isHttp){(n=a.onError)==null||n.call(a,l.status);return}const h=l.status||df;if(!(h===df&&a.expectedStatus===ff)&&h!==a.expectedStatus){(s=a.onError)==null||s.call(a,l.status);return}const u=mR(l);if(h===ff){const c=l.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);a.onDone({begin:parseInt(f[1],10),chunk:u})}else u?a.onDone({begin:0,chunk:u}):(r=a.onError)==null||r.call(a,l.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class yR{constructor(t){this._source=t,this._manager=new vR(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new wR(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new bR(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class wR{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=a=>e.getResponseHeader(a),{allowRangeRequests:s,suggestedLength:r}=tv({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=ev(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Md(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class bR{constructor(t,e,n){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Md(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hb=/^file:\/\/\/[a-zA-Z]:\//;function AR(i){const t=Di.get("url"),e=t.parse(i);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(i)?t.parse(`file:///${i}`):(e.host||(e.protocol="file:"),e)}class xR{constructor(t){this.source=t,this.url=AR(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new SR(this):new ER(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new kR(this,t,e):new _R(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class cb{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new er("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ub{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Ru(i,t){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:t}}class ER extends cb{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const l=new tr(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=tv({getResponseHeader:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=ev(s)};if(this._request=null,this._url.protocol==="http:"){const n=Di.get("http");this._request=n.request(Ru(this._url,t.httpHeaders),e)}else{const n=Di.get("https");this._request=n.request(Ru(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class _R extends ub{constructor(t,e,n){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const a=t.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const s=r=>{if(r.statusCode===404){const a=new tr(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=Di.get("http");this._request=r.request(Ru(this._url,this._httpHeaders),s)}else{const r=Di.get("https");this._request=r.request(Ru(this._url,this._httpHeaders),s)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class SR extends cb{constructor(t){super(t);let e=decodeURIComponent(this._url.path);hb.test(this._url.href)&&(e=e.replace(/^\//,""));const n=Di.get("fs");n.promises.lstat(e).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new tr(`Missing PDF "${e}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class kR extends ub{constructor(t,e,n){super(t);let s=decodeURIComponent(this._url.path);hb.test(this._url.href)&&(s=s.replace(/^\//,""));const r=Di.get("fs");this._setReadableStream(r.createReadStream(s,{start:e,end:n-1}))}}const CR=1e5,Ie=30,MR=.8;var w0,es,He,Ul,Hl,is,vn,zl,Vl,ar,Na,Fa,ns,Wa,Gl,ja,or,ql,Yl,Xe,lr,hr,Ba,pf,b0,gf,A0,Kl,mf,$a,Xl,vf,x0;let Tu=(Xe=class{constructor({textContentSource:i,container:t,viewport:e}){if(m(this,pf),m(this,gf),m(this,Kl),m(this,es,Promise.withResolvers()),m(this,He,null),m(this,Ul,!1),m(this,Hl,!!((w0=globalThis.FontInspector)!=null&&w0.enabled)),m(this,is,null),m(this,vn,null),m(this,zl,0),m(this,Vl,0),m(this,ar,null),m(this,Na,null),m(this,Fa,0),m(this,ns,0),m(this,Wa,Object.create(null)),m(this,Gl,[]),m(this,ja,null),m(this,or,[]),m(this,ql,new WeakMap),m(this,Yl,null),i instanceof ReadableStream)A(this,ja,i);else if(typeof i=="object")A(this,ja,new ReadableStream({start(l){l.enqueue(i),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,He,A(this,Na,t)),A(this,ns,e.scale*(globalThis.devicePixelRatio||1)),A(this,Fa,e.rotation),A(this,vn,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:s,pageX:r,pageY:a}=e.rawDims;A(this,Yl,[1,0,0,-1,-r,a+s]),A(this,Vl,n),A(this,zl,s),Ys(t,e),o(this,es).promise.catch(()=>{}).then(()=>{o(Xe,Ba).delete(this),A(this,vn,null),A(this,Wa,null)})}render(){const i=()=>{o(this,ar).read().then(({value:t,done:e})=>{if(e){o(this,es).resolve();return}o(this,is)??A(this,is,t.lang),Object.assign(o(this,Wa),t.styles),b(this,pf,b0).call(this,t.items),i()},o(this,es).reject)};return A(this,ar,o(this,ja).getReader()),o(Xe,Ba).add(this),i(),o(this,es).promise}update({viewport:i,onBefore:t=null}){var e;const n=i.scale*(globalThis.devicePixelRatio||1),s=i.rotation;if(s!==o(this,Fa)&&(t==null||t(),A(this,Fa,s),Ys(o(this,Na),{rotation:s})),n!==o(this,ns)){t==null||t(),A(this,ns,n);const r={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:b(e=Xe,$a,Xl).call(e,o(this,is))};for(const a of o(this,or))r.properties=o(this,ql).get(a),r.div=a,b(this,Kl,mf).call(this,r)}}cancel(){var i;const t=new er("TextLayer task cancelled.");(i=o(this,ar))==null||i.cancel(t).catch(()=>{}),A(this,ar,null),o(this,es).reject(t)}get textDivs(){return o(this,or)}get textContentItemsStr(){return o(this,Gl)}static cleanup(){if(!(o(this,Ba).size>0)){o(this,lr).clear();for(const{canvas:i}of o(this,hr).values())i.remove();o(this,hr).clear()}}},es=new WeakMap,He=new WeakMap,Ul=new WeakMap,Hl=new WeakMap,is=new WeakMap,vn=new WeakMap,zl=new WeakMap,Vl=new WeakMap,ar=new WeakMap,Na=new WeakMap,Fa=new WeakMap,ns=new WeakMap,Wa=new WeakMap,Gl=new WeakMap,ja=new WeakMap,or=new WeakMap,ql=new WeakMap,Yl=new WeakMap,lr=new WeakMap,hr=new WeakMap,Ba=new WeakMap,pf=new WeakSet,b0=function(i){var t,e;if(o(this,Ul))return;(e=o(this,vn)).ctx||(e.ctx=b(t=Xe,$a,Xl).call(t,o(this,is)));const n=o(this,or),s=o(this,Gl);for(const r of i){if(n.length>CR){yt("Ignoring additional textDivs for performance reasons."),A(this,Ul,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=o(this,He);A(this,He,document.createElement("span")),o(this,He).classList.add("markedContent"),r.id!==null&&o(this,He).setAttribute("id",`${r.id}`),a.append(o(this,He))}else r.type==="endMarkedContent"&&A(this,He,o(this,He).parentNode);continue}s.push(r.str),b(this,gf,A0).call(this,r)}},gf=new WeakSet,A0=function(i){var t;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};o(this,or).push(e);const s=Z.transform(o(this,Yl),i.transform);let r=Math.atan2(s[1],s[0]);const a=o(this,Wa)[i.fontName];a.vertical&&(r+=Math.PI/2);const l=o(this,Hl)&&a.fontSubstitution||a.fontFamily,h=Math.hypot(s[2],s[3]),u=h*b(t=Xe,vf,x0).call(t,l,o(this,is));let c,f;r===0?(c=s[4],f=s[5]-u):(c=s[4]+u*Math.sin(r),f=s[5]-u*Math.cos(r));const g="calc(var(--scale-factor)*",v=e.style;o(this,He)===o(this,Na)?(v.left=`${(100*c/o(this,Vl)).toFixed(2)}%`,v.top=`${(100*f/o(this,zl)).toFixed(2)}%`):(v.left=`${g}${c.toFixed(2)}px)`,v.top=`${g}${f.toFixed(2)}px)`),v.fontSize=`${g}${h.toFixed(2)}px)`,v.fontFamily=l,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=i.str,e.dir=i.dir,o(this,Hl)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||i.fontName),r!==0&&(n.angle=r*(180/Math.PI));let w=!1;if(i.str.length>1)w=!0;else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const x=Math.abs(i.transform[0]),E=Math.abs(i.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(w=!0)}if(w&&(n.canvasWidth=a.vertical?i.height:i.width),o(this,ql).set(e,n),o(this,vn).div=e,o(this,vn).properties=n,b(this,Kl,mf).call(this,o(this,vn)),n.hasText&&o(this,He).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),o(this,He).append(x)}},Kl=new WeakSet,mf=function(i){const{div:t,properties:e,ctx:n,prevFontSize:s,prevFontFamily:r}=i,{style:a}=t;let l="";if(e.canvasWidth!==0&&e.hasText){const{fontFamily:h}=a,{canvasWidth:u,fontSize:c}=e;(s!==c||r!==h)&&(n.font=`${c*o(this,ns)}px ${h}`,i.prevFontSize=c,i.prevFontFamily=h);const{width:f}=n.measureText(t.textContent);f>0&&(l=`scaleX(${u*o(this,ns)/f})`)}e.angle!==0&&(l=`rotate(${e.angle}deg) ${l}`),l.length>0&&(a.transform=l)},$a=new WeakSet,Xl=function(i=null){let t=o(this,hr).get(i||(i=""));if(!t){const e=document.createElement("canvas");e.className="hiddenCanvasElement",e.lang=i,document.body.append(e),t=e.getContext("2d",{alpha:!1}),o(this,hr).set(i,t)}return t},vf=new WeakSet,x0=function(i,t){const e=o(this,lr).get(i);if(e)return e;const n=b(this,$a,Xl).call(this,t),s=n.font;n.canvas.width=n.canvas.height=Ie,n.font=`${Ie}px ${i}`;const r=n.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const c=a/(a+l);return o(this,lr).set(i,c),n.canvas.width=n.canvas.height=0,n.font=s,c}n.strokeStyle="red",n.clearRect(0,0,Ie,Ie),n.strokeText("g",0,0);let h=n.getImageData(0,0,Ie,Ie).data;l=0;for(let c=h.length-1-3;c>=0;c-=4)if(h[c]>0){l=Math.ceil(c/4/Ie);break}n.clearRect(0,0,Ie,Ie),n.strokeText("A",0,Ie),h=n.getImageData(0,0,Ie,Ie).data,a=0;for(let c=0,f=h.length;c<f;c+=4)if(h[c]>0){a=Ie-Math.floor(c/4/Ie);break}n.canvas.width=n.canvas.height=0,n.font=s;const u=a?a/(a+l):MR;return o(this,lr).set(i,u),u},m(Xe,$a),m(Xe,vf),m(Xe,lr,new Map),m(Xe,hr,new Map),m(Xe,Ba,new Set),Xe);function RR(){kw("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:t,viewport:e,...n}=arguments[0],s=Object.keys(n);s.length>0&&yt("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new Tu({textContentSource:i,container:t,viewport:e}),{textDivs:a,textContentItemsStr:l}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:l}}function TR(){kw("`updateTextLayer`, please use `TextLayer` instead.")}class bl{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var a;if(!r)return;let l=null;const h=r.name;if(h==="#text")l=r.value;else if(bl.shouldBuildText(h))(a=r==null?void 0:r.attributes)!=null&&a.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&e.push({str:l}),!!r.children)for(const u of r.children)s(u)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const PR=65536,LR=100,IR=5e3,DR=ke?H2:C2,OR=ke?z2:_w,NR=ke?U2:k2,FR=ke?V2:Sw;function WR(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new $R,{docId:e}=t,n=i.url?jR(i.url):null,s=i.data?BR(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,h=i.range instanceof pb?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:PR;let c=i.worker instanceof lc?i.worker:null;const f=i.verbosity,g=typeof i.docBaseUrl=="string"&&!Xm(i.docBaseUrl)?i.docBaseUrl:null,v=typeof i.cMapUrl=="string"?i.cMapUrl:null,w=i.cMapPacked!==!1,x=i.CMapReaderFactory||OR,E=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,_=i.StandardFontDataFactory||FR,C=i.stopAtErrors!==!0,R=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,P=i.isEvalSupported!==!1,I=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ke,F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,L=typeof i.disableFontFace=="boolean"?i.disableFontFace:ke,S=i.fontExtraProperties===!0,k=i.enableXfa===!0,O=i.ownerDocument||globalThis.document,N=i.disableRange===!0,B=i.disableStream===!0,$=i.disableAutoFetch===!0,Y=i.pdfBug===!0,X=h?h.length:i.length??NaN,z=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ke&&!L,W=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:x===_w&&_===Sw&&v&&E&&Qa(v,document.baseURI)&&Qa(E,document.baseURI),at=i.canvasFactory||new DR({ownerDocument:O}),G=i.filterFactory||new NR({docId:e,ownerDocument:O}),bt=null;g2(f);const pt={canvasFactory:at,filterFactory:G};if(W||(pt.cMapReaderFactory=new x({baseUrl:v,isCompressed:w}),pt.standardFontDataFactory=new _({baseUrl:E})),!c){const tt={verbosity:f,port:Xn.workerPort};c=tt.port?lc.fromPort(tt):new lc(tt),t._worker=c}const H={docId:e,apiVersion:"4.3.136",data:s,password:l,disableAutoFetch:$,rangeChunkSize:u,length:X,docBaseUrl:g,enableXfa:k,evaluatorOptions:{maxImageSize:R,disableFontFace:L,ignoreErrors:C,isEvalSupported:P,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:F,fontExtraProperties:S,useSystemFonts:z,cMapUrl:W?v:null,standardFontDataUrl:W?E:null}},it={disableFontFace:L,fontExtraProperties:S,ownerDocument:O,pdfBug:Y,styleElement:bt,loadingParams:{disableAutoFetch:$,enableXfa:k}};return c.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const tt=c.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);let J;return h?J=new cR(h,{disableRange:N,disableStream:B}):s||(J=(nt=>ke?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Qa(nt.url)?new y0(nt):new xR(nt):Qa(nt.url)?new y0(nt):new yR(nt))({url:n,length:X,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:N,disableStream:B})),tt.then(nt=>{if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const et=new fo(e,nt,c.port),vt=new VR(et,t,J,it,pt);t._transport=vt,et.send("Ready",null)})}).catch(t._capability.reject),t}function jR(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(ke&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function BR(i){if(ke&&typeof Yf<"u"&&i instanceof Yf)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return xd(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function E0(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var eg;const db=class fb{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ai(fb,eg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};eg=new WeakMap,m(db,eg,0);let $R=db,pb=class{constructor(i,t,e=!1,n=null){this.length=i,this.initialData=t,this.progressiveDone=e,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,t){for(const e of this._rangeListeners)e(i,t)}onDataProgress(i,t){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(i,t)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,t){Pt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class UR{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var us,jn,Cs,Qr,Qo,Pu;class HR{constructor(t,e,n,s=!1){m(this,Cs),m(this,Qo),m(this,us,null),m(this,jn,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new t0:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new gb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new El({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=Nn.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:c=null}){var f,g;(f=this._stats)==null||f.time("Overall");const v=this._transport.getRenderingIntent(n,s,c),{renderingIntent:w,cacheKey:x}=v;A(this,jn,!1),b(this,Qo,Pu).call(this),l||(l=this._transport.getOptionalContentConfig(w));let E=this._intentStates.get(x);E||(E=Object.create(null),this._intentStates.set(x,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const _=!!(w&ii.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(v));const C=I=>{var F;E.renderTasks.delete(R),(this._maybeCleanupAfterRender||_)&&A(this,jn,!0),b(this,Cs,Qr).call(this,!_),I?(R.capability.reject(I),this._abortOperatorList({intentState:E,reason:I instanceof Error?I:new Error(I)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new qR({callback:C,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(E.renderTasks||(E.renderTasks=new Set)).add(R);const P=R.task;return Promise.all([E.displayReadyCapability.promise,l]).then(([I,F])=>{var L;if(this.destroyed){C();return}if((L=this._stats)==null||L.time("Rendering"),!(F.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:I,optionalContentConfig:F}),R.operatorListChanged()}).catch(C),P}getOperatorList({intent:t="display",annotationMode:e=Nn.ENABLE,printAnnotationStorage:n=null}={}){var s;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(t,e,n,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let h;return l.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(h),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>bl.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:h,done:u}){if(u){n(l);return}l.lang??(l.lang=h.lang),Object.assign(l.styles,h.styles),l.items.push(...h.items),r()},s)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),A(this,jn,!1),b(this,Qo,Pu).call(this),Promise.all(t)}cleanup(t=!1){A(this,jn,!0);const e=b(this,Cs,Qr).call(this,!1);return t&&e&&this._stats&&(this._stats=new t0),e}_startRenderPage(t,e){var n,s;const r=this._intentStates.get(e);r&&((n=this._stats)==null||n.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&b(this,Cs,Qr).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:s,transfer:r}=n,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s},r).getReader(),l=this._intentStates.get(e);l.streamReader=a;const h=()=>{a.read().then(({value:u,done:c})=>{if(c){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),h())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const c of l.renderTasks)c.operatorListChanged();b(this,Cs,Qr).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Km){let s=LR;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new er(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}us=new WeakMap,jn=new WeakMap,Cs=new WeakSet,Qr=function(i=!1){if(b(this,Qo,Pu).call(this),!o(this,jn)||this.destroyed)return!1;if(i)return A(this,us,setTimeout(()=>{A(this,us,null),b(this,Cs,Qr).call(this,!1)},IR)),!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,jn,!1),!0},Qo=new WeakSet,Pu=function(){o(this,us)&&(clearTimeout(o(this,us)),A(this,us,null))};var Rr,ig;class zR{constructor(){m(this,Rr,new Set),m(this,ig,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};o(this,ig).then(()=>{for(const s of o(this,Rr))s.call(this,n)})}addEventListener(t,e){o(this,Rr).add(e)}removeEventListener(t,e){o(this,Rr).delete(e)}terminate(){o(this,Rr).clear()}}Rr=new WeakMap,ig=new WeakMap;const nn={isWorkerDisabled:!1,fakeWorkerId:0};ke&&(nn.isWorkerDisabled=!0,Xn.workerSrc||(Xn.workerSrc="./pdf.worker.mjs")),nn.isSameOrigin=function(i,t){let e;try{if(e=new URL(i),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},nn.createCDNWrapper=function(i){const t=`await import("${i}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Ms,Zo,oc;const ng=class Gi{constructor({name:t=null,port:e=null,verbosity:n=m2()}={}){var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=o(Gi,Ms))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(Gi,Ms)||A(Gi,Ms,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return ke?Promise.all([Di.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new fo("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!nn.isWorkerDisabled&&!o(Gi,Zo,oc)){let{workerSrc:t}=Gi;try{nn.isSameOrigin(window.location.href,t)||(t=nn.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new fo("main","worker",e),s=()=>{e.removeEventListener("error",r),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||s()};e.addEventListener("error",r),n.on("test",l=>{if(e.removeEventListener("error",r),this.destroyed){s();return}l?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",l=>{if(e.removeEventListener("error",r),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{bd("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){nn.isWorkerDisabled||(yt("Setting up fake worker."),nn.isWorkerDisabled=!0),Gi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new zR;this._port=e;const n=`fake${nn.fakeWorkerId++}`,s=new fo(n+"_worker",n,e);t.setup(s,e);const r=new fo(n,n+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=o(Gi,Ms))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var e;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(e=o(this,Ms))==null?void 0:e.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Gi(t)}static get workerSrc(){if(Xn.workerSrc)return Xn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return St(this,"_setupFakeWorkerGlobal",(async()=>o(this,Zo,oc)?o(this,Zo,oc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ms=new WeakMap,Zo=new WeakSet,oc=function(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch{return null}},m(ng,Zo),m(ng,Ms,void 0);let lc=ng;var Bn,qi,vo,yo,Yi,Tr,wo;class VR{constructor(t,e,n,s,r){m(this,Tr),m(this,Bn,new Map),m(this,qi,new Map),m(this,vo,new Map),m(this,yo,new Map),m(this,Yi,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new gb,this.fontLoader=new B2({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return St(this,"annotationStorage",new Jm)}getRenderingIntent(t,e=Nn.ENABLE,n=null,s=!1){let r=ii.DISPLAY,a=Gp;switch(t){case"any":r=ii.ANY;break;case"display":break;case"print":r=ii.PRINT;break;default:yt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Nn.DISABLE:r+=ii.ANNOTATIONS_DISABLE;break;case Nn.ENABLE:break;case Nn.ENABLE_FORMS:r+=ii.ANNOTATIONS_FORMS;break;case Nn.ENABLE_STORAGE:r+=ii.ANNOTATIONS_STORAGE,a=(r&ii.PRINT&&n instanceof Zw?n:this.annotationStorage).serializable;break;default:yt(`getRenderingIntent - invalid annotationMode: ${e}`)}return s&&(r+=ii.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(t=o(this,Yi))==null||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of o(this,qi).values())e.push(s._destroy());o(this,qi).clear(),o(this,vo).clear(),o(this,yo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Bn).clear(),this.filterFactory.destroy(),Tu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new er("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{Qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}Qt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",n=>{const s=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),r.onProgress=l=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),t.on("GetRangeReader",(n,s)=>{Qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}Qt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new UR(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new Qf(n.message,n.code);break;case"InvalidPDFException":s=new bw(n.message);break;case"MissingPDFException":s=new tr(n.message);break;case"UnexpectedResponseException":s=new Ad(n.message,n.status);break;case"UnknownErrorException":s=new Zf(n.message,n.details);break;default:Pt("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(A(this,Yi,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?o(this,Yi).reject(r):o(this,Yi).resolve({password:r})};try{e.onPassword(s,n.code)}catch(r){o(this,Yi).reject(r)}}else o(this,Yi).reject(new Qf(n.message,n.code));return o(this,Yi).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{this.destroyed||o(this,qi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:h,pdfBug:u}=this._params;if("error"in r){const v=r.error;yt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const c=u&&(a=globalThis.FontInspector)!=null&&a.enabled?(v,w)=>globalThis.FontInspector.fontAdded(v,w):null,f=new $2(r,{disableFontFace:l,inspectFont:c});this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:g}=r;Qt(g,"The imageRef must be defined.");for(const v of o(this,qi).values())for(const[,w]of v.objs)if((w==null?void 0:w.ref)===g)return w.dataLen?(this.commonObjs.resolve(n,structuredClone(w)),w.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var l;if(this.destroyed)return;const h=o(this,qi).get(s);if(!h.objs.has(n)){if(h._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":h.objs.resolve(n,a),(a==null?void 0:a.dataLen)>u2&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;this.annotationStorage.size<=0&&yt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((t=this._fullReader)==null?void 0:t.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=o(this,vo).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&o(this,yo).set(r.refStr,t);const a=new HR(e,r,this,this._params.pdfBug);return o(this,qi).set(e,a),a});return o(this,vo).set(e,s),s}getPageIndex(t){return E0(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,Tr,wo).call(this,"GetFieldObjects")}hasJSActions(){return b(this,Tr,wo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,Tr,wo).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,Tr,wo).call(this,"GetOptionalContentConfig").then(e=>new hR(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,Bn).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new oR(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,Bn).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,qi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,Bn).clear(),this.filterFactory.destroy(!0),Tu.cleanup()}}cachedPageNumber(t){if(!E0(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,yo).get(e)??null}}Bn=new WeakMap,qi=new WeakMap,vo=new WeakMap,yo=new WeakMap,Yi=new WeakMap,Tr=new WeakSet,wo=function(i,t=null){const e=o(this,Bn).get(i);if(e)return e;const n=this.messageHandler.sendWithPromise(i,t);return o(this,Bn).set(i,n),n};const hc=Symbol("INITIAL_DATA");var Ai,cc,sg;class gb{constructor(){m(this,cc),m(this,Ai,Object.create(null))}get(t,e=null){if(e){const s=b(this,cc,sg).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=o(this,Ai)[t];if(!n||n.data===hc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=o(this,Ai)[t];return!!e&&e.data!==hc}resolve(t,e=null){const n=b(this,cc,sg).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in o(this,Ai)){const{data:n}=o(this,Ai)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}A(this,Ai,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,Ai)){const{data:e}=o(this,Ai)[t];e!==hc&&(yield[t,e])}}}Ai=new WeakMap,cc=new WeakSet,sg=function(i){var t;return(t=o(this,Ai))[i]||(t[i]={...Promise.withResolvers(),data:hc})};var ds;class GR{constructor(t){m(this,ds,null),A(this,ds,t),this.onContinue=null}get promise(){return o(this,ds).capability.promise}cancel(t=0){o(this,ds).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,ds).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,ds);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ds=new WeakMap;var Zr;const mb=class bo{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:h,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:f=!1,pageColors:g=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=u,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new GR(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var n,s;if(this.cancelled)return;if(this._canvas){if(o(bo,Zr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(bo,Zr).add(this._canvas)}this._pdfBug&&(n=globalThis.StepperManager)!=null&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:l,background:h}=this.params;this.gfx=new ic(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:a,transparency:t,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,(s=this.graphicsReadyCallback)==null||s.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(bo,Zr).delete(this._canvas),this.callback(t||new Km(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(bo,Zr).delete(this._canvas),this.callback())))}};Zr=new WeakMap,m(mb,Zr,new WeakSet);let qR=mb;const YR="4.3.136",KR="0cec64437";function _0(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Ua(i){return Math.max(0,Math.min(255,255*i))}class S0{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ua(t),[t,t,t]}static G_HTML([t]){const e=_0(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ua)}static RGB_HTML(t){return`#${t.map(_0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Ua(1-Math.min(1,t+s)),Ua(1-Math.min(1,n+s)),Ua(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class vb{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const h=l.target.options,u=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[h,u]of Object.entries(a))if(u!=null)switch(h){case"class":u.length&&t.setAttribute(h,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,u)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var e,n;const s=t.annotationStorage,r=t.linkService,a=t.xfaHtml,l=t.intent||"display",h=document.createElement(a.name);a.attributes&&this.setAttributes({html:h,element:a,intent:l,linkService:r});const u=l!=="richText",c=t.div;if(c.append(h),t.viewport){const v=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=v}u&&c.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const v=document.createTextNode(a.value);h.append(v),u&&bl.shouldBuildText(a.name)&&f.push(v)}return{textDivs:f}}const g=[[a,-1,h]];for(;g.length>0;){const[v,w,x]=g.at(-1);if(w+1===v.children.length){g.pop();continue}const E=v.children[++g.at(-1)[1]];if(E===null)continue;const{name:_}=E;if(_==="#text"){const R=document.createTextNode(E.value);f.push(R),x.append(R);continue}const C=(e=E==null?void 0:E.attributes)!=null&&e.xmlns?document.createElementNS(E.attributes.xmlns,_):document.createElement(_);if(x.append(C),E.attributes&&this.setAttributes({html:C,element:E,storage:s,intent:l,linkService:r}),((n=E.children)==null?void 0:n.length)>0)g.push([E,-1,C]);else if(E.value){const R=document.createTextNode(E.value);u&&bl.shouldBuildText(_)&&f.push(R),C.append(R)}}for(const v of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const kl=1e3,XR=9,Ks=new WeakSet;function pn(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class QR{static create(t){switch(t.data.annotationType){case Kt.LINK:return new Ab(t);case Kt.TEXT:return new JR(t);case Kt.WIDGET:switch(t.data.fieldType){case"Tx":return new tT(t);case"Btn":return t.data.radioButton?new xb(t):t.data.checkBox?new iT(t):new nT(t);case"Ch":return new sT(t);case"Sig":return new eT(t)}return new ir(t);case Kt.POPUP:return new lg(t);case Kt.FREETEXT:return new Sb(t);case Kt.LINE:return new aT(t);case Kt.SQUARE:return new oT(t);case Kt.CIRCLE:return new lT(t);case Kt.POLYLINE:return new kb(t);case Kt.CARET:return new cT(t);case Kt.INK:return new Cb(t);case Kt.POLYGON:return new hT(t);case Kt.HIGHLIGHT:return new uT(t);case Kt.UNDERLINE:return new dT(t);case Kt.SQUIGGLY:return new fT(t);case Kt.STRIKEOUT:return new pT(t);case Kt.STAMP:return new Mb(t);case Kt.FILEATTACHMENT:return new gT(t);default:return new Zt(t)}}}var fs,Ao,xo,uc,rg;const ZR=class yb{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){m(this,uc),m(this,fs,null),m(this,Ao,!1),m(this,xo,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return yb._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;o(this,fs)||A(this,fs,{rect:this.data.rect.slice(0)});const{rect:n}=t;n&&b(this,uc,rg).call(this,n),(e=o(this,xo))==null||e.popup.updateEdited(t)}resetEdited(){var t;o(this,fs)&&(b(this,uc,rg).call(this,o(this,fs).rect),(t=o(this,xo))==null||t.popup.resetEdited(),A(this,fs,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof ir||(r.tabIndex=kl);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof lg){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,r),r}const{width:l,height:h}=pn(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(x>0||E>0){const C=`calc(${x}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=C}else if(this instanceof xb){const C=`calc(${l}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;a.borderRadius=C}switch(e.borderStyle.style){case La.SOLID:a.borderStyle="solid";break;case La.DASHED:a.borderStyle="dashed";break;case La.BEVELED:yt("Unimplemented border style: beveled");break;case La.INSET:yt("Unimplemented border style: inset");break;case La.UNDERLINE:a.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(A(this,Ao,!0),a.borderColor=Z.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}const u=Z.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:f,pageX:g,pageY:v}=s.rawDims;a.left=`${100*(u[0]-g)/c}%`,a.top=`${100*(u[1]-v)/f}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(a.width=`${100*l/c}%`,a.height=`${100*h/f}%`):this.setRotation(w,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=pn(this.data.rect);let l,h;t%180===0?(l=100*r/n,h=100*a/s):(l=100*a/n,h=100*r/s),e.style.width=`${l}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],l=r.slice(1);s.target.style[n]=S0[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:S0[`${a}_rgb`](l)})};return St(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const l={detail:{[s]:r},target:t};a(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect;if(t.length===1){const[,{x,y:E},{x:_,y:C}]=t[0];if(s===x&&r===E&&e===_&&n===C)return}const{style:a}=this.container;let l;if(o(this,Ao)){const{borderColor:x,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=s-e,u=r-n,{svgFactory:c}=this,f=c.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const g=c.createElement("defs");f.append(g);const v=c.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),g.append(v);for(const[,{x,y:E},{x:_,y:C}]of t){const R=c.createElement("rect"),P=(_-e)/h,I=(r-E)/u,F=(x-_)/h,L=(E-C)/u;R.setAttribute("x",P),R.setAttribute("y",I),R.setAttribute("width",F),R.setAttribute("height",L),v.append(R),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${I}" width="${F}" height="${L}"/>`)}o(this,Ao)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=A(this,xo,new lg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Pt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===e)continue;const h=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Ks.has(u)){yt(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:h,domElement:u})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&Ks.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};fs=new WeakMap,Ao=new WeakMap,xo=new WeakMap,uc=new WeakSet,rg=function(i){const{container:{style:t},data:{rect:e,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:l}}}}=this;e==null||e.splice(0,4,...i);const{width:h,height:u}=pn(i);t.left=`${100*(i[0]-a)/s}%`,t.top=`${100*(r-i[3]+l)/r}%`,n===0?(t.width=`${100*h/s}%`,t.height=`${100*u/r}%`):this.setRotation(n)};let Zt=ZR;var $n,Ns,ag,wb,og,bb;class Ab extends Zt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!(e!=null&&e.ignoreBorder),createQuadrilaterals:!0}),m(this,$n),m(this,ag),m(this,og),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(b(this,ag,wb).call(this,n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(b(this,og,bb).call(this,n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&b(this,$n,Ns).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),b(this,$n,Ns).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const r=n.get(s);r&&(t[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),b(this,$n,Ns).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),b(this,$n,Ns).call(this),!this._fieldObjects){yt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var s;n==null||n();const{fields:r,refs:a,include:l}=e,h=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:w}of v)f.add(w)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===l&&h.push(v)}else for(const f of Object.values(this._fieldObjects))h.push(...f);const u=this.annotationStorage,c=[];for(const f of h){const{id:g}=f;switch(c.push(g),f.type){case"text":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Ks.has(v)){yt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((s=this.linkService.eventBus)==null||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}$n=new WeakSet,Ns=function(){this.container.setAttribute("data-internal-link","")},ag=new WeakSet,wb=function(i,t,e=null){i.href=this.linkService.getAnchorUrl(""),t.description&&(i.title=t.description),i.onclick=()=>{var n;return(n=this.downloadManager)==null||n.openOrDownloadData(t.content,t.filename,e),!1},b(this,$n,Ns).call(this)},og=new WeakSet,bb=function(i,t){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(t),!1),b(this,$n,Ns).call(this)};class JR extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ir extends Zt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ue.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,l;for(const[h,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Z.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||XR,r=t.style;let a;const l=2,h=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),c=Math.round(u/(rf*s))||1,f=u/c;a=Math.min(s,h(f/rf))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,h(u/rf))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Z.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class tT extends ir{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var t,e;const n=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=n.getValue(s,{value:this.data.fieldValue});let l=a.value||"";const h=n.getValue(s,{charLimit:this.data.maxLen}).charLimit;h&&l.length>h&&(l=l.slice(0,h));let u=a.formattedValue||((t=this.data.textContent)==null?void 0:t.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??l,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",u??l),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Ks.add(r),r.setAttribute("data-element-id",s),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=kl,this._setRequired(r,this.data.required),h&&(r.maxLength=h),r.addEventListener("input",g=>{n.setValue(s,{value:g.target.value}),this.setPropertyOnSiblings(r,"value",g.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue??"";r.value=c.userValue=v,c.formattedValue=null});let f=g=>{const{formattedValue:v}=c;v!=null&&(g.target.value=v),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var w;if(c.focused)return;const{target:x}=v;c.userValue&&(x.value=c.userValue),c.lastCommittedValue=x.value,c.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const w={value(x){c.userValue=x.detail.value??"",n.setValue(s,{value:c.userValue.toString()}),x.target.value=c.userValue},formattedValue(x){const{formattedValue:E}=x.detail;c.formattedValue=E,E!=null&&x.target!==document.activeElement&&(x.target.value=E),n.setValue(s,{formattedValue:E})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var E;const{charLimit:_}=x.detail,{target:C}=x;if(_===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",_);let R=c.userValue;!R||R.length<=_||(R=R.slice(0,_),C.value=c.userValue=R,n.setValue(s,{value:R}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),r.addEventListener("keydown",v=>{var w;c.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(c.commitKey=3),x===-1)return;const{value:E}=v.target;c.lastCommittedValue!==E&&(c.lastCommittedValue=E,c.userValue=E,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const g=f;f=null,r.addEventListener("blur",v=>{var w,x;if(!c.focused||!v.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(c.focused=!1);const{value:E}=v.target;c.userValue=E,c.lastCommittedValue!==E&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:E,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),g(v)}),(e=this.data.actions)!=null&&e.Keystroke&&r.addEventListener("beforeinput",v=>{var w;c.lastCommittedValue=null;const{data:x,target:E}=v,{value:_,selectionStart:C,selectionEnd:R}=E;let P=C,I=R;switch(v.inputType){case"deleteWordBackward":{const F=_.substring(0,C).match(/\w*[^\w]*$/);F&&(P-=F[0].length);break}case"deleteWordForward":{const F=_.substring(C).match(/^[^\w]*\w*/);F&&(I+=F[0].length);break}case"deleteContentBackward":C===R&&(P-=1);break;case"deleteContentForward":C===R&&(I+=1);break}v.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:_,change:x||"",willCommit:!1,selStart:P,selEnd:I}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/h;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class eT extends ir{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class iT extends ir{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ks.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=kl,r.addEventListener("change",a=>{const{name:l,checked:h}=a.target;for(const u of this._getElementsByName(l,n)){const c=h&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=c),t.setValue(u.id,{value:c})}t.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xb extends ir{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Ks.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=kl,r.addEventListener("change",a=>{const{name:l,checked:h}=a.target;for(const u of this._getElementsByName(l,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const h={value:u=>{const c=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const g=c&&f.id===n;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nT extends Ab{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class sT extends ir{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Ks.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=kl;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",c=>{const f=this.data.defaultFieldValue;for(const g of s.options)g.selected=g.value===f});for(const c of this.data.options){const f=document.createElement("option");f.textContent=c.displayValue,f.value=c.exportValue,n.value.includes(c.exportValue)&&(f.setAttribute("selected",!0),r=!1),s.append(f)}let a=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),s.prepend(c),a=()=>{c.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=c=>{const f=c?"value":"textContent",{options:g,multiple:v}=s;return v?Array.prototype.filter.call(g,w=>w.selected).map(w=>w[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]};let h=l(!1);const u=c=>{const f=c.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",c=>{const f={value(g){a==null||a();const v=g.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const x of s.options)x.selected=w.has(x.value);t.setValue(e,{value:l(!0)}),h=l(!1)},multipleSelection(g){s.multiple=!0},remove(g){const v=s.options,w=g.detail.remove;v[w].selected=!1,s.remove(w),v.length>0&&Array.prototype.findIndex.call(v,x=>x.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:l(!0),items:u(g)}),h=l(!1)},clear(g){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=l(!1)},insert(g){const{index:v,displayValue:w,exportValue:x}=g.detail.insert,E=s.children[v],_=document.createElement("option");_.textContent=w,_.value=x,E?E.before(_):s.append(_),t.setValue(e,{value:l(!0),items:u(g)}),h=l(!1)},items(g){const{items:v}=g.detail;for(;s.length!==0;)s.remove(0);for(const w of v){const{displayValue:x,exportValue:E}=w,_=document.createElement("option");_.textContent=x,_.value=E,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(g)}),h=l(!1)},indices(g){const v=new Set(g.detail.indices);for(const w of g.target.options)w.selected=v.has(w.index);t.setValue(e,{value:l(!0)}),h=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,c)}),s.addEventListener("input",c=>{var f;const g=l(!0),v=l(!1);t.setValue(e,{value:g}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):s.addEventListener("input",function(c){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class lg extends Zt{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Zt._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new rT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${xw}${n}`).join(",")),this.container}}var Jo,hg,cg,tl,Pr,Ht,Dn,Lr,Lu,Iu,el,Sn,xi,Un,Du,Hn,dc,ps,Ir,il,fc,pc,yf,ug,k0,dg,Eb,fg,_b,pg,C0,nl,Ou,sl,Nu,Fu,gg;class rT{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:h,rect:u,parentRect:c,open:f}){m(this,il),m(this,pc),m(this,ug),m(this,dg),m(this,fg),m(this,pg),m(this,nl),m(this,sl),m(this,Fu),m(this,Jo,b(this,fg,_b).bind(this)),m(this,hg,b(this,Fu,gg).bind(this)),m(this,cg,b(this,sl,Nu).bind(this)),m(this,tl,b(this,nl,Ou).bind(this)),m(this,Pr,null),m(this,Ht,null),m(this,Dn,null),m(this,Lr,null),m(this,Lu,null),m(this,Iu,null),m(this,el,null),m(this,Sn,!1),m(this,xi,null),m(this,Un,null),m(this,Du,null),m(this,Hn,null),m(this,dc,null),m(this,ps,null),m(this,Ir,!1);var g;A(this,Ht,t),A(this,dc,s),A(this,Dn,a),A(this,Hn,l),A(this,Iu,h),A(this,Pr,e),A(this,Du,u),A(this,el,c),A(this,Lu,n),A(this,Lr,Cw.toDateObject(r)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",o(this,tl)),v.addEventListener("mouseenter",o(this,cg)),v.addEventListener("mouseleave",o(this,hg)),v.classList.add("popupTriggerArea");for(const v of n)(g=v.container)==null||g.addEventListener("keydown",o(this,Jo));o(this,Ht).hidden=!0,f&&b(this,nl,Ou).call(this)}render(){if(o(this,xi))return;const t=A(this,xi,document.createElement("div"));if(t.className="popup",o(this,Pr)){const r=t.style.outlineColor=Z.makeHexColor(...o(this,Pr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Z.makeHexColor(...o(this,Pr).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=o(this,dc),t.append(e),o(this,Lr)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:o(this,Lr).toLocaleDateString(),time:o(this,Lr).toLocaleTimeString()})),e.append(r)}const s=o(this,il,fc);if(s)vb.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(o(this,Dn));t.append(r)}o(this,Ht).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const l=s[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;o(this,ps)||A(this,ps,{contentsObj:o(this,Dn),richText:o(this,Hn)}),t&&A(this,Un,null),e&&(A(this,Hn,b(this,dg,Eb).call(this,e)),A(this,Dn,null)),(n=o(this,xi))==null||n.remove(),A(this,xi,null)}resetEdited(){var t;o(this,ps)&&({contentsObj:ai(this,Dn)._,richText:ai(this,Hn)._}=o(this,ps),A(this,ps,null),(t=o(this,xi))==null||t.remove(),A(this,xi,null),A(this,Un,null))}forceHide(){A(this,Ir,this.isVisible),o(this,Ir)&&(o(this,Ht).hidden=!0)}maybeShow(){o(this,Ir)&&(o(this,xi)||b(this,sl,Nu).call(this),A(this,Ir,!1),o(this,Ht).hidden=!1)}get isVisible(){return o(this,Ht).hidden===!1}}Jo=new WeakMap,hg=new WeakMap,cg=new WeakMap,tl=new WeakMap,Pr=new WeakMap,Ht=new WeakMap,Dn=new WeakMap,Lr=new WeakMap,Lu=new WeakMap,Iu=new WeakMap,el=new WeakMap,Sn=new WeakMap,xi=new WeakMap,Un=new WeakMap,Du=new WeakMap,Hn=new WeakMap,dc=new WeakMap,ps=new WeakMap,Ir=new WeakMap,il=new WeakSet,fc=function(){const i=o(this,Hn),t=o(this,Dn);return i!=null&&i.str&&(!(t!=null&&t.str)||t.str===i.str)&&o(this,Hn).html||null},pc=new WeakSet,yf=function(){var i,t,e;return((e=(t=(i=o(this,il,fc))==null?void 0:i.attributes)==null?void 0:t.style)==null?void 0:e.fontSize)||0},ug=new WeakSet,k0=function(){var i,t,e;return((e=(t=(i=o(this,il,fc))==null?void 0:i.attributes)==null?void 0:t.style)==null?void 0:e.color)||null},dg=new WeakSet,Eb=function(i){const t=[],e={str:i,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:o(this,ug,k0),fontSize:o(this,pc,yf)?`calc(${o(this,pc,yf)}px * var(--scale-factor))`:""}};for(const s of i.split(`
`))t.push({name:"span",value:s,attributes:n});return e},fg=new WeakSet,_b=function(i){i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||(i.key==="Enter"||i.key==="Escape"&&o(this,Sn))&&b(this,nl,Ou).call(this)},pg=new WeakSet,C0=function(){if(o(this,Un)!==null)return;const{page:{view:i},viewport:{rawDims:{pageWidth:t,pageHeight:e,pageX:n,pageY:s}}}=o(this,Iu);let r=!!o(this,el),a=r?o(this,el):o(this,Du);for(const g of o(this,Lu))if(!a||Z.intersect(g.data.rect,a)!==null){a=g.data.rect,r=!0;break}const l=Z.normalizeRect([a[0],i[3]-a[1]+i[1],a[2],i[3]-a[3]+i[1]]),h=r?a[2]-a[0]+5:0,u=l[0]+h,c=l[1];A(this,Un,[100*(u-n)/t,100*(c-s)/e]);const{style:f}=o(this,Ht);f.left=`${o(this,Un)[0]}%`,f.top=`${o(this,Un)[1]}%`},nl=new WeakSet,Ou=function(){A(this,Sn,!o(this,Sn)),o(this,Sn)?(b(this,sl,Nu).call(this),o(this,Ht).addEventListener("click",o(this,tl)),o(this,Ht).addEventListener("keydown",o(this,Jo))):(b(this,Fu,gg).call(this),o(this,Ht).removeEventListener("click",o(this,tl)),o(this,Ht).removeEventListener("keydown",o(this,Jo)))},sl=new WeakSet,Nu=function(){o(this,xi)||this.render(),this.isVisible?o(this,Sn)&&o(this,Ht).classList.add("focused"):(b(this,pg,C0).call(this),o(this,Ht).hidden=!1,o(this,Ht).style.zIndex=parseInt(o(this,Ht).style.zIndex)+1e3)},Fu=new WeakSet,gg=function(){o(this,Ht).classList.remove("focused"),!(o(this,Sn)||!this.isVisible)&&(o(this,Ht).hidden=!0,o(this,Ht).style.zIndex=parseInt(o(this,Ht).style.zIndex)-1e3)};class Sb extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var gc;class aT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),m(this,gc,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=pn(t.rect),s=this.svgFactory.create(e,n,!0),r=A(this,gc,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,gc)}addHighlightArea(){this.container.classList.add("highlightArea")}}gc=new WeakMap;var mc;class oT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),m(this,mc,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=pn(t.rect),s=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,a=A(this,mc,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",e-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,mc)}addHighlightArea(){this.container.classList.add("highlightArea")}}mc=new WeakMap;var vc;class lT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),m(this,vc,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=pn(t.rect),s=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,a=A(this,vc,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",e/2),a.setAttribute("cy",n/2),a.setAttribute("rx",e/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,vc)}addHighlightArea(){this.container.classList.add("highlightArea")}}vc=new WeakMap;var yc;class kb extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),m(this,yc,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=pn(t.rect),s=this.svgFactory.create(e,n,!0);let r=[];for(const l of t.vertices){const h=l.x-t.rect[0],u=t.rect[3]-l.y;r.push(h+","+u)}r=r.join(" ");const a=A(this,yc,this.svgFactory.createElement(this.svgElementName));return a.setAttribute("points",r),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,yc)}addHighlightArea(){this.container.classList.add("highlightArea")}}yc=new WeakMap;class hT extends kb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class cT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var wc;class Cb extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),m(this,wc,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Et.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=pn(t.rect),s=this.svgFactory.create(e,n,!0);for(const r of t.inkLists){let a=[];for(const h of r){const u=h.x-t.rect[0],c=t.rect[3]-h.y;a.push(`${u},${c}`)}a=a.join(" ");const l=this.svgFactory.createElement(this.svgElementName);o(this,wc).push(l),l.setAttribute("points",a),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),s.append(l)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return o(this,wc)}addHighlightArea(){this.container.classList.add("highlightArea")}}wc=new WeakMap;class uT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class dT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pT extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Mb extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var bc,Ac,mg;class gT extends Zt{constructor(t){var e;super(t,{isRenderable:!0}),m(this,Ac),m(this,bc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(e=this.linkService.eventBus)==null||e.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",b(this,Ac,mg).bind(this)),A(this,bc,n);const{isMac:s}=Ue.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&b(this,Ac,mg).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return o(this,bc)}addHighlightArea(){this.container.classList.add("highlightArea")}}bc=new WeakMap,Ac=new WeakSet,mg=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var Ql,cr,Ha,wf,M0,Zl,bf,R0;let mT=(R0=class{constructor({div:i,accessibilityManager:t,annotationCanvasMap:e,annotationEditorUIManager:n,page:s,viewport:r}){m(this,wf),m(this,Zl),m(this,Ql,null),m(this,cr,null),m(this,Ha,new Map),this.div=i,A(this,Ql,t),A(this,cr,e),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}async render(i){var t;const{annotations:e}=i,n=this.div;Ys(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new Ym,annotationStorage:i.annotationStorage||new Jm,enableScripting:i.enableScripting===!0,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Kt.POPUP;if(l){const c=s.get(a.id);if(!c)continue;r.elements=c}else{const{width:c,height:f}=pn(a.rect);if(c<=0||f<=0)continue}r.data=a;const h=QR.create(r);if(!h.isRenderable)continue;if(!l&&a.popupRef){const c=s.get(a.popupRef);c?c.push(h):s.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),b(this,wf,M0).call(this,u,a.id),h.annotationEditorType>0&&(o(this,Ha).set(h.data.id,h),(t=this._annotationEditorUIManager)==null||t.renderAnnotationElement(h))}b(this,Zl,bf).call(this)}update({viewport:i}){const t=this.div;this.viewport=i,Ys(t,{rotation:i.rotation}),b(this,Zl,bf).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Ha).values())}getEditableAnnotation(i){return o(this,Ha).get(i)}},Ql=new WeakMap,cr=new WeakMap,Ha=new WeakMap,wf=new WeakSet,M0=function(i,t){var e;const n=i.firstChild||i;n.id=`${xw}${t}`,this.div.append(i),(e=o(this,Ql))==null||e.moveElementInDOM(this.div,i,n,!1)},Zl=new WeakSet,bf=function(){if(!o(this,cr))return;const i=this.div;for(const[t,e]of o(this,cr)){const n=i.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;e.className="annotationContent";const{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(e):s.classList.contains("annotationContent")?s.after(e):s.before(e):n.append(e)}o(this,cr).clear()},R0);const xc=/\r\n?|\n/g;var Ec,_c,Sc,kc,Cc,Ri,ni,Mc,si,rl,vg,Rb,yg,Tb,wg,Pb,al,Wu,ol,ju,Eo,Rc,bg,Lb,Bu,Ag,xg,Ib;const yi=class de extends Dt{constructor(t){super({...t,name:"freeTextEditor"}),m(this,vg),m(this,yg),m(this,wg),m(this,al),m(this,Eo),m(this,bg),m(this,xg),m(this,Ec,this.editorDivBlur.bind(this)),m(this,_c,this.editorDivFocus.bind(this)),m(this,Sc,this.editorDivInput.bind(this)),m(this,kc,this.editorDivKeydown.bind(this)),m(this,Cc,this.editorDivPaste.bind(this)),m(this,Ri,void 0),m(this,ni,""),m(this,Mc,`${this.id}-editor`),m(this,si,void 0),m(this,rl,null),A(this,Ri,t.color||de._defaultColor||Dt._defaultLineColor),A(this,si,t.fontSize||de._defaultFontSize)}static get _keyboardManager(){const t=de.prototype,e=r=>r.isEmpty(),n=wl.TRANSLATE_SMALL,s=wl.TRANSLATE_BIG;return St(this,"_keyboardManager",new _l([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static initialize(t,e){Dt.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ct.FREETEXT_SIZE:de._defaultFontSize=e;break;case ct.FREETEXT_COLOR:de._defaultColor=e;break}}updateParams(t,e){switch(t){case ct.FREETEXT_SIZE:b(this,vg,Rb).call(this,e);break;case ct.FREETEXT_COLOR:b(this,yg,Tb).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,de._defaultFontSize],[ct.FREETEXT_COLOR,de._defaultColor||Dt._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,o(this,si)],[ct.FREETEXT_COLOR,o(this,Ri)]]}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-de._internalPadding*t,-(de._internalPadding+o(this,si))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Et.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",o(this,kc)),this.editorDiv.addEventListener("focus",o(this,_c)),this.editorDiv.addEventListener("blur",o(this,Ec)),this.editorDiv.addEventListener("input",o(this,Sc)),this.editorDiv.addEventListener("paste",o(this,Cc)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Mc)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",o(this,kc)),this.editorDiv.removeEventListener("focus",o(this,_c)),this.editorDiv.removeEventListener("blur",o(this,Ec)),this.editorDiv.removeEventListener("input",o(this,Sc)),this.editorDiv.removeEventListener("paste",o(this,Cc)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=o(this,ni),e=A(this,ni,b(this,wg,Pb).call(this).trimEnd());if(t===e)return;const n=s=>{if(A(this,ni,s),!s){this.remove();return}b(this,Eo,Rc).call(this),this._uiManager.rebuild(this),b(this,al,Wu).call(this)};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),b(this,al,Wu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){de._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Mc)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Dt._l10nPromise.get("pdfjs-free-text-default-content").then(s=>{var r;return(r=this.editorDiv)==null?void 0:r.setAttribute("default-content",s)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${o(this,si)}px * var(--scale-factor))`,n.color=o(this,Ri),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),mu(this,this.div,["dblclick","keydown"]),this.width){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=o(this,rl);let[l,h]=this.getInitialTranslation();[l,h]=this.pageTranslationToScreen(l,h);const[u,c]=this.pageDimensions,[f,g]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(a[0]-f)/u,w=e+this.height-(a[1]-g)/c;break;case 90:v=t+(a[0]-f)/u,w=e-(a[1]-g)/c,[l,h]=[h,-l];break;case 180:v=t-this.width+(a[0]-f)/u,w=e-(a[1]-g)/c,[l,h]=[-l,-h];break;case 270:v=t+(a[0]-f-this.height*c)/u,w=e+(a[1]-g-this.width*u)/c,[l,h]=[-h,l];break}this.setAt(v*s,w*r,l,h)}else this.setAt(t*s,e*r,this.width*s,this.height*r);b(this,Eo,Rc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var e,n,s;const r=t.clipboardData||window.clipboardData,{types:a}=r;if(a.length===1&&a[0]==="text/plain")return;t.preventDefault();const l=b(e=de,Bu,Ag).call(e,r.getData("text")||"").replaceAll(xc,`
`);if(!l)return;const h=window.getSelection();if(!h.rangeCount)return;this.editorDiv.normalize(),h.deleteFromDocument();const u=h.getRangeAt(0);if(!l.includes(`
`)){u.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),h.collapseToStart();return}const{startContainer:c,startOffset:f}=u,g=[],v=[];if(c.nodeType===Node.TEXT_NODE){const E=c.parentElement;if(v.push(c.nodeValue.slice(f).replaceAll(xc,"")),E!==this.editorDiv){let _=g;for(const C of this.editorDiv.childNodes){if(C===E){_=v;continue}_.push(b(n=de,ol,ju).call(n,C))}}g.push(c.nodeValue.slice(0,f).replaceAll(xc,""))}else if(c===this.editorDiv){let E=g,_=0;for(const C of this.editorDiv.childNodes)_++===f&&(E=v),E.push(b(s=de,ol,ju).call(s,C))}A(this,ni,`${g.join(`
`)}${l}${v.join(`
`)}`),b(this,Eo,Rc).call(this);const w=new Range;let x=g.reduce((E,_)=>E+_.length,0);for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const _=E.nodeValue.length;if(x<=_){w.setStart(E,x),w.setEnd(E,x);break}x-=_}h.removeAllRanges(),h.addRange(w)}get contentDiv(){return this.editorDiv}static deserialize(t,e,n){var s;let r=null;if(t instanceof Sb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:u,rotation:c,id:f},textContent:g,textPosition:v,parent:{page:{pageNumber:w}}}=t;if(!g||g.length===0)return null;r=t={annotationType:Et.FREETEXT,color:Array.from(h),fontSize:l,value:g.join(`
`),position:v,pageIndex:w-1,rect:u.slice(0),rotation:c,id:f,deleted:!1}}const a=super.deserialize(t,e,n);return A(a,si,t.fontSize),A(a,Ri,Z.makeHexColor(...t.color)),A(a,ni,b(s=de,Bu,Ag).call(s,t.value)),a.annotationElementId=t.id||null,A(a,rl,r),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=de._internalPadding*this.parentScale,n=this.getRect(e,e),s=Dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,Ri)),r={annotationType:Et.FREETEXT,color:s,fontSize:o(this,si),value:b(this,bg,Lb).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!b(this,xg,Ib).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${o(this,si)}px * var(--scale-factor))`,n.color=o(this,Ri),e.replaceChildren();for(const r of o(this,ni).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}const s=de._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:o(this,ni)}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ec=new WeakMap,_c=new WeakMap,Sc=new WeakMap,kc=new WeakMap,Cc=new WeakMap,Ri=new WeakMap,ni=new WeakMap,Mc=new WeakMap,si=new WeakMap,rl=new WeakMap,vg=new WeakSet,Rb=function(i){const t=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-o(this,si))*this.parentScale),A(this,si,n),b(this,al,Wu).call(this)},e=o(this,si);this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},yg=new WeakSet,Tb=function(i){const t=n=>{A(this,Ri,this.editorDiv.style.color=n)},e=o(this,Ri);this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},wg=new WeakSet,Pb=function(){var i;const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(b(i=yi,ol,ju).call(i,e));return t.join(`
`)},al=new WeakSet,Wu=function(){const[i,t]=this.parentDimensions;let e;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{const{currentLayer:n,div:s}=this,r=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",n.div.append(this.div),e=s.getBoundingClientRect(),s.remove(),s.style.display=r,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=e.width/i,this.height=e.height/t):(this.width=e.height/i,this.height=e.width/t),this.fixAndSetPosition()},ol=new WeakSet,ju=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(xc,"")},Eo=new WeakSet,Rc=function(){if(this.editorDiv.replaceChildren(),!!o(this,ni))for(const i of o(this,ni).split(`
`)){const t=document.createElement("div");t.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(t)}},bg=new WeakSet,Lb=function(){return o(this,ni).replaceAll("Â "," ")},Bu=new WeakSet,Ag=function(i){return i.replaceAll(" ","Â ")},xg=new WeakSet,Ib=function(i){const{value:t,fontSize:e,color:n,pageIndex:s}=o(this,rl);return this._hasBeenMoved||i.value!==t||i.fontSize!==e||i.color.some((r,a)=>r!==n[a])||i.pageIndex!==s},m(yi,ol),m(yi,Bu),ft(yi,"_freeTextDefaultContent",""),ft(yi,"_internalPadding",0),ft(yi,"_defaultColor",null),ft(yi,"_defaultFontSize",10),ft(yi,"_type","freetext"),ft(yi,"_editorType",Et.FREETEXT);let vT=yi;var $u,gs,wi,Eg,Db,_o,Jl,_g,Ob,Sg,Nb,Tc,kg;class Cg{constructor(t,e=0,n=0,s=!0){m(this,Eg),m(this,_o),m(this,_g),m(this,Sg),m(this,Tc),m(this,$u,void 0),m(this,gs,[]),m(this,wi,[]);let r=1/0,a=-1/0,l=1/0,h=-1/0;const u=10**-4;for(const{x:E,y:_,width:C,height:R}of t){const P=Math.floor((E-e)/u)*u,I=Math.ceil((E+C+e)/u)*u,F=Math.floor((_-e)/u)*u,L=Math.ceil((_+R+e)/u)*u,S=[P,F,L,!0],k=[I,F,L,!1];o(this,gs).push(S,k),r=Math.min(r,P),a=Math.max(a,I),l=Math.min(l,F),h=Math.max(h,L)}const c=a-r+2*n,f=h-l+2*n,g=r-n,v=l-n,w=o(this,gs).at(s?-1:-2),x=[w[0],w[2]];for(const E of o(this,gs)){const[_,C,R]=E;E[0]=(_-g)/c,E[1]=(C-v)/f,E[2]=(R-v)/f}A(this,$u,{x:g,y:v,width:c,height:f,lastPoint:x})}getOutlines(){o(this,gs).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of o(this,gs))e[3]?(t.push(...b(this,Tc,kg).call(this,e)),b(this,_g,Ob).call(this,e)):(b(this,Sg,Nb).call(this,e),t.push(...b(this,Tc,kg).call(this,e)));return b(this,Eg,Db).call(this,t)}}$u=new WeakMap,gs=new WeakMap,wi=new WeakMap,Eg=new WeakSet,Db=function(i){const t=[],e=new Set;for(const r of i){const[a,l,h]=r;t.push([a,l,r],[a,h,r])}t.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=t.length;r<a;r+=2){const l=t[r][2],h=t[r+1][2];l.push(h),h.push(l),e.add(l),e.add(h)}const n=[];let s;for(;e.size>0;){const r=e.values().next().value;let[a,l,h,u,c]=r;e.delete(r);let f=a,g=l;for(s=[a,h],n.push(s);;){let v;if(e.has(u))v=u;else if(e.has(c))v=c;else break;e.delete(v),[a,l,h,u,c]=v,f!==a&&(s.push(f,g,a,g===l?l:h),f=a),g=g===l?h:l}s.push(f,g)}return new yT(n,o(this,$u))},_o=new WeakSet,Jl=function(i){const t=o(this,wi);let e=0,n=t.length-1;for(;e<=n;){const s=e+n>>1,r=t[s][0];if(r===i)return s;r<i?e=s+1:n=s-1}return n+1},_g=new WeakSet,Ob=function([,i,t]){const e=b(this,_o,Jl).call(this,i);o(this,wi).splice(e,0,[i,t])},Sg=new WeakSet,Nb=function([,i,t]){const e=b(this,_o,Jl).call(this,i);for(let n=e;n<o(this,wi).length;n++){const[s,r]=o(this,wi)[n];if(s!==i)break;if(s===i&&r===t){o(this,wi).splice(n,1);return}}for(let n=e-1;n>=0;n--){const[s,r]=o(this,wi)[n];if(s!==i)break;if(s===i&&r===t){o(this,wi).splice(n,1);return}}},Tc=new WeakSet,kg=function(i){const[t,e,n]=i,s=[[t,e,n]],r=b(this,_o,Jl).call(this,n);for(let a=0;a<r;a++){const[l,h]=o(this,wi)[a];for(let u=0,c=s.length;u<c;u++){const[,f,g]=s[u];if(!(h<=f||g<=l)){if(f>=l){if(g>h)s[u][1]=h;else{if(c===1)return[];s.splice(u,1),u--,c--}continue}s[u][2]=l,g>h&&s.push([t,h,g])}}}return s};class Fb{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Lg}}var Pc,So;class yT extends Fb{constructor(t,e){super(),m(this,Pc,void 0),m(this,So,void 0),A(this,So,t),A(this,Pc,e)}toSVGPath(){const t=[];for(const e of o(this,So)){let[n,s]=e;t.push(`M${n} ${s}`);for(let r=2;r<e.length;r+=2){const a=e[r],l=e[r+1];a===n?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${a}`),n=a)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],r){const a=[],l=n-t,h=s-e;for(const u of o(this,So)){const c=new Array(u.length);for(let f=0;f<u.length;f+=2)c[f]=t+u[f]*l,c[f+1]=s-u[f+1]*h;a.push(c)}return a}get box(){return o(this,Pc)}}Pc=new WeakMap,So=new WeakMap;var Ji,kn,ko,Co,Ki,xt,ca,ua,Lc,Ic,Mo,Ro,ms,Dc,Af,Mg,Oc,Rg;const Dr=class Tg{constructor({x:t,y:e},n,s,r,a,l=0){m(this,Oc),m(this,Ji,void 0),m(this,kn,[]),m(this,ko,void 0),m(this,Co,void 0),m(this,Ki,[]),m(this,xt,new Float64Array(18)),m(this,ca,void 0),m(this,ua,void 0),m(this,Lc,void 0),m(this,Ic,void 0),m(this,Mo,void 0),m(this,Ro,void 0),m(this,ms,[]),A(this,Ji,n),A(this,Ro,r*s),A(this,Co,a),o(this,xt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,ko,l),A(this,Ic,o(Tg,Dc)*s),A(this,Lc,o(Tg,Mg)*s),A(this,Mo,s),o(this,ms).push(t,e)}get free(){return!0}isEmpty(){return isNaN(o(this,xt)[8])}add({x:t,y:e}){var n;A(this,ca,t),A(this,ua,e);const[s,r,a,l]=o(this,Ji);let[h,u,c,f]=o(this,xt).subarray(8,12);const g=t-c,v=e-f,w=Math.hypot(g,v);if(w<o(this,Lc))return!1;const x=w-o(this,Ic),E=x/w,_=E*g,C=E*v;let R=h,P=u;h=c,u=f,c+=_,f+=C,(n=o(this,ms))==null||n.push(t,e);const I=-C/x,F=_/x,L=I*o(this,Ro),S=F*o(this,Ro);return o(this,xt).set(o(this,xt).subarray(2,8),0),o(this,xt).set([c+L,f+S],4),o(this,xt).set(o(this,xt).subarray(14,18),12),o(this,xt).set([c-L,f-S],16),isNaN(o(this,xt)[6])?(o(this,Ki).length===0&&(o(this,xt).set([h+L,u+S],2),o(this,Ki).push(NaN,NaN,NaN,NaN,(h+L-s)/a,(u+S-r)/l),o(this,xt).set([h-L,u-S],14),o(this,kn).push(NaN,NaN,NaN,NaN,(h-L-s)/a,(u-S-r)/l)),o(this,xt).set([R,P,h,u,c,f],6),!this.isEmpty()):(o(this,xt).set([R,P,h,u,c,f],6),Math.abs(Math.atan2(P-u,R-h)-Math.atan2(C,_))<Math.PI/2?([h,u,c,f]=o(this,xt).subarray(2,6),o(this,Ki).push(NaN,NaN,NaN,NaN,((h+c)/2-s)/a,((u+f)/2-r)/l),[h,u,R,P]=o(this,xt).subarray(14,18),o(this,kn).push(NaN,NaN,NaN,NaN,((R+h)/2-s)/a,((P+u)/2-r)/l),!0):([R,P,h,u,c,f]=o(this,xt).subarray(0,6),o(this,Ki).push(((R+5*h)/6-s)/a,((P+5*u)/6-r)/l,((5*h+c)/6-s)/a,((5*u+f)/6-r)/l,((h+c)/2-s)/a,((u+f)/2-r)/l),[c,f,h,u,R,P]=o(this,xt).subarray(12,18),o(this,kn).push(((R+5*h)/6-s)/a,((P+5*u)/6-r)/l,((5*h+c)/6-s)/a,((5*u+f)/6-r)/l,((h+c)/2-s)/a,((u+f)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,Ki),e=o(this,kn),n=o(this,xt).subarray(4,6),s=o(this,xt).subarray(16,18),[r,a,l,h]=o(this,Ji),[u,c,f,g]=b(this,Oc,Rg).call(this);if(isNaN(o(this,xt)[6])&&!this.isEmpty())return`M${(o(this,xt)[2]-r)/l} ${(o(this,xt)[3]-a)/h} L${(o(this,xt)[4]-r)/l} ${(o(this,xt)[5]-a)/h} L${u} ${c} L${f} ${g} L${(o(this,xt)[16]-r)/l} ${(o(this,xt)[17]-a)/h} L${(o(this,xt)[14]-r)/l} ${(o(this,xt)[15]-a)/h} Z`;const v=[];v.push(`M${t[4]} ${t[5]}`);for(let w=6;w<t.length;w+=6)isNaN(t[w])?v.push(`L${t[w+4]} ${t[w+5]}`):v.push(`C${t[w]} ${t[w+1]} ${t[w+2]} ${t[w+3]} ${t[w+4]} ${t[w+5]}`);v.push(`L${(n[0]-r)/l} ${(n[1]-a)/h} L${u} ${c} L${f} ${g} L${(s[0]-r)/l} ${(s[1]-a)/h}`);for(let w=e.length-6;w>=6;w-=6)isNaN(e[w])?v.push(`L${e[w+4]} ${e[w+5]}`):v.push(`C${e[w]} ${e[w+1]} ${e[w+2]} ${e[w+3]} ${e[w+4]} ${e[w+5]}`);return v.push(`L${e[4]} ${e[5]} Z`),v.join(" ")}getOutlines(){var t;const e=o(this,Ki),n=o(this,kn),s=o(this,xt),r=s.subarray(4,6),a=s.subarray(16,18),[l,h,u,c]=o(this,Ji),f=new Float64Array((((t=o(this,ms))==null?void 0:t.length)??0)+2);for(let C=0,R=f.length-2;C<R;C+=2)f[C]=(o(this,ms)[C]-l)/u,f[C+1]=(o(this,ms)[C+1]-h)/c;f[f.length-2]=(o(this,ca)-l)/u,f[f.length-1]=(o(this,ua)-h)/c;const[g,v,w,x]=b(this,Oc,Rg).call(this);if(isNaN(s[6])&&!this.isEmpty()){const C=new Float64Array(36);return C.set([NaN,NaN,NaN,NaN,(s[2]-l)/u,(s[3]-h)/c,NaN,NaN,NaN,NaN,(s[4]-l)/u,(s[5]-h)/c,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,w,x,NaN,NaN,NaN,NaN,(s[16]-l)/u,(s[17]-h)/c,NaN,NaN,NaN,NaN,(s[14]-l)/u,(s[15]-h)/c],0),new Lg(C,f,o(this,Ji),o(this,Mo),o(this,ko),o(this,Co))}const E=new Float64Array(o(this,Ki).length+24+o(this,kn).length);let _=e.length;for(let C=0;C<_;C+=2){if(isNaN(e[C])){E[C]=E[C+1]=NaN;continue}E[C]=e[C],E[C+1]=e[C+1]}E.set([NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-h)/c,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,w,x,NaN,NaN,NaN,NaN,(a[0]-l)/u,(a[1]-h)/c],_),_+=24;for(let C=n.length-6;C>=6;C-=6)for(let R=0;R<6;R+=2){if(isNaN(n[C+R])){E[_]=E[_+1]=NaN,_+=2;continue}E[_]=n[C+R],E[_+1]=n[C+R+1],_+=2}return E.set([NaN,NaN,NaN,NaN,n[4],n[5]],_),new Lg(E,f,o(this,Ji),o(this,Mo),o(this,ko),o(this,Co))}};Ji=new WeakMap,kn=new WeakMap,ko=new WeakMap,Co=new WeakMap,Ki=new WeakMap,xt=new WeakMap,ca=new WeakMap,ua=new WeakMap,Lc=new WeakMap,Ic=new WeakMap,Mo=new WeakMap,Ro=new WeakMap,ms=new WeakMap,Dc=new WeakMap,Af=new WeakMap,Mg=new WeakMap,Oc=new WeakSet,Rg=function(){const i=o(this,xt).subarray(4,6),t=o(this,xt).subarray(16,18),[e,n,s,r]=o(this,Ji);return[(o(this,ca)+(i[0]-t[0])/2-e)/s,(o(this,ua)+(i[1]-t[1])/2-n)/r,(o(this,ca)+(t[0]-i[0])/2-e)/s,(o(this,ua)+(t[1]-i[1])/2-n)/r]},m(Dr,Dc,8),m(Dr,Af,2),m(Dr,Mg,o(Dr,Dc)+o(Dr,Af));let Wb=Dr;var To,Jr,zn,Nc,Je,Fc,qt,Or,Po,Nr,Lo,Pg,jb;class Lg extends Fb{constructor(t,e,n,s,r,a){super(),m(this,Or),m(this,Nr),m(this,Pg),m(this,To,void 0),m(this,Jr,null),m(this,zn,void 0),m(this,Nc,void 0),m(this,Je,void 0),m(this,Fc,void 0),m(this,qt,void 0),A(this,qt,t),A(this,Je,e),A(this,To,n),A(this,Fc,s),A(this,zn,r),A(this,Nc,a),b(this,Pg,jb).call(this,a);const{x:l,y:h,width:u,height:c}=o(this,Jr);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-l)/u,t[f+1]=(t[f+1]-h)/c;for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-l)/u,e[f+1]=(e[f+1]-h)/c}toSVGPath(){const t=[`M${o(this,qt)[4]} ${o(this,qt)[5]}`];for(let e=6,n=o(this,qt).length;e<n;e+=6){if(isNaN(o(this,qt)[e])){t.push(`L${o(this,qt)[e+4]} ${o(this,qt)[e+5]}`);continue}t.push(`C${o(this,qt)[e]} ${o(this,qt)[e+1]} ${o(this,qt)[e+2]} ${o(this,qt)[e+3]} ${o(this,qt)[e+4]} ${o(this,qt)[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],r){const a=n-t,l=s-e;let h,u;switch(r){case 0:h=b(this,Or,Po).call(this,o(this,qt),t,s,a,-l),u=b(this,Or,Po).call(this,o(this,Je),t,s,a,-l);break;case 90:h=b(this,Nr,Lo).call(this,o(this,qt),t,e,a,l),u=b(this,Nr,Lo).call(this,o(this,Je),t,e,a,l);break;case 180:h=b(this,Or,Po).call(this,o(this,qt),n,e,-a,l),u=b(this,Or,Po).call(this,o(this,Je),n,e,-a,l);break;case 270:h=b(this,Nr,Lo).call(this,o(this,qt),n,s,-a,-l),u=b(this,Nr,Lo).call(this,o(this,Je),n,s,-a,-l);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return o(this,Jr)}getNewOutline(t,e){const{x:n,y:s,width:r,height:a}=o(this,Jr),[l,h,u,c]=o(this,To),f=r*u,g=a*c,v=n*u+l,w=s*c+h,x=new Wb({x:o(this,Je)[0]*f+v,y:o(this,Je)[1]*g+w},o(this,To),o(this,Fc),t,o(this,Nc),e??o(this,zn));for(let E=2;E<o(this,Je).length;E+=2)x.add({x:o(this,Je)[E]*f+v,y:o(this,Je)[E+1]*g+w});return x.getOutlines()}}To=new WeakMap,Jr=new WeakMap,zn=new WeakMap,Nc=new WeakMap,Je=new WeakMap,Fc=new WeakMap,qt=new WeakMap,Or=new WeakSet,Po=function(i,t,e,n,s){const r=new Float64Array(i.length);for(let a=0,l=i.length;a<l;a+=2)r[a]=t+i[a]*n,r[a+1]=e+i[a+1]*s;return r},Nr=new WeakSet,Lo=function(i,t,e,n,s){const r=new Float64Array(i.length);for(let a=0,l=i.length;a<l;a+=2)r[a]=t+i[a+1]*n,r[a+1]=e+i[a]*s;return r},Pg=new WeakSet,jb=function(i){const t=o(this,qt);let e=t[4],n=t[5],s=e,r=n,a=e,l=n,h=e,u=n;const c=i?Math.max:Math.min;for(let x=6,E=t.length;x<E;x+=6){if(isNaN(t[x]))s=Math.min(s,t[x+4]),r=Math.min(r,t[x+5]),a=Math.max(a,t[x+4]),l=Math.max(l,t[x+5]),u<t[x+5]?(h=t[x+4],u=t[x+5]):u===t[x+5]&&(h=c(h,t[x+4]));else{const _=Z.bezierBoundingBox(e,n,...t.slice(x,x+6));s=Math.min(s,_[0]),r=Math.min(r,_[1]),a=Math.max(a,_[2]),l=Math.max(l,_[3]),u<_[3]?(h=_[2],u=_[3]):u===_[3]&&(h=c(h,_[2]))}e=t[x+4],n=t[x+5]}const f=s-o(this,zn),g=r-o(this,zn),v=a-s+2*o(this,zn),w=l-r+2*o(this,zn);A(this,Jr,{x:f,y:g,width:v,height:w,lastPoint:[h,u]})};var Uu,Hu,Ei,Fr,ll,re,zu,Io,Wc,Vu,Rs,hl,Gu,Ig,qu,Dg,Og,Bb,Cn,vs,Ng,$b,tn,On;const Ub=class ys{constructor({editor:t=null,uiManager:e=null}){m(this,Gu),m(this,qu),m(this,Og),m(this,Cn),m(this,Ng),m(this,tn),m(this,Uu,b(this,Og,Bb).bind(this)),m(this,Hu,b(this,Ng,$b).bind(this)),m(this,Ei,null),m(this,Fr,null),m(this,ll,void 0),m(this,re,null),m(this,zu,!1),m(this,Io,!1),m(this,Wc,null),m(this,Vu,void 0),m(this,Rs,null),m(this,hl,void 0);var n;t?(A(this,Io,!1),A(this,hl,ct.HIGHLIGHT_COLOR),A(this,Wc,t)):(A(this,Io,!0),A(this,hl,ct.HIGHLIGHT_DEFAULT_COLOR)),A(this,Rs,(t==null?void 0:t._uiManager)||e),A(this,Vu,o(this,Rs)._eventBus),A(this,ll,(t==null?void 0:t.color)||((n=o(this,Rs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return St(this,"_keyboardManager",new _l([[["Escape","mac+Escape"],ys.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ys.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ys.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ys.prototype._moveToPrevious],[["Home","mac+Home"],ys.prototype._moveToBeginning],[["End","mac+End"],ys.prototype._moveToEnd]]))}renderButton(){const t=A(this,Ei,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",b(this,Cn,vs).bind(this)),t.addEventListener("keydown",o(this,Uu));const e=A(this,Fr,document.createElement("span"));return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=o(this,ll),t.append(e),t}renderMainDropdown(){const t=A(this,re,b(this,Gu,Ig).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,Ei)){b(this,Cn,vs).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,qu,Dg).call(this,e,t)}_moveToNext(t){var e,n;if(!o(this,tn,On)){b(this,Cn,vs).call(this,t);return}if(t.target===o(this,Ei)){(e=o(this,re).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=o(this,re))==null?void 0:e.firstChild)||t.target===o(this,Ei)){o(this,tn,On)&&this._hideDropdownFromKeyboard();return}o(this,tn,On)||b(this,Cn,vs).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!o(this,tn,On)){b(this,Cn,vs).call(this,t);return}(e=o(this,re).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,tn,On)){b(this,Cn,vs).call(this,t);return}(e=o(this,re).lastChild)==null||e.focus()}hideDropdown(){var t;(t=o(this,re))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",o(this,Hu))}_hideDropdownFromKeyboard(){var t;if(!o(this,Io)){if(!o(this,tn,On)){(t=o(this,Wc))==null||t.unselect();return}this.hideDropdown(),o(this,Ei).focus({preventScroll:!0,focusVisible:o(this,zu)})}}updateColor(t){if(o(this,Fr)&&(o(this,Fr).style.backgroundColor=t),!o(this,re))return;const e=o(this,Rs).highlightColors.values();for(const n of o(this,re).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,Ei))==null||t.remove(),A(this,Ei,null),A(this,Fr,null),(e=o(this,re))==null||e.remove(),A(this,re,null)}};Uu=new WeakMap,Hu=new WeakMap,Ei=new WeakMap,Fr=new WeakMap,ll=new WeakMap,re=new WeakMap,zu=new WeakMap,Io=new WeakMap,Wc=new WeakMap,Vu=new WeakMap,Rs=new WeakMap,hl=new WeakMap,Gu=new WeakSet,Ig=function(){const i=document.createElement("div");i.addEventListener("contextmenu",$e),i.className="dropdown",i.role="listbox",i.setAttribute("aria-multiselectable",!1),i.setAttribute("aria-orientation","vertical"),i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,e]of o(this,Rs).highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",e),n.title=t,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const s=document.createElement("span");n.append(s),s.className="swatch",s.style.backgroundColor=e,n.setAttribute("aria-selected",e===o(this,ll)),n.addEventListener("click",b(this,qu,Dg).bind(this,e)),i.append(n)}return i.addEventListener("keydown",o(this,Uu)),i},qu=new WeakSet,Dg=function(i,t){t.stopPropagation(),o(this,Vu).dispatch("switchannotationeditorparams",{source:this,type:o(this,hl),value:i})},Og=new WeakSet,Bb=function(i){Ub._keyboardManager.exec(this,i)},Cn=new WeakSet,vs=function(i){if(o(this,tn,On)){this.hideDropdown();return}if(A(this,zu,i.detail===0),window.addEventListener("pointerdown",o(this,Hu)),o(this,re)){o(this,re).classList.remove("hidden");return}const t=A(this,re,b(this,Gu,Ig).call(this));o(this,Ei).append(t)},Ng=new WeakSet,$b=function(i){var t;(t=o(this,re))!=null&&t.contains(i.target)||this.hideDropdown()},tn=new WeakSet,On=function(){return o(this,re)&&!o(this,re).classList.contains("hidden")};let Hb=Ub;var cl,Yu,Fs,ta,ul,ci,Ku,Xu,da,_i,Ne,ri,Fg,dl,ea,ae,Do,an,jc,Bc,Wg,Qu,jg,Bg,zb,$g,Vb,Ug,T0,$c,Hg,Wr,Oo,Ws,fa,zg,Gb,No,Uc,ia,fl,Vg,qb,Gg,Yb,qg,Kb,Yg,Xb;const me=class ve extends Dt{constructor(t){super({...t,name:"highlightEditor"}),m(this,Bc),m(this,Qu),m(this,Bg),m(this,$g),m(this,Ug),m(this,$c),m(this,Wr),m(this,zg),m(this,No),m(this,ia),m(this,Vg),m(this,Gg),m(this,cl,null),m(this,Yu,0),m(this,Fs,void 0),m(this,ta,null),m(this,ul,null),m(this,ci,null),m(this,Ku,null),m(this,Xu,0),m(this,da,null),m(this,_i,null),m(this,Ne,null),m(this,ri,!1),m(this,Fg,b(this,zg,Gb).bind(this)),m(this,dl,null),m(this,ea,void 0),m(this,ae,null),m(this,Do,""),m(this,an,void 0),m(this,jc,""),this.color=t.color||ve._defaultColor,A(this,an,t.thickness||ve._defaultThickness),A(this,ea,t.opacity||ve._defaultOpacity),A(this,Fs,t.boxes||null),A(this,jc,t.methodOfCreation||""),A(this,Do,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,ri,!0),b(this,Qu,jg).call(this,t),b(this,Wr,Oo).call(this)):(A(this,cl,t.anchorNode),A(this,Yu,t.anchorOffset),A(this,Ku,t.focusNode),A(this,Xu,t.focusOffset),b(this,Bc,Wg).call(this),b(this,Wr,Oo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ve.prototype;return St(this,"_keyboardManager",new _l([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,ri)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,an),methodOfCreation:o(this,jc)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;Dt.initialize(t,e),ve._defaultColor||(ve._defaultColor=((n=e.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case ct.HIGHLIGHT_DEFAULT_COLOR:ve._defaultColor=e;break;case ct.HIGHLIGHT_THICKNESS:ve._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return o(this,dl)}updateParams(t,e){switch(t){case ct.HIGHLIGHT_COLOR:b(this,Bg,zb).call(this,e);break;case ct.HIGHLIGHT_THICKNESS:b(this,$g,Vb).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_DEFAULT_COLOR,ve._defaultColor],[ct.HIGHLIGHT_THICKNESS,ve._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||ve._defaultColor],[ct.HIGHLIGHT_THICKNESS,o(this,an)||ve._defaultThickness],[ct.HIGHLIGHT_FREE,o(this,ri)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,ul,new Hb({editor:this})),t.addColorPicker(o(this,ul))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,ia,fl).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,b(this,ia,fl).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){b(this,$c,Hg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,Wr,Oo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var e;let n=!1;this.parent&&!t?b(this,$c,Hg).call(this):t&&(b(this,Wr,Oo).call(this,t),n=!this.parent&&((e=this.div)==null?void 0:e.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var e,n,s;const{drawLayer:r}=this.parent;let a;o(this,ri)?(t=(t-this.rotation+360)%360,a=b(e=ve,Ws,fa).call(e,o(this,_i).box,t)):a=b(n=ve,Ws,fa).call(n,this,t),r.rotate(o(this,Ne),t),r.rotate(o(this,ae),t),r.updateBox(o(this,Ne),a),r.updateBox(o(this,ae),b(s=ve,Ws,fa).call(s,o(this,ci).box,t))}render(){if(this.div)return this.div;const t=super.render();o(this,Do)&&(t.setAttribute("aria-label",o(this,Do)),t.setAttribute("role","mark")),o(this,ri)?t.classList.add("free"):this.div.addEventListener("keydown",o(this,Fg));const e=A(this,da,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=o(this,ta);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),mu(this,o(this,da),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(o(this,ae),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(o(this,ae),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:b(this,No,Uc).call(this,!0);break;case 1:case 3:b(this,No,Uc).call(this,!1);break}}select(){var t,e;super.select(),o(this,ae)&&((t=this.parent)==null||t.drawLayer.removeClass(o(this,ae),"hovered"),(e=this.parent)==null||e.drawLayer.addClass(o(this,ae),"selected"))}unselect(){var t;super.unselect(),o(this,ae)&&((t=this.parent)==null||t.drawLayer.removeClass(o(this,ae),"selected"),o(this,ri)||b(this,No,Uc).call(this,!1))}get _mustFixPosition(){return!o(this,ri)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(o(this,Ne),t),this.parent.drawLayer.show(o(this,ae),t))}static startHighlighting(t,e,{target:n,x:s,y:r}){const{x:a,y:l,width:h,height:u}=n.getBoundingClientRect(),c=w=>{b(this,qg,Kb).call(this,t,w)},f={capture:!0,passive:!1},g=w=>{w.preventDefault(),w.stopPropagation()},v=w=>{n.removeEventListener("pointermove",c),window.removeEventListener("blur",v),window.removeEventListener("pointerup",v),window.removeEventListener("pointerdown",g,f),window.removeEventListener("contextmenu",$e),b(this,Yg,Xb).call(this,t,w)};window.addEventListener("blur",v),window.addEventListener("pointerup",v),window.addEventListener("pointerdown",g,f),window.addEventListener("contextmenu",$e),n.addEventListener("pointermove",c),this._freeHighlight=new Wb({x:s,y:r},[a,l,h,u],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,e,n){var s;const r=super.deserialize(t,e,n),{rect:[a,l,h,u],color:c,quadPoints:f}=t;r.color=Z.makeHexColor(...c),A(r,ea,t.opacity);const[g,v]=r.pageDimensions;r.width=(h-a)/g,r.height=(u-l)/v;const w=A(r,Fs,[]);for(let x=0;x<f.length;x+=8)w.push({x:(f[4]-h)/g,y:(u-(1-f[x+5]))/v,width:(f[x+2]-f[x])/g,height:(f[x+5]-f[x+1])/v});return b(s=r,Bc,Wg).call(s),r}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),n=Dt._colorManager.convert(this.color);return{annotationType:Et.HIGHLIGHT,color:n,opacity:o(this,ea),thickness:o(this,an),quadPoints:b(this,Vg,qb).call(this),outlines:b(this,Gg,Yb).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:b(this,ia,fl).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};cl=new WeakMap,Yu=new WeakMap,Fs=new WeakMap,ta=new WeakMap,ul=new WeakMap,ci=new WeakMap,Ku=new WeakMap,Xu=new WeakMap,da=new WeakMap,_i=new WeakMap,Ne=new WeakMap,ri=new WeakMap,Fg=new WeakMap,dl=new WeakMap,ea=new WeakMap,ae=new WeakMap,Do=new WeakMap,an=new WeakMap,jc=new WeakMap,Bc=new WeakSet,Wg=function(){const i=new Cg(o(this,Fs),.001);A(this,_i,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=o(this,_i).box;const t=new Cg(o(this,Fs),.0025,.001,this._uiManager.direction==="ltr");A(this,ci,t.getOutlines());const{lastPoint:e}=o(this,ci).box;A(this,dl,[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height])},Qu=new WeakSet,jg=function({highlightOutlines:i,highlightId:t,clipPathId:e}){var n,s;if(A(this,_i,i),A(this,ci,i.getNewOutline(o(this,an)/2+1.5,.0025)),t>=0)A(this,Ne,t),A(this,ta,e),this.parent.drawLayer.finalizeLine(t,i),A(this,ae,this.parent.drawLayer.highlightOutline(o(this,ci)));else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(o(this,Ne),i),this.parent.drawLayer.updateBox(o(this,Ne),b(n=me,Ws,fa).call(n,o(this,_i).box,(c-this.rotation+360)%360)),this.parent.drawLayer.updateLine(o(this,ae),o(this,ci)),this.parent.drawLayer.updateBox(o(this,ae),b(s=me,Ws,fa).call(s,o(this,ci).box,c))}const{x:r,y:a,width:l,height:h}=i.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=h;break;case 90:{const[c,f]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*f/c,this.height=h*c/f;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=h;break;case 270:{const[c,f]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*f/c,this.height=h*c/f;break}}const{lastPoint:u}=o(this,ci).box;A(this,dl,[(u[0]-r)/l,(u[1]-a)/h])},Bg=new WeakSet,zb=function(i){const t=n=>{var s,r;this.color=n,(s=this.parent)==null||s.drawLayer.changeColor(o(this,Ne),n),(r=o(this,ul))==null||r.updateColor(n)},e=this.color;this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},$g=new WeakSet,Vb=function(i){const t=o(this,an),e=n=>{A(this,an,n),b(this,Ug,T0).call(this,n)};this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},Ug=new WeakSet,T0=function(i){if(!o(this,ri))return;b(this,Qu,jg).call(this,{highlightOutlines:o(this,_i).getNewOutline(i/2)}),this.fixAndSetPosition();const[t,e]=this.parentDimensions;this.setDims(this.width*t,this.height*e)},$c=new WeakSet,Hg=function(){o(this,Ne)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Ne)),A(this,Ne,null),this.parent.drawLayer.remove(o(this,ae)),A(this,ae,null))},Wr=new WeakSet,Oo=function(i=this.parent){o(this,Ne)===null&&({id:ai(this,Ne)._,clipPathId:ai(this,ta)._}=i.drawLayer.highlight(o(this,_i),this.color,o(this,ea)),A(this,ae,i.drawLayer.highlightOutline(o(this,ci))),o(this,da)&&(o(this,da).style.clipPath=o(this,ta)))},Ws=new WeakSet,fa=function({x:i,y:t,width:e,height:n},s){switch(s){case 90:return{x:1-t-n,y:i,width:n,height:e};case 180:return{x:1-i-e,y:1-t-n,width:e,height:n};case 270:return{x:t,y:1-i-e,width:n,height:e}}return{x:i,y:t,width:e,height:n}},zg=new WeakSet,Gb=function(i){me._keyboardManager.exec(this,i)},No=new WeakSet,Uc=function(i){if(!o(this,cl))return;const t=window.getSelection();i?t.setPosition(o(this,cl),o(this,Yu)):t.setPosition(o(this,Ku),o(this,Xu))},ia=new WeakSet,fl=function(){return o(this,ri)?this.rotation:0},Vg=new WeakSet,qb=function(){if(o(this,ri))return null;const[i,t]=this.pageDimensions,e=o(this,Fs),n=new Array(e.length*8);let s=0;for(const{x:r,y:a,width:l,height:h}of e){const u=r*i,c=(1-a-h)*t;n[s]=n[s+4]=u,n[s+1]=n[s+3]=c,n[s+2]=n[s+6]=u+l*i,n[s+5]=n[s+7]=c+h*t,s+=8}return n},Gg=new WeakSet,Yb=function(i){return o(this,_i).serialize(i,b(this,ia,fl).call(this))},qg=new WeakSet,Kb=function(i,t){this._freeHighlight.add(t)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Yg=new WeakSet,Xb=function(i,t){this._freeHighlight.isEmpty()?i.drawLayer.removeFreeHighlight(this._freeHighlightId):i.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},m(me,Ws),m(me,qg),m(me,Yg),ft(me,"_defaultColor",null),ft(me,"_defaultOpacity",1),ft(me,"_defaultThickness",12),ft(me,"_l10nPromise"),ft(me,"_type","highlight"),ft(me,"_editorType",Et.HIGHLIGHT),ft(me,"_freeHighlightId",-1),ft(me,"_freeHighlight",null),ft(me,"_freeHighlightClipId","");let P0=me;var na,sa,Hc,zc,Vc,pa,on,Mn,di,jr,ra,ga,aa,oa,ws,Kg,Qb,Xg,Zb,Qg,Jb,Zg,t1,Gc,xf,Jg,e1,Zu,tm,em,L0,im,I0,nm,D0,sm,O0,rm,N0,Vn,Ts,qc,am,pl,Ju,gl,td,js,ma,Yc,om,Fo,th,lm,i1,eh,Ef,hm,n1,cm,s1,ed,um,Wo,ih,va,ml;const De=class li extends Dt{constructor(t){super({...t,name:"inkEditor"}),m(this,Kg),m(this,Xg),m(this,Qg),m(this,Zg),m(this,Gc),m(this,Jg),m(this,Zu),m(this,em),m(this,im),m(this,nm),m(this,sm),m(this,rm),m(this,Vn),m(this,qc),m(this,pl),m(this,gl),m(this,js),m(this,Yc),m(this,Fo),m(this,cm),m(this,ed),m(this,Wo),m(this,va),m(this,na,0),m(this,sa,0),m(this,Hc,this.canvasPointermove.bind(this)),m(this,zc,this.canvasPointerleave.bind(this)),m(this,Vc,this.canvasPointerup.bind(this)),m(this,pa,this.canvasPointerdown.bind(this)),m(this,on,null),m(this,Mn,new Path2D),m(this,di,!1),m(this,jr,!1),m(this,ra,!1),m(this,ga,null),m(this,aa,0),m(this,oa,0),m(this,ws,null),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Dt.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case ct.INK_THICKNESS:li._defaultThickness=e;break;case ct.INK_COLOR:li._defaultColor=e;break;case ct.INK_OPACITY:li._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case ct.INK_THICKNESS:b(this,Kg,Qb).call(this,e);break;case ct.INK_COLOR:b(this,Xg,Zb).call(this,e);break;case ct.INK_OPACITY:b(this,Qg,Jb).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[ct.INK_THICKNESS,li._defaultThickness],[ct.INK_COLOR,li._defaultColor||Dt._defaultLineColor],[ct.INK_OPACITY,Math.round(li._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ct.INK_THICKNESS,this.thickness||li._defaultThickness],[ct.INK_COLOR,this.color||li._defaultColor||Dt._defaultLineColor],[ct.INK_OPACITY,Math.round(100*(this.opacity??li._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(b(this,pl,Ju).call(this),b(this,gl,td).call(this)),this.isAttachedToDOM||(this.parent.add(this),b(this,js,ma).call(this)),b(this,va,ml).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,o(this,on)&&(clearTimeout(o(this,on)),A(this,on,null)),o(this,ga).disconnect(),A(this,ga,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,n=this.width*t,s=this.height*e;this.setDimensions(n,s)}enableEditMode(){o(this,di)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",o(this,pa)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",o(this,pa)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){o(this,di)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),A(this,di,!0),this.div.classList.add("disabled"),b(this,va,ml).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||o(this,di)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),b(this,Jg,e1).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),b(this,Zu,tm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),b(this,qc,am).call(this,t)}canvasPointerleave(t){b(this,qc,am).call(this,t)}get isResizable(){return!this.isEmpty()&&o(this,di)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,s,r,a]=b(this,Zg,t1).call(this);if(this.setAt(n,s,0,0),this.setDims(r,a),b(this,pl,Ju).call(this),this.width){const[l,h]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*h),this.setAt(t*l,e*h,this.width*l,this.height*h),A(this,ra,!0),b(this,js,ma).call(this),this.setDims(this.width*l,this.height*h),b(this,Vn,Ts).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return b(this,gl,td).call(this),this.div}setDimensions(t,e){const n=Math.round(t),s=Math.round(e);if(o(this,aa)===n&&o(this,oa)===s)return;A(this,aa,n),A(this,oa,s),this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=t/r,this.height=e/a,this.fixAndSetPosition(),o(this,di)&&b(this,Yc,om).call(this,t,e),b(this,js,ma).call(this),b(this,Vn,Ts).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,e,n){var s,r,a;if(t instanceof Cb)return null;const l=super.deserialize(t,e,n);l.thickness=t.thickness,l.color=Z.makeHexColor(...t.color),l.opacity=t.opacity;const[h,u]=l.pageDimensions,c=l.width*h,f=l.height*u,g=l.parentScale,v=t.thickness/2;A(l,di,!0),A(l,aa,Math.round(c)),A(l,oa,Math.round(f));const{paths:w,rect:x,rotation:E}=t;for(let{bezier:C}of w){C=b(s=li,hm,n1).call(s,C,x,E);const R=[];l.paths.push(R);let P=g*(C[0]-v),I=g*(C[1]-v);for(let L=2,S=C.length;L<S;L+=6){const k=g*(C[L]-v),O=g*(C[L+1]-v),N=g*(C[L+2]-v),B=g*(C[L+3]-v),$=g*(C[L+4]-v),Y=g*(C[L+5]-v);R.push([[P,I],[k,O],[N,B],[$,Y]]),P=$,I=Y}const F=b(this,lm,i1).call(this,R);l.bezierPath2D.push(F)}const _=b(r=l,ed,um).call(r);return A(l,sa,Math.max(Dt.MIN_SIZE,_[2]-_[0])),A(l,na,Math.max(Dt.MIN_SIZE,_[3]-_[1])),b(a=l,Yc,om).call(a,c,f),l}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Dt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Et.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:b(this,cm,s1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};na=new WeakMap,sa=new WeakMap,Hc=new WeakMap,zc=new WeakMap,Vc=new WeakMap,pa=new WeakMap,on=new WeakMap,Mn=new WeakMap,di=new WeakMap,jr=new WeakMap,ra=new WeakMap,ga=new WeakMap,aa=new WeakMap,oa=new WeakMap,ws=new WeakMap,Kg=new WeakSet,Qb=function(i){const t=n=>{this.thickness=n,b(this,va,ml).call(this)},e=this.thickness;this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Xg=new WeakSet,Zb=function(i){const t=n=>{this.color=n,b(this,Vn,Ts).call(this)},e=this.color;this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Qg=new WeakSet,Jb=function(i){const t=n=>{this.opacity=n,b(this,Vn,Ts).call(this)};i/=100;const e=this.opacity;this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Zg=new WeakSet,t1=function(){const{parentRotation:i,parentDimensions:[t,e]}=this;switch(i){case 90:return[0,e,e,t];case 180:return[t,e,t,e];case 270:return[t,0,e,t];default:return[0,0,t,e]}},Gc=new WeakSet,xf=function(){const{ctx:i,color:t,opacity:e,thickness:n,parentScale:s,scaleFactor:r}=this;i.lineWidth=n*s/r,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${t}${D2(e)}`},Jg=new WeakSet,e1=function(i,t){this.canvas.addEventListener("contextmenu",$e),this.canvas.addEventListener("pointerleave",o(this,zc)),this.canvas.addEventListener("pointermove",o(this,Hc)),this.canvas.addEventListener("pointerup",o(this,Vc)),this.canvas.removeEventListener("pointerdown",o(this,pa)),this.isEditing=!0,o(this,ra)||(A(this,ra,!0),b(this,js,ma).call(this),this.thickness||(this.thickness=De._defaultThickness),this.color||(this.color=De._defaultColor||Dt._defaultLineColor),this.opacity??(this.opacity=De._defaultOpacity)),this.currentPath.push([i,t]),A(this,jr,!1),b(this,Gc,xf).call(this),A(this,ws,()=>{b(this,nm,D0).call(this),o(this,ws)&&window.requestAnimationFrame(o(this,ws))}),window.requestAnimationFrame(o(this,ws))},Zu=new WeakSet,tm=function(i,t){const[e,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===e&&t===n)return;const s=this.currentPath;let r=o(this,Mn);if(s.push([i,t]),A(this,jr,!0),s.length<=2){r.moveTo(...s[0]),r.lineTo(i,t);return}s.length===3&&(A(this,Mn,r=new Path2D),r.moveTo(...s[0])),b(this,sm,O0).call(this,r,...s.at(-3),...s.at(-2),i,t)},em=new WeakSet,L0=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);o(this,Mn).lineTo(...i)},im=new WeakSet,I0=function(i,t){A(this,ws,null),i=Math.min(Math.max(i,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),b(this,Zu,tm).call(this,i,t),b(this,em,L0).call(this);let e;if(this.currentPath.length!==1)e=b(this,rm,N0).call(this);else{const l=[i,t];e=[[l,l.slice(),l.slice(),l]]}const n=o(this,Mn),s=this.currentPath;this.currentPath=[],A(this,Mn,new Path2D);const r=()=>{this.allRawPaths.push(s),this.paths.push(e),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(b(this,pl,Ju).call(this),b(this,gl,td).call(this)),b(this,va,ml).call(this))};this.addCommands({cmd:r,undo:a,mustExec:!0})},nm=new WeakSet,D0=function(){if(!o(this,jr))return;A(this,jr,!1);const i=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),e=t.map(r=>r[0]),n=t.map(r=>r[1]);Math.min(...e)-i,Math.max(...e)+i,Math.min(...n)-i,Math.max(...n)+i;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)s.stroke(r);s.stroke(o(this,Mn)),s.restore()},sm=new WeakSet,O0=function(i,t,e,n,s,r,a){const l=(t+n)/2,h=(e+s)/2,u=(n+r)/2,c=(s+a)/2;i.bezierCurveTo(l+2*(n-l)/3,h+2*(s-h)/3,u+2*(n-u)/3,c+2*(s-c)/3,u,c)},rm=new WeakSet,N0=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const t=[];let e,[n,s]=i[0];for(e=1;e<i.length-2;e++){const[f,g]=i[e],[v,w]=i[e+1],x=(f+v)/2,E=(g+w)/2,_=[n+2*(f-n)/3,s+2*(g-s)/3],C=[x+2*(f-x)/3,E+2*(g-E)/3];t.push([[n,s],_,C,[x,E]]),[n,s]=[x,E]}const[r,a]=i[e],[l,h]=i[e+1],u=[n+2*(r-n)/3,s+2*(a-s)/3],c=[l+2*(r-l)/3,h+2*(a-h)/3];return t.push([[n,s],u,c,[l,h]]),t},Vn=new WeakSet,Ts=function(){if(this.isEmpty()){b(this,Fo,th).call(this);return}b(this,Gc,xf).call(this);const{canvas:i,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,i.width,i.height),b(this,Fo,th).call(this);for(const e of this.bezierPath2D)t.stroke(e)},qc=new WeakSet,am=function(i){this.canvas.removeEventListener("pointerleave",o(this,zc)),this.canvas.removeEventListener("pointermove",o(this,Hc)),this.canvas.removeEventListener("pointerup",o(this,Vc)),this.canvas.addEventListener("pointerdown",o(this,pa)),o(this,on)&&clearTimeout(o(this,on)),A(this,on,setTimeout(()=>{A(this,on,null),this.canvas.removeEventListener("contextmenu",$e)},10)),b(this,im,I0).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pl=new WeakSet,Ju=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},gl=new WeakSet,td=function(){A(this,ga,new ResizeObserver(i=>{const t=i[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})),o(this,ga).observe(this.div)},js=new WeakSet,ma=function(){if(!o(this,ra))return;const[i,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*t),b(this,Fo,th).call(this)},Yc=new WeakSet,om=function(i,t){const e=b(this,Wo,ih).call(this),n=(i-e)/o(this,sa),s=(t-e)/o(this,na);this.scaleFactor=Math.min(n,s)},Fo=new WeakSet,th=function(){const i=b(this,Wo,ih).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},lm=new WeakSet,i1=function(i){const t=new Path2D;for(let e=0,n=i.length;e<n;e++){const[s,r,a,l]=i[e];e===0&&t.moveTo(...s),t.bezierCurveTo(r[0],r[1],a[0],a[1],l[0],l[1])}return t},eh=new WeakSet,Ef=function(i,t,e){const[n,s,r,a]=t;switch(e){case 0:for(let l=0,h=i.length;l<h;l+=2)i[l]+=n,i[l+1]=a-i[l+1];break;case 90:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=i[l+1]+n,i[l+1]=u+s}break;case 180:for(let l=0,h=i.length;l<h;l+=2)i[l]=r-i[l],i[l+1]+=s;break;case 270:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=r-i[l+1],i[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return i},hm=new WeakSet,n1=function(i,t,e){const[n,s,r,a]=t;switch(e){case 0:for(let l=0,h=i.length;l<h;l+=2)i[l]-=n,i[l+1]=a-i[l+1];break;case 90:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=i[l+1]-s,i[l+1]=u-n}break;case 180:for(let l=0,h=i.length;l<h;l+=2)i[l]=r-i[l],i[l+1]-=s;break;case 270:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=a-i[l+1],i[l+1]=r-u}break;default:throw new Error("Invalid rotation")}return i},cm=new WeakSet,s1=function(i,t,e,n){var s,r;const a=[],l=this.thickness/2,h=i*t+l,u=i*e+l;for(const c of this.paths){const f=[],g=[];for(let v=0,w=c.length;v<w;v++){const[x,E,_,C]=c[v];if(x[0]===C[0]&&x[1]===C[1]&&w===1){const N=i*x[0]+h,B=i*x[1]+u;f.push(N,B),g.push(N,B);break}const R=i*x[0]+h,P=i*x[1]+u,I=i*E[0]+h,F=i*E[1]+u,L=i*_[0]+h,S=i*_[1]+u,k=i*C[0]+h,O=i*C[1]+u;v===0&&(f.push(R,P),g.push(R,P)),f.push(I,F,L,S,k,O),g.push(I,F),v===w-1&&g.push(k,O)}a.push({bezier:b(s=De,eh,Ef).call(s,f,n,this.rotation),points:b(r=De,eh,Ef).call(r,g,n,this.rotation)})}return a},ed=new WeakSet,um=function(){let i=1/0,t=-1/0,e=1/0,n=-1/0;for(const s of this.paths)for(const[r,a,l,h]of s){const u=Z.bezierBoundingBox(...r,...a,...l,...h);i=Math.min(i,u[0]),e=Math.min(e,u[1]),t=Math.max(t,u[2]),n=Math.max(n,u[3])}return[i,e,t,n]},Wo=new WeakSet,ih=function(){return o(this,di)?Math.ceil(this.thickness*this.parentScale):0},va=new WeakSet,ml=function(i=!1){if(this.isEmpty())return;if(!o(this,di)){b(this,Vn,Ts).call(this);return}const t=b(this,ed,um).call(this),e=b(this,Wo,ih).call(this);A(this,sa,Math.max(Dt.MIN_SIZE,t[2]-t[0])),A(this,na,Math.max(Dt.MIN_SIZE,t[3]-t[1]));const n=Math.ceil(e+o(this,sa)*this.scaleFactor),s=Math.ceil(e+o(this,na)*this.scaleFactor),[r,a]=this.parentDimensions;this.width=n/r,this.height=s/a,this.setAspectRatio(n,s);const l=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],b(this,js,ma).call(this),b(this,Vn,Ts).call(this),A(this,aa,n),A(this,oa,s),this.setDims(n,s);const u=i?e/this.scaleFactor/2:0;this.translate(l-this.translationX-u,h-this.translationY-u)},m(De,lm),m(De,eh),m(De,hm),ft(De,"_defaultColor",null),ft(De,"_defaultOpacity",1),ft(De,"_defaultThickness",1),ft(De,"_type","ink"),ft(De,"_editorType",Et.INK);let wT=De;var we,Ae,Ps,Kn,Bs,jo,ln,ya,hn,Ii,Kc,Br,za,$r,Va,Bo,Xc,id,dm,fm,F0,pm,W0,Qc,_f,$o,Zc,gm,j0;const Jc=class extends Dt{constructor(t){super({...t,name:"stampEditor"}),m(this,Br),m(this,$r),m(this,Bo),m(this,id),m(this,fm),m(this,pm),m(this,Qc),m(this,$o),m(this,gm),m(this,we,null),m(this,Ae,null),m(this,Ps,null),m(this,Kn,null),m(this,Bs,null),m(this,jo,""),m(this,ln,null),m(this,ya,null),m(this,hn,null),m(this,Ii,!1),m(this,Kc,!1),A(this,Kn,t.bitmapUrl),A(this,Bs,t.bitmapFile)}static initialize(t,e){Dt.initialize(t,e)}static get supportedTypes(){return St(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return St(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Et.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,e;o(this,Ae)&&(A(this,we,null),this._uiManager.imageManager.deleteId(o(this,Ae)),(t=o(this,ln))==null||t.remove(),A(this,ln,null),(e=o(this,ya))==null||e.disconnect(),A(this,ya,null),o(this,hn)&&(clearTimeout(o(this,hn)),A(this,hn,null))),super.remove()}rebuild(){if(!this.parent){o(this,Ae)&&b(this,Bo,Xc).call(this);return}super.rebuild(),this.div!==null&&(o(this,Ae)&&o(this,ln)===null&&b(this,Bo,Xc).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(o(this,Ps)||o(this,we)||o(this,Kn)||o(this,Bs)||o(this,Ae))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),o(this,we)?b(this,id,dm).call(this):b(this,Bo,Xc).call(this),this.width){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s)}return this.div}getImageForAltText(){return o(this,ln)}static deserialize(t,e,n){if(t instanceof Mb)return null;const s=super.deserialize(t,e,n),{rect:r,bitmapUrl:a,bitmapId:l,isSvg:h,accessibilityData:u}=t;l&&n.imageManager.isValidId(l)?A(s,Ae,l):A(s,Kn,a),A(s,Ii,h);const[c,f]=s.pageDimensions;return s.width=(r[2]-r[0])/c,s.height=(r[3]-r[1])/f,u&&(s.altTextData=u),s}serialize(t=!1,e=null){if(this.isEmpty())return null;const n={annotationType:Et.STAMP,bitmapId:o(this,Ae),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,Ii),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=b(this,$o,Zc).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:s,altText:r}=this.altTextData;if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),e===null)return n;e.stamps||(e.stamps=new Map);const a=o(this,Ii)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(o(this,Ae)))e.stamps.set(o(this,Ae),{area:a,serialized:n}),n.bitmap=b(this,$o,Zc).call(this,!1);else if(o(this,Ii)){const l=e.stamps.get(o(this,Ae));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=b(this,$o,Zc).call(this,!1))}return n}};we=new WeakMap,Ae=new WeakMap,Ps=new WeakMap,Kn=new WeakMap,Bs=new WeakMap,jo=new WeakMap,ln=new WeakMap,ya=new WeakMap,hn=new WeakMap,Ii=new WeakMap,Kc=new WeakMap,Br=new WeakSet,za=function(i,t=!1){if(!i){this.remove();return}A(this,we,i.bitmap),t||(A(this,Ae,i.id),A(this,Ii,i.isSvg)),i.file&&A(this,jo,i.file.name),b(this,id,dm).call(this)},$r=new WeakSet,Va=function(){A(this,Ps,null),this._uiManager.enableWaiting(!1),o(this,ln)&&this.div.focus()},Bo=new WeakSet,Xc=function(){if(o(this,Ae)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Ae)).then(t=>b(this,Br,za).call(this,t,!0)).finally(()=>b(this,$r,Va).call(this));return}if(o(this,Kn)){const t=o(this,Kn);A(this,Kn,null),this._uiManager.enableWaiting(!0),A(this,Ps,this._uiManager.imageManager.getFromUrl(t).then(e=>b(this,Br,za).call(this,e)).finally(()=>b(this,$r,Va).call(this)));return}if(o(this,Bs)){const t=o(this,Bs);A(this,Bs,null),this._uiManager.enableWaiting(!0),A(this,Ps,this._uiManager.imageManager.getFromFile(t).then(e=>b(this,Br,za).call(this,e)).finally(()=>b(this,$r,Va).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=Jc.supportedTypesStr,A(this,Ps,new Promise(t=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(i.files[0]);b(this,Br,za).call(this,e)}t()}),i.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>b(this,$r,Va).call(this))),i.click()},id=new WeakSet,dm=function(){const{div:i}=this;let{width:t,height:e}=o(this,we);const[n,s]=this.pageDimensions,r=.75;if(this.width)t=this.width*n,e=this.height*s;else if(t>r*n||e>r*s){const u=Math.min(r*n/t,r*s/e);t*=u,e*=u}const[a,l]=this.parentDimensions;this.setDims(t*a/n,e*l/s),this._uiManager.enableWaiting(!1);const h=A(this,ln,document.createElement("canvas"));i.append(h),i.hidden=!1,b(this,Qc,_f).call(this,t,e),b(this,gm,j0).call(this),o(this,Kc)||(this.parent.addUndoableEditor(this),A(this,Kc,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,jo)&&h.setAttribute("aria-label",o(this,jo))},fm=new WeakSet,F0=function(i,t){var e;const[n,s]=this.parentDimensions;this.width=i/n,this.height=t/s,this.setDims(i,t),(e=this._initialOptions)!=null&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,o(this,hn)!==null&&clearTimeout(o(this,hn)),A(this,hn,setTimeout(()=>{A(this,hn,null),b(this,Qc,_f).call(this,i,t)},200))},pm=new WeakSet,W0=function(i,t){const{width:e,height:n}=o(this,we);let s=e,r=n,a=o(this,we);for(;s>2*i||r>2*t;){const l=s,h=r;s>2*i&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const u=new OffscreenCanvas(s,r);u.getContext("2d").drawImage(a,0,0,l,h,0,0,s,r),a=u.transferToImageBitmap()}return a},Qc=new WeakSet,_f=function(i,t){i=Math.ceil(i),t=Math.ceil(t);const e=o(this,ln);if(!e||e.width===i&&e.height===t)return;e.width=i,e.height=t;const n=o(this,Ii)?o(this,we):b(this,pm,W0).call(this,i,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){const r=new OffscreenCanvas(i,t).getContext("2d");r.drawImage(n,0,0,n.width,n.height,0,0,i,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:r.getImageData(0,0,i,t).data,width:i,height:t,channels:4}}).then(a=>{const l=(a==null?void 0:a.output)||"";this.parent&&l&&!this.hasAltText()&&(this.altTextData={altText:l,decorative:!1})})}const s=e.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(n,0,0,n.width,n.height,0,0,i,t)},$o=new WeakSet,Zc=function(i){if(i){if(o(this,Ii)){const e=this._uiManager.imageManager.getSvgUrl(o(this,Ae));if(e)return e}const t=document.createElement("canvas");return{width:t.width,height:t.height}=o(this,we),t.getContext("2d").drawImage(o(this,we),0,0),t.toDataURL()}if(o(this,Ii)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*ka.PDF_TO_CSS_UNITS),s=Math.round(this.height*e*ka.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,s);return r.getContext("2d").drawImage(o(this,we),0,0,o(this,we).width,o(this,we).height,0,0,n,s),r.transferToImageBitmap()}return structuredClone(o(this,we))},gm=new WeakSet,j0=function(){A(this,ya,new ResizeObserver(i=>{const t=i[0].contentRect;t.width&&t.height&&b(this,fm,F0).call(this,t.width,t.height)})),o(this,ya).observe(this.div)},ft(Jc,"_type","stamp"),ft(Jc,"_editorType",Et.STAMP);let bT=Jc;var Ur,Uo,Xi,Hr,Rn,Tn,Pn,ti,bs,vl,Ho,We,st,$s,mm,r1,nd,vm,tu,ym,eu,wm,zo,iu;const nu=class As{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:l,viewport:h,l10n:u}){m(this,mm),m(this,nd),m(this,tu),m(this,eu),m(this,zo),m(this,Ur,void 0),m(this,Uo,!1),m(this,Xi,null),m(this,Hr,null),m(this,Rn,null),m(this,Tn,null),m(this,Pn,null),m(this,ti,new Map),m(this,bs,!1),m(this,vl,!1),m(this,Ho,!1),m(this,We,null),m(this,st,void 0);const c=[...o(As,$s).values()];if(!As._initialized){As._initialized=!0;for(const f of c)f.initialize(u,t)}t.registerEditorTypes(c),A(this,st,t),this.pageIndex=e,this.div=n,A(this,Ur,s),A(this,Xi,r),this.viewport=h,A(this,We,l),this.drawLayer=a,o(this,st).addLayer(this)}get isEmpty(){return o(this,ti).size===0}get isInvisible(){return this.isEmpty&&o(this,st).getMode()===Et.NONE}updateToolbar(t){o(this,st).updateToolbar(t)}updateMode(t=o(this,st).getMode()){switch(b(this,zo,iu).call(this),t){case Et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Et.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of o(As,$s).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,We))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(o(this,st).getMode()===Et.INK){if(!t){for(const e of o(this,ti).values())if(e.isEmpty()){e.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){o(this,st).setEditingState(t)}addCommands(t){o(this,st).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,Xi))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of o(this,ti).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(o(this,st).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!o(this,Xi))return;const e=o(this,Xi).getEditableAnnotations();for(const n of e){if(n.hide(),o(this,st).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var t;A(this,Ho,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,n=new Map;for(const r of o(this,ti).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);(t=this.getEditableAnnotation(r.annotationElementId))==null||t.show(),r.remove()}if(o(this,Xi)){const r=o(this,Xi).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(o(this,st).isDeletedAnnotationElement(l))continue;let h=n.get(l);if(h){h.resetAnnotationElement(a),h.show(!1),a.show();continue}h=e.get(l),h&&(o(this,st).addChangedExistingAnnotation(h),h.renderAnnotationElement(a),h.show(!1)),a.show()}}b(this,zo,iu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of o(As,$s).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Ho,!1)}getEditableAnnotation(t){var e;return((e=o(this,Xi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,st).getActive()!==t&&o(this,st).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=o(this,We))!=null&&t.div&&!o(this,Tn)&&(A(this,Tn,b(this,mm,r1).bind(this)),o(this,We).div.addEventListener("pointerdown",o(this,Tn)),o(this,We).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,We))!=null&&t.div&&o(this,Tn)&&(o(this,We).div.removeEventListener("pointerdown",o(this,Tn)),A(this,Tn,null),o(this,We).div.classList.remove("highlighting"))}enableClick(){o(this,Rn)||(A(this,Rn,this.pointerdown.bind(this)),A(this,Hr,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",o(this,Rn)),this.div.addEventListener("pointerup",o(this,Hr)))}disableClick(){o(this,Rn)&&(this.div.removeEventListener("pointerdown",o(this,Rn)),this.div.removeEventListener("pointerup",o(this,Hr)),A(this,Rn,null),A(this,Hr,null))}attach(t){o(this,ti).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,st).isDeletedAnnotationElement(e)&&o(this,st).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,ti).delete(t.id),(e=o(this,Ur))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,Ho)&&t.annotationElementId&&o(this,st).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,st).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,o(this,vl)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,st).addDeletedAnnotationElement(t.annotationElementId),Dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,st).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),o(this,st).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!o(this,Pn)&&(t._focusEventsAllowed=!1,A(this,Pn,setTimeout(()=>{A(this,Pn,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),t._structTreeParentId=(e=o(this,Ur))==null?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return o(this,st).getId()}canCreateNewEmptyEditor(){var t;return(t=o(this,nd,vm))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){o(this,st).updateToolbar(t),o(this,st).updateMode(t);const{offsetX:n,offsetY:s}=b(this,eu,wm).call(this),r=this.getNextId(),a=b(this,tu,ym).call(this,{parent:this,id:r,x:n,y:s,uiManager:o(this,st),isCentered:!0,...e});a&&this.add(a)}deserialize(t){var e;return((e=o(As,$s).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,st)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=b(this,tu,ym).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:o(this,st),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(b(this,eu,wm).call(this),!0)}setSelected(t){o(this,st).setSelected(t)}toggleSelected(t){o(this,st).toggleSelected(t)}isSelected(t){return o(this,st).isSelected(t)}unselect(t){o(this,st).unselect(t)}pointerup(t){const{isMac:e}=Ue.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&o(this,bs)){if(A(this,bs,!1),!o(this,Uo)){A(this,Uo,!0);return}if(o(this,st).getMode()===Et.STAMP){o(this,st).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(o(this,st).getMode()===Et.HIGHLIGHT&&this.enableTextSelection(),o(this,bs)){A(this,bs,!1);return}const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;A(this,bs,!0);const n=o(this,st).getActive();A(this,Uo,!n||n.isEmpty())}findNewParent(t,e,n){const s=o(this,st).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=o(this,st).getActive())==null?void 0:t.parent)===this&&(o(this,st).commitOrRemove(),o(this,st).setActiveEditor(null)),o(this,Pn)&&(clearTimeout(o(this,Pn)),A(this,Pn,null));for(const n of o(this,ti).values())(e=o(this,Ur))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,ti).clear(),o(this,st).removeLayer(this)}render({viewport:t}){this.viewport=t,Ys(this.div,t);for(const e of o(this,st).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,st).commitOrRemove(),b(this,zo,iu).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ys(this.div,{rotation:n}),e!==n)for(const s of o(this,ti).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,st).viewParameters.realScale}};Ur=new WeakMap,Uo=new WeakMap,Xi=new WeakMap,Hr=new WeakMap,Rn=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,ti=new WeakMap,bs=new WeakMap,vl=new WeakMap,Ho=new WeakMap,We=new WeakMap,st=new WeakMap,$s=new WeakMap,mm=new WeakSet,r1=function(i){if(o(this,st).unselectAll(),i.target===o(this,We).div){const{isMac:t}=Ue.platform;if(i.button!==0||i.ctrlKey&&t)return;o(this,st).showAllEditors("highlight",!0,!0),o(this,We).div.classList.add("free"),P0.startHighlighting(this,o(this,st).direction==="ltr",i),o(this,We).div.addEventListener("pointerup",()=>{o(this,We).div.classList.remove("free")},{once:!0}),i.preventDefault()}},nd=new WeakSet,vm=function(){return o(nu,$s).get(o(this,st).getMode())},tu=new WeakSet,ym=function(i){const t=o(this,nd,vm);return t?new t.prototype.constructor(i):null},eu=new WeakSet,wm=function(){const{x:i,y:t,width:e,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,i),r=Math.max(0,t),a=Math.min(window.innerWidth,i+e),l=Math.min(window.innerHeight,t+n),h=(s+a)/2-i,u=(r+l)/2-t,[c,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:c,offsetY:f}},zo=new WeakSet,iu=function(){A(this,vl,!0);for(const i of o(this,ti).values())i.isEmpty()&&i.remove();A(this,vl,!1)},ft(nu,"_initialized",!1),m(nu,$s,new Map([vT,wT,bT,P0].map(i=>[i._editorType,i])));let AT=nu;var en,su,ne,xs,ru,bm,au,Am,xm,a1;const zr=class hi{constructor({pageIndex:t}){m(this,au),m(this,xm),m(this,en,null),m(this,su,0),m(this,ne,new Map),m(this,xs,new Map),this.pageIndex=t}setParent(t){if(!o(this,en)){A(this,en,t);return}if(o(this,en)!==t){if(o(this,ne).size>0)for(const e of o(this,ne).values())e.remove(),t.append(e);A(this,en,t)}}static get _svgFactory(){return St(this,"_svgFactory",new Ym)}highlight(t,e,n,s=!1){const r=ai(this,su)._++,a=b(this,au,Am).call(this,t.box);a.classList.add("highlight"),t.free&&a.classList.add("free");const l=hi._svgFactory.createElement("defs");a.append(l);const h=hi._svgFactory.createElement("path");l.append(h);const u=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",u),h.setAttribute("d",t.toSVGPath()),s&&o(this,xs).set(r,h);const c=b(this,xm,a1).call(this,l,u),f=hi._svgFactory.createElement("use");return a.append(f),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),f.setAttribute("href",`#${u}`),o(this,ne).set(r,a),{id:r,clipPathId:`url(#${c})`}}highlightOutline(t){const e=ai(this,su)._++,n=b(this,au,Am).call(this,t.box);n.classList.add("highlightOutline");const s=hi._svgFactory.createElement("defs");n.append(s);const r=hi._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.free){n.classList.add("free");const c=hi._svgFactory.createElement("mask");s.append(c),l=`mask_p${this.pageIndex}_${e}`,c.setAttribute("id",l),c.setAttribute("maskUnits","objectBoundingBox");const f=hi._svgFactory.createElement("rect");c.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=hi._svgFactory.createElement("use");c.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=hi._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${a}`),l&&h.setAttribute("mask",`url(#${l})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),o(this,ne).set(e,n),e}finalizeLine(t,e){const n=o(this,xs).get(t);o(this,xs).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){o(this,ne).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),o(this,xs).delete(t)}updatePath(t,e){o(this,xs).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;b(n=hi,ru,bm).call(n,o(this,ne).get(t),e)}show(t,e){o(this,ne).get(t).classList.toggle("hidden",!e)}rotate(t,e){o(this,ne).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){o(this,ne).get(t).setAttribute("fill",e)}changeOpacity(t,e){o(this,ne).get(t).setAttribute("fill-opacity",e)}addClass(t,e){o(this,ne).get(t).classList.add(e)}removeClass(t,e){o(this,ne).get(t).classList.remove(e)}remove(t){o(this,en)!==null&&(o(this,ne).get(t).remove(),o(this,ne).delete(t))}destroy(){A(this,en,null);for(const t of o(this,ne).values())t.remove();o(this,ne).clear()}};en=new WeakMap,su=new WeakMap,ne=new WeakMap,xs=new WeakMap,ru=new WeakSet,bm=function(i,{x:t=0,y:e=0,width:n=1,height:s=1}={}){const{style:r}=i;r.top=`${100*e}%`,r.left=`${100*t}%`,r.width=`${100*n}%`,r.height=`${100*s}%`},au=new WeakSet,Am=function(i){var t;const e=zr._svgFactory.create(1,1,!0);return o(this,en).append(e),e.setAttribute("aria-hidden",!0),b(t=zr,ru,bm).call(t,e,i),e},xm=new WeakSet,a1=function(i,t){const e=zr._svgFactory.createElement("clipPath");i.append(e);const n=`clip_${t}`;e.setAttribute("id",n),e.setAttribute("clipPathUnits","objectBoundingBox");const s=zr._svgFactory.createElement("use");return e.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),n},m(zr,ru);let xT=zr;var ET=ot.AbortException,_T=ot.AnnotationEditorLayer,ST=ot.AnnotationEditorParamsType,kT=ot.AnnotationEditorType,CT=ot.AnnotationEditorUIManager,o1=ot.AnnotationLayer,l1=ot.AnnotationMode,MT=ot.CMapCompressionType,RT=ot.ColorPicker,TT=ot.DOMSVGFactory,PT=ot.DrawLayer,LT=ot.FeatureTest,iv=ot.GlobalWorkerOptions,IT=ot.ImageKind,DT=ot.InvalidPDFException,OT=ot.MissingPDFException,NT=ot.OPS,FT=ot.Outliner,WT=ot.PDFDataRangeTransport,jT=ot.PDFDateString,BT=ot.PDFWorker,$T=ot.PasswordResponses,UT=ot.PermissionFlag,HT=ot.PixelsPerInch,zT=ot.RenderingCancelledException,h1=ot.TextLayer,VT=ot.UnexpectedResponseException,GT=ot.Util,qT=ot.VerbosityLevel,YT=ot.XfaLayer,KT=ot.build,XT=ot.createValidAbsoluteUrl,QT=ot.fetchData,c1=ot.getDocument,ZT=ot.getFilenameFromUrl,JT=ot.getPdfFilenameFromUrl,tP=ot.getXfaPageViewport,eP=ot.isDataScheme,iP=ot.isPdfFile,nP=ot.noContextMenu,sP=ot.normalizeUnicode,rP=ot.renderTextLayer,aP=ot.setLayerDimensions,oP=ot.shadow,lP=ot.updateTextLayer,u1=ot.version;const hP=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ET,AnnotationEditorLayer:_T,AnnotationEditorParamsType:ST,AnnotationEditorType:kT,AnnotationEditorUIManager:CT,AnnotationLayer:o1,AnnotationMode:l1,CMapCompressionType:MT,ColorPicker:RT,DOMSVGFactory:TT,DrawLayer:PT,FeatureTest:LT,GlobalWorkerOptions:iv,ImageKind:IT,InvalidPDFException:DT,MissingPDFException:OT,OPS:NT,Outliner:FT,PDFDataRangeTransport:WT,PDFDateString:jT,PDFWorker:BT,PasswordResponses:$T,PermissionFlag:UT,PixelsPerInch:HT,RenderingCancelledException:zT,TextLayer:h1,UnexpectedResponseException:VT,Util:GT,VerbosityLevel:qT,XfaLayer:YT,build:KT,createValidAbsoluteUrl:XT,fetchData:QT,getDocument:c1,getFilenameFromUrl:ZT,getPdfFilenameFromUrl:JT,getXfaPageViewport:tP,isDataScheme:eP,isPdfFile:iP,noContextMenu:nP,normalizeUnicode:sP,renderTextLayer:rP,setLayerDimensions:aP,shadow:oP,updateTextLayer:lP,version:u1},Symbol.toStringTag,{value:"Module"}));var ie=function(i,t,e){for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))},cP=["onCopy","onCut","onPaste"],uP=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],dP=["onFocus","onBlur"],fP=["onInput","onInvalid","onReset","onSubmit"],pP=["onLoad","onError"],gP=["onKeyDown","onKeyPress","onKeyUp"],mP=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],vP=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],yP=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wP=["onSelect"],bP=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],AP=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],xP=["onScroll"],EP=["onWheel"],_P=["onAnimationStart","onAnimationEnd","onAnimationIteration"],SP=["onTransitionEnd"],kP=["onToggle"],CP=["onChange"],MP=ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie([],cP,!0),uP,!0),dP,!0),fP,!0),pP,!0),gP,!0),mP,!0),vP,!0),yP,!0),wP,!0),bP,!0),AP,!0),xP,!0),EP,!0),_P,!0),SP,!0),CP,!0),kP);function d1(i,t){var e={};return MP.forEach(function(n){var s=i[n];s&&(t?e[n]=function(r){return s(r,t(n))}:e[n]=s)}),e}function Cl(i){var t=!1,e=new Promise(function(n,s){i.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}function f1(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i))for(t=0;t<i.length;t++)i[t]&&(e=f1(i[t]))&&(n&&(n+=" "),n+=e);else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function Rd(){for(var i,t,e=0,n="";e<arguments.length;)(i=arguments[e++])&&(t=f1(i))&&(n&&(n+=" "),n+=t);return n}var RP=ut.env.NODE_ENV==="production",Sf="Invariant failed";function It(i,t){if(!i){if(RP)throw new Error(Sf);var e=typeof t=="function"?t():t,n=e?"".concat(Sf,": ").concat(e):Sf;throw new Error(n)}}var TP=ut.env.NODE_ENV!=="production",p1=function(){};if(TP){var PP=function(i,t){var e=arguments.length;t=new Array(e>1?e-1:0);for(var n=1;n<e;n++)t[n-1]=arguments[n];var s=0,r="Warning: "+i.replace(/%s/g,function(){return t[s++]});typeof console<"u"&&console.error(r);try{throw new Error(r)}catch{}};p1=function(i,t,e){var n=arguments.length;e=new Array(n>2?n-2:0);for(var s=2;s<n;s++)e[s-2]=arguments[s];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");i||PP.apply(null,[t].concat(e))}}var LP=p1;const _e=Z0(LP);var B0=Object.prototype.hasOwnProperty;function $0(i,t,e){for(e of i.keys())if(wa(e,t))return e}function wa(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&wa(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=$0(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=$0(t,s),!s)||!wa(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(B0.call(i,e)&&++n&&!B0.call(t,e)||!(e in t)||!wa(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const g1=U.createContext(null);function ba({children:i,type:t}){return D.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const IP="noopener noreferrer nofollow";class DP{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return It(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){It(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{It(this.pdfDocument,"PDF document not loaded."),It(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{It(Array.isArray(e),`"${e}" is not a valid destination array.`);const n=e[0];new Promise(s=>{It(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{It(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?s(n):It(!1,`"${n}" is not a valid destination reference.`)}).then(s=>{const r=s+1;It(this.pdfViewer,"PDF viewer is not initialized."),It(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;It(this.pdfViewer,"PDF viewer is not initialized."),It(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||IP,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const U0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Td=typeof document<"u",m1=Td&&window.location.protocol==="file:";function OP(i){return typeof i<"u"}function ss(i){return OP(i)&&i!==null}function NP(i){return typeof i=="string"}function FP(i){return i instanceof ArrayBuffer}function WP(i){return It(Td,"isBlob can only be used in a browser environment"),i instanceof Blob}function Em(i){return NP(i)&&/^data:/.test(i)}function H0(i){It(Em(i),"Invalid data URI.");const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function jP(){return Td&&window.devicePixelRatio||1}const v1="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function z0(){_e(!m1,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${v1}`)}function BP(){_e(!m1,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${v1}`)}function Xs(i){i&&i.cancel&&i.cancel()}function _m(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function $P(i){return i.name==="RenderingCancelledException"}function UP(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function HP(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Ca(){return U.useReducer(HP,{value:void 0,error:void 0})}var zP=function(i,t,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(c){try{u(n.next(c))}catch(f){a(f)}}function h(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?r(c.value):s(c.value).then(l,h)}u((n=n.apply(i,[])).next())})},V0=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:VP}=hP,GP=(i,t)=>{switch(t){case U0.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case U0.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function G0(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const qP=U.forwardRef(function(i,t){var{children:e,className:n,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:a,file:l,inputRef:h,imageResourcesPath:u,loading:c="Loading PDFâ¦",noData:f="No PDF file specified.",onItemClick:g,onLoadError:v,onLoadProgress:w,onLoadSuccess:x,onPassword:E=GP,onSourceError:_,onSourceSuccess:C,options:R,renderMode:P,rotate:I}=i,F=V0(i,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[L,S]=Ca(),{value:k,error:O}=L,[N,B]=Ca(),{value:$,error:Y}=N,X=U.useRef(new DP),z=U.useRef([]),W=U.useRef(void 0),at=U.useRef(void 0);l&&l!==W.current&&G0(l)&&(_e(!wa(l,W.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),W.current=l),R&&R!==at.current&&(_e(!wa(R,at.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),at.current=R);const G=U.useRef({scrollPageIntoView:rt=>{const{dest:K,pageNumber:At,pageIndex:Rt=At-1}=rt;if(g){g({dest:K,pageIndex:Rt,pageNumber:At});return}const Bt=z.current[Rt];if(Bt){Bt.scrollIntoView();return}_e(!1,`An internal link leading to page ${At} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});U.useImperativeHandle(t,()=>({linkService:X,pages:z,viewer:G}),[]);function bt(){C&&C()}function pt(){O&&(_e(!1,O.toString()),_&&_(O))}function H(){S({type:"RESET"})}U.useEffect(H,[l,S]);const it=U.useCallback(()=>zP(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return Em(l)?{data:H0(l)}:(z0(),{url:l});if(l instanceof VP)return{range:l};if(FP(l))return{data:l};if(Td&&WP(l))return{data:yield UP(l)};if(It(typeof l=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),It(G0(l),"Invalid parameter object: need either .data, .range or .url"),"url"in l&&typeof l.url=="string"){if(Em(l.url)){const{url:rt}=l,K=V0(l,["url"]),At=H0(rt);return Object.assign({data:At},K)}z0()}return l}),[l]);U.useEffect(()=>{const rt=Cl(it());return rt.promise.then(K=>{S({type:"RESOLVE",value:K})}).catch(K=>{S({type:"REJECT",error:K})}),()=>{Xs(rt)}},[it,S]),U.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){pt();return}bt()}},[k]);function tt(){$&&(x&&x($),z.current=new Array($.numPages),X.current.setDocument($))}function J(){Y&&(_e(!1,Y.toString()),v&&v(Y))}function nt(){B({type:"RESET"})}U.useEffect(nt,[B,k]);function et(){if(!k)return;const rt=Object.assign(Object.assign({},k),R),K=c1(rt);w&&(K.onProgress=w),E&&(K.onPassword=E);const At=K;return At.promise.then(Rt=>{B({type:"RESOLVE",value:Rt})}).catch(Rt=>{At.destroyed||B({type:"REJECT",error:Rt})}),()=>{At.destroy()}}U.useEffect(et,[R,B,k]),U.useEffect(()=>{if(!(typeof $>"u")){if($===!1){J();return}tt()}},[$]);function vt(){X.current.setViewer(G.current),X.current.setExternalLinkRel(r),X.current.setExternalLinkTarget(a)}U.useEffect(vt,[r,a]);function q(rt,K){z.current[rt]=K}function Q(rt){delete z.current[rt]}const dt=U.useMemo(()=>({imageResourcesPath:u,linkService:X.current,onItemClick:g,pdf:$,registerPage:q,renderMode:P,rotate:I,unregisterPage:Q}),[u,g,$,P,I]),gt=U.useMemo(()=>d1(F,()=>$),[F,$]);function lt(){return D.jsx(g1.Provider,{value:dt,children:e})}function _t(){return l?$==null?D.jsx(ba,{type:"loading",children:typeof c=="function"?c():c}):$===!1?D.jsx(ba,{type:"error",children:typeof s=="function"?s():s}):lt():D.jsx(ba,{type:"no-data",children:typeof f=="function"?f():f})}return D.jsx("div",Object.assign({className:Rd("react-pdf__Document",n),ref:h,style:{"--scale-factor":"1"}},gt,{children:_t()}))});function y1(){return U.useContext(g1)}function w1(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(s){e.forEach(function(r){typeof r=="function"?r(s):r&&(r.current=s)})}}const b1=U.createContext(null),A1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},YP=/^H(\d+)$/;function KP(i){return i in A1}function Pd(i){return"children"in i}function x1(i){return Pd(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function XP(i){const t={};if(Pd(i)){const{role:e}=i,n=e.match(YP);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(KP(e)){const s=A1[e];s&&(t.role=s)}}return t}function E1(i){const t={};if(Pd(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),x1(i)){const[e]=i.children;if(e){const n=E1(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function QP(i){return i?Object.assign(Object.assign({},XP(i)),E1(i)):null}function _1({className:i,node:t}){const e=U.useMemo(()=>QP(t),[t]),n=U.useMemo(()=>!Pd(t)||x1(t)?null:t.children.map((s,r)=>D.jsx(_1,{node:s},r)),[t]);return D.jsx("span",Object.assign({className:i},e,{children:n}))}function Ld(){return U.useContext(b1)}function ZP(){const i=Ld();It(i,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=Ca(),{value:r,error:a}=n,{customTextRenderer:l,page:h}=i;function u(){r&&e&&e(r)}function c(){a&&(_e(!1,a.toString()),t&&t(a))}function f(){s({type:"RESET"})}U.useEffect(f,[s,h]);function g(){if(l||!h)return;const v=Cl(h.getStructTree()),w=v;return v.promise.then(x=>{s({type:"RESOLVE",value:x})}).catch(x=>{s({type:"REJECT",error:x})}),()=>Xs(w)}return U.useEffect(g,[l,h,s]),U.useEffect(()=>{if(r!==void 0){if(r===!1){c();return}u()}},[r]),r?D.jsx(_1,{className:"react-pdf__Page__structTree structTree",node:r}):null}const q0=l1;function JP(i){const t=Ld();It(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=jP(),onRenderError:a,onRenderSuccess:l,page:h,renderForms:u,renderTextLayer:c,rotate:f,scale:g}=e,{canvasRef:v}=i;It(h,"Attempted to render page canvas, but no page was specified.");const w=U.useRef(null);function x(){h&&l&&l(_m(h,g))}function E(I){$P(I)||(_e(!1,I.toString()),a&&a(I))}const _=U.useMemo(()=>h.getViewport({scale:g*r,rotation:f}),[r,h,f,g]),C=U.useMemo(()=>h.getViewport({scale:g,rotation:f}),[h,f,g]);function R(){if(!h)return;h.cleanup();const{current:I}=w;if(!I)return;I.width=_.width,I.height=_.height,I.style.width=`${Math.floor(C.width)}px`,I.style.height=`${Math.floor(C.height)}px`,I.style.visibility="hidden";const F={annotationMode:u?q0.ENABLE_FORMS:q0.ENABLE,canvasContext:I.getContext("2d",{alpha:!1}),viewport:_};s&&(F.background=s);const L=h.render(F),S=L;return L.promise.then(()=>{I.style.visibility="",x()}).catch(E),()=>Xs(S)}U.useEffect(R,[s,w,r,h,u,_,C]);const P=U.useCallback(()=>{const{current:I}=w;I&&(I.width=0,I.height=0)},[w]);return U.useEffect(()=>P,[P]),D.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:w1(v,w),style:{display:"block",userSelect:"none"},children:c?D.jsx(ZP,{}):null})}function tL(i){return"str"in i}function eL(){const i=Ld();It(i,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:h,rotate:u,scale:c}=i;It(a,"Attempted to load page text content, but no page was specified.");const[f,g]=Ca(),{value:v,error:w}=f,x=U.useRef(null),E=U.useRef(void 0);_e(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){v&&n&&n(v)}function C(){w&&(_e(!1,w.toString()),e&&e(w))}function R(){g({type:"RESET"})}U.useEffect(R,[a,g]);function P(){if(!a)return;const N=Cl(a.getTextContent()),B=N;return N.promise.then($=>{g({type:"RESOLVE",value:$})}).catch($=>{g({type:"REJECT",error:$})}),()=>Xs(B)}U.useEffect(P,[a,g]),U.useEffect(()=>{if(v!==void 0){if(v===!1){C();return}_()}},[v]);const I=U.useCallback(()=>{r&&r()},[r]),F=U.useCallback(N=>{_e(!1,N.toString()),s&&s(N)},[s]);function L(){const N=E.current;N&&N.classList.add("active")}function S(){const N=E.current;N&&N.classList.remove("active")}const k=U.useMemo(()=>a.getViewport({scale:c,rotation:u}),[a,u,c]);function O(){if(!a||!v)return;const{current:N}=x;if(!N)return;N.innerHTML="";const B=a.streamTextContent({includeMarkedContent:!0}),$={container:N,textContentSource:B,viewport:k},Y=new h1($),X=Y;return Y.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",N.append(z),E.current=z;const W=N.querySelectorAll('[role="presentation"]');if(t){let at=0;v.items.forEach((G,bt)=>{if(!tL(G))return;const pt=W[at];if(!pt)return;const H=t(Object.assign({pageIndex:l,pageNumber:h,itemIndex:bt},G));pt.innerHTML=H,at+=G.str&&G.hasEOL?2:1})}I()}).catch(F),()=>Xs(X)}return U.useLayoutEffect(O,[t,F,I,a,l,h,v,k]),D.jsx("div",{className:Rd("react-pdf__Page__textContent","textLayer"),onMouseUp:S,onMouseDown:L,ref:x})}function iL(){const i=y1(),t=Ld();It(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:h,page:u,pdf:c,renderForms:f,rotate:g,scale:v=1}=e;It(c,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),It(u,"Attempted to load page annotations, but no page was specified."),It(s,"Attempted to load page annotations, but no linkService was specified.");const[w,x]=Ca(),{value:E,error:_}=w,C=U.useRef(null);_e(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){E&&a&&a(E)}function P(){_&&(_e(!1,_.toString()),r&&r(_))}function I(){x({type:"RESET"})}U.useEffect(I,[x,u]);function F(){if(!u)return;const N=Cl(u.getAnnotations()),B=N;return N.promise.then($=>{x({type:"RESOLVE",value:$})}).catch($=>{x({type:"REJECT",error:$})}),()=>{Xs(B)}}U.useEffect(F,[x,u,f]),U.useEffect(()=>{if(E!==void 0){if(E===!1){P();return}R()}},[E]);function L(){h&&h()}function S(N){_e(!1,`${N}`),l&&l(N)}const k=U.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);function O(){if(!c||!u||!s||!E)return;const{current:N}=C;if(!N)return;const B=k.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:N,l10n:null,page:u,viewport:B},Y={annotations:E,annotationStorage:c.annotationStorage,div:N,imageResourcesPath:n,linkService:s,page:u,renderForms:f,viewport:B};N.innerHTML="";try{new o1($).render(Y),L()}catch(X){S(X)}return()=>{}}return U.useEffect(O,[E,n,s,u,f,k]),D.jsx("div",{className:Rd("react-pdf__Page__annotations","annotationLayer"),ref:C})}var nL=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const Y0=1;function sL(i){const t=y1(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:l,className:h,customRenderer:u,customTextRenderer:c,devicePixelRatio:f,error:g="Failed to load the page.",height:v,inputRef:w,loading:x="Loading pageâ¦",noData:E="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:C,onGetStructTreeError:R,onGetStructTreeSuccess:P,onGetTextError:I,onGetTextSuccess:F,onLoadError:L,onLoadSuccess:S,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:O,onRenderError:N,onRenderSuccess:B,onRenderTextLayerError:$,onRenderTextLayerSuccess:Y,pageIndex:X,pageNumber:z,pdf:W,registerPage:at,renderAnnotationLayer:G=!0,renderForms:bt=!1,renderMode:pt="canvas",renderTextLayer:H=!0,rotate:it,scale:tt=Y0,unregisterPage:J,width:nt}=e,et=nL(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[vt,q]=Ca(),{value:Q,error:dt}=vt,gt=U.useRef(null);It(W,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const lt=ss(z)?z-1:X??null,_t=z??(ss(X)?X+1:null),rt=it??(Q?Q.rotate:null),K=U.useMemo(()=>{if(!Q)return null;let d=1;const p=tt??Y0;if(nt||v){const y=Q.getViewport({scale:1,rotation:rt});nt?d=nt/y.width:v&&(d=v/y.height)}return p*d},[v,Q,rt,tt,nt]);function At(){return()=>{ss(lt)&&s&&J&&J(lt)}}U.useEffect(At,[s,W,lt,J]);function Rt(){if(S){if(!Q||!K)return;S(_m(Q,K))}if(s&&at){if(!ss(lt)||!gt.current)return;at(lt,gt.current)}}function Bt(){dt&&(_e(!1,dt.toString()),L&&L(dt))}function te(){q({type:"RESET"})}U.useEffect(te,[q,W,lt]);function $t(){if(!W||!_t)return;const d=Cl(W.getPage(_t)),p=d;return d.promise.then(y=>{q({type:"RESOLVE",value:y})}).catch(y=>{q({type:"REJECT",error:y})}),()=>Xs(p)}U.useEffect($t,[q,W,lt,_t,at]),U.useEffect(()=>{if(Q!==void 0){if(Q===!1){Bt();return}Rt()}},[Q,K]);const Ct=U.useMemo(()=>Q&&ss(lt)&&_t&&ss(rt)&&ss(K)?{_className:n,canvasBackground:r,customTextRenderer:c,devicePixelRatio:f,onGetAnnotationsError:_,onGetAnnotationsSuccess:C,onGetStructTreeError:R,onGetStructTreeSuccess:P,onGetTextError:I,onGetTextSuccess:F,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:O,onRenderError:N,onRenderSuccess:B,onRenderTextLayerError:$,onRenderTextLayerSuccess:Y,page:Q,pageIndex:lt,pageNumber:_t,renderForms:bt,renderTextLayer:H,rotate:rt,scale:K}:null,[n,r,c,f,_,C,R,P,I,F,k,O,N,B,$,Y,Q,lt,_t,bt,H,rt,K]),Mt=U.useMemo(()=>d1(et,()=>Q&&(K?_m(Q,K):void 0)),[et,Q,K]),Ut=`${lt}@${K}/${rt}`;function ht(){switch(pt){case"custom":return It(u,'renderMode was set to "custom", but no customRenderer was passed.'),D.jsx(u,{},`${Ut}_custom`);case"none":return null;case"canvas":default:return D.jsx(JP,{canvasRef:a},`${Ut}_canvas`)}}function Ce(){return H?D.jsx(eL,{},`${Ut}_text`):null}function Me(){return G?D.jsx(iL,{},`${Ut}_annotations`):null}function ee(){return D.jsxs(b1.Provider,{value:Ct,children:[ht(),Ce(),Me(),l]})}function Ye(){return _t?W===null||Q===void 0||Q===null?D.jsx(ba,{type:"loading",children:typeof x=="function"?x():x}):W===!1||Q===!1?D.jsx(ba,{type:"error",children:typeof g=="function"?g():g}):ee():D.jsx(ba,{type:"no-data",children:typeof E=="function"?E():E})}return D.jsx("div",Object.assign({className:Rd(n,h),"data-page-number":_t,ref:w1(w,gt),style:{"--scale-factor":`${K}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Mt,{children:Ye()}))}BP();iv.workerSrc="pdf.worker.mjs";const S1="SET_ZOOM_LEVEL",kf=i=>({type:S1,value:i}),k1="SET_PDF_PAGINATED",rL=i=>({type:k1,value:i}),C1="SET_NUM_PAGES",K0=i=>({type:C1,value:i}),M1="SET_CURRENT_PAGE",R1="SET_CURRENT_MAIN_STATE",X0=i=>({type:M1,value:i}),Gn={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},aL=(i=Gn,t)=>{switch(t.type){case S1:{const{value:e}=t;return{...i,zoomLevel:e}}case k1:{const{value:e}=t;return{...i,paginated:e}}case C1:{const{value:e}=t;return{...i,numPages:e}}case M1:{const{value:e}=t;return{...i,currentPage:e}}case R1:{const{value:e}=t;return{...i,mainState:e}}default:return i}},Ta=U.createContext({state:Gn,dispatch:()=>null}),oL=({children:i,mainState:t})=>{var e,n,s,r,a,l,h;const[u,c]=U.useReducer(aL,{...Gn,defaultZoomLevel:((n=(e=t.config)==null?void 0:e.pdfZoom)==null?void 0:n.defaultZoom)??Gn.defaultZoomLevel,zoomLevel:((r=(s=t.config)==null?void 0:s.pdfZoom)==null?void 0:r.defaultZoom)??Gn.zoomLevel,zoomJump:((l=(a=t.config)==null?void 0:a.pdfZoom)==null?void 0:l.zoomJump)??Gn.zoomJump,paginated:(h=t.config)!=null&&h.pdfVerticalScrollByDefault?!1:Gn.paginated,mainState:t});return U.useEffect(()=>{c({type:R1,value:t})},[t]),D.jsx(Ta.Provider,{value:{state:u,dispatch:c},children:i})},T1=({pageNum:i})=>{const{state:{mainState:t,paginated:e,zoomLevel:n,numPages:s,currentPage:r}}=U.useContext(Ta),{t:a}=Js(),l=(t==null?void 0:t.rendererRect)||null,h=i??r;return D.jsxs(lL,{id:"pdf-page-wrapper",$lastPage:h>=s,children:[!e&&D.jsx(hL,{id:"pdf-page-info",children:a("pdfPluginPageNumber",{currentPage:h,allPagesCount:s})}),D.jsx(sL,{pageNumber:h||r,scale:n,height:((l==null?void 0:l.height)??100)-100,width:((l==null?void 0:l.width)??100)-100,loading:a("pdfPluginLoading")})]})},lL=wt.div`
  margin: ${i=>i.$lastPage?"20px 0":void 0};
`,hL=wt.div`
  padding: 0 0 10px 10px;
  color: ${i=>i.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,cL=()=>{const{state:{numPages:i}}=U.useContext(Ta),t=[];for(let e=0;e<i;e++)t.push(D.jsx(T1,{pageNum:e+1},e+1));return D.jsx(D.Fragment,{children:t})},uL=()=>{const{state:{mainState:i,paginated:t},dispatch:e}=U.useContext(Ta),{t:n}=Js(),s=(i==null?void 0:i.currentDocument)||null;return U.useEffect(()=>{e(K0(Gn.numPages))},[s]),!s||s.fileData===void 0?null:D.jsx(dL,{file:s.fileData,onLoadSuccess:({numPages:r})=>e(K0(r)),loading:D.jsx("span",{children:n("pdfPluginLoading")}),children:t?D.jsx(T1,{}):D.jsx(cL,{})})},dL=wt(qP)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,fL=i=>D.jsx(P1,{...i,reverse:!0}),pL=i=>D.jsx(P1,{...i}),P1=i=>{const{color:t,size:e,reverse:n}=i;return D.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:D.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:D.jsx("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:D.jsx("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:D.jsx("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:D.jsxs("g",{children:[D.jsx("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),D.jsx("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:t||"#aaa"})]})})})})})})},gL=i=>{const{color:t,size:e,reverse:n}=i;return D.jsxs("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[D.jsx("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:t||"#aaa"}),D.jsx("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:t||"#aaa"})]})},mL=i=>D.jsx(L1,{...i}),vL=i=>D.jsx(L1,{...i,reverse:!0}),L1=i=>{const{color:t,size:e,reverse:n}=i;return D.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 32 32",version:"1.1",children:D.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:D.jsx("g",{id:"search-plus-icon",fill:t||"#aaa",children:D.jsx("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},yL=i=>{const{color:t,size:e}=i;return D.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 24 24",children:D.jsx("path",{fill:t||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},wL=i=>{const{color:t,size:e,reverse:n}=i;return D.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:D.jsx("path",{fill:t||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})},bL=()=>{const{state:{currentPage:i,numPages:t},dispatch:e}=U.useContext(Ta),{t:n}=Js();return D.jsxs(AL,{id:"pdf-pagination",children:[D.jsx(I1,{id:"pdf-pagination-prev",onClick:()=>e(X0(i-1)),disabled:i===1,children:D.jsx(fL,{color:"#000",size:"50%"})}),D.jsx(EL,{id:"pdf-pagination-info",children:n("pdfPluginPageNumber",{currentPage:i,allPagesCount:t})}),D.jsx(xL,{id:"pdf-pagination-next",onClick:()=>e(X0(i+1)),disabled:i>=t,children:D.jsx(pL,{color:"#000",size:"50%"})})]})},AL=wt.div`
  display: flex;
  align-items: center;
`,I1=wt(pd)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,xL=wt(I1)`
  margin: 0 20px 0 5px;
`,EL=wt.div`
  color: ${i=>i.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,_L=()=>{const{t:i}=Js(),{state:{mainState:t,paginated:e,zoomLevel:n,numPages:s,zoomJump:r,defaultZoomLevel:a},dispatch:l}=U.useContext(Ta),h=(t==null?void 0:t.currentDocument)||null;return D.jsxs(SL,{id:"pdf-controls",children:[e&&s>1&&D.jsx(bL,{}),(h==null?void 0:h.fileData)&&D.jsx(kL,{id:"pdf-download",href:h==null?void 0:h.fileData,download:(h==null?void 0:h.fileName)||(h==null?void 0:h.uri),title:i("downloadButtonLabel"),children:D.jsx(gL,{color:"#000",size:"75%"})}),D.jsx(nh,{id:"pdf-zoom-out",onMouseDown:()=>l(kf(n-r)),children:D.jsx(vL,{color:"#000",size:"80%"})}),D.jsx(nh,{id:"pdf-zoom-in",onMouseDown:()=>l(kf(n+r)),children:D.jsx(mL,{color:"#000",size:"80%"})}),D.jsx(nh,{id:"pdf-zoom-reset",onMouseDown:()=>l(kf(a)),disabled:n===a,children:D.jsx(yL,{color:"#000",size:"70%"})}),s>1&&D.jsx(nh,{id:"pdf-toggle-pagination",onMouseDown:()=>l(rL(!e)),children:D.jsx(wL,{color:"#000",size:"70%",reverse:e})})]})},SL=wt.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${i=>i.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,nh=wt(pd)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,kL=wt(dw)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;iv.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${u1}/build/pdf.worker.min.mjs`).toString();const nv=({mainState:i})=>D.jsx(oL,{mainState:i,children:D.jsxs(CL,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[D.jsx(_L,{}),D.jsx(uL,{})]})});nv.fileTypes=["pdf","application/pdf"];nv.weight=0;const CL=wt.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${i=>i.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${i=>i.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${i=>i.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${i=>i.theme.primary};
  }
`,ML=wt(fn)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,sv=i=>D.jsx(ML,{...i});sv.fileTypes=["png","image/png"];sv.weight=0;let un,Ge,sd=[];const RL=()=>{var i=Be(2,0);if(i===18761)Ge=!0;else if(i===19789)Ge=!1;else throw TypeError("Invalid byte order value.");return Ge},TL=()=>{if(Be(2,2)!==42)throw RangeError("You forgot your towel!");return!0},PL=i=>{var t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},e;return i in t?e=t[i]:e="Tag"+i,e},LL=i=>{var t={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},e;return i in t&&(e=t[i]),e},IL=i=>{var t;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(i)!==-1?t=1:["SHORT","SSHORT"].indexOf(i)!==-1?t=2:["LONG","SLONG","FLOAT"].indexOf(i)!==-1?t=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(i)!==-1&&(t=8),t},DL=(i,t,e)=>{e=e||0;var n=Math.floor(e/8),s=t+n,r=e+i,a=32-i;if(r<=0)throw RangeError("No bits requested");if(r<=8)var l=24+e,h=un.getUint8(s,Ge);else if(r<=16)var l=16+e,h=un.getUint16(s,Ge);else if(r<=32)var l=e,h=un.getUint32(s,Ge);else throw RangeError("Too many bits requested");var u={bits:h<<l>>>a,byteOffset:s+Math.floor(r/8),bitOffset:r%8};return u},Be=(i,t)=>{if(i<=0)throw RangeError("No bytes requested");if(i<=1)return un.getUint8(t,Ge);if(i<=2)return un.getUint16(t,Ge);if(i<=3)return un.getUint32(t,Ge)>>>8;if(i<=4)return un.getUint32(t,Ge);throw RangeError("Too many bytes requested")},OL=(i,t,e,n)=>{var s=[],r=IL(t),a=r*e;if(a<=4){if(Ge===!1)var l=n>>>(4-r)*8;else var l=n;s.push(l)}else for(var h=0;h<e;h++){var u=r*h;if(r>=8)if(["RATIONAL","SRATIONAL"].indexOf(t)!==-1)s.push(Be(4,n+u)),s.push(Be(4,n+u+4));else throw TypeError("Can't handle this field type or size");else s.push(Be(r,n+u))}return t==="ASCII"&&s.forEach(function(c,f,g){g[f]=String.fromCharCode(c)}),s},rs=(i,t)=>{var e=Math.pow(2,8-t);return Math.floor(i*e+(e-1))},Q0=(i,t,e,n)=>(typeof n>"u"&&(n=1),"rgba("+i+", "+t+", "+e+", "+n+")"),D1=i=>{for(var t=Be(2,i),e=[],n=i+2,s=0;s<t;n+=12,s++){var r=Be(2,n),a=Be(2,n+2),l=Be(4,n+4),h=Be(4,n+8),u=PL(r),c=LL(a),f=OL(u,c,l,h);e[u]={type:c,values:f}}sd.push(e);var g=Be(4,n);return g===0?sd:D1(g)},NL=(i,t)=>{let e=t||document.createElement("canvas");if(i&&(un=new DataView(i),Ge=RL(),!!TL())){var n=Be(4,4);sd=D1(n);var s=sd[0],r=s.ImageWidth.values[0],a=s.ImageLength.values[0];e.width=r,e.height=a;var l=[],h=s.Compression?s.Compression.values[0]:1,u=s.SamplesPerPixel.values[0],c=[],f=0,g=!1;if(s.BitsPerSample.values.forEach(function(Ut,ht,Ce){c[ht]={bitsPerSample:Ut,hasBytesPerSample:!1,bytesPerSample:void 0},Ut%8===0&&(c[ht].hasBytesPerSample=!0,c[ht].bytesPerSample=Ut/8),f+=Ut},void 0),f%8===0){g=!0;var v=f/8}var w=s.StripOffsets.values,x=w.length;if(s.StripByteCounts)var E=s.StripByteCounts.values;else if(x===1)var E=[Math.ceil(r*a*f/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var _=0;_<x;_++){var C=w[_];l[_]=[];for(var R=E[_],P=0,I=0,F=1,L=!0,S=[],k=0,O=0,N=0;P<R;P+=F)switch(h){case 1:for(var B=0,S=[];B<u;B++)if(c[B].hasBytesPerSample){var $=c[B].bytesPerSample*B;S.push(Be(c[B].bytesPerSample,C+P+$))}else{var Y=DL(c[B].bitsPerSample,C+P,I);throw S.push(Y.bits),P=Y.byteOffset-C,I=Y.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(l[_].push(S),g)F=v;else throw F=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(L){L=!1;var X=1,z=1,W=un.getInt8(C+P,Ge);W>=0&&W<=127?X=W+1:W>=-127&&W<=-1?z=-W+1:L=!0}else{for(var at=Be(1,C+P),B=0;B<z;B++){if(c[O].hasBytesPerSample)N=N<<8*k|at,k++,k===c[O].bytesPerSample&&(S.push(N),N=k=0,O++);else throw RangeError("Cannot handle sub-byte bits per sample");O===u&&(l[_].push(S),S=[],O=0)}X--,X===0&&(L=!0)}F=1;break}}if(e.getContext){var G=e.getContext("2d");if(G.fillStyle=Q0(255,255,255,0),s.RowsPerStrip)var bt=s.RowsPerStrip.values[0];else var bt=a;var pt=l.length,H=a%bt,it=H===0?bt:H,tt=bt,J=0,nt=s.PhotometricInterpretation.values[0],et=[],vt=0;if(s.ExtraSamples&&(et=s.ExtraSamples.values,vt=et.length),s.ColorMap)var q=s.ColorMap.values,Q=Math.pow(2,c[0].bitsPerSample);for(var _=0;_<pt;_++){_+1===pt&&(tt=it);for(var dt=l[_].length,gt=J*_,lt=0,_t=0;_t<dt;lt++)for(var rt=0;rt<r;rt++,_t++){var K=l[_][_t],At=0,Rt=0,Bt=0,te=1;if(vt>0){for(var $t=0;$t<vt;$t++)if(et[$t]===1||et[$t]===2){te=K[3+$t]/256;break}}switch(nt){case 0:if(c[0].hasBytesPerSample)var Ct=Math.pow(16,c[0].bytesPerSample*2);K.forEach(function(ht,Ce,Me){Me[Ce]=Ct-ht});case 1:At=Rt=Bt=rs(K[0],c[0].bitsPerSample);break;case 2:At=rs(K[0],c[0].bitsPerSample),Rt=rs(K[1],c[1].bitsPerSample),Bt=rs(K[2],c[2].bitsPerSample);break;case 3:if(q===void 0)throw Error("Palette image missing color map");var Mt=K[0];At=rs(q[Mt],16),Rt=rs(q[Q+Mt],16),Bt=rs(q[2*Q+Mt],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",nt)}G.fillStyle=Q0(At,Rt,Bt,te),G.fillRect(rt,gt+lt,1,1)}J=tt}}return e}},Id=i=>{const{mainState:{currentDocument:t}}=i,{t:e}=Js(),[n,s]=U.useState(!1),[r,a]=U.useState(!1);return U.useEffect(()=>{if(!t||n)return;const l=document.getElementById("tiff-img");try{l&&NL(t.fileData,l),s(!0)}catch{a(!0)}},[t,n]),r?D.jsx(fn,{...i,children:D.jsx("div",{children:e("brokenFile")})}):D.jsx(fn,{...i,children:D.jsx(FL,{id:"tiff-img"})})};Id.fileTypes=["tif","tiff","image/tif","image/tiff"];Id.weight=0;Id.fileLoader=EM;const FL=wt.canvas`
  max-width: 95%;
  max-height: 95%;
`,Dd=({mainState:{currentDocument:i}})=>D.jsx(WL,{id:"txt-renderer",children:i==null?void 0:i.fileData});Dd.fileTypes=["txt","text/plain"];Dd.weight=0;Dd.fileLoader=vw;const WL=wt.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var O1={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,t){(function(e,n){i.exports=n()})(Ga,function e(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,a={},l=0,h={parse:function(S,k){var O=(k=k||{}).dynamicTyping||!1;if(L(O)&&(k.dynamicTypingFunction=O,O={}),k.dynamicTyping=O,k.transform=!!L(k.transform)&&k.transform,k.worker&&h.WORKERS_SUPPORTED){var N=function(){if(!h.WORKERS_SUPPORTED)return!1;var $=(X=n.URL||n.webkitURL||null,z=e.toString(),h.BLOB_URL||(h.BLOB_URL=X.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",z,")();"],{type:"text/javascript"})))),Y=new n.Worker($),X,z;return Y.onmessage=C,Y.id=l++,a[Y.id]=Y}();return N.userStep=k.step,N.userChunk=k.chunk,N.userComplete=k.complete,N.userError=k.error,k.step=L(k.step),k.chunk=L(k.chunk),k.complete=L(k.complete),k.error=L(k.error),delete k.worker,void N.postMessage({input:S,config:k,workerId:N.id})}var B=null;return h.NODE_STREAM_INPUT,typeof S=="string"?(S=function($){return $.charCodeAt(0)===65279?$.slice(1):$}(S),B=k.download?new f(k):new v(k)):S.readable===!0&&L(S.read)&&L(S.on)?B=new w(k):(n.File&&S instanceof File||S instanceof Object)&&(B=new g(k)),B.stream(S)},unparse:function(S,k){var O=!1,N=!0,B=",",$=`\r
`,Y='"',X=Y+Y,z=!1,W=null,at=!1;(function(){if(typeof k=="object"){if(typeof k.delimiter!="string"||h.BAD_DELIMITERS.filter(function(H){return k.delimiter.indexOf(H)!==-1}).length||(B=k.delimiter),(typeof k.quotes=="boolean"||typeof k.quotes=="function"||Array.isArray(k.quotes))&&(O=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(z=k.skipEmptyLines),typeof k.newline=="string"&&($=k.newline),typeof k.quoteChar=="string"&&(Y=k.quoteChar),typeof k.header=="boolean"&&(N=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");W=k.columns}k.escapeChar!==void 0&&(X=k.escapeChar+Y),(typeof k.escapeFormulae=="boolean"||k.escapeFormulae instanceof RegExp)&&(at=k.escapeFormulae instanceof RegExp?k.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var G=new RegExp(E(Y),"g");if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return bt(null,S,z);if(typeof S[0]=="object")return bt(W||Object.keys(S[0]),S,z)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||W),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),bt(S.fields||[],S.data||[],z);throw new Error("Unable to serialize unrecognized input");function bt(H,it,tt){var J="";typeof H=="string"&&(H=JSON.parse(H)),typeof it=="string"&&(it=JSON.parse(it));var nt=Array.isArray(H)&&0<H.length,et=!Array.isArray(it[0]);if(nt&&N){for(var vt=0;vt<H.length;vt++)0<vt&&(J+=B),J+=pt(H[vt],vt);0<it.length&&(J+=$)}for(var q=0;q<it.length;q++){var Q=nt?H.length:it[q].length,dt=!1,gt=nt?Object.keys(it[q]).length===0:it[q].length===0;if(tt&&!nt&&(dt=tt==="greedy"?it[q].join("").trim()==="":it[q].length===1&&it[q][0].length===0),tt==="greedy"&&nt){for(var lt=[],_t=0;_t<Q;_t++){var rt=et?H[_t]:_t;lt.push(it[q][rt])}dt=lt.join("").trim()===""}if(!dt){for(var K=0;K<Q;K++){0<K&&!gt&&(J+=B);var At=nt&&et?H[K]:K;J+=pt(it[q][At],K)}q<it.length-1&&(!tt||0<Q&&!gt)&&(J+=$)}}return J}function pt(H,it){if(H==null)return"";if(H.constructor===Date)return JSON.stringify(H).slice(1,25);var tt=!1;at&&typeof H=="string"&&at.test(H)&&(H="'"+H,tt=!0);var J=H.toString().replace(G,X);return(tt=tt||O===!0||typeof O=="function"&&O(H,it)||Array.isArray(O)&&O[it]||function(nt,et){for(var vt=0;vt<et.length;vt++)if(-1<nt.indexOf(et[vt]))return!0;return!1}(J,h.BAD_DELIMITERS)||-1<J.indexOf(B)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?Y+J+Y:J}}};if(h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!s&&!!n.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=_,h.ParserHandle=x,h.NetworkStreamer=f,h.FileStreamer=g,h.StringStreamer=v,h.ReadableStreamStreamer=w,n.jQuery){var u=n.jQuery;u.fn.parse=function(S){var k=S.config||{},O=[];return this.each(function($){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Y=0;Y<this.files.length;Y++)O.push({file:this.files[Y],inputElem:this,instanceConfig:u.extend({},k)})}),N(),this;function N(){if(O.length!==0){var $,Y,X,z,W=O[0];if(L(S.before)){var at=S.before(W.file,W.inputElem);if(typeof at=="object"){if(at.action==="abort")return $="AbortError",Y=W.file,X=W.inputElem,z=at.reason,void(L(S.error)&&S.error({name:$},Y,X,z));if(at.action==="skip")return void B();typeof at.config=="object"&&(W.instanceConfig=u.extend(W.instanceConfig,at.config))}else if(at==="skip")return void B()}var G=W.instanceConfig.complete;W.instanceConfig.complete=function(bt){L(G)&&G(bt,W.file,W.inputElem),B()},h.parse(W.file,W.instanceConfig)}else L(S.complete)&&S.complete()}function B(){O.splice(0,1),N()}}}function c(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var O=I(k);O.chunkSize=parseInt(O.chunkSize),k.step||k.chunk||(O.chunkSize=null),this._handle=new x(O),(this._handle.streamer=this)._config=O}).call(this,S),this.parseChunk=function(k,O){if(this.isFirstChunk&&L(this._config.beforeFirstChunk)){var N=this._config.beforeFirstChunk(k);N!==void 0&&(k=N)}this.isFirstChunk=!1,this._halted=!1;var B=this._partialLine+k;this._partialLine="";var $=this._handle.parse(B,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Y=$.meta.cursor;this._finished||(this._partialLine=B.substring(Y-this._baseIndex),this._baseIndex=Y),$&&$.data&&(this._rowCount+=$.data.length);var X=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)n.postMessage({results:$,workerId:h.WORKER_ID,finished:X});else if(L(this._config.chunk)&&!O){if(this._config.chunk($,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);$=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat($.data),this._completeResults.errors=this._completeResults.errors.concat($.errors),this._completeResults.meta=$.meta),this._completed||!X||!L(this._config.complete)||$&&$.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),X||$&&$.meta.paused||this._nextChunk(),$}this._halted=!0},this._sendError=function(k){L(this._config.error)?this._config.error(k):r&&this._config.error&&n.postMessage({workerId:h.WORKER_ID,error:k,finished:!1})}}function f(S){var k;(S=S||{}).chunkSize||(S.chunkSize=h.RemoteChunkSize),c.call(this,S),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),s||(k.onload=F(this._chunkLoaded,this),k.onerror=F(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var O=this._config.downloadRequestHeaders;for(var N in O)k.setRequestHeader(N,O[N])}if(this._config.chunkSize){var B=this._start+this._config.chunkSize-1;k.setRequestHeader("Range","bytes="+this._start+"-"+B)}try{k.send(this._config.downloadRequestBody)}catch($){this._chunkError($.message)}s&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:k.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(O){var N=O.getResponseHeader("Content-Range");return N===null?-1:parseInt(N.substring(N.lastIndexOf("/")+1))}(k),this.parseChunk(k.responseText)))},this._chunkError=function(O){var N=k.statusText||O;this._sendError(new Error(N))}}function g(S){var k,O;(S=S||{}).chunkSize||(S.chunkSize=h.LocalChunkSize),c.call(this,S);var N=typeof FileReader<"u";this.stream=function(B){this._input=B,O=B.slice||B.webkitSlice||B.mozSlice,N?((k=new FileReader).onload=F(this._chunkLoaded,this),k.onerror=F(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input;if(this._config.chunkSize){var $=Math.min(this._start+this._config.chunkSize,this._input.size);B=O.call(B,this._start,$)}var Y=k.readAsText(B,this._config.encoding);N||this._chunkLoaded({target:{result:Y}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(k.error)}}function v(S){var k;c.call(this,S=S||{}),this.stream=function(O){return k=O,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var O,N=this._config.chunkSize;return N?(O=k.substring(0,N),k=k.substring(N)):(O=k,k=""),this._finished=!k,this.parseChunk(O)}}}function w(S){c.call(this,S=S||{});var k=[],O=!0,N=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){N&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):O=!0},this._streamData=F(function(B){try{k.push(typeof B=="string"?B:B.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch($){this._streamError($)}},this),this._streamError=F(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=F(function(){this._streamCleanUp(),N=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(S){var k,O,N,B=Math.pow(2,53),$=-B,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,X=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,z=this,W=0,at=0,G=!1,bt=!1,pt=[],H={data:[],errors:[],meta:{}};if(L(S.step)){var it=S.step;S.step=function(q){if(H=q,nt())J();else{if(J(),H.data.length===0)return;W+=q.data.length,S.preview&&W>S.preview?O.abort():(H.data=H.data[0],it(H,z))}}}function tt(q){return S.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function J(){return H&&N&&(vt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),N=!1),S.skipEmptyLines&&(H.data=H.data.filter(function(q){return!tt(q)})),nt()&&function(){if(!H)return;function q(dt,gt){L(S.transformHeader)&&(dt=S.transformHeader(dt,gt)),pt.push(dt)}if(Array.isArray(H.data[0])){for(var Q=0;nt()&&Q<H.data.length;Q++)H.data[Q].forEach(q);H.data.splice(0,1)}else H.data.forEach(q)}(),function(){if(!H||!S.header&&!S.dynamicTyping&&!S.transform)return H;function q(dt,gt){var lt,_t=S.header?{}:[];for(lt=0;lt<dt.length;lt++){var rt=lt,K=dt[lt];S.header&&(rt=lt>=pt.length?"__parsed_extra":pt[lt]),S.transform&&(K=S.transform(K,rt)),K=et(rt,K),rt==="__parsed_extra"?(_t[rt]=_t[rt]||[],_t[rt].push(K)):_t[rt]=K}return S.header&&(lt>pt.length?vt("FieldMismatch","TooManyFields","Too many fields: expected "+pt.length+" fields but parsed "+lt,at+gt):lt<pt.length&&vt("FieldMismatch","TooFewFields","Too few fields: expected "+pt.length+" fields but parsed "+lt,at+gt)),_t}var Q=1;return!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(q),Q=H.data.length):H.data=q(H.data,0),S.header&&H.meta&&(H.meta.fields=pt),at+=Q,H}()}function nt(){return S.header&&pt.length===0}function et(q,Q){return dt=q,S.dynamicTypingFunction&&S.dynamicTyping[dt]===void 0&&(S.dynamicTyping[dt]=S.dynamicTypingFunction(dt)),(S.dynamicTyping[dt]||S.dynamicTyping)===!0?Q==="true"||Q==="TRUE"||Q!=="false"&&Q!=="FALSE"&&(function(gt){if(Y.test(gt)){var lt=parseFloat(gt);if($<lt&&lt<B)return!0}return!1}(Q)?parseFloat(Q):X.test(Q)?new Date(Q):Q===""?null:Q):Q;var dt}function vt(q,Q,dt,gt){var lt={type:q,code:Q,message:dt};gt!==void 0&&(lt.row=gt),H.errors.push(lt)}this.parse=function(q,Q,dt){var gt=S.quoteChar||'"';if(S.newline||(S.newline=function(rt,K){rt=rt.substring(0,1048576);var At=new RegExp(E(K)+"([^]*?)"+E(K),"gm"),Rt=(rt=rt.replace(At,"")).split("\r"),Bt=rt.split(`
`),te=1<Bt.length&&Bt[0].length<Rt[0].length;if(Rt.length===1||te)return`
`;for(var $t=0,Ct=0;Ct<Rt.length;Ct++)Rt[Ct][0]===`
`&&$t++;return $t>=Rt.length/2?`\r
`:"\r"}(q,gt)),N=!1,S.delimiter)L(S.delimiter)&&(S.delimiter=S.delimiter(q),H.meta.delimiter=S.delimiter);else{var lt=function(rt,K,At,Rt,Bt){var te,$t,Ct,Mt;Bt=Bt||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Ut=0;Ut<Bt.length;Ut++){var ht=Bt[Ut],Ce=0,Me=0,ee=0;Ct=void 0;for(var Ye=new _({comments:Rt,delimiter:ht,newline:K,preview:10}).parse(rt),d=0;d<Ye.data.length;d++)if(At&&tt(Ye.data[d]))ee++;else{var p=Ye.data[d].length;Me+=p,Ct!==void 0?0<p&&(Ce+=Math.abs(p-Ct),Ct=p):Ct=p}0<Ye.data.length&&(Me/=Ye.data.length-ee),($t===void 0||Ce<=$t)&&(Mt===void 0||Mt<Me)&&1.99<Me&&($t=Ce,te=ht,Mt=Me)}return{successful:!!(S.delimiter=te),bestDelimiter:te}}(q,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess);lt.successful?S.delimiter=lt.bestDelimiter:(N=!0,S.delimiter=h.DefaultDelimiter),H.meta.delimiter=S.delimiter}var _t=I(S);return S.preview&&S.header&&_t.preview++,k=q,O=new _(_t),H=O.parse(k,Q,dt),J(),G?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,O.abort(),k=L(S.chunk)?"":k.substring(O.getCharIndex())},this.resume=function(){z.streamer._halted?(G=!1,z.streamer.parseChunk(k,!0)):setTimeout(z.resume,3)},this.aborted=function(){return bt},this.abort=function(){bt=!0,O.abort(),H.meta.aborted=!0,L(S.complete)&&S.complete(H),k=""}}function E(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(S){var k,O=(S=S||{}).delimiter,N=S.newline,B=S.comments,$=S.step,Y=S.preview,X=S.fastMode,z=k=S.quoteChar===void 0||S.quoteChar===null?'"':S.quoteChar;if(S.escapeChar!==void 0&&(z=S.escapeChar),(typeof O!="string"||-1<h.BAD_DELIMITERS.indexOf(O))&&(O=","),B===O)throw new Error("Comment character same as delimiter");B===!0?B="#":(typeof B!="string"||-1<h.BAD_DELIMITERS.indexOf(B))&&(B=!1),N!==`
`&&N!=="\r"&&N!==`\r
`&&(N=`
`);var W=0,at=!1;this.parse=function(G,bt,pt){if(typeof G!="string")throw new Error("Input must be a string");var H=G.length,it=O.length,tt=N.length,J=B.length,nt=L($),et=[],vt=[],q=[],Q=W=0;if(!G)return y();if(S.header&&!bt){var dt=G.split(N)[0].split(O),gt=[],lt={},_t=!1;for(var rt in dt){var K=dt[rt];L(S.transformHeader)&&(K=S.transformHeader(K,rt));var At=K,Rt=lt[K]||0;for(0<Rt&&(_t=!0,At=K+"_"+Rt),lt[K]=Rt+1;gt.includes(At);)At=At+"_"+Rt;gt.push(At)}if(_t){var Bt=G.split(N);Bt[0]=gt.join(O),G=Bt.join(N)}}if(X||X!==!1&&G.indexOf(k)===-1){for(var te=G.split(N),$t=0;$t<te.length;$t++){if(q=te[$t],W+=q.length,$t!==te.length-1)W+=N.length;else if(pt)return y();if(!B||q.substring(0,J)!==B){if(nt){if(et=[],ee(q.split(O)),M(),at)return y()}else ee(q.split(O));if(Y&&Y<=$t)return et=et.slice(0,Y),y(!0)}}return y()}for(var Ct=G.indexOf(O,W),Mt=G.indexOf(N,W),Ut=new RegExp(E(z)+E(k),"g"),ht=G.indexOf(k,W);;)if(G[W]!==k)if(B&&q.length===0&&G.substring(W,W+J)===B){if(Mt===-1)return y();W=Mt+tt,Mt=G.indexOf(N,W),Ct=G.indexOf(O,W)}else if(Ct!==-1&&(Ct<Mt||Mt===-1))q.push(G.substring(W,Ct)),W=Ct+it,Ct=G.indexOf(O,W);else{if(Mt===-1)break;if(q.push(G.substring(W,Mt)),p(Mt+tt),nt&&(M(),at))return y();if(Y&&et.length>=Y)return y(!0)}else for(ht=W,W++;;){if((ht=G.indexOf(k,ht+1))===-1)return pt||vt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:et.length,index:W}),d();if(ht===H-1)return d(G.substring(W,ht).replace(Ut,k));if(k!==z||G[ht+1]!==z){if(k===z||ht===0||G[ht-1]!==z){Ct!==-1&&Ct<ht+1&&(Ct=G.indexOf(O,ht+1)),Mt!==-1&&Mt<ht+1&&(Mt=G.indexOf(N,ht+1));var Ce=Ye(Mt===-1?Ct:Math.min(Ct,Mt));if(G.substr(ht+1+Ce,it)===O){q.push(G.substring(W,ht).replace(Ut,k)),G[W=ht+1+Ce+it]!==k&&(ht=G.indexOf(k,W)),Ct=G.indexOf(O,W),Mt=G.indexOf(N,W);break}var Me=Ye(Mt);if(G.substring(ht+1+Me,ht+1+Me+tt)===N){if(q.push(G.substring(W,ht).replace(Ut,k)),p(ht+1+Me+tt),Ct=G.indexOf(O,W),ht=G.indexOf(k,W),nt&&(M(),at))return y();if(Y&&et.length>=Y)return y(!0);break}vt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:et.length,index:W}),ht++}}else ht++}return d();function ee(T){et.push(T),Q=W}function Ye(T){var j=0;if(T!==-1){var V=G.substring(ht+1,T);V&&V.trim()===""&&(j=V.length)}return j}function d(T){return pt||(T===void 0&&(T=G.substring(W)),q.push(T),W=H,ee(q),nt&&M()),y()}function p(T){W=T,ee(q),q=[],Mt=G.indexOf(N,W)}function y(T){return{data:et,errors:vt,meta:{delimiter:O,linebreak:N,aborted:at,truncated:!!T,cursor:Q+(bt||0)}}}function M(){$(y()),et=[],vt=[]}},this.abort=function(){at=!0},this.getCharIndex=function(){return W}}function C(S){var k=S.data,O=a[k.workerId],N=!1;if(k.error)O.userError(k.error,k.file);else if(k.results&&k.results.data){var B={abort:function(){N=!0,R(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:P,resume:P};if(L(O.userStep)){for(var $=0;$<k.results.data.length&&(O.userStep({data:k.results.data[$],errors:k.results.errors,meta:k.results.meta},B),!N);$++);delete k.results}else L(O.userChunk)&&(O.userChunk(k.results,B,k.file),delete k.results)}k.finished&&!N&&R(k.workerId,k.results)}function R(S,k){var O=a[S];L(O.userComplete)&&O.userComplete(k),O.terminate(),delete a[S]}function P(){throw new Error("Not implemented.")}function I(S){if(typeof S!="object"||S===null)return S;var k=Array.isArray(S)?[]:{};for(var O in S)k[O]=I(S[O]);return k}function F(S,k){return function(){S.apply(k,arguments)}}function L(S){return typeof S=="function"}return r&&(n.onmessage=function(S){var k=S.data;if(h.WORKER_ID===void 0&&k&&(h.WORKER_ID=k.workerId),typeof k.input=="string")n.postMessage({workerId:h.WORKER_ID,results:h.parse(k.input,k.config),finished:!0});else if(n.File&&k.input instanceof File||k.input instanceof Object){var O=h.parse(k.input,k.config);O&&n.postMessage({workerId:h.WORKER_ID,results:O,finished:!0})}}),(f.prototype=Object.create(c.prototype)).constructor=f,(g.prototype=Object.create(c.prototype)).constructor=g,(v.prototype=Object.create(v.prototype)).constructor=v,(w.prototype=Object.create(c.prototype)).constructor=w,h})})(O1);var jL=O1.exports;const BL=Z0(jL),Od=({mainState:{currentDocument:i,config:t}})=>{const[e,n]=U.useState([]);return U.useEffect(()=>{var s;if(i!=null&&i.fileData){const r=BL.parse(i.fileData,{delimiter:(t==null?void 0:t.csvDelimiter)??","});!((s=r.errors)!=null&&s.length)&&r.data&&n(r.data)}},[i,t==null?void 0:t.csvDelimiter]),e.length?D.jsx($L,{children:D.jsxs(UL,{children:[D.jsx("thead",{children:D.jsx("tr",{children:e[0].map(s=>D.jsx("th",{children:s},s))})}),D.jsx("tbody",{children:e.slice(1,e.length).map(s=>D.jsx("tr",{children:s.map(r=>D.jsx("td",{children:r},r))},s.join("")))})]})}):null};Od.fileTypes=["csv","text/csv"];Od.weight=0;Od.fileLoader=vw;const $L=wt.div`
  width: 100%;
`,UL=wt.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,rv=i=>D.jsx(fn,{...i});rv.fileTypes=["gif","image/gif"];rv.weight=0;const av=({mainState:{currentDocument:i}})=>i?D.jsx(HL,{id:"video-renderer",children:D.jsx(zL,{controls:!0,src:i.uri})}):null;av.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];av.weight=0;const HL=wt.div`
  width: 100%;
`,zL=wt.video`
  width: 100%;
  height: 100%;
  border: 0;
`,ov=i=>D.jsx(fn,{...i});ov.fileTypes=["webp","image/webp"];ov.weight=0;const VL=[Hm,gd,zm,md,nv,sv,Id,Dd,Od,rv,av,ov],GL=U.forwardRef((i,t)=>{const{documents:e,theme:n}=i;if(!e)throw new Error("Please provide an array of documents to DocViewer!");return D.jsx(qC,{ref:t,pluginRenderers:VL,...i,children:D.jsx(PS,{theme:n?{...Zv,...n}:Zv,children:D.jsxs(qL,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:i.className,style:i.style,children:[D.jsx(AM,{}),D.jsx(RM,{})]})})})}),cI=U.memo(GL),qL=wt.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`,uI=F1(N1(i=>({employee:[],roleOptions:[],branchEmployee:[],branchEmployeeOptions:[],allEmployeecodeOptions:[],isLoading:!1,error:null,fetchEmployee:async t=>{try{i({isLoading:!0});const e=await lv.get(`${hv}/users/read?limit=1000`,{headers:{Authorization:`Bearer ${t}`}});console.log("roleoptionstore>>>>>>",e.data.result);const n=e.data.data||e.data.result||[],s=[...new Set(n.map(a=>JSON.stringify({value:a.staff_id,label:`${a.firstname} - ${a.role}`})))].map(a=>JSON.parse(a)),r=[...new Set(n.map(a=>a.role))].map(a=>({value:a,label:a}));i({employee:n,roleOptions:[{value:"",label:"All Roles"},...r],isLoading:!1,allEmployeecodeOptions:s}),console.log("Processed options>>>>>>>>>>>>>>:",s)}catch(e){i({error:e,isLoading:!1})}},fetchBranchEmployee:async(t,e)=>{try{i({isLoading:!0});const n=await lv.get(`${hv}/users/read?branchcode=${e}&limit=1000`,{headers:{Authorization:`Bearer ${t}`}});console.log("API Response:",n.data);const s=n.data.data||n.data.result||[];console.log("Raw employee data:",s);const r=[...new Set(s.map(a=>JSON.stringify({value:a.staff_id,label:`${a.firstname} - ${a.role}`})))].map(a=>JSON.parse(a));console.log("Processed options:",r),i({branchEmployee:s,branchEmployeeOptions:r,isLoading:!1})}catch(n){console.error("Error fetching branch employees:",n),i({error:n,isLoading:!1})}}}),{name:"employee-storage"}));export{Yf as A,Z0 as J,cI as K,VL as N,ut as c,aI as q,Ga as r,md as s,uI as u,rI as z};
