import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { PassThrough } from "node:stream";
import { createReadableStreamFromReadable } from "@react-router/node";
import { ServerRouter, useMatches, useActionData, useLoaderData, useParams, useRouteError, Meta, Links, ScrollRestoration, Scripts, Outlet, isRouteErrorResponse, useNavigate, useLocation, Link as Link$1 } from "react-router";
import { isbot } from "isbot";
import { renderToPipeableStream } from "react-dom/server";
import React, { createElement, useState, useRef, useEffect, forwardRef } from "react";
import { IoIosArrowRoundForward, IoIosMailUnread, IoIosStar } from "react-icons/io";
import { AiFillEye, AiFillEyeInvisible, AiFillProject, AiFillPushpin, AiOutlineNumber } from "react-icons/ai";
import axios from "axios";
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import { ChevronsLeft, ChevronsDown, House, Split, UserLock, CalendarX2, Contact, CalendarCheck, HouseWifi, UserSearch, Briefcase, UsersRound, SquareKanban, CircleCheckBig, CalendarClock, UserPen, Calculator, MessageCircleWarning, BellRing, CalendarSync, MailCheck, FileClock, Settings as Settings$1, Users, CheckCircle, XCircle, BookOpen, AlertCircle, Clock, DollarSign, CreditCard, TrendingDown, FileText, NetworkIcon, Hash, MapPin, Contact2, Phone, Mail, User2Icon, User, PlusCircleIcon, ClipboardList, Building, Calendar, IndianRupee, Percent, Award, Filter, FileDown, Eye, SquarePen, Trash2, HeartPulse, Droplets, Lock, File, UserCheck, Plus, ClipboardCheck, AlertTriangle, UserX, PlusSquareIcon, User2, Video, FileUp, Link as Link$2, X, ChevronUp, ChevronDown, Minus, Check, MessageSquareText, LogOut, Notebook, CalendarDays, Languages, SortDesc, SortAsc, Hourglass, CalendarFold, PieChart, Flag, Archive, TrendingUp, Bookmark, List, BookCheck, ClockFading, ArrowRightToLine, Clock1, BookUser, Network, Map as Map$1, Tag, BookOpenText, Tent, ClipboardType, ListChecks, Target, Banknote, Milestone as Milestone$1, Dot, CalendarCheck2, UserPlus2, GitBranchPlus, SquareChartGanttIcon, Megaphone, Type, Medal, ArrowBigLeft, Edit, PhoneCall, DotIcon, MessageSquare, Smile, Star, Edit2, ShieldUser, LayoutList, Trash2Icon, AlarmClockCheck, PenBox, BarChart2, ThumbsUp, HelpCircle, ThumbsDown, Shield, GraduationCap, TimerOff, Loader2, SquareCheckBig, ChevronRight, Computer, TicketCheck, Key } from "lucide-react";
import { FaUser, FaCog, FaSignOutAlt, FaMoneyBillWave, FaHandsHelping, FaCheckCircle, FaClock, FaExclamationCircle, FaUsers, FaAddressCard, FaMailBulk, FaProjectDiagram, FaCriticalRole, FaUsersSlash, FaMoneyBill } from "react-icons/fa";
import { useNavigate as useNavigate$1, Link, NavLink, useParams as useParams$1, useLocation as useLocation$1 } from "react-router-dom";
import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";
import PropTypes from "prop-types";
import { Doughnut, Bar, Line } from "react-chartjs-2";
import { Chart, ArcElement, Tooltip, Legend, CategoryScale, LinearScale, BarElement, Title, PointElement, LineElement, Filler } from "chart.js";
import toast$1, { toast, Toaster } from "react-hot-toast";
import { CgClose, CgArrowsExchange, CgFileDocument } from "react-icons/cg";
import * as XLSX from "xlsx";
import DocViewer, { DocViewerRenderers, MSDocRenderer } from "@cyntler/react-doc-viewer";
import moment from "moment";
import DatePicker from "react-datepicker";
import { momentLocalizer, Calendar as Calendar$1 } from "react-big-calendar";
const streamTimeout = 5e3;
function handleRequest(request, responseStatusCode, responseHeaders, routerContext, loadContext) {
  return new Promise((resolve, reject) => {
    let shellRendered = false;
    let userAgent = request.headers.get("user-agent");
    let readyOption = userAgent && isbot(userAgent) || routerContext.isSpaMode ? "onAllReady" : "onShellReady";
    const { pipe, abort } = renderToPipeableStream(
      /* @__PURE__ */ jsx(ServerRouter, { context: routerContext, url: request.url }),
      {
        [readyOption]() {
          shellRendered = true;
          const body = new PassThrough();
          const stream = createReadableStreamFromReadable(body);
          responseHeaders.set("Content-Type", "text/html");
          resolve(
            new Response(stream, {
              headers: responseHeaders,
              status: responseStatusCode
            })
          );
          pipe(body);
        },
        onShellError(error) {
          reject(error);
        },
        onError(error) {
          responseStatusCode = 500;
          if (shellRendered) {
            console.error(error);
          }
        }
      }
    );
    setTimeout(abort, streamTimeout + 1e3);
  });
}
const entryServer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: handleRequest,
  streamTimeout
}, Symbol.toStringTag, { value: "Module" }));
function withComponentProps(Component) {
  return function Wrapped() {
    const props = {
      params: useParams(),
      loaderData: useLoaderData(),
      actionData: useActionData(),
      matches: useMatches()
    };
    return createElement(Component, props);
  };
}
function withErrorBoundaryProps(ErrorBoundary3) {
  return function Wrapped() {
    const props = {
      params: useParams(),
      loaderData: useLoaderData(),
      actionData: useActionData(),
      error: useRouteError()
    };
    return createElement(ErrorBoundary3, props);
  };
}
const links = () => [{
  rel: "preconnect",
  href: "https://fonts.googleapis.com"
}, {
  rel: "preconnect",
  href: "https://fonts.gstatic.com",
  crossOrigin: "anonymous"
}, {
  rel: "stylesheet",
  href: "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
}];
function Layout$2({
  children
}) {
  return /* @__PURE__ */ jsxs("html", {
    lang: "en",
    children: [/* @__PURE__ */ jsxs("head", {
      children: [/* @__PURE__ */ jsx("meta", {
        charSet: "utf-8"
      }), /* @__PURE__ */ jsx("meta", {
        name: "viewport",
        content: "width=device-width, initial-scale=1"
      }), /* @__PURE__ */ jsx(Meta, {}), /* @__PURE__ */ jsx(Links, {})]
    }), /* @__PURE__ */ jsxs("body", {
      children: [children, /* @__PURE__ */ jsx(ScrollRestoration, {}), /* @__PURE__ */ jsx(Scripts, {})]
    })]
  });
}
const root = withComponentProps(function App() {
  return /* @__PURE__ */ jsx(Outlet, {});
});
const ErrorBoundary = withErrorBoundaryProps(function ErrorBoundary2({
  error
}) {
  let message = "Oops!";
  let details = "An unexpected error occurred.";
  let stack;
  if (isRouteErrorResponse(error)) {
    message = error.status === 404 ? "404" : "Error";
    details = error.status === 404 ? "The requested page could not be found." : error.statusText || details;
  }
  return /* @__PURE__ */ jsxs("main", {
    className: "pt-16 p-4 container mx-auto",
    children: [/* @__PURE__ */ jsx("h1", {
      children: message
    }), /* @__PURE__ */ jsx("p", {
      children: details
    }), stack]
  });
});
const route0 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary,
  Layout: Layout$2,
  default: root,
  links
}, Symbol.toStringTag, { value: "Module" }));
const alminoLogo$1 = "/assets/signin-img-removebg-preview-D5Z0eTw8.png";
const alminoLogo = "/assets/Almino%20structural%20consultancy_Final-Z0Sp15pM.png";
const BASE_URL = "http://localhost:3000/api";
const toastposition = "bottom-right";
const toastStyle = {
  style: {
    border: "1px solid #2b6cb0",
    padding: "10px",
    width: "900px",
    color: "#4a5568"
  },
  iconTheme: {
    primary: "#C62828",
    secondary: "#FFFAEE"
  },
  className: "dark:bg-[#333] dark:text-white"
};
const useAuthStore = create(
  persist(
    (set) => ({
      accessToken: null,
      refreshToken: null,
      isActive: false,
      isLoggedIn: false,
      permissions: null,
      role: null,
      branchcode: null,
      staff_id: null,
      setAuthData: (data) => set({
        staff_id: data.staff_id,
        branchcode: data.branchcode,
        accessToken: data.accessToken,
        refreshToken: data.refreshToken,
        isActive: data.isActive,
        permissions: data.permissions,
        isLoggedIn: true,
        role: data.role
      }),
      clearAuthData: () => set({
        accessToken: null,
        refreshToken: null,
        isActive: false,
        permissions: null,
        isLoggedIn: false,
        role: null
      })
    }),
    { name: "auth-storage", storage: createJSONStorage(() => localStorage) }
  )
);
const FloatingInput = ({
  id,
  name,
  type = "text",
  value,
  onChange,
  label,
  required = false,
  disabled = false,
  showPasswordToggle = false,
  onTogglePassword
}) => {
  const [isFocused, setIsFocused] = useState(false);
  const inputRef = useRef(null);
  const hasValue = value.length > 0;
  const shouldFloatLabel = isFocused || hasValue;
  return /* @__PURE__ */ jsxs("div", {
    className: "relative mt-6",
    children: [/* @__PURE__ */ jsx("input", {
      id,
      ref: inputRef,
      name,
      type,
      value,
      onChange,
      required,
      disabled,
      className: `w-full px-4 py-3 bg-transparent border-2 rounded-lg outline-none transition-all duration-200 ${disabled ? "border-gray-300 text-gray-400 cursor-not-allowed" : "border-gray-400 hover:border-gray-500 focus:border-red-700"} ${showPasswordToggle ? "pr-10" : ""}`,
      onFocus: () => setIsFocused(true),
      onBlur: () => setIsFocused(false)
    }), /* @__PURE__ */ jsxs("label", {
      htmlFor: id,
      className: `absolute left-3 px-1 bg-white dark:bg-gray-900 transition-all duration-200 pointer-events-none ${shouldFloatLabel ? "text-red-700 dark:text-red-800 text-sm -translate-y-6" : "text-gray-500 text-base translate-y-0"} ${disabled ? "text-gray-400" : ""}`,
      children: [label, required && /* @__PURE__ */ jsx("span", {
        className: "text-red-700 ml-1",
        children: "*"
      })]
    }), showPasswordToggle && /* @__PURE__ */ jsx("button", {
      type: "button",
      onClick: onTogglePassword,
      disabled,
      className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",
      "aria-label": type === "password" ? "Show password" : "Hide password",
      children: type === "password" ? /* @__PURE__ */ jsx(AiFillEye, {
        size: 20
      }) : /* @__PURE__ */ jsx(AiFillEyeInvisible, {
        size: 20
      })
    })]
  });
};
function Login() {
  const [formData, setFormData] = useState({
    email: "",
    password: ""
  });
  const [error, setError] = useState(null);
  const [showPassword, setShowPassword] = useState(false);
  const [isVibrating, setIsVibrating] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const buttonRef = useRef(null);
  const setAuthData = useAuthStore((state) => state.setAuthData);
  const navigate = useNavigate();
  useEffect(() => {
    if (isVibrating && buttonRef.current) {
      buttonRef.current.classList.add("animate-vibrate");
      const timer = setTimeout(() => {
        var _a;
        (_a = buttonRef.current) == null ? void 0 : _a.classList.remove("animate-vibrate");
        setIsVibrating(false);
      }, 500);
      return () => clearTimeout(timer);
    }
  }, [isVibrating]);
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d, _e, _f;
    e.preventDefault();
    setError(null);
    setIsLoading(true);
    try {
      const response = await axios.post(`${BASE_URL}/users/login`, formData);
      if ((response == null ? void 0 : response.status) === 201) {
        setAuthData({
          branchcode: (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data[0].branchcode,
          staff_id: response == null ? void 0 : response.data.data[0].staff_id,
          accessToken: response.data.token.accessToken,
          refreshToken: response.data.token.refreshToken,
          isActive: (_b = response.data.data[0]) == null ? void 0 : _b.status,
          permissions: response.data.roleAccess,
          role: response.data.data[0].role
        });
        navigate("/");
      }
    } catch (error2) {
      console.error("Login error:", (_d = (_c = error2 == null ? void 0 : error2.response) == null ? void 0 : _c.data) == null ? void 0 : _d.error);
      setError(((_f = (_e = error2 == null ? void 0 : error2.response) == null ? void 0 : _e.data) == null ? void 0 : _f.error) || "Login failed. Please try again.");
      setIsVibrating(true);
    } finally {
      setIsLoading(false);
    }
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const togglePasswordVisibility = () => {
    setShowPassword(!showPassword);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "grid grid-cols-1 sm:grid-cols-2 h-screen w-full bg-gray-100 dark:bg-gray-100 relative",
    children: [isLoading && /* @__PURE__ */ jsx("div", {
      className: "absolute inset-0 z-50 flex items-center justify-center bg-white bg-opacity-50",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col items-center",
        children: [/* @__PURE__ */ jsx("div", {
          className: "animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-700"
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-4 text-gray-500",
          children: "Authenticating..."
        })]
      })
    }), /* @__PURE__ */ jsx("div", {
      className: "hidden sm:block",
      children: /* @__PURE__ */ jsx("img", {
        className: "w-[600PX] h-[400PX] object-cover mt-[100px]",
        src: alminoLogo$1,
        alt: "Almino Logo"
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "bg-white dark:bg-gray-900 flex flex-col justify-center",
      children: [/* @__PURE__ */ jsx("div", {
        className: "w-full mx-auto flex justify-center",
        children: /* @__PURE__ */ jsx("img", {
          src: alminoLogo,
          className: "w-[100px] h-[100px]",
          alt: "Almino Brand"
        })
      }), /* @__PURE__ */ jsxs("form", {
        className: "max-w-[400px] w-full mx-auto bg-white dark:bg-transparent p-4",
        onSubmit: handleSubmit,
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-transparent text-3xl font-bold text-center py-3 gradient-text",
          children: "Welcome Admin!"
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-6",
          children: [/* @__PURE__ */ jsx(FloatingInput, {
            id: "email",
            name: "email",
            type: "email",
            value: formData.email,
            onChange: handleChange,
            label: "User Email",
            required: true,
            disabled: isLoading
          }), /* @__PURE__ */ jsx(FloatingInput, {
            id: "password",
            name: "password",
            type: showPassword ? "text" : "password",
            value: formData.password,
            onChange: handleChange,
            label: "Password",
            required: true,
            disabled: isLoading,
            showPasswordToggle: true,
            onTogglePassword: togglePasswordVisibility
          }), error && /* @__PURE__ */ jsx("div", {
            className: "text-sm text-red-500 mb-2 animate-pulse",
            children: error
          })]
        }), /* @__PURE__ */ jsxs("button", {
          type: "submit",
          disabled: isLoading,
          className: `w-full my-5 py-3 text-white bg-red-700 hover:bg-red-800 rounded-lg transition-all ${isLoading ? "opacity-70 cursor-not-allowed" : ""}`,
          children: ["Sign In ", /* @__PURE__ */ jsx(IoIosArrowRoundForward, {
            className: "inline",
            size: 25
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx("style", {
      jsx: true,
      global: true,
      children: `
        @keyframes vibrate {
          0% {
            transform: translateX(0);
          }
          25% {
            transform: translateX(-5px);
          }
          50% {
            transform: translateX(5px);
          }
          75% {
            transform: translateX(-5px);
          }
          100% {
            transform: translateX(0);
          }
        }
        .animate-vibrate {
          animation: vibrate 0.1s linear;
        }
      `
    })]
  });
}
const Login$1 = withComponentProps(Login);
const route1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Login$1
}, Symbol.toStringTag, { value: "Module" }));
const getFromLocal = () => {
  if (typeof window !== "undefined") {
    return JSON.parse(localStorage.getItem("sidebar") || "false");
  }
  return false;
};
const useSideBar = create((set) => ({
  isOpen: getFromLocal(),
  toggle: () => {
    set((state) => {
      const newState = !state.isOpen;
      localStorage.setItem("sidebar", JSON.stringify(newState));
      return { isOpen: newState };
    });
  },
  close: () => {
    set(() => {
      localStorage.setItem("sidebar", "false");
      return { isOpen: false };
    });
  }
}));
const Header = () => {
  const { isOpen, toggle } = useSideBar();
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const dropdownRef = useRef(null);
  const navigate = useNavigate$1();
  const clearAuthData = useAuthStore((state) => state.clearAuthData);
  const UserRole = useAuthStore((state) => state.role);
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsDropdownOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);
  const handleLogout = () => {
    clearAuthData();
    navigate("/login");
  };
  return /* @__PURE__ */ jsxs("header", { className: "relative z-10 flex h-[60px] items-center justify-between bg-white px-4 shadow-md transition-colors dark:bg-slate-900 dark:shadow-slate-800", children: [
    /* @__PURE__ */ jsx("div", { className: "flex items-center gap-x-3", children: /* @__PURE__ */ jsx(
      "button",
      {
        className: "btn-ghost flex h-10 flex-shrink-0 items-center gap-x-3 rounded-lg p-2 text-red-700 transition-colors hover:text-white hover:bg-red-700 dark:hover:text-slate-100 size-10",
        onClick: toggle,
        children: /* @__PURE__ */ jsx(ChevronsLeft, { className: isOpen ? "rotate-180" : "" })
      }
    ) }),
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-x-6", children: [
      /* @__PURE__ */ jsx(
        IoIosMailUnread,
        {
          className: "text-gray-500 hover:text-red-700 dark:text-gray-400 dark:hover:text-red-500 cursor-pointer",
          size: 25
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "relative", ref: dropdownRef, children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex items-center gap-2 cursor-pointer",
            onClick: () => setIsDropdownOpen(!isDropdownOpen),
            children: [
              /* @__PURE__ */ jsx("div", { className: "w-8 h-8 rounded-full bg-gray-200 dark:bg-slate-700 flex items-center justify-center overflow-hidden", children: /* @__PURE__ */ jsx(FaUser, { className: "text-gray-500 dark:text-gray-300" }) }),
              /* @__PURE__ */ jsxs("span", { className: "text-sm font-light text-gray-700 dark:text-gray-300 hidden md:inline", children: [
                UserRole || "Admin",
                /* @__PURE__ */ jsx(ChevronsDown, { className: "inline ml-2", size: 15 })
              ] })
            ]
          }
        ),
        isDropdownOpen && /* @__PURE__ */ jsxs("div", { className: "absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 dark:bg-slate-800 dark:border dark:border-slate-700", children: [
          /* @__PURE__ */ jsxs("div", { className: "px-4 py-3 text-sm text-gray-700 dark:text-gray-300 border-b border-gray-100 dark:border-slate-700", children: [
            "Signed in as ",
            /* @__PURE__ */ jsx("span", { className: "font-bold text-red-700 text-sm", children: UserRole })
          ] }),
          /* @__PURE__ */ jsxs(
            Link,
            {
              to: "/account_profile",
              className: "block px-4 py-2 text-sm text-gray-700 ml-4 hover:bg-gray-100 border-b border-gray-300 dark:text-gray-300 dark:hover:bg-slate-700 flex items-center gap-2",
              onClick: (e) => {
                setIsDropdownOpen(false);
              },
              children: [
                /* @__PURE__ */ jsx(FaUser, { className: "text-gray-500 dark:text-gray-400" }),
                "Profile"
              ]
            }
          ),
          /* @__PURE__ */ jsxs(
            "a",
            {
              href: "#",
              className: "block px-4 py-2 text-sm text-gray-700 ml-4 hover:bg-gray-100  border-b border-gray-300 dark:text-gray-300 dark:hover:bg-slate-700 flex items-center gap-2",
              onClick: (e) => {
                e.preventDefault();
                setIsDropdownOpen(false);
              },
              children: [
                /* @__PURE__ */ jsx(FaCog, { className: "text-gray-500 dark:text-gray-400" }),
                "Settings"
              ]
            }
          ),
          /* @__PURE__ */ jsx("div", { className: "border-t border-gray-100 dark:border-slate-700" }),
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: handleLogout,
              className: "block w-full text-left px-4 py-2                                                                                                                                                                                                                                                                                                                                                                                                                                         ml-4 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-slate-700 flex items-center gap-2",
              children: [
                /* @__PURE__ */ jsx(FaSignOutAlt, {}),
                "Logout"
              ]
            }
          )
        ] })
      ] })
    ] })
  ] });
};
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
const navbarLinks = [
  {
    links: [
      {
        label: "Dashboard",
        icon: House,
        path: "/"
      }
    ]
  },
  {
    title: "Branch Management",
    links: [
      {
        label: "Branch",
        icon: Split,
        path: "/branch"
      }
    ]
  },
  {
    title: "User Management",
    links: [
      {
        label: "Employee",
        icon: UserLock,
        path: "/employee"
      },
      {
        label: "Leave",
        icon: CalendarX2,
        path: "/leave"
      },
      {
        label: "Employee Report",
        icon: Contact,
        path: "/employee_report"
      },
      {
        label: "Attandance",
        icon: CalendarCheck,
        path: "/attandance"
      }
    ]
  },
  {
    title: "Sales Management",
    links: [
      {
        label: "Campaign",
        icon: HouseWifi,
        path: "/campaign"
      },
      {
        label: "Leads",
        icon: UserSearch,
        path: "/leads"
      },
      {
        label: "Clients",
        icon: Briefcase,
        path: "/client"
      }
    ]
  },
  {
    title: "Team Management",
    links: [
      {
        label: "Teams",
        icon: UsersRound,
        path: "/team"
      }
    ]
  },
  {
    title: "Project Management",
    links: [
      {
        label: "Project",
        icon: SquareKanban,
        path: "/project"
      },
      {
        label: "Tasks",
        icon: CircleCheckBig,
        path: "/project_tasklist"
      },
      {
        label: "Time Sheet",
        icon: CalendarClock,
        path: "/time_sheet"
      }
    ]
  },
  {
    title: "Account Profile",
    links: [
      {
        label: "Profile",
        icon: UserPen,
        path: "/account_profile"
      }
    ]
  },
  {
    title: "Account Management",
    links: [
      {
        label: "Accounts",
        icon: Calculator,
        path: "/account"
      }
    ]
  },
  {
    title: "Report Section",
    links: [
      {
        label: "Report & Management",
        icon: MessageCircleWarning,
        path: "/reportAnaysis"
      }
    ]
  },
  {
    title: "Notification",
    links: [
      {
        label: "reminder",
        icon: BellRing,
        path: "/notification"
      },
      {
        label: "Calendar",
        icon: CalendarSync,
        path: "/calendar"
      },
      {
        label: "MOM Report",
        icon: MailCheck,
        path: "/mom_report"
      }
    ]
  },
  {
    title: "User Logs",
    links: [
      {
        label: "Active Logs",
        icon: FileClock,
        path: "/active_log"
      }
    ]
  },
  {
    title: "Settings",
    links: [
      {
        label: "Settings",
        icon: Settings$1,
        path: "/settings"
      }
    ]
  }
];
const Sidebar = forwardRef((props, ref) => {
  const { isOpen } = useSideBar();
  return /* @__PURE__ */ jsxs(
    "aside",
    {
      ref,
      className: cn(
        "fixed z-[100] flex h-full w-[260px] flex-col overflow-x-hidden border-r",
        "border-slate-300 bg-white dark:border-slate-700 dark:bg-slate-900",
        "transition-all duration-300",
        isOpen ? "md:w-[70px] md:items-center" : "md:w-[240px]",
        isOpen ? "max-md:-left-full" : "max-md:left-0"
      ),
      children: [
        /* @__PURE__ */ jsx("div", { className: "flex gap-x-3 p-3", children: /* @__PURE__ */ jsx("img", { src: alminoLogo, alt: "Logo", className: "w-full h-auto" }) }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: "flex w-full flex-col gap-y-4 overflow-y-auto overflow-x overflow-x-hidden  p-3",
            style: {
              scrollbarWidth: "none",
              msOverflowStyle: "none"
            },
            children: navbarLinks.map((navbarLink) => /* @__PURE__ */ jsxs(
              "nav",
              {
                className: cn("sidebar-group", isOpen && "md:items-center"),
                children: [
                  !isOpen && /* @__PURE__ */ jsx("p", { className: cn("sidebar-group-title", isOpen && "md:w-[45px]"), children: navbarLink.title }),
                  navbarLink.links.map((link) => /* @__PURE__ */ jsxs(
                    NavLink,
                    {
                      to: link.path,
                      className: cn("sidebar-item", isOpen && "md:w-[45px]"),
                      children: [
                        /* @__PURE__ */ jsx(link.icon, { size: 18, className: "flex-shrink-0" }),
                        !isOpen && /* @__PURE__ */ jsx("p", { className: "whitespace-nowrap", children: link.label })
                      ]
                    },
                    link.path
                  ))
                ]
              },
              `group-${navbarLink.title}`
            ))
          }
        )
      ]
    }
  );
});
Sidebar.displayName = "Sidebar";
Sidebar.prototype = {
  isOpen: PropTypes.bool
};
Sidebar.defaultProps = {
  isOpen: false
};
const useClickOutside = (refs, callback) => {
  useEffect(() => {
    const handleOutsideClick = (event) => {
      console.log("Clicked element:", event.target);
      const isOutside = refs.every((ref) => {
        var _a;
        const contains = (_a = ref == null ? void 0 : ref.current) == null ? void 0 : _a.contains(event.target);
        console.log(`Ref ${ref.current} contains:`, contains);
        return !contains;
      });
      if (isOutside && typeof callback === "function") {
        console.log("Outside click detected");
        callback(event);
      }
    };
    window.addEventListener("mousedown", handleOutsideClick);
    return () => {
      window.removeEventListener("mousedown", handleOutsideClick);
    };
  }, [refs, callback]);
};
const useMediaQuery = (query) => {
  const [matches, setMatches] = useState(false);
  useEffect(() => {
    const media = window.matchMedia(query);
    const updateMatches = () => setMatches(media.matches);
    updateMatches();
    media.addEventListener("change", updateMatches);
    return () => media.removeEventListener("change", updateMatches);
  }, [query]);
  return matches;
};
const Layout = () => {
  const isDesktopDevice = useMediaQuery("(min-width:768px)");
  const sidebarRef = useRef(null);
  useRef(null);
  const {
    isOpen,
    close
  } = useSideBar();
  const location = useLocation();
  const navigate = useNavigate();
  const isLoggedIn = useAuthStore((state) => state.isLoggedIn);
  const accessToken = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    if (!isLoggedIn && !accessToken) {
      navigate("/login", {
        replace: true,
        state: {
          from: location.pathname
        }
      });
    }
  }, [isLoggedIn, accessToken, navigate, location]);
  useClickOutside([sidebarRef], () => {
    if (!isDesktopDevice && isOpen) {
      close();
    }
  });
  if (!isLoggedIn) {
    return null;
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "min-h-screen bg-slate-100 transition-colors dark:bg-slate-950",
    children: [/* @__PURE__ */ jsx("div", {
      className: cn("fixed inset-0 z-40 bg-black/30 transition-opacity duration-300", isOpen && !isDesktopDevice ? "opacity-100 pointer-events-auto" : "opacity-0 pointer-events-none"),
      onClick: () => !isDesktopDevice && close()
    }), /* @__PURE__ */ jsx(Sidebar, {
      ref: sidebarRef
    }), /* @__PURE__ */ jsxs("div", {
      className: cn("transition-[margin] duration-300", isOpen ? "md:ml-[70px]" : "md:ml-[240px]"),
      children: [/* @__PURE__ */ jsx(Header, {}), /* @__PURE__ */ jsx("div", {
        className: "h-[calc(100vh-60px)] overflow-y-auto overflow-x-hidden p-6",
        children: /* @__PURE__ */ jsx(Outlet, {})
      })]
    })]
  });
};
const Layout$1 = withComponentProps(Layout);
const route2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Layout$1
}, Symbol.toStringTag, { value: "Module" }));
Chart.register(
  ArcElement,
  Tooltip,
  Legend
);
const DynamicDoughnutChart = ({ data, className, theme = "light" }) => {
  var _a;
  const chartData = {
    labels: data.labels || [],
    datasets: [
      {
        data: data.values || [],
        backgroundColor: data.colors || generateColors(((_a = data.labels) == null ? void 0 : _a.length) || 0),
        borderColor: theme === "dark" ? "#1f2937" : "#f9fafb",
        borderWidth: 0,
        hoverOffset: 10
      }
    ]
  };
  const options = {
    responsive: true,
    cutout: "50%",
    // <<<<<< Makes it a doughnut with a small width
    plugins: {
      legend: {
        position: "bottom",
        labels: {
          color: theme === "dark" ? "#d1d5db" : "rgb(156 163 175)",
          padding: 10,
          boxWidth: 12,
          boxHeight: 12,
          marging: 20,
          font: {
            size: 12,
            weight: "500",
            family: "Inter, sans-serif"
          }
        }
      },
      title: {
        display: !!data.title,
        text: data.title,
        color: theme === "dark" ? "#f3f4f6" : " rgb(75 85 99)",
        font: {
          size: 18,
          weight: "600",
          family: "Inter, sans-serif"
        },
        padding: {
          top: 10,
          bottom: 30
        }
      },
      tooltip: {
        backgroundColor: theme === "dark" ? "#1f2937" : "#ffffff",
        titleColor: theme === "dark" ? "#e5e7eb" : "#111827",
        bodyColor: theme === "dark" ? "#e5e7eb" : "#111827",
        borderColor: theme === "dark" ? "#374151" : "#e5e7eb",
        borderWidth: 1,
        padding: 8
      }
    }
  };
  return /* @__PURE__ */ jsx("div", { className: twMerge(
    "w-full max-w-md mx-auto p-6 rounded-2xl border transition-all duration-300",
    "shadow-md",
    "dark:bg-gray-800 dark:border-gray-700 bg-white border-gray-200",
    className
  ), children: /* @__PURE__ */ jsx("div", { className: "w-full h-[600px]", children: /* @__PURE__ */ jsx(Doughnut, { data: chartData, options }) }) });
};
function generateColors(count) {
  const baseColors = [
    "#3b82f6",
    "#ef4444",
    "#10b981",
    "#f59e0b",
    "#8b5cf6",
    "#ec4899",
    "#14b8a6",
    "#f97316",
    "#6366f1",
    "#d946ef",
    "#0ea5e9",
    "#84cc16"
  ];
  const extendedColors = Array(count).fill(null).map((_, i) => baseColors[i % baseColors.length]);
  return extendedColors;
}
Chart.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);
const KPIBarChart = ({
  data = {},
  className,
  theme = "light",
  title = "Bar Chart",
  indexAxis = "x",
  stacked = false,
  showPercentage = false,
  borderRadius = 6,
  barPercentage = 0.5,
  categoryPercentage = 0.8
}) => {
  var _a;
  const defaultColors = [
    "#3B82F6",
    // blue-500
    "#10B981",
    // emerald-500
    "#F59E0B",
    // amber-500
    "#EF4444",
    // red-500
    "#8B5CF6",
    // violet-500
    "#EC4899",
    // pink-500
    "#14B8A6",
    // teal-500
    "#F97316",
    // orange-500
    "#6366F1",
    // indigo-500
    "#D946EF"
    // fuchsia-500
  ];
  const chartData = {
    labels: (data == null ? void 0 : data.labels) || [],
    datasets: ((_a = data == null ? void 0 : data.datasets) == null ? void 0 : _a.map((dataset, i) => ({
      ...dataset,
      label: dataset.label || `Dataset ${i + 1}`,
      data: dataset.data || [],
      backgroundColor: dataset.backgroundColor || defaultColors[i % defaultColors.length],
      borderColor: dataset.borderColor || defaultColors[i % defaultColors.length],
      borderWidth: dataset.borderWidth || 1,
      borderRadius: dataset.borderRadius || borderRadius,
      barPercentage: dataset.barPercentage || barPercentage,
      categoryPercentage: dataset.categoryPercentage || categoryPercentage
    }))) || []
  };
  if (chartData.labels.length === 0 || chartData.datasets.length === 0) {
    return /* @__PURE__ */ jsx("div", { className: twMerge(
      "p-4 rounded-lg shadow-sm transition-all duration-300 flex items-center justify-center",
      "dark:bg-gray-800 dark:border-gray-700 bg-white border border-gray-200",
      className
    ), children: /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "No data available" }) });
  }
  const options = {
    indexAxis,
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: "top",
        labels: {
          color: theme === "dark" ? "#e5e7eb" : "#6b7280",
          font: {
            size: 12,
            weight: "500"
          },
          usePointStyle: true,
          pointStyle: "circle",
          padding: 20
        }
      },
      title: {
        display: !!title,
        text: title,
        color: theme === "dark" ? "#f9fafb" : "rgb(75 85 99)",
        font: {
          size: 16,
          weight: "600"
        },
        padding: {
          top: 10,
          bottom: 20
        }
      },
      tooltip: {
        backgroundColor: theme === "dark" ? "#1f2937" : "#ffffff",
        titleColor: theme === "dark" ? "#e5e7eb" : "#111827",
        bodyColor: theme === "dark" ? "#e5e7eb" : "#111827",
        borderColor: theme === "dark" ? "#374151" : "#e5e7eb",
        borderWidth: 1,
        padding: 10,
        callbacks: {
          label: function(context) {
            let label = context.dataset.label || "";
            if (label) {
              label += ": ";
            }
            if (showPercentage) {
              label += context.raw + "%";
            } else {
              label += context.raw;
            }
            return label;
          }
        }
      }
    },
    scales: {
      x: {
        stacked,
        grid: {
          display: false,
          drawBorder: false
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280"
        }
      },
      y: {
        stacked,
        grid: {
          color: theme === "dark" ? "rgba(229, 231, 235, 0.1)" : "rgba(0,0,0,0.05)",
          drawBorder: false
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280",
          callback: function(value) {
            if (showPercentage) {
              return value + "%";
            }
            return value;
          }
        },
        beginAtZero: true
      }
    }
  };
  return /* @__PURE__ */ jsx("div", { className: twMerge(
    "p-4 rounded-lg shadow-sm transition-all duration-300",
    "dark:bg-gray-800 dark:border-gray-700 bg-white border border-gray-200",
    className
  ), children: /* @__PURE__ */ jsx("div", { className: "h-[300px] w-full", children: /* @__PURE__ */ jsx(Bar, { data: chartData, options }) }) });
};
Chart.register(
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  Title,
  Tooltip,
  Legend,
  Filler
);
const DynamicLineGraph = ({ data, className, theme = "light" }) => {
  const defaultDataset = {
    label: "Dataset",
    borderColor: "#3b82f6",
    backgroundColor: "rgba(59, 130, 246, 0.2)",
    borderWidth: 2,
    pointRadius: 3,
    pointHoverRadius: 5,
    pointBackgroundColor: "#ffffff",
    pointBorderColor: function(context) {
      return getColor$1(context.datasetIndex);
    },
    pointBorderWidth: 2,
    tension: 0.4,
    // Increased for smoother curves
    fill: false,
    cubicInterpolationMode: "monotone"
    // For better curve rendering
  };
  const chartData = {
    labels: data.labels || [],
    datasets: data.datasets.map((dataset, index) => ({
      ...defaultDataset,
      ...dataset,
      borderColor: dataset.borderColor || getColor$1(index),
      backgroundColor: dataset.backgroundColor || `${getColor$1(index)}33`,
      // More transparent
      tension: dataset.tension ?? defaultDataset.tension
      // Allow override
    }))
  };
  const options = {
    responsive: true,
    maintainAspectRatio: false,
    interaction: {
      intersect: false,
      mode: "index"
    },
    plugins: {
      legend: {
        position: "top",
        labels: {
          color: theme === "dark" ? "#e5e7eb" : "rgb(156 163 175)",
          font: {
            size: 10,
            weight: "500"
          },
          padding: 20,
          usePointStyle: true,
          pointStyle: "circle"
        }
      },
      title: {
        display: !!data.title,
        text: data.title,
        color: theme === "dark" ? "rgb(156 163 175)" : "rgb(156 163 175)",
        font: {
          size: 18,
          weight: "600"
        },
        padding: {
          top: 10,
          bottom: 20
        }
      },
      tooltip: {
        backgroundColor: theme === "dark" ? "#1f2937" : "#ffffff",
        titleColor: theme === "dark" ? "#e5e7eb" : "#111827",
        bodyColor: theme === "dark" ? "#e5e7eb" : "#111827",
        borderColor: theme === "dark" ? "#374151" : "#e5e7eb",
        borderWidth: 1,
        padding: 5,
        usePointStyle: true,
        callbacks: {
          label: function(context) {
            return `${context.dataset.label}: ${context.parsed.y}`;
          }
        }
      }
    },
    scales: {
      x: {
        grid: {
          display: false,
          drawBorder: false
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280",
          font: {
            size: 11
          }
        }
      },
      y: {
        grid: {
          color: theme === "dark" ? "rgba(229, 231, 235, 0.05)" : "rgba(0, 0, 0, 0.05)",
          drawBorder: false
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280",
          font: {
            size: 11
          },
          padding: 10
        }
      }
    },
    elements: {
      line: {
        borderJoinStyle: "round",
        capBezierPoints: true
      }
    }
  };
  return /* @__PURE__ */ jsx("div", { className: twMerge(
    "p-5 rounded-xl shadow-lg transition-all duration-300",
    "dark:bg-gray-800 dark:border-gray-700 bg-white border-gray-200",
    "border",
    className
  ), children: /* @__PURE__ */ jsx("div", { className: "h-[250px] w-full", children: /* @__PURE__ */ jsx(Line, { data: chartData, options }) }) });
};
function getColor$1(index) {
  const colors = [
    "#3b82f6",
    // blue-500
    "#ef4444",
    // red-500
    "#10b981",
    // emerald-500
    "#f59e0b",
    // amber-500
    "#8b5cf6",
    // violet-500
    "#ec4899",
    // pink-500
    "#14b8a6",
    // teal-500
    "#f97316",
    // orange-500
    "#6366f1",
    // indigo-500
    "#d946ef",
    // fuchsia-500
    "#0ea5e9",
    // sky-500
    "#84cc16"
    // lime-500
  ];
  return colors[index % colors.length];
}
Chart.register(
  ArcElement,
  Tooltip,
  Legend
);
const PaymentProgressCard = ({
  items,
  title = "",
  className = ""
}) => {
  const totalAmount = items.reduce((sum, item) => sum + item.value, 0);
  const getPercentage = (value) => {
    return totalAmount > 0 ? Math.round(value / totalAmount * 100) : 0;
  };
  return /* @__PURE__ */ jsxs("div", { className: `rounded-lg shadow-md p-6 transition-colors duration-300 ${className}`, children: [
    /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold mb-4 dark:text-gray-400 text-gray-500", children: title }),
    items.map((item) => /* @__PURE__ */ jsxs("div", { className: "mb-4 last:mb-2", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-1", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center ", children: [
          item.icon,
          /* @__PURE__ */ jsx("span", { className: "text-sm font-medium dark:text-gray-400 text-gray-700", children: item.label })
        ] }),
        /* @__PURE__ */ jsxs("span", { className: "text-xs font-medium dark:text-dark-300 text-gray-500", children: [
          getPercentage(item.value),
          "%"
        ] })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "w-full rounded-full h-2.5 dark:bg-dark-600 bg-gray-200 dark:bg-gray-600", children: /* @__PURE__ */ jsx(
        "div",
        {
          className: `${item.color} h-2.5 rounded-full transition-all duration-500`,
          style: { width: `${getPercentage(item.value)}%` }
        }
      ) })
    ] }, item.type))
  ] });
};
const Dropdown = ({
  options,
  selectedValue,
  onSelect,
  placeholder = "Select an option",
  className = "",
  disabled = false,
  label,
  name,
  required = false
}) => {
  const [isOpen, setIsOpen] = useState(false);
  const dropdownRef = useRef(null);
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);
  const selectedOption = options.find((opt) => opt.value === selectedValue);
  const toggleDropdown = () => {
    if (!disabled) {
      setIsOpen(!isOpen);
    }
  };
  const handleOptionClick = (value) => {
    onSelect(value);
    setIsOpen(false);
  };
  return /* @__PURE__ */ jsxs("div", { className: `relative ${className}`, ref: dropdownRef, children: [
    label && /* @__PURE__ */ jsxs(
      "label",
      {
        htmlFor: name,
        className: "block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",
        children: [
          label,
          required && /* @__PURE__ */ jsx("span", { className: "text-red-500", children: "*" })
        ]
      }
    ),
    /* @__PURE__ */ jsxs(
      "button",
      {
        type: "button",
        id: name,
        name,
        onClick: toggleDropdown,
        disabled,
        className: `w-full flex justify-between items-center px-4 py-2 text-sm font-medium rounded-sm border shadow-sm
          ${disabled ? "bg-gray-100 dark:bg-gray-700 cursor-not-allowed text-gray-400 dark:text-gray-500" : "bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-gray-700 dark:text-gray-300"}
          border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500`,
        children: [
          /* @__PURE__ */ jsxs("span", { className: "flex items-center truncate", children: [
            (selectedOption == null ? void 0 : selectedOption.icon) && /* @__PURE__ */ jsx("span", { className: "mr-2", children: selectedOption.icon }),
            (selectedOption == null ? void 0 : selectedOption.label) || placeholder
          ] }),
          /* @__PURE__ */ jsx(
            "svg",
            {
              className: `h-5 w-5 text-gray-400 transition-transform duration-200 ${isOpen ? "transform rotate-180" : ""}`,
              xmlns: "http://www.w3.org/2000/svg",
              viewBox: "0 0 20 20",
              fill: "currentColor",
              "aria-hidden": "true",
              children: /* @__PURE__ */ jsx(
                "path",
                {
                  fillRule: "evenodd",
                  d: "M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",
                  clipRule: "evenodd"
                }
              )
            }
          )
        ]
      }
    ),
    isOpen && /* @__PURE__ */ jsx(
      "div",
      {
        className: `absolute z-[15] mt-1 w-full rounded-md shadow-lg overflow-hidden
          bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700`,
        children: /* @__PURE__ */ jsx(
          "ul",
          {
            className: "max-h-60 overflow-auto py-1 text-base focus:outline-none",
            role: "listbox",
            children: options.map((option) => /* @__PURE__ */ jsxs(
              "li",
              {
                onClick: () => handleOptionClick(option.value),
                className: `flex items-center px-4 py-2 text-sm cursor-pointer select-none
                  ${option.value === selectedValue ? "bg-indigo-100 dark:bg-gray-700/15 text-red-700 dark:text-red-500" : "text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-red-700"}`,
                children: [
                  option.icon && /* @__PURE__ */ jsx("span", { className: "mr-2", children: option.icon }),
                  option.label
                ]
              },
              option.value
            ))
          }
        )
      }
    )
  ] });
};
const useBranchStore$1 = create(
  persist(
    (set) => ({
      branches: [],
      managerOptions: [],
      branchCodeOptions: [],
      roleOptions: [],
      isLoading: false,
      error: null,
      fetchBranches: async (token) => {
        try {
          set({ isLoading: true });
          const response = await axios.get(`${BASE_URL}/branch/read`, {
            headers: { Authorization: `Bearer ${token}` }
          });
          const branches = response.data || [];
          const managerOptions = [
            ...new Set(branches.map((b) => b.manager_id))
          ].map((id) => ({
            value: id,
            label: id
          }));
          const branchCodeOptions = [
            ...new Set(branches.map((b) => b.branchcode))
          ].map((code) => ({
            value: code,
            label: code
          }));
          const roleOptions = [...new Set(branches.map((r) => r.role))].map(
            (role) => ({
              value: role,
              label: role
            })
          );
          set({
            branches,
            managerOptions: [
              { value: "", label: "All Managers" },
              ...managerOptions
            ],
            branchCodeOptions: [
              { value: "", label: "All Branch Codes" },
              ...branchCodeOptions
            ],
            roleOptions: [{ value: "", label: "All Role" }, ...roleOptions],
            isLoading: false
          });
          console.log("roleoptionzus", roleOptions);
        } catch (error) {
          set({ error, isLoading: false });
        }
      }
    }),
    {
      name: "Branch-storage"
    }
  )
);
const HrGraphs = () => {
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const [branchCode, setBranchCode] = useState(
    userRole === "superadmin" ? "" : userBranchCode
  );
  const [attendanceData, setAttendanceData] = useState(null);
  const [leaveData, setLeaveData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const { branchCodeOptions, fetchBranches } = useBranchStore$1();
  useEffect(() => {
    if (userRole === "superadmin") {
      fetchBranches(token);
    }
  }, [token, userRole]);
  useEffect(() => {
    if (branchCode) {
      fetchData();
    }
  }, [branchCode]);
  const fetchData = async () => {
    setLoading(true);
    try {
      const attendanceResponse = await axios.get(
        `${BASE_URL}/report/attendancesummary/read?branchcode=${branchCode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setAttendanceData(attendanceResponse.data.data);
      const leaveResponse = await axios.get(
        `${BASE_URL}/users/leavereq/read?branchcode=${branchCode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setLeaveData(leaveResponse.data.data);
    } catch (err) {
      console.error("Error fetching data", err);
      setError("Failed to fetch data");
      toast.error("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const getAttendanceChartData = () => {
    if (!attendanceData) return null;
    const summary = attendanceData.attendance_summary;
    return {
      overallData: {
        title: "Attendance Status",
        labels: ["Present", "Absent", "On Leave", "Waiting"],
        values: [
          summary.present_count,
          summary.absent_count,
          summary.approved_leave_count,
          summary.waitingforlogin_count
        ],
        colors: ["#10B981", "#EF4444", "#3B82F6", "#F59E0B"]
      },
      leaveTypeData: {
        title: "Leave Types",
        labels: ["Full Day", "Half Day", "Hourly"],
        values: [
          summary.approved_leave_count - (summary.half_day_leave_count + summary.hourly_leave_count),
          summary.half_day_leave_count,
          summary.hourly_leave_count
        ],
        colors: ["#3B82F6", "#8B5CF6", "#EC4899"]
      },
      departmentData: {
        labels: attendanceData.department_counts.map((dept) => dept.department),
        datasets: [
          {
            label: "Present",
            data: attendanceData.department_counts.map(
              (dept) => dept.present_count
            ),
            backgroundColor: "#10B981"
          },
          {
            label: "Absent",
            data: attendanceData.department_counts.map(
              (dept) => dept.absent_count
            ),
            backgroundColor: "#EF4444"
          },
          {
            label: "On Leave",
            data: attendanceData.department_counts.map(
              (dept) => dept.approved_leave_count
            ),
            backgroundColor: "#3B82F6"
          },
          {
            label: "Waiting",
            data: attendanceData.department_counts.map(
              (dept) => dept.waitingforlogin_count
            ),
            backgroundColor: "#F59E0B"
          }
        ]
      }
    };
  };
  const getLeaveChartData = () => {
    if (!leaveData) return null;
    const leaveTypeCounts = leaveData.reduce((acc, leave) => {
      acc[leave.leave_type] = (acc[leave.leave_type] || 0) + 1;
      return acc;
    }, {});
    const leaveStatusCounts = leaveData.reduce((acc, leave) => {
      acc[leave.status] = (acc[leave.status] || 0) + 1;
      return acc;
    }, {});
    const topEmployees = leaveData.reduce((acc, leave) => {
      const existing = acc.find((item) => item.staff_id === leave.staff_id);
      if (existing) {
        existing.count += 1;
      } else {
        acc.push({
          name: leave.staff_name,
          count: 1,
          staff_id: leave.staff_id
        });
      }
      return acc;
    }, []).sort((a, b) => b.count - a.count).slice(0, 5);
    return {
      leaveTypeData: {
        title: "Leave Requests by Type",
        labels: Object.keys(leaveTypeCounts),
        values: Object.values(leaveTypeCounts),
        colors: ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#8B5CF6"]
      },
      leaveStatusData: {
        title: "Leave Requests by Status",
        labels: Object.keys(leaveStatusCounts),
        values: Object.values(leaveStatusCounts),
        colors: ["#10B981", "#F59E0B", "#EF4444", "#3B82F6"]
      },
      leaveByEmployee: {
        labels: topEmployees.map((emp) => emp.name),
        datasets: [
          {
            label: "Leave Requests",
            data: topEmployees.map((emp) => emp.count),
            backgroundColor: "#3B82F6"
          }
        ]
      }
    };
  };
  const attendanceChartData = getAttendanceChartData();
  const leaveChartData = getLeaveChartData();
  return /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-6", children: [
      /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Branch Analytics Dashboard" }),
      userRole === "superadmin" && /* @__PURE__ */ jsx(
        Dropdown,
        {
          options: branchCodeOptions,
          selectedValue: branchCode,
          onSelect: setBranchCode,
          placeholder: "Select Branch",
          className: "w-[250px]"
        }
      )
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-8", children: "Loading data..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-8", children: error }),
    attendanceData && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-5 gap-4 mb-6", children: [
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Total Employees" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold", children: attendanceData.total_employees })
          ] }),
          /* @__PURE__ */ jsx(Users, { className: "text-blue-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Present Today" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-green-600", children: attendanceData.attendance_summary.present_count })
          ] }),
          /* @__PURE__ */ jsx(CheckCircle, { className: "text-green-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Absent Today" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-red-600", children: attendanceData.attendance_summary.absent_count })
          ] }),
          /* @__PURE__ */ jsx(XCircle, { className: "text-red-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "On Leave" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-blue-600", children: attendanceData.attendance_summary.approved_leave_count })
          ] }),
          /* @__PURE__ */ jsx(BookOpen, { className: "text-blue-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Waiting to Login" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-yellow-600", children: attendanceData.attendance_summary.waitingforlogin_count })
          ] }),
          /* @__PURE__ */ jsx(AlertCircle, { className: "text-yellow-500", size: 24 })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6", children: [
        (attendanceChartData == null ? void 0 : attendanceChartData.overallData) && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: attendanceChartData.overallData,
            className: "h-[400px] w-full"
          }
        ) }),
        (attendanceChartData == null ? void 0 : attendanceChartData.leaveTypeData) && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: attendanceChartData.leaveTypeData,
            className: "h-[400px] w-full"
          }
        ) }),
        (attendanceChartData == null ? void 0 : attendanceChartData.departmentData) && /* @__PURE__ */ jsx(
          KPIBarChart,
          {
            data: attendanceChartData.departmentData,
            title: "Department-wise Attendance",
            stacked: true
          }
        )
      ] })
    ] }),
    leaveData && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-6", children: [
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Total Leave Requests" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold", children: leaveData.length })
          ] }),
          /* @__PURE__ */ jsx(BookOpen, { className: "text-blue-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Approved Leaves" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-green-600", children: leaveData.filter((leave) => leave.status === "approved").length })
          ] }),
          /* @__PURE__ */ jsx(CheckCircle, { className: "text-green-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Pending Leaves" }),
            /* @__PURE__ */ jsx("p", { className: "text-2xl font-bold text-yellow-600", children: leaveData.filter((leave) => leave.status === "pending").length })
          ] }),
          /* @__PURE__ */ jsx(Clock, { className: "text-yellow-500", size: 24 })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6", children: [
        (leaveChartData == null ? void 0 : leaveChartData.leaveTypeData) && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: leaveChartData.leaveTypeData,
            className: "h-[400px] w-full"
          }
        ) }),
        (leaveChartData == null ? void 0 : leaveChartData.leaveByEmployee) && /* @__PURE__ */ jsx(
          KPIBarChart,
          {
            data: leaveChartData.leaveByEmployee,
            title: "Top Employees by Leave Requests"
          }
        ),
        (leaveChartData == null ? void 0 : leaveChartData.leaveStatusData) && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: leaveChartData.leaveStatusData,
            className: "h-[400px] w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mt-6 bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden", children: [
        /* @__PURE__ */ jsx("div", { className: "p-4 border-b dark:border-gray-700", children: /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold", children: "Recent Leave Requests" }) }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700", children: [
          /* @__PURE__ */ jsx("thead", { className: "bg-gray-50 dark:bg-gray-700", children: /* @__PURE__ */ jsxs("tr", { children: [
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Employee" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Leave Type" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Dates" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Status" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Approved By" })
          ] }) }),
          /* @__PURE__ */ jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: leaveData.slice(0, 5).map((leave) => /* @__PURE__ */ jsxs("tr", { children: [
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap", children: [
              /* @__PURE__ */ jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100", children: leave.staff_name }),
              /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 dark:text-gray-400", children: leave.staff_id })
            ] }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 capitalize", children: leave.leave_type }),
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap", children: [
              /* @__PURE__ */ jsxs("div", { className: "text-sm text-gray-900 dark:text-gray-100", children: [
                new Date(leave.start_date).toLocaleDateString(),
                " -",
                " ",
                new Date(leave.end_date).toLocaleDateString()
              ] }),
              leave.approved_dates && /* @__PURE__ */ jsxs("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
                "Approved: ",
                leave.approved_dates.join(", ")
              ] })
            ] }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx(
              "span",
              {
                className: `px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                          ${leave.status === "approved" ? "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" : leave.status === "pending" ? "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200" : "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,
                children: leave.status
              }
            ) }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300", children: leave.approved_by_name || "-" })
          ] }, leave.req_id)) })
        ] }) })
      ] })
    ] }),
    !loading && !attendanceData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: branchCode ? "No data available for selected branch" : "Please select a branch to view analytics" })
  ] });
};
const AccountantDashboard = () => {
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const [branchCode, setBranchCode] = useState(
    userRole === "superadmin" ? "" : userBranchCode
  );
  const [clientSummaryData, setClientSummaryData] = useState([]);
  const [invoiceData, setInvoiceData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const { branchCodeOptions, fetchBranches } = useBranchStore$1();
  useEffect(() => {
    if (userRole === "superadmin") {
      fetchBranches(token);
    }
  }, [token, userRole]);
  useEffect(() => {
    if (branchCode) {
      fetchData();
    }
  }, [branchCode]);
  const fetchData = async () => {
    setLoading(true);
    try {
      const clientResponse = await axios.get(
        `${BASE_URL}/report/branchsummary/read?branchcode=${branchCode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setClientSummaryData(clientResponse.data.data);
      const invoiceResponse = await axios.get(
        `${BASE_URL}/project/invoice/read?branchcode=${branchCode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setInvoiceData(invoiceResponse.data.data);
    } catch (err) {
      console.error("Error fetching data", err);
      setError("Failed to fetch data");
      toast.error("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const getPaymentSummaryData = () => {
    if (!invoiceData.length) return null;
    const totalAmount = invoiceData.reduce(
      (sum, item) => sum + parseFloat(item.invoice.final_amount),
      0
    );
    const paidAmount = invoiceData.reduce(
      (sum, item) => sum + parseFloat(item.invoice.paid_amount),
      0
    );
    const balanceAmount = invoiceData.reduce(
      (sum, item) => sum + parseFloat(item.invoice.balance_amount),
      0
    );
    const today = /* @__PURE__ */ new Date();
    const overdueInvoices = invoiceData.filter((item) => {
      const dueDate = new Date(item.invoice.due_date);
      return dueDate < today && parseFloat(item.invoice.balance_amount) > 0;
    });
    const overdueAmount = overdueInvoices.reduce(
      (sum, item) => sum + parseFloat(item.invoice.balance_amount),
      0
    );
    return {
      totalAmount,
      paidAmount,
      balanceAmount,
      overdueCount: overdueInvoices.length,
      overdueAmount
    };
  };
  const getClientPaymentData = () => {
    if (!clientSummaryData.length) return null;
    return clientSummaryData.map((client) => ({
      clientName: client.client_name,
      totalAmount: parseFloat(client.total_client_amount),
      paidAmount: parseFloat(client.total_paid_amount),
      balanceAmount: parseFloat(client.total_balance_amount)
    }));
  };
  const getInvoiceStatusData = () => {
    if (!invoiceData.length) return null;
    const statusCounts = invoiceData.reduce((acc, item) => {
      const status = item.invoice.status;
      acc[status] = (acc[status] || 0) + 1;
      return acc;
    }, {});
    return {
      title: "Invoice Status",
      labels: Object.keys(statusCounts).map(
        (key) => key.replace(/_/g, " ").replace(/\b\w/g, (l) => l.toUpperCase())
      ),
      values: Object.values(statusCounts),
      colors: ["#10B981", "#F59E0B", "#EF4444", "#3B82F6"]
    };
  };
  const getPaymentTimelineData = () => {
    if (!invoiceData.length) return null;
    const monthlyData = invoiceData.reduce((acc, item) => {
      const date = new Date(item.invoice.invoice_date);
      const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
      if (!acc[monthYear]) {
        acc[monthYear] = {
          paid: 0,
          pending: parseFloat(item.invoice.balance_amount),
          total: parseFloat(item.invoice.final_amount)
        };
      } else {
        acc[monthYear].paid += parseFloat(item.invoice.paid_amount);
        acc[monthYear].pending += parseFloat(item.invoice.balance_amount);
        acc[monthYear].total += parseFloat(item.invoice.final_amount);
      }
      return acc;
    }, {});
    const months = Object.keys(monthlyData).sort();
    return {
      title: "Payment Timeline",
      labels: months,
      datasets: [
        {
          label: "Paid",
          data: months.map((month) => monthlyData[month].paid),
          borderColor: "#10B981",
          backgroundColor: "rgba(16, 185, 129, 0.2)"
        },
        {
          label: "Pending",
          data: months.map((month) => monthlyData[month].pending),
          borderColor: "#F59E0B",
          backgroundColor: "rgba(245, 158, 11, 0.2)"
        },
        {
          label: "Total",
          data: months.map((month) => monthlyData[month].total),
          borderColor: "#3B82F6",
          backgroundColor: "rgba(59, 130, 246, 0.2)"
        }
      ]
    };
  };
  const getProjectStatusData = () => {
    if (!clientSummaryData.length) return null;
    const statusData = clientSummaryData.reduce((acc, client) => {
      acc.draft += parseInt(client.draft_projects);
      acc.planning += parseInt(client.planning_projects);
      acc.inProcess += parseInt(client.inprocess_projects);
      acc.completed += parseInt(client.completed_projects);
      return acc;
    }, { draft: 0, planning: 0, inProcess: 0, completed: 0 });
    return {
      title: "Project Status",
      labels: ["Draft", "Planning", "In Process", "Completed"],
      values: [
        statusData.draft,
        statusData.planning,
        statusData.inProcess,
        statusData.completed
      ],
      colors: ["#F59E0B", "#3B82F6", "#8B5CF6", "#10B981"]
    };
  };
  const getClientPaymentBarData = () => {
    if (!clientSummaryData.length) return null;
    return {
      labels: clientSummaryData.map((client) => client.client_name),
      datasets: [
        {
          label: "Total Amount",
          data: clientSummaryData.map((client) => parseFloat(client.total_client_amount)),
          backgroundColor: "#3B82F6"
        },
        {
          label: "Paid Amount",
          data: clientSummaryData.map((client) => parseFloat(client.total_paid_amount)),
          backgroundColor: "#10B981"
        },
        {
          label: "Balance Amount",
          data: clientSummaryData.map((client) => parseFloat(client.total_balance_amount)),
          backgroundColor: "#F59E0B"
        }
      ]
    };
  };
  const paymentSummary = getPaymentSummaryData();
  getClientPaymentData();
  const invoiceStatusData = getInvoiceStatusData();
  const paymentTimelineData = getPaymentTimelineData();
  const projectStatusData = getProjectStatusData();
  const clientPaymentBarData = getClientPaymentBarData();
  const progressItems = [
    {
      type: "paid",
      value: (paymentSummary == null ? void 0 : paymentSummary.paidAmount) || 0,
      color: "bg-green-500",
      icon: /* @__PURE__ */ jsx(CheckCircle, { className: "text-green-500 mr-2" }),
      label: "Paid"
    },
    {
      type: "pending",
      value: (paymentSummary == null ? void 0 : paymentSummary.balanceAmount) || 0,
      color: "bg-yellow-500",
      icon: /* @__PURE__ */ jsx(Clock, { className: "text-yellow-500 mr-2" }),
      label: "Pending"
    },
    {
      type: "overdue",
      value: (paymentSummary == null ? void 0 : paymentSummary.overdueAmount) || 0,
      color: "bg-red-500",
      icon: /* @__PURE__ */ jsx(AlertCircle, { className: "text-red-500 mr-2" }),
      label: "Overdue"
    }
  ];
  return /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-6", children: [
      /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Accountant Dashboard" }),
      userRole === "superadmin" && /* @__PURE__ */ jsx(
        Dropdown,
        {
          options: branchCodeOptions,
          selectedValue: branchCode,
          onSelect: setBranchCode,
          placeholder: "Select Branch",
          className: "w-[250px]"
        }
      )
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-8", children: "Loading data..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-8", children: error }),
    clientSummaryData.length > 0 && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4 mb-6", children: [
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Total Revenue" }),
            /* @__PURE__ */ jsxs("p", { className: "text-2xl font-bold", children: [
              "",
              paymentSummary == null ? void 0 : paymentSummary.totalAmount.toLocaleString()
            ] })
          ] }),
          /* @__PURE__ */ jsx(DollarSign, { className: "text-blue-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Paid Amount" }),
            /* @__PURE__ */ jsxs("p", { className: "text-2xl font-bold text-green-600", children: [
              "",
              paymentSummary == null ? void 0 : paymentSummary.paidAmount.toLocaleString()
            ] })
          ] }),
          /* @__PURE__ */ jsx(CreditCard, { className: "text-green-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Pending Amount" }),
            /* @__PURE__ */ jsxs("p", { className: "text-2xl font-bold text-yellow-600", children: [
              "",
              paymentSummary == null ? void 0 : paymentSummary.balanceAmount.toLocaleString()
            ] })
          ] }),
          /* @__PURE__ */ jsx(TrendingDown, { className: "text-yellow-500", size: 24 })
        ] }) }),
        /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400", children: "Overdue Amount" }),
            /* @__PURE__ */ jsxs("p", { className: "text-2xl font-bold text-red-600", children: [
              "",
              paymentSummary == null ? void 0 : paymentSummary.overdueAmount.toLocaleString()
            ] })
          ] }),
          /* @__PURE__ */ jsx(AlertCircle, { className: "text-red-500", size: 24 })
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-15 mb-10 mt-10", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-tr-4xl rounded-bl-4xl shadow-lg overflow-hidden", children: [
          /* @__PURE__ */ jsx("div", { className: "bg-red-800 dark:bg-red-800 px-5 py-2", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-bold text-white", children: "Accounts Overview" }) }),
          /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col mb-4 p-3 bg-red-50 dark:bg-gray-700 rounded-lg", children: [
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 mb-1", children: [
                /* @__PURE__ */ jsx(FaMoneyBillWave, { className: "text-red-700 dark:text-red-800", size: 20 }),
                /* @__PURE__ */ jsx("h3", { className: "text-lg font-medium text-gray-700 dark:text-gray-300", children: "Total Revenue" })
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "text-xl font-bold text-red-700 dark:text-red-800", children: [
                "",
                paymentSummary == null ? void 0 : paymentSummary.totalAmount.toLocaleString()
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mb-1", children: [
                  /* @__PURE__ */ jsx(FileText, { className: "text-green-600 dark:text-green-400", size: 16 }),
                  /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-600 dark:text-gray-300", children: "Total Invoices" })
                ] }),
                /* @__PURE__ */ jsx("p", { className: "text-lg font-bold text-gray-800 dark:text-white", children: invoiceData.length })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mb-2", children: [
                  /* @__PURE__ */ jsx(Clock, { className: "text-amber-600 dark:text-amber-400", size: 16 }),
                  /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-600 dark:text-gray-300", children: "Pending Payments" })
                ] }),
                /* @__PURE__ */ jsx("p", { className: "text-lg font-bold text-gray-800 dark:text-white", children: invoiceData.filter((inv) => parseFloat(inv.invoice.balance_amount) > 0).length })
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-tr-4xl rounded-bl-4xl shadow-lg overflow-hidden", children: [
          /* @__PURE__ */ jsx("div", { className: "bg-red-800 dark:bg-red-800 px-5 py-2 ", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-bold text-white", children: "Projects Overview" }) }),
          /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col mb-4 p-3 bg-red-50 dark:bg-gray-700 rounded-lg", children: [
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 mb-1", children: [
                /* @__PURE__ */ jsx(BookOpen, { className: "text-red-700 dark:text-red-800", size: 20 }),
                /* @__PURE__ */ jsx("h3", { className: "text-lg font-medium text-gray-700 dark:text-gray-300", children: "Total Projects" })
              ] }),
              /* @__PURE__ */ jsx("p", { className: "text-xl font-bold text-red-700 dark:text-red-800", children: clientSummaryData.reduce((sum, client) => sum + parseInt(client.total_projects), 0) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mb-1", children: [
                  /* @__PURE__ */ jsx(CheckCircle, { className: "text-green-600 dark:text-green-400", size: 16 }),
                  /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-600 dark:text-gray-300", children: "Completed" })
                ] }),
                /* @__PURE__ */ jsx("p", { className: "text-lg font-bold text-gray-800 dark:text-white", children: clientSummaryData.reduce((sum, client) => sum + parseInt(client.completed_projects), 0) })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mb-2", children: [
                  /* @__PURE__ */ jsx(Clock, { className: "text-amber-600 dark:text-amber-400", size: 16 }),
                  /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-600 dark:text-gray-300", children: "In Progress" })
                ] }),
                /* @__PURE__ */ jsx("p", { className: "text-lg font-bold text-gray-800 dark:text-white", children: clientSummaryData.reduce((sum, client) => sum + parseInt(client.inprocess_projects), 0) })
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsx("div", { className: "mt-10", children: /* @__PURE__ */ jsx(
          PaymentProgressCard,
          {
            items: progressItems,
            title: "Payment Status",
            className: "bg-white dark:bg-gray-800 p-4 rounded-lg shadow "
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-3 ", children: [
        invoiceStatusData && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: invoiceStatusData,
            className: "h-[450px] w-full"
          }
        ) }),
        projectStatusData && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicDoughnutChart,
          {
            data: projectStatusData,
            className: "h-[450px] w-full"
          }
        ) }),
        paymentTimelineData && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          DynamicLineGraph,
          {
            data: paymentTimelineData,
            className: "h-[350px] w-full "
          }
        ) }),
        clientPaymentBarData && /* @__PURE__ */ jsx("div", { className: " dark:bg-gray-800 p-4 ", children: /* @__PURE__ */ jsx(
          KPIBarChart,
          {
            data: clientPaymentBarData,
            title: "Client-wise Payments",
            className: "h-[350px] w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mt-6 bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden", children: [
        /* @__PURE__ */ jsx("div", { className: "p-4 border-b dark:border-gray-700", children: /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold", children: "Recent Invoices" }) }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxs("table", { className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700", children: [
          /* @__PURE__ */ jsx("thead", { className: "bg-gray-50 dark:bg-gray-700", children: /* @__PURE__ */ jsxs("tr", { children: [
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Invoice No" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Client" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Project" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Amount" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Paid" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Balance" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Status" }),
            /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider", children: "Due Date" })
          ] }) }),
          /* @__PURE__ */ jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: invoiceData.slice(0, 5).map((invoice) => /* @__PURE__ */ jsxs("tr", { children: [
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap", children: [
              /* @__PURE__ */ jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100", children: invoice.invoice.invoice_no }),
              /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: new Date(invoice.invoice.invoice_date).toLocaleDateString() })
            ] }),
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap", children: [
              /* @__PURE__ */ jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100", children: invoice.invoice.client_name }),
              /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 dark:text-gray-400", children: invoice.invoice.company_name })
            ] }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300", children: invoice.invoice.project_title }),
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100", children: [
              "",
              parseFloat(invoice.invoice.final_amount).toLocaleString()
            ] }),
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600", children: [
              "",
              parseFloat(invoice.invoice.paid_amount).toLocaleString()
            ] }),
            /* @__PURE__ */ jsxs("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium text-yellow-600", children: [
              "",
              parseFloat(invoice.invoice.balance_amount).toLocaleString()
            ] }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx(
              "span",
              {
                className: `px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                          ${invoice.invoice.status === "paid" ? "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" : invoice.invoice.status === "pending" ? "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200" : "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,
                children: invoice.invoice.status.replace(/_/g, " ").replace(/\b\w/g, (l) => l.toUpperCase())
              }
            ) }),
            /* @__PURE__ */ jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsx("div", { className: `text-sm ${new Date(invoice.invoice.due_date) < /* @__PURE__ */ new Date() && parseFloat(invoice.invoice.balance_amount) > 0 ? "text-red-600 font-medium" : "text-gray-500 dark:text-gray-300"}`, children: new Date(invoice.invoice.due_date).toLocaleDateString() }) })
          ] }, invoice.invoice.invoice_id)) })
        ] }) })
      ] })
    ] }),
    !loading && clientSummaryData.length === 0 && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: branchCode ? "No data available for selected branch" : "Please select a branch to view analytics" })
  ] });
};
const Dashboard = () => {
  const [notifications, setNotifications] = useState([
    {
      id: 1,
      date: "15 Jun",
      status: "",
      message: "Payroll processed for June (8.42L)",
      isNew: true,
      read: false
    },
    {
      id: 2,
      date: "15 Jun",
      status: "",
      message: "Payroll processed for June (8.42L)",
      isNew: false,
      read: true
    },
    {
      id: 3,
      date: "15 Jun",
      status: "",
      message: "Payroll processed for June (8.42L)",
      isNew: true,
      read: false
    }
    // ... other notifications
  ]);
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx(HrGraphs, {}), /* @__PURE__ */ jsx(AccountantDashboard, {})]
  });
};
const home = withComponentProps(Dashboard);
const route3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: home
}, Symbol.toStringTag, { value: "Module" }));
const DataTable = ({
  thead,
  tbody,
  isSearch = false,
  handleSearch,
  searchPlaceholder = "Search...",
  className = "",
  tableClassName = "",
  isLoading = false,
  noDataText = "No Data Found",
  maxHeight = "400px",
  maxWidth = "100%"
  // Default max height for vertical scroll
}) => {
  const header = (thead == null ? void 0 : thead()) || [];
  const bodyData = (tbody == null ? void 0 : tbody()) || [];
  return /* @__PURE__ */ jsx("div", { className: `w-full overflow-auto ${className}`, children: /* @__PURE__ */ jsx(
    "div",
    {
      className: "overflow-auto scrollbar-color:_#cbd5e1_transparent] dark:[scrollbar-color:_#334155_transparent]",
      style: {
        maxHeight,
        overflowX: "auto",
        maxWidth
      },
      children: /* @__PURE__ */ jsxs("table", { className: `w-full border-collapse ${tableClassName}`, children: [
        /* @__PURE__ */ jsx("thead", { className: "bg-[var(--color-primary)] dark:bg-red-800 sticky top-0 z-[5]", children: /* @__PURE__ */ jsx("tr", { children: header.map((header2, index) => /* @__PURE__ */ jsx(
          "th",
          {
            className: "px-6 py-3 text-left text-xs font-medium text-white dark:text-gray-200 uppercase tracking-wider",
            children: header2.data
          },
          index
        )) }) }),
        /* @__PURE__ */ jsx("tbody", { className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700", children: isLoading ? /* @__PURE__ */ jsx("tr", { children: /* @__PURE__ */ jsx("td", { colSpan: header.length, className: "px-6 py-6 text-center text-gray-600 dark:text-gray-400 text-sm", children: "Loading..." }) }) : (bodyData == null ? void 0 : bodyData.length) > 0 ? bodyData.map((row, rowIndex) => /* @__PURE__ */ jsx("tr", { className: "hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors", children: row == null ? void 0 : row.data.map((cell, cellIndex) => /* @__PURE__ */ jsx(
          "td",
          {
            className: "px-6 py-2 text-sm text-gray-900 dark:text-gray-200 whitespace-nowrap",
            children: cell.data
          },
          cellIndex
        )) }, rowIndex)) : /* @__PURE__ */ jsx("tr", { children: /* @__PURE__ */ jsx("td", { colSpan: header.length, className: "px-4 py-5 text-center text-gray-600 dark:text-gray-400 text-sm", children: noDataText }) }) })
      ] })
    }
  ) });
};
DataTable.propTypes = {
  thead: PropTypes.func.isRequired,
  tbody: PropTypes.func.isRequired,
  isSearch: PropTypes.bool,
  handleSearch: PropTypes.func,
  searchPlaceholder: PropTypes.string,
  className: PropTypes.string,
  tableClassName: PropTypes.string,
  isLoading: PropTypes.bool,
  noDataText: PropTypes.node,
  maxHeight: PropTypes.string
  // Add prop for dynamic height control
};
const CustomPagination = ({
  total = 0,
  currentPage = 1,
  defaultPageSize = 10,
  onChange,
  paginationLabel = "items",
  isScroll = false
}) => {
  const totalPages = Math.ceil(total / defaultPageSize);
  const startItem = (currentPage - 1) * defaultPageSize + 1;
  const endItem = Math.min(currentPage * defaultPageSize, total);
  const handlePageChange = (page) => {
    if (page !== currentPage && page >= 1 && page <= totalPages) {
      onChange(page);
      if (isScroll) {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    }
  };
  const getVisiblePages = () => {
    const visiblePages = [];
    const maxVisible = 3;
    visiblePages.push(1);
    let start = Math.max(2, currentPage - 1);
    let end = Math.min(totalPages - 1, currentPage + 1);
    if (currentPage <= maxVisible) {
      end = maxVisible + 1;
    } else if (currentPage >= totalPages - maxVisible + 1) {
      start = totalPages - maxVisible;
    }
    if (start > 2) {
      visiblePages.push("...");
    }
    for (let i = start; i <= end; i++) {
      if (i > 1 && i < totalPages) {
        visiblePages.push(i);
      }
    }
    if (end < totalPages - 1) {
      visiblePages.push("...");
    }
    if (totalPages > 1) {
      visiblePages.push(totalPages);
    }
    return visiblePages;
  };
  if (totalPages <= 1) return null;
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col sm:flex-row justify-between items-center gap-4 p-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx("span", { className: "px-3 py-1 bg-red-100 dark:bg-gray-700 text-red-800 dark:text-gray-200 rounded-full font-medium", children: startItem }),
      /* @__PURE__ */ jsx("span", { className: "text-gray-500 dark:text-gray-400", children: "-" }),
      /* @__PURE__ */ jsx("span", { className: "px-3 py-1 bg-red-100 dark:bg-gray-700 text-red-800 dark:text-gray-200 rounded-full font-medium", children: endItem }),
      /* @__PURE__ */ jsxs("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: [
        "of ",
        total,
        " ",
        paginationLabel
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => handlePageChange(currentPage - 1),
          disabled: currentPage === 1,
          className: `p-2 rounded-md ${currentPage === 1 ? "bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed" : "bg-[var(--color-primary)] dark:bg-red-800 text-white hover:bg-red-800 transition-colors"}`,
          "aria-label": "Previous page",
          children: /* @__PURE__ */ jsx(
            "svg",
            {
              xmlns: "http://www.w3.org/2000/svg",
              className: "h-5 w-5",
              viewBox: "0 0 20 20",
              fill: "currentColor",
              children: /* @__PURE__ */ jsx(
                "path",
                {
                  fillRule: "evenodd",
                  d: "M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",
                  clipRule: "evenodd"
                }
              )
            }
          )
        }
      ),
      getVisiblePages().map(
        (page, index) => page === "..." ? /* @__PURE__ */ jsx(
          "span",
          {
            className: "px-3 py-1 text-gray-500 dark:text-gray-400",
            children: "..."
          },
          `ellipsis-${index}`
        ) : /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => handlePageChange(page),
            className: `px-3 py-1 rounded-md ${page === currentPage ? "bg-[var(--color-primary)] dark:bg-red-800  text-white" : "bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,
            children: page
          },
          page
        )
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => handlePageChange(currentPage + 1),
          disabled: currentPage === totalPages,
          className: `p-2 rounded-md ${currentPage === totalPages ? "bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed" : "bg-[var(--color-primary)] dark:bg-red-800 text-white hover:bg-red-800 transition-colors"}`,
          "aria-label": "Next page",
          children: /* @__PURE__ */ jsx(
            "svg",
            {
              xmlns: "http://www.w3.org/2000/svg",
              className: "h-5 w-5",
              viewBox: "0 0 20 20",
              fill: "currentColor",
              children: /* @__PURE__ */ jsx(
                "path",
                {
                  fillRule: "evenodd",
                  d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                  clipRule: "evenodd"
                }
              )
            }
          )
        }
      )
    ] })
  ] });
};
CustomPagination.propTypes = {
  total: PropTypes.number,
  currentPage: PropTypes.number,
  defaultPageSize: PropTypes.number,
  onChange: PropTypes.func.isRequired,
  paginationLabel: PropTypes.string,
  isScroll: PropTypes.bool
};
const SearchInput = ({
  placeholder = "Search...",
  onChange,
  value = "",
  className = ""
}) => {
  return /* @__PURE__ */ jsxs("div", { className: `mb-4 relative ${className}`, children: [
    /* @__PURE__ */ jsx("div", { className: "absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsx(
      "svg",
      {
        className: "h-5 w-5 text-gray-400 dark:text-gray-500",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        children: /* @__PURE__ */ jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeWidth: 2,
            d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
          }
        )
      }
    ) }),
    /* @__PURE__ */ jsx(
      "input",
      {
        type: "text",
        value,
        placeholder,
        onChange: (e) => onChange(e.target.value),
        className: `
          w-[180px]
          pl-10 pr-4 py-2 
          border border-indigo-400 dark:indigo-gray-400 
          rounded-sm 
          focus:outline-none focus:ring-1 focus:border-indigo-200
          bg-white dark:bg-gray-800 
          text-gray-900 dark:text-gray-100 
          placeholder-gray-400 dark:placeholder-gray-500
          transition-all duration-200
          shadow-sm
        `
      }
    ),
    value && /* @__PURE__ */ jsx(
      "button",
      {
        onClick: () => onChange(""),
        className: "absolute inset-y-0 right-0 pr-3 flex items-center",
        children: /* @__PURE__ */ jsx(
          "svg",
          {
            className: "h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            children: /* @__PURE__ */ jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M6 18L18 6M6 6l12 12"
              }
            )
          }
        )
      }
    )
  ] });
};
SearchInput.propTypes = {
  placeholder: PropTypes.string,
  onChange: PropTypes.func.isRequired,
  value: PropTypes.string,
  className: PropTypes.string
};
const Modal = ({ isVisible, onClose, children, className, title }) => {
  if (!isVisible) return null;
  const handleClick = (e) => {
    if (e.target.id === "wrapper") onClose();
  };
  return /* @__PURE__ */ jsx(
    "div",
    {
      id: "wrapper",
      onClick: handleClick,
      className: "fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm flex justify-center items-center p-4",
      children: /* @__PURE__ */ jsx(
        "div",
        {
          className: ` max-w-2xl max-h-[90vh] flex flex-col ${className} w-full`,
          onClick: (e) => e.stopPropagation(),
          children: /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center p-4 border-b border-gray-300 dark:border-gray-100 h-[80px]", children: [
              /* @__PURE__ */ jsx("h3", { className: "text-xl font-semibold text-red-700  bg-clip-text", children: title }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: onClose,
                  className: "text-gray-500 hover:text-gray-700 hover-effect dark:text-gray-300 dark:hover:text-gray-100 transition-colors",
                  "aria-label": "Close modal",
                  children: /* @__PURE__ */ jsx(CgClose, { size: 24 })
                }
              )
            ] }),
            /* @__PURE__ */ jsx("div", { className: "overflow-y-auto p-4 flex-1", children })
          ] })
        }
      )
    }
  );
};
const ButtonLoader$1 = ({
  color = "text-gray-300",
  // Using Tailwind color class
  size = 5,
  // This will translate to h-5 w-5 (1 = 0.25rem)
  text = "Processing..."
}) => {
  const sizeClass = `h-${size} w-${size}`;
  return /* @__PURE__ */ jsxs("div", { className: "inline-flex items-center gap-2", children: [
    /* @__PURE__ */ jsxs("div", { className: `${sizeClass} relative`, children: [
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `absolute inset-0 rounded-full border-2 border-current ${color} opacity-25`
        }
      ),
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `absolute inset-0 rounded-full border-2 border-transparent border-t-current ${color} animate-spin`,
          style: {
            animationDuration: "1s",
            animationTimingFunction: "linear",
            animationIterationCount: "infinite"
          }
        }
      )
    ] }),
    text && /* @__PURE__ */ jsx("span", { className: "text-sm font-medium", children: text })
  ] });
};
function EditBranchForm({ branch: branch2, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    branch_hours: "",
    name: "",
    location: "",
    mobile: "",
    email: "",
    manager_id: "",
    managerDetails: "",
    notes: "",
    status: "active",
    closeReason: "",
    userId: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    if (branch2) {
      setFormData({
        branch_hours: branch2.branch_hours || "",
        name: branch2.name || "",
        location: branch2.location || "",
        mobile: branch2.mobile || "",
        email: branch2.email || "",
        manager_id: branch2.manager_id || "",
        managerDetails: branch2.managerDetails || "",
        notes: branch2.notes || "",
        status: branch2.status || "active",
        closeReason: branch2.closeReason || "",
        userId: branch2.userId || ""
      });
    }
  }, [branch2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.put(
        `${BASE_URL}/branch/edit/${branch2.id}`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update branch");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in update Branch`, {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(NetworkIcon, { className: "inline mr-2" }),
        "  Branch Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "name",
              value: formData.name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Branch Hours"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branch_hours",
              value: formData.branch_hours,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Hours",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(MapPin, { className: "inline mr-1", size: 14 }),
            " Location"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "location",
              value: formData.location,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Location",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Contact2, { className: "inline mr-2" }),
        " Contact Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Mobile"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "mobile",
              value: formData.mobile,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Mobile Number",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "email",
              value: formData.email,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "email",
              placeholder: "Branch Email",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(User2Icon, { className: "inline mr-2" }),
        "  Manager Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Manager ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "manager_id",
              value: formData.manager_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Manager ID",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Manager Details"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "managerDetails",
              value: formData.managerDetails,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Manager Details",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(PlusCircleIcon, { className: "inline mr-2" }),
        "  Additional Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inActive", children: "Inactive" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " User ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "userId",
              value: formData.userId,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "User ID",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Branch notes...",
            required: true
          }
        )
      ] }),
      formData.status === "inActive" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Close Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "closeReason",
            value: formData.closeReason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[60px]",
            placeholder: "Closing reason...",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Branch"
        }
      )
    ] })
  ] });
}
const departmentOptions$2 = [
  "architecture",
  "visualization",
  "structural",
  "drafting",
  "hr",
  "sales",
  "consulting"
];
const CreateSalaryForm = ({ onSuccess, onCancel }) => {
  var _a;
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const [staffOptions, setStaffOptions] = useState([]);
  const [selectedDepartment, setSelectedDepartment] = useState("");
  const [isFetchingStaff, setIsFetchingStaff] = useState(false);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = (_a = permissions[0]) == null ? void 0 : _a.role;
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    staff_id: "",
    basicsalary: "",
    hra: "",
    lpa: "",
    gross_salary: "",
    net_salary: "",
    bonus: "",
    pf: "",
    esi: "",
    tds: "",
    other_allowance: "",
    deductions: "",
    remarks: "",
    processondate: "",
    status: "active"
  });
  useEffect(() => {
    if (selectedDepartment) {
      fetchStaffOptions();
    }
  }, [selectedDepartment]);
  const fetchStaffOptions = async () => {
    setIsFetchingStaff(true);
    try {
      let url = `${BASE_URL}/users/dropdown?department=${selectedDepartment}`;
      if (userRole !== "superadmin") {
        url += `&branchcode=${branchcodeForNor}`;
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data && response.data.data) {
        const options = response.data.data.map((user) => ({
          value: user.staff_id,
          label: `${user.firstname + user.lastname} - ${user.designation}`
        }));
        setStaffOptions(options);
      }
    } catch (err) {
      toast$1.error("Failed to fetch staff options", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setIsFetchingStaff(false);
    }
  };
  const handleDepartmentChange = (e) => {
    setSelectedDepartment(e.target.value);
    setFormData((prev) => ({ ...prev, staff_id: "" }));
  };
  const statusOptions = [
    { value: "active", label: "Active" },
    { value: "inactive", label: "Inactive" }
  ];
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a2, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.post(
        `${BASE_URL}/users/salary/create`,
        { userDatas: [formData] },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        onSuccess();
        toast$1.success("Salary created successfully!");
      } else {
        setError(response.data.message || "Failed to create salary");
      }
    } catch (err) {
      setError(((_b = (_a2 = err.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating salary", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Basic Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
            " Department ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              value: selectedDepartment,
              onChange: handleDepartmentChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                departmentOptions$2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Staff ID ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "staff_id",
              value: formData.staff_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !selectedDepartment || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Process On Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "processondate",
              value: formData.processondate,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "date",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Salary Components" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " Basic Salary ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "basicsalary",
              value: formData.basicsalary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Basic Salary",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " HRA"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "hra",
              value: formData.hra,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "HRA",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " LPA"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "lpa",
              value: formData.lpa,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "LPA",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " Bonus"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "bonus",
              value: formData.bonus,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Bonus",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Deductions" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " PF ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "pf",
              value: formData.pf,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "PF",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " ESI"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "esi",
              value: formData.esi,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "ESI",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " TDS"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "tds",
              value: formData.tds,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "TDS",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Other Allowance"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "other_allowance",
              value: formData.other_allowance,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Other Allowance",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Deductions"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "deductions",
              value: formData.deductions,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Deductions",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Salary Totals" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Gross Salary"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "gross_salary",
              value: formData.gross_salary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Gross Salary",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Net Salary"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "net_salary",
              value: formData.net_salary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Net Salary",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Additional Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: statusOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Remarks"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "remarks",
              value: formData.remarks,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Remarks",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Salary"
        }
      )
    ] })
  ] });
};
const HRSalaryApprovalForm = ({ salaryRequest, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    performance_id: (salaryRequest == null ? void 0 : salaryRequest.performance_id) || "",
    hr_rating: (salaryRequest == null ? void 0 : salaryRequest.hr_rating) || "",
    increment_percentage: (salaryRequest == null ? void 0 : salaryRequest.increment_percentage) || "",
    closingDate: (salaryRequest == null ? void 0 : salaryRequest.closingDate) || "",
    increment_effective_date: (salaryRequest == null ? void 0 : salaryRequest.increment_effective_date) || "",
    status: (salaryRequest == null ? void 0 : salaryRequest.status) || "pending"
  });
  useEffect(() => {
    if (salaryRequest) {
      setFormData({
        performance_id: salaryRequest.performance_id || "",
        hr_rating: salaryRequest.hr_rating || "",
        increment_percentage: salaryRequest.increment_percentage || "",
        closingDate: salaryRequest.closingDate || "",
        increment_effective_date: salaryRequest.increment_effective_date || "",
        status: salaryRequest.status || "pending"
      });
    }
  }, [salaryRequest]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleRatingChange = (value) => {
    setFormData((prev) => ({
      ...prev,
      hr_rating: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    setError(null);
    try {
      const response = await axios.put(
        `${BASE_URL}/api/users/hr_rating/edit`,
        {
          reviewData: {
            performance_id: formData.performance_id,
            hr_rating: formData.hr_rating,
            increment_percentage: formData.increment_percentage,
            closingDate: formData.closingDate,
            increment_effective_date: formData.increment_effective_date,
            status: formData.status
          }
        },
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        toast$1.success("Performance rating updated successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update performance rating");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating performance rating");
    } finally {
      setLoading(false);
    }
  };
  const RatingScale = ({ value, onChange }) => /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mt-1", children: [
    [1, 2, 3, 4, 5].map((rating) => /* @__PURE__ */ jsx(
      "button",
      {
        type: "button",
        onClick: () => onChange(rating),
        className: `w-8 h-8 rounded-full flex items-center justify-center text-sm 
            ${value >= rating ? "bg-red-700 text-white" : "bg-gray-200 text-gray-700"}`,
        children: rating
      },
      rating
    )),
    /* @__PURE__ */ jsx("span", { className: "ml-2 text-sm text-gray-600", children: value ? value <= 2 ? /* @__PURE__ */ jsxs("span", { className: "text-red-500 flex items-center", children: [
      /* @__PURE__ */ jsx(XCircle, { size: 14, className: "mr-1" }),
      " Needs Improvement"
    ] }) : value <= 4 ? /* @__PURE__ */ jsxs("span", { className: "text-yellow-500 flex items-center", children: [
      /* @__PURE__ */ jsx(CheckCircle, { size: 14, className: "mr-1" }),
      " Good"
    ] }) : /* @__PURE__ */ jsxs("span", { className: "text-green-500 flex items-center", children: [
      /* @__PURE__ */ jsx(Award, { size: 14, className: "mr-1" }),
      " Excellent"
    ] }) : null })
  ] });
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-gray-800 border-b pb-2", children: "HR Performance Review" }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Performance ID" }),
      /* @__PURE__ */ jsx(
        "input",
        {
          name: "performance_id",
          value: formData.performance_id,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",
          readOnly: true
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center", children: [
        /* @__PURE__ */ jsx(Award, { className: "mr-1", size: 14 }),
        " HR Rating (1-5)"
      ] }),
      /* @__PURE__ */ jsx(
        RatingScale,
        {
          value: formData.hr_rating,
          onChange: handleRatingChange
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center", children: [
        /* @__PURE__ */ jsx(Percent, { className: "mr-1", size: 14 }),
        " Increment Percentage"
      ] }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "number",
          name: "increment_percentage",
          value: formData.increment_percentage,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",
          placeholder: "Enter increment percentage",
          min: "0",
          max: "100",
          step: "0.01"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center", children: [
        /* @__PURE__ */ jsx(Calendar, { className: "mr-1", size: 14 }),
        " Review Closing Date"
      ] }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "date",
          name: "closingDate",
          value: formData.closingDate,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",
          required: true
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center", children: [
        /* @__PURE__ */ jsx(Calendar, { className: "mr-1", size: 14 }),
        " Increment Effective Date"
      ] }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "date",
          name: "increment_effective_date",
          value: formData.increment_effective_date,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",
          required: true
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 p-4 rounded-lg border border-gray-100", children: [
      /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Status" }),
      /* @__PURE__ */ jsxs(
        "select",
        {
          name: "status",
          value: formData.status,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 mt-1 focus:outline-none",
          required: true,
          children: [
            /* @__PURE__ */ jsx("option", { value: "pending", children: "Pending" }),
            /* @__PURE__ */ jsx("option", { value: "approved", children: "Approved" }),
            /* @__PURE__ */ jsx("option", { value: "rejected", children: "Rejected" }),
            /* @__PURE__ */ jsx("option", { value: "on_hold", children: "On Hold" })
          ]
        }
      )
    ] }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-sm text-center", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Review"
        }
      )
    ] })
  ] });
};
const SalaryRevision = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [salaryRequests, setSalaryRequests] = useState([]);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showFilters2, setShowFilters2] = useState(false);
  const [selectedRequest, setSelectedRequest] = useState(null);
  const [showApprovalModal, setShowApprovalModal] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const statusOptions = [
    { value: "", label: "All Status" },
    { value: "submitted", label: "Submitted" },
    { value: "teamlead_reviewed", label: "Team Lead Reviewed" },
    { value: "hr_reviewed", label: "HR Reviewed" },
    { value: "approved", label: "Approved" },
    { value: "rejected", label: "Rejected" }
  ];
  const [selectedStatus, setSelectedStatus] = useState("");
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "hr") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "hr") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "hr") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    if (role !== "hr" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "hr" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "hr" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/users/dropdown?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "hr") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const fetchSalaryRequests = async () => {
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/self_rating/read`;
      const params = new URLSearchParams();
      if (role === "superadmin") {
        if (selectedBranchCode) params.append("branchcode", selectedBranchCode);
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else if (role === "hr") {
        params.append("branchcode", userBranchCode);
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else {
        params.append("staff_id", staff_id);
      }
      if (selectedStatus) params.append("status", selectedStatus);
      if (startDate) params.append("start_date", formatDate2(startDate));
      if (endDate) params.append("end_date", formatDate2(endDate));
      params.append("page", currentPage);
      params.append("limit", pageSize);
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setSalaryRequests(response.data.data || []);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching salary requests", error2);
      toast$1.error("Failed to fetch salary requests");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleStatusChange = (value) => {
    setSelectedStatus(value);
    setCurrentPage(1);
  };
  const handleApprovalSuccess = () => {
    setShowApprovalModal(false);
    toast$1.success("Salary request processed successfully!");
    fetchSalaryRequests();
  };
  const handleOnExport = () => {
    if (!salaryRequests || salaryRequests.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = salaryRequests.map((request) => ({
      "Performance ID": request.performance_id,
      "Staff ID": request.staff_id,
      "Name": request.name,
      "Branch Code": request.branchcode,
      "Designation": request.designation,
      "Department": request.department,
      "Review Year": request.review_year,
      "Self Rating": request.self_rating_overall,
      "Lead Rating": request.lead_technical_rating,
      "Status": request.status,
      "Increment Percentage": request.increment_percentage,
      "Increment Effective Date": request.increment_effective_date,
      "Created On": request.created_on,
      "Updated On": request.updated_on
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "SalaryRequests");
    XLSX.writeFile(wb, "SalaryRequests.xlsx");
  };
  useEffect(() => {
    fetchSalaryRequests();
  }, [
    currentPage,
    pageSize,
    selectedBranchCode,
    selectedStaffId,
    selectedStatus,
    startDate,
    endDate,
    role,
    userBranchCode
  ]);
  const handleApproveRequest = (request) => {
    setSelectedRequest(request);
    setShowApprovalModal(true);
  };
  const thead = () => [
    { data: "Performance ID" },
    { data: "Staff ID" },
    { data: "Name" },
    { data: "Branch Code" },
    { data: "Designation" },
    { data: "Department" },
    { data: "Review Year" },
    { data: "Self Rating" },
    { data: "Lead Rating" },
    { data: "Status" },
    { data: "Increment %" },
    { data: "Effective Date" },
    { data: "Created On" },
    { data: "Action" }
  ];
  const tbody = () => {
    if (!salaryRequests) return [];
    return salaryRequests.map((request) => {
      return {
        id: request.performance_id,
        data: [
          { data: request.performance_id },
          { data: request.staff_id },
          { data: request.name },
          { data: request.branchcode },
          { data: request.designation },
          { data: request.department },
          { data: request.review_year },
          { data: request.self_rating_overall || "-" },
          { data: request.lead_technical_rating || "-" },
          {
            data: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${request.status === "approved" ? "bg-green-100 text-green-800" : request.status === "rejected" ? "bg-red-100 text-red-800" : request.status === "hr_reviewed" || request.status === "teamlead_reviewed" ? "bg-blue-100 text-blue-800" : "bg-yellow-100 text-yellow-800"}`,
                children: [
                  request.status === "approved" ? /* @__PURE__ */ jsx(CheckCircle, { className: "w-3 h-3 mr-1" }) : request.status === "rejected" ? /* @__PURE__ */ jsx(XCircle, { className: "w-3 h-3 mr-1" }) : /* @__PURE__ */ jsx(Clock, { className: "w-3 h-3 mr-1" }),
                  request.status.split("_").map(
                    (word) => word.charAt(0).toUpperCase() + word.slice(1)
                  ).join(" ")
                ]
              }
            )
          },
          { data: request.increment_percentage ? `${request.increment_percentage}%` : "-" },
          {
            data: request.increment_effective_date ? new Date(request.increment_effective_date).toLocaleDateString() : "-"
          },
          { data: new Date(request.created_on).toLocaleDateString() },
          {
            data: /* @__PURE__ */ jsx("div", { className: "flex flex-nowrap justify-center gap-2", children: (role === "hr" || role === "superadmin") && /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-amber-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleApproveRequest(request),
                title: "Process",
                disabled: request.status === "approved" || request.status === "rejected",
                children: /* @__PURE__ */ jsx(CircleCheckBig, { size: 18 })
              }
            ) }),
            className: "action-cell"
          }
        ]
      };
    });
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Salary Increment Requests" }),
        isMobile && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: [
              /* @__PURE__ */ jsx(Filter, { size: 18, className: "mr-1" }),
              showFilters2 ? "Hide Filters" : "Show Filters"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `grid grid-cols-1 ${role !== "superadmin" && role !== "hr" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
              children: [
                role === "superadmin" && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: filteredBranchOptions(),
                    selectedValue: selectedBranchCode,
                    onSelect: handleBranchCodeChange,
                    placeholder: "Select Branch",
                    className: "w-[245px]",
                    isLoading: isStoreLoading
                  }
                ),
                (role === "superadmin" || role === "hr") && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: staffOptions,
                    selectedValue: selectedStaffId,
                    onSelect: handleStaffChange,
                    placeholder: "Select Staff",
                    className: "w-[245px]",
                    disabled: role === "hr" ? false : !selectedBranchCode,
                    isLoading: loading
                  }
                ),
                /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: statusOptions,
                    selectedValue: selectedStatus,
                    onSelect: handleStatusChange,
                    placeholder: "Select Status",
                    className: "w-[245px]"
                  }
                ),
                /* @__PURE__ */ jsx("div", { className: "w-[245px]", children: /* @__PURE__ */ jsx(
                  DatePicker,
                  {
                    selectsRange: true,
                    startDate,
                    endDate,
                    onChange: handleDateChange,
                    placeholderText: "Select date range",
                    className: "w-full p-2 border rounded h-[40px]",
                    isClearable: true
                  }
                ) })
              ]
            }
          )
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[150px]"
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2",
            disabled: salaryRequests.length === 0,
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              !isMobile && "Export Excel"
            ]
          }
        )
      ] }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
      /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
        DataTable,
        {
          thead,
          tbody,
          responsive: true,
          className: "min-w-full"
        }
      ) }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "salary requests",
          isScroll: true
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showApprovalModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowApprovalModal(false),
        title: "Process Salary Request",
        children: /* @__PURE__ */ jsx(
          HRSalaryApprovalForm,
          {
            salaryRequest: selectedRequest,
            onSuccess: handleApprovalSuccess,
            onCancel: () => setShowApprovalModal(false)
          }
        )
      }
    )
  ] });
};
const EditSalaryForm = ({ salary, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useEmployeeStore((state) => state.branchEmployeeOptions);
  const [formData, setFormData] = useState({
    staff_id: "",
    basicsalary: "",
    hra: "",
    lpa: "",
    gross_salary: "",
    net_salary: "",
    bonus: "",
    pf: "",
    esi: "",
    tds: "",
    other_allowance: "",
    deductions: "",
    remarks: "",
    processondate: "",
    processtilldate: "",
    status: "active"
  });
  useEffect(() => {
    if (salary) {
      setFormData({
        staff_id: salary.staff_id || "",
        basicsalary: salary.basicsalary || "",
        hra: salary.hra || "",
        lpa: salary.lpa || "",
        gross_salary: salary.gross_salary || "",
        net_salary: salary.net_salary || "",
        bonus: salary.bonus || "",
        pf: salary.pf || "",
        esi: salary.esi || "",
        tds: salary.tds || "",
        other_allowance: salary.other_allowance || "",
        deductions: salary.deductions || "",
        remarks: salary.remarks || "",
        processondate: salary.processondate || "",
        processtilldate: salary.processtilldate || "",
        status: salary.status || "active"
      });
    }
  }, [salary]);
  const statusOptions = [
    { value: "active", label: "Active" },
    { value: "inactive", label: "Inactive" }
  ];
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.put(
        `${BASE_URL}/users/salary/edit/${salary.id}`,
        { userData: formData },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        onSuccess();
        toast$1.success("Salary updated successfully!");
      } else {
        setError(response.data.message || "Failed to update salary");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating salary", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Basic Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Staff ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "staff_id",
              value: formData.staff_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Process On Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "processondate",
              value: formData.processondate,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "date",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Process Till Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "processtilldate",
              value: formData.processtilldate,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "date"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Salary Components" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Basic Salary"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "basicsalary",
              value: formData.basicsalary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Basic Salary",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " HRA"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "hra",
              value: formData.hra,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "HRA",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " LPA"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "lpa",
              value: formData.lpa,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "LPA",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Bonus"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "bonus",
              value: formData.bonus,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Bonus",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Deductions" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " PF"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "pf",
              value: formData.pf,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "PF",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " ESI"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "esi",
              value: formData.esi,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "ESI",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " TDS"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "tds",
              value: formData.tds,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "TDS",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Other Allowance"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "other_allowance",
              value: formData.other_allowance,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Other Allowance",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Deductions"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "deductions",
              value: formData.deductions,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Deductions",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Salary Totals" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Gross Salary"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "gross_salary",
              value: formData.gross_salary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Gross Salary",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(DollarSign, { className: "inline mr-1", size: 14 }),
            " Net Salary"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "net_salary",
              value: formData.net_salary,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "number",
              placeholder: "Net Salary",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Additional Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: statusOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Remarks"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "remarks",
              value: formData.remarks,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Remarks",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Salary"
        }
      )
    ] })
  ] });
};
const SalaryList = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState();
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [
    { value: "", label: "All Branches" },
    { value: "active", label: "Active Branches" },
    { value: "inactive", label: "Inactive Branches" }
  ];
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/salary/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedManager,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (salary) => {
    setShowDeleteModal(true);
    setDeleteId(salary);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId.id);
    const deleteData = {
      userData: {
        staff_id: deleteId.staff_id
      }
    };
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/users/salary/delete/${id}`,
        {
          data: deleteData,
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Branch deleted successfully!");
        fetchBranches(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Staff_id" },
    { data: "Basic Salary" },
    { data: "hra" },
    { data: "lpa" },
    { data: "Deductions" },
    { data: "gross_salary" },
    { data: "net_salary" },
    { data: "bonus" },
    { data: "processondate" },
    { data: "Status" },
    { data: "Actions", className: "text-center" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2) => ({
      id: branch2.id,
      data: [
        { data: branch2.id },
        { data: branch2.staff_id },
        { data: branch2.basicsalary },
        { data: branch2.hra },
        { data: branch2.lpa },
        { data: branch2.deductions },
        { data: branch2.gross_salary },
        { data: branch2.net_salary },
        { data: branch2.bonus },
        { data: branch2.processondate },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "active" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex justify-center gap-2", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/employee/salary_slip`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(branch2),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(branch2),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: isMobile && /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          }
        ) }),
        /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", { className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`, children: [
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setShowCreateModal(true),
                  className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                  children: [
                    !isMobile && "New Salary",
                    " +"
                  ]
                }
              )
            ] })
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: statusOptions,
                      selectedValue: selectStatus,
                      onSelect: handleStatusChange,
                      placeholder: "Branch Status",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: managerOptions,
                      selectedValue: selectedManager,
                      onSelect: handleManagerChange,
                      placeholder: "Manager",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`, children: /* @__PURE__ */ jsx(
                    SearchInput,
                    {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search branches...",
                      className: "w-full"
                    }
                  ) })
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "Create New Salary",
        children: /* @__PURE__ */ jsx(
          CreateSalaryForm,
          {
            onSuccess: () => {
              setShowCreateModal(false);
              getBranch();
            },
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "Edit Salary",
        children: /* @__PURE__ */ jsx(
          EditSalaryForm,
          {
            salary: selectedBranch,
            onSuccess: () => {
              setShowEditModal(false);
              getBranch();
            },
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "Delete Salary Detail",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          /* @__PURE__ */ jsxs("div", { className: "text-center", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold text-gray-800 dark:text-gray-100", children: "Confirm Deletion" }),
            /* @__PURE__ */ jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-2", children: "Are you sure you want to delete this Salary Details? This action cannot be undone." })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowDeleteModal(false),
                disabled: loading,
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                onClick: handleDeleteSubmit,
                disabled: loading,
                children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Salary"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
const EmployeeSalary = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const data = [
    {
      id: "1",
      date: "25-05-2025",
      name: "Bharathi",
      branch: "bharathi@gmail.com",
      position: "Team Lead",
      category: "salary",
      amount: "10000"
    }
    // More data...
  ];
  const tabs = [
    { id: "salaryList", label: "Salary List" },
    { id: "revisionTracking", label: "Revision & Increment Tracking" }
  ];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen mt-[-30px]", children: [
      /* @__PURE__ */ jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setActiveTab(tab.id),
          className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
          children: tab.label
        },
        tab.id
      )) }) }),
      /* @__PURE__ */ jsx("div", { className: "p-4 flex-grow", children: activeTab === "salaryList" ? /* @__PURE__ */ jsx(SalaryList, {}) : /* @__PURE__ */ jsx(SalaryRevision, {}) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        title: "Add Salary Form",
        children: /* @__PURE__ */ jsx(CreateSalaryForm, { onCancel: () => setShowModal(false) })
      }
    )
  ] });
};
function DocumentViewer() {
  const documents = [
    {
      uri: "/documents/Interview Evaluation Form (1).pdf",
      fileType: "pdf",
      fileName: "Interview Evaluation Form (1).pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/ProjectReportDocumentation.docx",
      fileType: "docx",
      fileName: "Project Report Documentation.docx",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  const getViewerUrl = (doc) => {
    if (doc.fileType === "docx" || doc.fileType === "doc") {
      return `https://docs.google.com/viewer?url=${encodeURIComponent(window.location.origin + doc.uri)}&embedded=true`;
    }
    return doc.uri;
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-2xl font-bold text-red-800 mb-8", children: "Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm" : "bg-white hover:bg-gray-50"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400", children: doc.fileSize })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: selectedDoc.fileType === "docx" || selectedDoc.fileType === "doc" ? /* @__PURE__ */ jsx(
        "iframe",
        {
          src: getViewerUrl(selectedDoc),
          className: "w-full h-full border-0",
          title: selectedDoc.fileName
        }
      ) : /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          },
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          }
        },
        key
      ) })
    ] })
  ] });
}
const Documents = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const [documents] = useState([
    {
      id: "1",
      name: "Production Department Structure Charts.pdf",
      type: "PDF",
      size: "2.4 MB",
      url: "http://localhost:5173/documents/Production%20Department%20Structure%20Chart.pdf",
      category: "HR"
    },
    {
      id: "2",
      name: "Salary Structure.docx",
      type: "Word",
      size: "1.2 MB",
      url: "/documents/Interview Evaluation Form.docx",
      category: "Finance"
    }
  ]);
  const tabs = [
    { id: "termination", label: "Employee Termination Manage" },
    { id: "documents", label: "Company Documents" }
  ];
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen mt-[-30px]", children: [
      /* @__PURE__ */ jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setActiveTab(tab.id),
          className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
          children: tab.label
        },
        tab.id
      )) }) }),
      /* @__PURE__ */ jsx("div", { className: "p-4 flex-grow mt[-50px]", children: activeTab === "termination" ? /* @__PURE__ */ jsx(SalaryRevision, {}) : /* @__PURE__ */ jsx(DocumentViewer, { documents }) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        title: "Add Salary Form",
        children: /* @__PURE__ */ jsx(CreateSalaryForm, {})
      }
    )
  ] });
};
const departmentDesignations = {
  architecture: [
    "principal",
    "senior-Architect",
    "architect",
    "junior-Architect",
    "architect-Trainee",
    "architect-Intern"
  ],
  visualization: [
    "principal",
    "senior-Visualization",
    "visualization",
    "junior-Visualization",
    "visualization-Trainee",
    "visualization-Intern"
  ],
  structural: [
    "principal",
    "senior-Structural",
    "structural",
    "junior-Structural",
    "structural-Trainee",
    "structural-Intern"
  ],
  drafting: [
    "principal",
    "senior-Drafting",
    "drafting",
    "junior-Drafting",
    "drafting-Trainee",
    "drafting-Intern"
  ],
  hr: [
    "principal",
    "senior-HR-Executive",
    "hr-Executive",
    "junior-HR-Executive",
    "hr-Executive-Trainee",
    "hr-Executive-Intern"
  ],
  sales: [
    "principal",
    "senior-Sales-Executive",
    "sales-Executive",
    "junior-Sales-Executive",
    "sales-Executive-Trainee",
    "sales-Executive-Intern"
  ],
  consulting: [
    "principal",
    "senior-Site-Engineer",
    "site-Engineer",
    "junior-Site-Engineer",
    "site-Engineer-Trainee",
    "site-Engineer-Intern"
  ]
};
const departmentOptions$1 = [
  "architecture",
  "visualization",
  "structural",
  "drafting",
  "hr",
  "sales",
  "consulting"
];
function EmployeeForm({ onSuccess, onCancel }) {
  const [loading, setLoading] = useState(false);
  const [designationOptions, setDesignationOptions] = useState([]);
  const [error, setError] = useState("");
  const [roleOptions, setRoleOptions] = useState([]);
  const [formData, setFormData] = useState({
    firstName: "",
    lastName: "",
    dob: "",
    gender: "",
    maritalStatus: "",
    bloodGroup: "",
    mobileNo: "",
    residenceContactNo: "",
    email: "",
    presentAddress: "",
    permanentAddress: "",
    photograph: null,
    branchcode: "",
    role: "",
    password: "",
    psn: "",
    department: "",
    pannumber: "",
    aadharnumber: "",
    designation: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const handleChange = (e) => {
    const { name, value, files } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: files ? files[0] : value
    }));
    if (name === "department") {
      setDesignationOptions(departmentDesignations[value] || []);
      setFormData((prev) => ({ ...prev, designation: "" }));
    }
  };
  const handleBranchChange = async (e) => {
    const selectedBranch = e.target.value;
    setFormData((prev) => ({ ...prev, branchcode: selectedBranch, role: "" }));
    if (selectedBranch) {
      try {
        setLoading(true);
        const response = await fetch(
          `${BASE_URL}/branch/dropdown?branchcode=${selectedBranch}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        const data = await response.json();
        const roles = data.result.map((item) => ({
          value: item.role,
          label: item.role
        }));
        setRoleOptions(roles);
      } catch (error2) {
        console.error("Error fetching roles:", error2);
        setRoleOptions([]);
      } finally {
        setLoading(false);
      }
    } else {
      setRoleOptions([]);
    }
  };
  const handleSubmit = async () => {
    var _a, _b;
    setLoading(true);
    try {
      const employeeData = {
        branchcode: formData.branchcode,
        firstName: formData.firstName,
        lastName: formData.lastName,
        dob: formData.dob,
        gender: formData.gender,
        marital: formData.maritalStatus,
        bloodgroup: formData.bloodGroup,
        phonenumber: formData.mobileNo,
        alternumber: formData.residenceContactNo,
        email: formData.email,
        presentaddress: formData.presentAddress,
        permanentaddress: formData.permanentAddress,
        photograph: formData.photograph,
        role: formData.role,
        password: formData.password,
        department: formData.department,
        pannumber: formData.pannumber,
        aadharnumber: formData.aadharnumber,
        designation: formData.designation
      };
      const response = await axios.post(
        `${BASE_URL}/users/create`,
        { profile: [employeeData] },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if ((response == null ? void 0 : response.status) === 201) {
        onSuccess();
      }
    } catch (error2) {
      console.log("Error in employee data create", error2);
      setError(((_b = (_a = error2.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error2.message || "Error in Add New Employee", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(User, { className: "inline mr-2" }),
        " Personal Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " First Name",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              name: "firstName",
              value: formData.firstName,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Last Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              name: "lastName",
              value: formData.lastName,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Date of Birth",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "date",
              name: "dob",
              value: formData.dob,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Gender ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "gender",
              value: formData.gender,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Gender" }),
                /* @__PURE__ */ jsx("option", { value: "Male", children: "Male" }),
                /* @__PURE__ */ jsx("option", { value: "Female", children: "Female" }),
                /* @__PURE__ */ jsx("option", { value: "Other", children: "Other" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(HeartPulse, { className: "inline mr-1", size: 14 }),
            " Marital Status ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "maritalStatus",
              value: formData.maritalStatus,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Status" }),
                /* @__PURE__ */ jsx("option", { value: "Single", children: "Single" }),
                /* @__PURE__ */ jsx("option", { value: "Married", children: "Married" }),
                /* @__PURE__ */ jsx("option", { value: "Divorced", children: "Divorced" }),
                /* @__PURE__ */ jsx("option", { value: "Widowed", children: "Widowed" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Droplets, { className: "inline mr-1", size: 14 }),
            " Blood Group ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "bloodGroup",
              value: formData.bloodGroup,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Blood Group" }),
                /* @__PURE__ */ jsx("option", { value: "A+", children: "A+" }),
                /* @__PURE__ */ jsx("option", { value: "A-", children: "A-" }),
                /* @__PURE__ */ jsx("option", { value: "B+", children: "B+" }),
                /* @__PURE__ */ jsx("option", { value: "B-", children: "B-" }),
                /* @__PURE__ */ jsx("option", { value: "AB+", children: "AB+" }),
                /* @__PURE__ */ jsx("option", { value: "AB-", children: "AB-" }),
                /* @__PURE__ */ jsx("option", { value: "O+", children: "O+" }),
                /* @__PURE__ */ jsx("option", { value: "O-", children: "O-" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Phone, { className: "inline mr-2" }),
        " Contact Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Mobile Number",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "tel",
              name: "mobileNo",
              value: formData.mobileNo,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Residence Contact"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "tel",
              name: "residenceContactNo",
              value: formData.residenceContactNo,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "email",
              name: "email",
              value: formData.email,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Lock, { className: "inline mr-1", size: 14 }),
            " Password",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "password",
              name: "password",
              value: formData.password,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Photograph"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "file",
              name: "photograph",
              onChange: handleChange,
              className: "w-full text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              accept: "image/*"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(MapPin, { className: "inline mr-2" }),
        " Address Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Present Address" }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "presentAddress",
              value: formData.presentAddress,
              onChange: handleChange,
              rows: 3,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Permanent Address" }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "permanentAddress",
              value: formData.permanentAddress,
              onChange: handleChange,
              rows: 3,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-2" }),
        " Employment Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleBranchChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: loading,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(UserCheck, { className: "inline mr-1", size: 14 }),
            " User Role ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "role",
              value: formData.role,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode || loading,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Role" }),
                roleOptions == null ? void 0 : roleOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-1", size: 14 }),
            " Department",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "department",
              value: formData.department,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                departmentOptions$1.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-1", size: 14 }),
            " Designation",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "designation",
              value: formData.designation,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.department,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Designation" }),
                designationOptions.map((designation) => /* @__PURE__ */ jsx("option", { value: designation, children: designation }, designation))
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(CreditCard, { className: "inline mr-2" }),
        " Identification Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            "PAN Number ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              name: "pannumber",
              value: formData.pannumber,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            "Aadhar Number ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              name: "aadharnumber",
              value: formData.aadharnumber,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          onClick: onCancel,
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          onClick: handleSubmit,
          disabled: loading,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Employee"
        }
      )
    ] })
  ] });
}
const OfferLettersGenerative = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [sheetData, setSheetData] = useState([]);
  const navigate = useNavigate$1();
  const [formData, setFormData] = useState({
    name: "",
    position: "",
    department: "",
    location: "",
    startDate: "",
    monthlySalary: "",
    otherAllowances: "",
    contactEmail: "",
    contactPhone: ""
  });
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    const savedLetters = localStorage.getItem("offerLetters");
    if (savedLetters) {
      const letters = JSON.parse(savedLetters);
      setData(letters);
      setSheetData(letters);
      setTotalItem(letters.length);
    }
  }, []);
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({
      ...formData,
      [name]: value
    });
  };
  const handleSubmit = (e) => {
    e.preventDefault();
    const newOfferLetter = {
      ...formData,
      id: Date.now().toString(),
      generatedDate: (/* @__PURE__ */ new Date()).toISOString()
    };
    const updatedLetters = [...data, newOfferLetter];
    setData(updatedLetters);
    setSheetData(updatedLetters);
    setTotalItem(updatedLetters.length);
    localStorage.setItem("offerLetters", JSON.stringify(updatedLetters));
    setFormData({
      name: "",
      position: "",
      department: "",
      location: "",
      startDate: "",
      monthlySalary: "",
      otherAllowances: "",
      contactEmail: "",
      contactPhone: ""
    });
    setShowCreateModal(false);
    toast$1.success("Offer letter generated successfully!");
  };
  const viewOfferLetter = (id) => {
    navigate(`/offer-letter-view/${id}`);
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "OfferLetters");
    XLSX.writeFile(wb, "OfferLetters.xlsx");
  };
  const filteredData = data.filter(
    (letter) => letter.name.toLowerCase().includes(searchTerm.toLowerCase()) || letter.position.toLowerCase().includes(searchTerm.toLowerCase()) || letter.department.toLowerCase().includes(searchTerm.toLowerCase())
  );
  const paginatedData = filteredData.slice(
    (currentPage - 1) * pageSize,
    currentPage * pageSize
  );
  const thead = () => [
    { data: "#" },
    { data: "Candidate Name" },
    { data: "Position" },
    { data: "Department" },
    { data: "Location" },
    { data: "Generated Date" },
    { data: "Actions", className: "text-center" }
  ];
  const tbody = () => {
    return paginatedData.map((letter, index) => ({
      id: letter.id,
      data: [
        { data: index + 1 + (currentPage - 1) * pageSize },
        { data: letter.name },
        { data: letter.position },
        { data: letter.department },
        { data: letter.location },
        {
          data: new Date(letter.generatedDate).toLocaleDateString("en-US", {
            year: "numeric",
            month: "short",
            day: "numeric"
          })
        },
        {
          data: /* @__PURE__ */ jsx("div", { className: "flex justify-center gap-2", children: /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => viewOfferLetter(letter.id),
              className: "p-1 text-blue-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View Offer Letter",
              children: /* @__PURE__ */ jsx(Eye, { size: 18 })
            }
          ) }),
          className: "action-cell"
        }
      ]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Offer Letter Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: "top-right", reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", { className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`, children: [
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setShowCreateModal(true),
                  className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                  children: [
                    !isMobile && "New Offer Letter",
                    " ",
                    /* @__PURE__ */ jsx(Plus, { className: "ml-1", size: 18 })
                  ]
                }
              )
            ] })
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsx(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex justify-between items-center gap-3"}`,
                children: /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[300px]"}`, children: /* @__PURE__ */ jsx(
                  SearchInput,
                  {
                    value: searchTerm,
                    onChange: handleSearch,
                    placeholder: "Search offer letters...",
                    className: "w-full"
                  }
                ) })
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: filteredData.length,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "offer letters",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "Create New Offer Letter",
        children: /* @__PURE__ */ jsx("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Candidate Information" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Candidate Name" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "name",
                    value: formData.name,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Position" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "position",
                    value: formData.position,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Department" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "department",
                    value: formData.department,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Location" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "location",
                    value: formData.location,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Start Date" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "date",
                    name: "startDate",
                    value: formData.startDate,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Monthly Salary" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "monthlySalary",
                    value: formData.monthlySalary,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Other Allowances" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "text",
                    name: "otherAllowances",
                    value: formData.otherAllowances,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Contact Email" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "email",
                    name: "contactEmail",
                    value: formData.contactEmail,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1", children: "Contact Phone" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "tel",
                    name: "contactPhone",
                    value: formData.contactPhone,
                    onChange: handleInputChange,
                    className: "w-full p-2 border border-gray-300 rounded-md",
                    required: true
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowCreateModal(false),
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "submit",
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                children: "Generate Offer Letter"
              }
            )
          ] })
        ] }) })
      }
    )
  ] });
};
const departmentOptions = [
  "architecture",
  "visualization",
  "structural",
  "drafting",
  "hr",
  "sales",
  "consulting"
];
const useStaffFilter = (branchcode) => {
  const [selectedDepartment, setSelectedDepartment] = useState("");
  const [staffOptions, setStaffOptions] = useState([]);
  const [isFetchingStaff, setIsFetchingStaff] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    if (selectedDepartment && branchcode) {
      fetchStaffOptions();
    }
  }, [selectedDepartment, branchcode]);
  const fetchStaffOptions = async () => {
    var _a;
    setIsFetchingStaff(true);
    try {
      let url = `${BASE_URL}/users/dropdown?department=${selectedDepartment}`;
      if (branchcode) {
        url += `&branchcode=${branchcode}`;
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      console.log("responsefostaffidinleadd", response);
      if ((_a = response.data) == null ? void 0 : _a.data) {
        const options = response.data.data.map((user) => ({
          value: user.staff_id,
          label: `${user.firstname} ${user.lastname} - ${user.designation}`
        }));
        setStaffOptions(options);
      }
    } catch (err) {
      toast$1.error("Failed to fetch staff options");
      setStaffOptions([]);
    } finally {
      setIsFetchingStaff(false);
    }
  };
  const handleDepartmentChange = (value) => {
    setSelectedDepartment(value);
  };
  return {
    departmentOptions,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  };
};
const AddTerminationForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [fetchingTeam, setFetchingTeam] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOptions = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [formData, setFormData] = useState({
    staff_id: "",
    staff_name: "",
    branchcode: "",
    branch_name: "",
    department: "",
    designation: "",
    team_id: "",
    team_name: "",
    team_lead_id: "",
    team_lead_name: "",
    termination_type: "resignation",
    termination_reason: "",
    last_working_day: "",
    reliving_date: "",
    exit_notes: "",
    created_by: userRole
  });
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  useEffect(() => {
    const fetchTeamDetails = async () => {
      if (!formData.staff_id) return;
      setFetchingTeam(true);
      try {
        const response = await axios.get(`${BASE_URL}/teams/members/read?staff_id=${formData.staff_id}`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data.data) {
          const teamData = response.data.data;
          setFormData((prev) => ({
            ...prev,
            team_id: teamData.team_id,
            team_name: teamData.team_name,
            team_lead_id: teamData.team_lead,
            team_lead_name: teamData.team_lead_name,
            branch_name: teamData.name
          }));
        }
      } catch (err) {
        console.error("Failed to fetch team details:", err);
      } finally {
        setFetchingTeam(false);
      }
    };
    fetchTeamDetails();
  }, [formData.staff_id, token]);
  useEffect(() => {
    if (formData.staff_id && staffOptions.length > 0) {
      const selectedStaff = staffOptions.find((option) => option.value === formData.staff_id);
      if (selectedStaff) {
        setFormData((prev) => ({
          ...prev,
          staff_name: selectedStaff.label.split(" - ")[0],
          department: selectedStaff.dept || "",
          designation: selectedStaff.desig || ""
        }));
      }
    }
  }, [formData.staff_id, staffOptions]);
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.post(`${BASE_URL}/user_resign_form/create`, formData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        toast$1.success("Resignation submitted successfully");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to submit resignation");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Failed to submit resignation", {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Resignation Form" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
              " Branch Code"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "branchcode",
                value: formData.branchcode,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                  branchCodeOptions == null ? void 0 : branchCodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
              " Branch Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "branch_name",
                value: formData.branch_name,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
              " Department"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                value: selectedDepartment,
                onChange: (e) => {
                  handleDepartmentChange(e.target.value);
                  setFormData((prev) => ({
                    ...prev,
                    staff_id: "",
                    staff_name: "",
                    department: "",
                    designation: "",
                    team_id: "",
                    team_name: "",
                    team_lead_id: "",
                    team_lead_name: ""
                  }));
                },
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                disabled: !formData.branchcode,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                  departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-1", size: 14 }),
              " Designation"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "designation",
                value: formData.designation,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Select Staff"
            ] }),
            isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
              "select",
              {
                name: "staff_id",
                value: formData.staff_id,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                disabled: !selectedDepartment || staffOptions.length === 0,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                  staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            ),
            selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Staff Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "staff_name",
                value: formData.staff_name,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
              " Team Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "team_name",
                value: formData.team_name,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Team Lead"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "team_lead_name",
                value: formData.team_lead_name,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Termination Type" }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "termination_type",
                value: formData.termination_type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "resignation", children: "Resignation" }),
                  /* @__PURE__ */ jsx("option", { value: "termination", children: "Termination" }),
                  /* @__PURE__ */ jsx("option", { value: "retirement", children: "Retirement" })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Termination Reason" }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "termination_reason",
                value: formData.termination_reason,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Reason" }),
                  /* @__PURE__ */ jsx("option", { value: "Personal", children: "Personal" }),
                  /* @__PURE__ */ jsx("option", { value: "Career Growth", children: "Career Growth" }),
                  /* @__PURE__ */ jsx("option", { value: "Health Reasons", children: "Health Reasons" }),
                  /* @__PURE__ */ jsx("option", { value: "Relocation", children: "Relocation" }),
                  /* @__PURE__ */ jsx("option", { value: "Better Opportunity", children: "Better Opportunity" }),
                  /* @__PURE__ */ jsx("option", { value: "Other", children: "Other" })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
              " Last Working Day"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "last_working_day",
                type: "date",
                value: formData.last_working_day,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
              " Reliving Date"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "reliving_date",
                type: "date",
                value: formData.reliving_date,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700 col-span-1 md:col-span-2", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
              " Exit Notes"
            ] }),
            /* @__PURE__ */ jsx(
              "textarea",
              {
                name: "exit_notes",
                value: formData.exit_notes,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none min-h-[80px]",
                placeholder: "Enter your exit notes..."
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Submit Resignation"
          }
        )
      ] })
    ] })
  ] });
};
function EditTerminationForm({ termination, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    resign_id: "",
    status: "pending",
    approved_by: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  useEffect(() => {
    if (termination) {
      setFormData({
        resign_id: termination.resign_id || "",
        status: termination.status || "pending",
        approved_by: userRole
      });
    }
  }, [termination, userRole]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.put(
        `${BASE_URL}/api/user_resign_form/edit`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        toast$1.success("Termination status updated successfully");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update termination status");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Failed to update termination status", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Update Termination Status" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
              " Resignation ID"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "resign_id",
                value: formData.resign_id,
                readOnly: true,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(ClipboardCheck, { className: "inline mr-1", size: 14 }),
              " Status"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "status",
                value: formData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "pending", children: "Pending" }),
                  /* @__PURE__ */ jsx("option", { value: "approved", children: "Approved" }),
                  /* @__PURE__ */ jsx("option", { value: "rejected", children: "Rejected" })
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(UserCheck, { className: "inline mr-1", size: 14 }),
              " Approved By"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "approved_by",
                type: "text",
                value: formData.approved_by,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none "
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Status"
          }
        )
      ] })
    ] })
  ] });
}
const Termination = () => {
  const token = useAuthStore((state) => state.accessToken);
  const [data, setData] = useState([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [showForm, setShowForm] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [loading, setLoading] = useState(false);
  const [selectedTremination, setSelectedTremination] = useState(null);
  const fetchTerminations = async () => {
    var _a;
    setLoading(true);
    try {
      const res = await axios.get(`${BASE_URL}/user_resign_form/read`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (Array.isArray((_a = res == null ? void 0 : res.data) == null ? void 0 : _a.data)) {
        setData(res.data.data);
      } else {
        toast.error("Invalid data received");
      }
    } catch (err) {
      toast.error("Failed to fetch termination data");
      console.error("API error:", err);
    } finally {
      setLoading(false);
    }
  };
  const handleEditBranch = (item) => {
    setSelectedTremination(item);
    setShowEditModal(true);
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast.success("Branch updated successfully!");
    fetchTerminations();
  };
  useEffect(() => {
    if (token) fetchTerminations();
  }, [token]);
  const filteredData = data.filter(
    (item) => item.staff_name.toLowerCase().includes(searchTerm.toLowerCase())
  );
  const thead = () => [
    { data: "ID" },
    { data: "Staff Name" },
    { data: "Designation" },
    { data: "Team" },
    { data: "Termination Type" },
    { data: "Last Working Day" },
    { data: "Relieving Date" },
    { data: "Status" },
    { data: "Action" }
  ];
  const tbody = () => filteredData.map((item, index) => ({
    id: item.resign_id,
    data: [
      { data: index + 1 },
      { data: item.staff_name },
      { data: item.designation },
      { data: item.team_name },
      { data: item.termination_type },
      { data: moment(item.last_working_day).format("YYYY-MM-DD") },
      { data: moment(item.reliving_date).format("YYYY-MM-DD") },
      {
        data: /* @__PURE__ */ jsx(
          "span",
          {
            className: `px-3 py-1 rounded-full text-sm ${item.status === "approved" ? "bg-green-100 text-green-800" : "bg-yellow-100 text-yellow-800"}`,
            children: item.status
          }
        )
      },
      {
        data: /* @__PURE__ */ jsxs("div", { className: "flex justify-center gap-2", children: [
          /* @__PURE__ */ jsx(Link$1, { to: `/View-certificate/${encodeURIComponent(item.staff_id)}/${encodeURIComponent(item.resign_id)}`, children: /* @__PURE__ */ jsx(
            "button",
            {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              children: /* @__PURE__ */ jsx(Eye, { size: 18 })
            }
          ) }),
          /* @__PURE__ */ jsx(
            "button",
            {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditBranch(item),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
            }
          )
        ] }),
        className: "action-cell"
      }
    ]
  }));
  const defaultTerminationData = {
    staff_id: "BRCH_01/03",
    staff_name: "Gokul Easwaran",
    branchcode: "BRCH_01",
    branch_name: "Head Office",
    department: "IT",
    designation: "Engineer",
    team_id: "BRCH_01/TEAM/01",
    team_name: "Development",
    team_lead_id: "BRCH_01/03",
    team_lead_name: "Ajay K",
    termination_type: "resignation",
    termination_reason: "Personal",
    last_working_day: "2025-08-01",
    reliving_date: "2025-08-03",
    exit_notes: "Great company. Leaving for further studies.",
    created_by: "HR_ADMIN"
  };
  return /* @__PURE__ */ jsxs("div", { className: "p-4 relative", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-semibold mb-4 text-red-700", children: "Termination Records" }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
      /* @__PURE__ */ jsx(
        SearchInput,
        {
          placeholder: "Search by staff name...",
          value: searchTerm,
          onChange: (val) => setSearchTerm(val)
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setShowForm(true),
          className: "px-4 py-3 bg-red-700 hover:bg-red-800 text-white rounded-sm text-sm shadow",
          children: "+ Create Termination"
        }
      )
    ] }),
    loading ? /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }) : /* @__PURE__ */ jsx("div", { className: "overflow-x-auto mt-4", children: /* @__PURE__ */ jsx(DataTable, { thead, tbody }) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showForm,
        onClose: () => setShowForm(false),
        title: "Create Termination",
        className: "w-full max-w-3xl",
        children: /* @__PURE__ */ jsx(
          AddTerminationForm,
          {
            onCancel: () => setShowForm(false),
            onSuccess: () => {
              setShowForm(false);
              fetchTerminations();
            },
            defaultData: defaultTerminationData
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "Edit Branch",
        children: /* @__PURE__ */ jsx(
          EditTerminationForm,
          {
            termination: selectedTremination,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    )
  ] });
};
const Employee = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedUser, setSelectedUser] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedRole, setSelectedRole] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(5);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [activeTab, setActiveTab] = useState("employee");
  const {
    fetchEmployee,
    fetchBranchEmployee,
    isStoreLoading
  } = useEmployeeStore();
  const roleOptions = useEmployeeStore((state) => state.roleOptions);
  const branchCodeOptions = useBranchStore$1((state) => state.branchCodeOptions);
  const [inActiveData, setInActiveData] = useState({
    type: "",
    status: ""
  });
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Employees"
  }, {
    value: "inactive",
    label: "Inactive Employees"
  }];
  const branchcode = useAuthStore((state) => state.branchcode);
  console.log("branchcodefor employee", branchcode);
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  const navigate = useNavigate();
  useEffect(() => {
    fetchEmployee(token);
    fetchBranchEmployee(token, branchcode);
  }, [token, branchcode]);
  const getEmployee = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, role = selectedRole, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      console.log("Store state:", useBranchStore$1.getState());
      let url = `${BASE_URL}/users/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (role) url += `&role=${role}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("userrr>>>>>>>>>", (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setSheetData((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data);
      setTotalItem((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.totalDocuments);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getEmployee();
  }, [currentPage, searchTerm, selectStatus, selectedRole, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Employee created successfully");
    getEmployee();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleDeleteEmployee = (id) => {
    console.log("stafffidd", id);
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleDeleteSubmit = async () => {
    console.log("deletedidinapi", deleteId);
    const deleteData = {
      staff_id: deleteId,
      type: inActiveData.type,
      status: inActiveData.status
    };
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/users/delete`, {
        data: deleteData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 200) {
        setShowDeleteModal(false);
        toast$1.success("Access permission updated Successfully!", toastStyle);
        getEmployee();
        setLoading(false);
        setInActiveData({
          type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleRoleChange = (value) => {
    setSelectedRole(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleNavigate = (id) => {
    console.log("editprofileidd", id);
    alert("navigateactive");
    navigate(`/employee/addpage/${encodeURIComponent(id)}`);
  };
  const handleEditNavigate = (id) => {
    console.log("editprofileidd", id);
    alert("navigateactive");
    navigate(`/employee/editpage/${encodeURIComponent(id)}`);
  };
  const handleView = (staff_id) => {
    navigate(`/employee_profile/${encodeURIComponent(staff_id)}`);
  };
  const thead = () => [{
    data: "Staff Id"
  }, {
    data: "First Name"
  }, {
    data: "Last Name"
  }, {
    data: "Branch Code"
  }, {
    data: "Role"
  }, {
    data: "Email"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((employee) => ({
      id: employee.staff_id,
      data: [{
        data: employee.staff_id
      }, {
        data: employee.firstname
      }, {
        data: employee.lastname
      }, {
        data: employee.branchcode
      }, {
        data: employee.role
      }, {
        data: employee.email
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${employee.status === "active" ? "bg-green-100 text-green-800" : employee.status === "relive" ? "bg-yellow-100 text-yellow-600" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${employee.status === "active" ? "bg-green-800" : employee.status === "relive" ? "bg-yellow-600" : "bg-red-600"}`
          }), employee.status.charAt(0).toUpperCase() + employee.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
            title: "View",
            onClick: () => handleView(employee.staff_id),
            children: /* @__PURE__ */ jsx(Eye, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleNavigate(employee.staff_id),
            title: "Add",
            children: /* @__PURE__ */ jsx(PlusSquareIcon, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditNavigate(employee.staff_id),
            title: "Update",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteEmployee(employee.staff_id),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  const tabs = [{
    id: "employee",
    label: "Employee List"
  }, {
    id: "salary",
    label: "Salary"
  }, {
    id: "leave",
    label: "Documents"
  }, {
    id: "termination",
    label: "Termination"
  }, {
    id: "interview",
    label: "Offer letters"
  }];
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen gap-15",
    children: [/* @__PURE__ */ jsx("div", {
      className: "  dark:border-gray-700 ",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: ` font-medium text-sm  ${activeTab === tab.id ? " text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm " : "border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm "}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "employee" && /* @__PURE__ */ jsx(Fragment, {
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col min-h-screen mt-[-30px]",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "p-4 flex-grow",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex justify-between items-center",
              children: [/* @__PURE__ */ jsx("h2", {
                className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
                children: "Employee Management"
              }), /* @__PURE__ */ jsx(Toaster, {
                position: toastposition,
                reverseOrder: false
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: `flex items-end justify-end gap-4 mb-5`,
              children: /* @__PURE__ */ jsxs("div", {
                className: `flex flex-row gap-4`,
                children: [/* @__PURE__ */ jsx(Dropdown, {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }), /* @__PURE__ */ jsxs("button", {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [/* @__PURE__ */ jsx(FileDown, {
                    className: "mr-1"
                  }), "Export Excel"]
                }), " ", /* @__PURE__ */ jsx("button", {
                  onClick: () => setShowCreateModal(true),
                  className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                  children: "+ New Employee"
                })]
              })
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
              children: /* @__PURE__ */ jsxs("div", {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [/* @__PURE__ */ jsx(Dropdown, {
                  options: statusOptions,
                  selectedValue: selectStatus,
                  onSelect: handleStatusChange,
                  placeholder: "Branch Status",
                  className: "w-full md:w-[200px]"
                }), /* @__PURE__ */ jsx(Dropdown, {
                  options: branchCodeOptions,
                  selectedValue: selectedBranchCode,
                  onSelect: handleBranchCodeChange,
                  placeholder: "Branch Code",
                  className: "w-full md:w-[200px]",
                  isLoading: isStoreLoading
                }), /* @__PURE__ */ jsx(Dropdown, {
                  options: roleOptions,
                  selectedValue: selectedRole,
                  onSelect: handleRoleChange,
                  placeholder: "Manager",
                  className: "w-full md:w-[200px]",
                  isLoading: isStoreLoading
                }), /* @__PURE__ */ jsxs("button", {
                  onClick: toggleSortOrder,
                  className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                  children: ["Sort ", sortOrder === "desc" ? "" : ""]
                }), /* @__PURE__ */ jsx("div", {
                  className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
                  children: /* @__PURE__ */ jsx(SearchInput, {
                    value: searchTerm,
                    onChange: handleSearch,
                    placeholder: "Search branches...",
                    className: "w-full"
                  })
                })]
              })
            }), loading && /* @__PURE__ */ jsx("div", {
              className: "text-center py-4",
              children: "Loading..."
            }), error && /* @__PURE__ */ jsx("div", {
              className: "text-red-500 text-center py-4",
              children: error
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsx(DataTable, {
                thead,
                tbody,
                responsive: true,
                className: "min-w-full"
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
            children: /* @__PURE__ */ jsx(CustomPagination, {
              total: totalItem,
              currentPage,
              defaultPageSize: pageSize,
              onChange: handlePageChange,
              paginationLabel: "Employees",
              isScroll: true
            })
          })]
        })
      }), activeTab === "salary" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(EmployeeSalary, {})
      }), activeTab === "leave" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(Documents, {})
      }), activeTab === "interview" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(OfferLettersGenerative, {})
      }), activeTab === "termination" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(Termination, {})
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx(AlertTriangle, {
              className: "inline mr-2"
            }), " Inactive Employee"]
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 text-sm font-medium text-center",
            children: "Are you sure you want to inactivate this employee?"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(Calendar, {
                  className: "inline mr-1",
                  size: 14
                }), " Type"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "type",
                value: inActiveData.type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Type"
                }), /* @__PURE__ */ jsx("option", {
                  value: "temp",
                  children: "Temporary"
                }), /* @__PURE__ */ jsx("option", {
                  value: "permanent",
                  children: "Permanent"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(UserX, {
                  className: "inline mr-1",
                  size: 14
                }), " Status"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                value: inActiveData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Status"
                }), /* @__PURE__ */ jsx("option", {
                  value: "inactive",
                  children: "Inactive"
                }), /* @__PURE__ */ jsx("option", {
                  value: "relive",
                  children: "Relive"
                }), /* @__PURE__ */ jsx("option", {
                  value: "pending",
                  children: "Pending"
                }), /* @__PURE__ */ jsx("option", {
                  value: "abscond",
                  children: "Abscond"
                }), /* @__PURE__ */ jsx("option", {
                  value: "resigned",
                  children: "Resigned"
                }), /* @__PURE__ */ jsx("option", {
                  value: "terminated",
                  children: "Terminated"
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? "Processing..." : "Confirm"
          })]
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Employee",
      children: /* @__PURE__ */ jsx(EmployeeForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    })]
  });
};
const Employee$1 = withComponentProps(Employee);
const route6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Employee$1
}, Symbol.toStringTag, { value: "Module" }));
const useEmployeeStore = create(
  persist(
    (set) => ({
      employee: [],
      roleOptions: [],
      branchEmployee: [],
      branchEmployeeOptions: [],
      allEmployeecodeOptions: [],
      isLoading: false,
      error: null,
      fetchEmployee: async (token) => {
        try {
          set({ isLoading: true });
          const response = await axios.get(
            `${BASE_URL}/users/read?limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log("roleoptionstore>>>>>>", response.data.result);
          const employee = response.data.data || response.data.result || [];
          const allEmployeecodeOptions = [
            ...new Set(
              employee.map(
                (emp) => JSON.stringify({
                  value: emp.staff_id,
                  label: `${emp.firstname} - ${emp.role}`
                })
              )
            )
          ].map((str) => JSON.parse(str));
          const roleOptions = [...new Set(employee.map((b) => b.role))].map(
            (role) => ({
              value: role,
              label: role
            })
          );
          set({
            employee,
            roleOptions: [{ value: "", label: "All Roles" }, ...roleOptions],
            isLoading: false,
            allEmployeecodeOptions
          });
          console.log("Processed options>>>>>>>>>>>>>>:", allEmployeecodeOptions);
        } catch (error) {
          set({ error, isLoading: false });
        }
      },
      fetchBranchEmployee: async (token, branchcode) => {
        try {
          set({ isLoading: true });
          const response = await axios.get(
            `${BASE_URL}/users/read?branchcode=${branchcode}&limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log("API Response:", response.data);
          const branchEmployee = response.data.data || response.data.result || [];
          console.log("Raw employee data:", branchEmployee);
          const branchEmployeeOptions = [
            ...new Set(
              branchEmployee.map(
                (employee) => JSON.stringify({
                  value: employee.staff_id,
                  label: `${employee.firstname} - ${employee.role}`
                })
              )
            )
          ].map((str) => JSON.parse(str));
          console.log("Processed options:", branchEmployeeOptions);
          set({
            branchEmployee,
            branchEmployeeOptions,
            isLoading: false
          });
        } catch (error) {
          console.error("Error fetching branch employees:", error);
          set({ error, isLoading: false });
        }
      }
    }),
    {
      name: "employee-storage"
    }
  )
);
const CreateBranchForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const allEmployeecodeOptions = useEmployeeStore(
    (state) => state.allEmployeecodeOptions
  );
  console.log("employeeopionsmnagerr", allEmployeecodeOptions);
  const { fetchEmployee, fetchBranchEmployee, isStoreLoading } = useEmployeeStore();
  const [formData, setFormData] = useState({
    branch_hours: "",
    branchcode: "",
    role: "",
    name: "",
    location: "",
    mobile: "",
    email: "",
    manager_id: "",
    managername: "",
    notes: "",
    status: "active",
    closeReason: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  useEffect(() => {
    fetchEmployee(token);
  }, [token]);
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.post(`${BASE_URL}/branch/create`, formData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create branch");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create Branch`, {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(NetworkIcon, { className: "inline mr-2" }),
        " Branch Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Name",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "name",
              value: formData.name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Code",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Branch Hours ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branch_hours",
              value: formData.branch_hours,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Hours",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(MapPin, { className: "inline mr-1", size: 14 }),
            " Location ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "location",
              value: formData.location,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Location",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Contact2, { className: "inline mr-2" }),
        "  Contact Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Mobile ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "mobile",
              value: formData.mobile,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Branch Mobile Number",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "email",
              value: formData.email,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "email",
              placeholder: "Branch Email",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(User2, { className: "inline mr-2" }),
        "    Manager Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Manager ID ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "manager_id",
              value: formData.manager_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: allEmployeecodeOptions == null ? void 0 : allEmployeecodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Manager Name ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "managername",
              value: formData.managername,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Manager Name",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(PlusCircleIcon, { className: "inline mr-2" }),
        "   Additional Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inActive", children: "Inactive" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Role ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "role",
              value: formData.role,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Role",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Branch notes...",
            required: true
          }
        )
      ] }),
      formData.status === "inActive" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Close Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "closeReason",
            value: formData.closeReason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[60px]",
            placeholder: "Closing reason...",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Branch"
        }
      )
    ] })
  ] });
};
const BranchMeetingForm = ({ branchcode, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [customTargets, setCustomTargets] = useState([]);
  const [branches, setBranches] = useState([]);
  const [teams, setTeams] = useState([]);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showParticipants, setShowParticipants] = useState(false);
  const [showCustomTargets, setShowCustomTargets] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [filterTargets, setFilterTargets] = useState([
    {
      type: "",
      branchcode: "",
      teamId: "",
      staffType: "staff"
    }
  ]);
  const [formData, setFormData] = useState({
    branchcode: "",
    title: "",
    notes: "",
    comm_type: "meeting",
    status: "active",
    doc_status: "none",
    meet_link: "",
    start_date_time: "2025-02-01T00:00:00Z,",
    end_date_time: "2025-02-01T23:59:59Z",
    category: "branch",
    field: "custom",
    doc: [],
    custom: [],
    communication_participants: []
  });
  useEffect(() => {
    const fetchInitialData = async () => {
      try {
        const branchesRes = await axios.get(`${BASE_URL}/branch/dropdown`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        setBranches(branchesRes.data.result);
      } catch (err) {
        console.error("Error fetching initial data:", err);
        toast$1.error("Failed to load initial data");
      }
    };
    fetchInitialData();
  }, [token]);
  useEffect(() => {
    const branchcodes = [
      ...new Set(
        filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode)
      )
    ];
    const fetchTeamsForBranches = async () => {
      try {
        const teamsPromises = branchcodes.map(async (branchcode2) => {
          const teamsRes = await axios.get(
            `${BASE_URL}/teams/read?branchcode=${branchcode2}`,
            { headers: { Authorization: `Bearer ${token}` } }
          );
          return teamsRes.data.data;
        });
        const teamsResults = await Promise.all(teamsPromises);
        setTeams(teamsResults.flat());
      } catch (err) {
        console.error("Error fetching teams:", err);
        toast$1.error("Failed to load teams");
      }
    };
    if (branchcodes.length > 0) {
      fetchTeamsForBranches();
    }
  }, [filterTargets, token]);
  useEffect(() => {
    if (formData.category === "custom") {
      fetchCustomParticipants();
    } else if (formData.category === "branch" && formData.branchcode) {
      fetchBranchParticipants();
    } else if (formData.category === "team") {
      fetchTeamParticipants();
    }
  }, [formData.category, formData.branchcode, filterTargets]);
  const fetchBranchParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchTeamParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchCustomParticipants = async () => {
    try {
      const branchFilters = filterTargets.filter((target) => target.type === "branch" && target.branchcode).map((target) => target.branchcode);
      const teamFilters = filterTargets.filter(
        (target) => target.type === "team" && target.teamId && target.branchcode
      ).map((target) => {
        const teamIdParts = target.teamId.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        return `${target.branchcode}/TEAM/${teamId}`;
      });
      const teamBranchFilters = filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode);
      const allBranchFilters = [
        .../* @__PURE__ */ new Set([...branchFilters, ...teamBranchFilters])
      ];
      const staffTypeFilters = [];
      filterTargets.forEach((target) => {
        if (target.type === "branch" || target.type === "team") {
          if (target.staffType === "staff") staffTypeFilters.push("staff");
          if (target.staffType === "client") staffTypeFilters.push("client");
          if (target.staffType === "both") {
            staffTypeFilters.push("staff");
            staffTypeFilters.push("client");
          }
        }
      });
      const uniqueStaffTypes = [...new Set(staffTypeFilters)];
      console.log("Sending filter request with:", {
        branch: allBranchFilters,
        team: teamFilters,
        type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
      });
      if (allBranchFilters.length > 0 || teamFilters.length > 0) {
        const response = await axios.post(
          `${BASE_URL}/users/filter`,
          {
            branch: allBranchFilters,
            team: teamFilters,
            type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
          },
          { headers: { Authorization: `Bearer ${token}` } }
        );
        setStaffOptions([...response.data.staff, ...response.data.client]);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      console.error("Error fetching custom participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "category") {
      setCustomTargets([]);
      setFilterTargets([
        { type: "", branchcode: "", teamId: "", staffType: "staff" }
      ]);
    }
  };
  const handleFileUpload = (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const uploadedFiles = files.map((file) => ({
      file,
      // Store the actual File object
      name: file.name,
      type: file.type.split("/")[1] || "file"
    }));
    setFormData((prev) => ({
      ...prev,
      doc: [...prev.doc, ...uploadedFiles]
    }));
  };
  const removeFile = (index) => {
    setFormData((prev) => {
      const updatedFiles = [...prev.doc];
      updatedFiles.splice(index, 1);
      return { ...prev, doc: updatedFiles };
    });
  };
  const addParticipant = (person) => {
    if (!participants.some((p) => p.person_id === person.person_id)) {
      setParticipants([
        ...participants,
        {
          person_id: person.person_id,
          role: person.role,
          isdocvisible: formData.comm_type === "doc"
        }
      ]);
    }
  };
  const removeParticipant = (personId) => {
    setParticipants(participants.filter((p) => p.person_id !== personId));
  };
  const toggleDocVisibility = (personId) => {
    setParticipants(
      participants.map(
        (p) => p.person_id === personId ? { ...p, isdocvisible: !p.isdocvisible } : p
      )
    );
  };
  const addCustomTarget = (type, id) => {
    if (type === "team") {
      const target = filterTargets.find(
        (t) => t.type === "team" && t.teamId === id
      );
      if (target && target.branchcode) {
        const teamIdParts = id.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        const formattedId = `${target.branchcode}/TEAM/${teamId}`;
        if (!customTargets.some(
          (t) => t.target_id === formattedId && t.type === type
        )) {
          setCustomTargets([
            ...customTargets,
            { target_id: formattedId, type }
          ]);
        }
        return;
      }
    }
    if (!customTargets.some((t) => t.target_id === id && t.type === type)) {
      setCustomTargets([...customTargets, { target_id: id, type }]);
    }
  };
  const handleFilterTargetChange = (index, field, value) => {
    const updatedTargets = [...filterTargets];
    updatedTargets[index][field] = value;
    if (field === "type") {
      updatedTargets[index].branchcode = "";
      updatedTargets[index].teamId = "";
    } else if (field === "branchcode" && updatedTargets[index].type === "team") {
      updatedTargets[index].teamId = "";
    }
    setFilterTargets(updatedTargets);
  };
  const addFilterTarget = () => {
    setFilterTargets([
      ...filterTargets,
      { type: "", branchcode: "", teamId: "", staffType: "staff" }
    ]);
  };
  const removeFilterTarget = (index) => {
    var _a, _b, _c, _d;
    if (filterTargets.length > 1) {
      const updatedTargets = [...filterTargets];
      updatedTargets.splice(index, 1);
      setFilterTargets(updatedTargets);
      if (((_a = updatedTargets[index]) == null ? void 0 : _a.type) === "branch" && ((_b = updatedTargets[index]) == null ? void 0 : _b.branchcode)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "branch" && t.target_id === updatedTargets[index].branchcode)
          )
        );
      } else if (((_c = updatedTargets[index]) == null ? void 0 : _c.type) === "team" && ((_d = updatedTargets[index]) == null ? void 0 : _d.teamId)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "team" && t.target_id === updatedTargets[index].teamId)
          )
        );
      }
    }
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const meetingData = {
        branchcode: formData.branchcode,
        title: formData.title,
        notes: formData.notes,
        comm_type: formData.comm_type,
        status: formData.status,
        meet_link: formData.meet_link,
        start_date_time: formData.start_date_time,
        end_date_time: formData.end_date_time,
        doc_status: formData.doc_status,
        category: formData.category,
        field: formData.field,
        custom: customTargets,
        communication_participants: participants
      };
      const formDataToSend = new FormData();
      formDataToSend.append("data", JSON.stringify([meetingData]));
      formData.doc.forEach((fileObj) => {
        formDataToSend.append("URL", fileObj.file);
      });
      console.log("formataaaanew form", formDataToSend);
      const response = await axios.post(
        `${BASE_URL}/doc_meet/create`,
        formDataToSend,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "multipart/form-data"
          }
        }
      );
      if (response.status === 201) {
        toast$1.success(
          `${formData.comm_type === "meeting" ? "Meeting" : "Document"} created successfully!`
        );
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create communication");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `Error creating ${formData.comm_type === "meeting" ? "meeting" : "document"}`
      );
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        formData.comm_type === "meeting" ? /* @__PURE__ */ jsx(Video, { className: "inline mr-2" }) : /* @__PURE__ */ jsx(FileUp, { className: "inline mr-2" }),
        formData.comm_type === "meeting" ? "Meeting Information" : "Document Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Branch Code",
            " ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Title",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Title",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Type",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "meeting", children: "Meeting" }),
                /* @__PURE__ */ jsx("option", { value: "doc", children: "Document" }),
                /* @__PURE__ */ jsx("option", { value: "followup", children: "Follow-up" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "declined", children: "Declined" })
              ]
            }
          )
        ] }),
        formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Document Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "doc_status",
              value: formData.doc_status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "none", children: "None" }),
                /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Verified & Closed" }),
                /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" })
              ]
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Link$2, { className: "inline mr-1", size: 14 }),
            " Meeting Link",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "meet_link",
              value: formData.meet_link,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "url",
              placeholder: "https://meet.google.com/example",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date_time",
              value: formData.start_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " End Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date_time",
              value: formData.end_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Category",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "category",
              value: formData.category,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                /* @__PURE__ */ jsx("option", { value: "team", children: "Team" }),
                /* @__PURE__ */ jsx("option", { value: "all", children: "All" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Field"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "field",
              value: formData.field,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "project", children: "Project" }),
                /* @__PURE__ */ jsx("option", { value: "task", children: "Task" }),
                /* @__PURE__ */ jsx("option", { value: "lead", children: "Lead" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Notes...",
            required: true
          }
        )
      ] }),
      formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileUp, { className: "inline mr-1", size: 14 }),
          " Documents"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "file",
            id: "file-upload",
            multiple: true,
            onChange: handleFileUpload,
            className: "w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-primary)] file:text-white hover:file:bg-[var(--color-hover)]"
          }
        ),
        formData.doc.length > 0 && /* @__PURE__ */ jsx("div", { className: "mt-4 space-y-2", children: formData.doc.map((file, index) => /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
            children: [
              /* @__PURE__ */ jsx("span", { className: "text-sm", children: file.name }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => removeFile(index),
                  className: "text-red-500 hover:text-red-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ]
          },
          index
        )) })
      ] }),
      formData.category === "custom" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowCustomTargets(!showCustomTargets),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Custom Filters (",
                customTargets.length,
                ")"
              ] }),
              showCustomTargets ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showCustomTargets && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          filterTargets.map((target, index) => /* @__PURE__ */ jsxs(
            "div",
            {
              className: "space-y-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",
              children: [
                /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsxs("h5", { className: "text-sm font-medium", children: [
                    "Filter ",
                    index + 1
                  ] }),
                  filterTargets.length > 1 && /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeFilterTarget(index),
                      className: "text-red-500 hover:text-red-700 p-1",
                      children: /* @__PURE__ */ jsx(Minus, { size: 16 })
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Filter Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.type,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "type",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select filter type" }),
                          /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                          /* @__PURE__ */ jsx("option", { value: "team", children: "Team" })
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Branch" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.branchcode,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "branchcode",
                            e.target.value
                          );
                          handleFilterTargetChange(index, "teamId", "");
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select branch" }),
                          branches.map((branch2) => /* @__PURE__ */ jsxs(
                            "option",
                            {
                              value: branch2.branchcode,
                              children: [
                                branch2.branchcode,
                                " - ",
                                branch2.name
                              ]
                            },
                            branch2.branchcode
                          ))
                        ]
                      }
                    )
                  ] }),
                  target.type === "team" && target.branchcode && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.teamId,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "teamId",
                            e.target.value
                          );
                          if (e.target.value) {
                            addCustomTarget("team", e.target.value);
                          }
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select team" }),
                          teams.filter(
                            (team) => team.branchcode === target.branchcode
                          ).map((team) => /* @__PURE__ */ jsx("option", { value: team.team_id, children: team.team_name }, team.team_id))
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.staffType,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "staffType",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "staff", children: "Staff" }),
                          /* @__PURE__ */ jsx("option", { value: "client", children: "Client" }),
                          /* @__PURE__ */ jsx("option", { value: "both", children: "Both" })
                        ]
                      }
                    )
                  ] })
                ] }),
                target.type === "branch" && target.branchcode && /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: () => addCustomTarget("branch", target.branchcode),
                    className: "text-xs bg-red-700 hover:bg-red-700 text-white px-2 py-1 rounded",
                    children: "Add Branch Filter"
                  }
                ) })
              ]
            },
            index
          )),
          /* @__PURE__ */ jsxs(
            "button",
            {
              type: "button",
              onClick: addFilterTarget,
              className: "flex items-center text-sm text-blue-500 hover:text-blue-700",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Another Filter"
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowParticipants(!showParticipants),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Participants (",
                participants.length,
                ")"
              ] }),
              showParticipants ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showParticipants && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: formData.category === "custom" ? "Select participants from filtered results" : `Select participants from ${formData.category}` }),
            staffOptions.length > 0 ? /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: staffOptions.map((person) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    person.person_id,
                    " (",
                    person.role,
                    ")"
                  ] }),
                  participants.some(
                    (p) => p.person_id === person.person_id
                  ) ? /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeParticipant(person.person_id),
                      className: "text-red-500 hover:text-red-700",
                      children: /* @__PURE__ */ jsx(X, { size: 16 })
                    }
                  ) : /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => addParticipant(person),
                      className: "text-green-500 hover:text-green-700",
                      children: /* @__PURE__ */ jsx(Check, { size: 16 })
                    }
                  )
                ]
              },
              person.person_id
            )) }) : /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "No participants available based on current filters" })
          ] }),
          participants.length > 0 && /* @__PURE__ */ jsxs("div", { className: "mt-4", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: "Selected Participants" }),
            /* @__PURE__ */ jsx("div", { className: "space-y-2", children: participants.map((participant) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    participant.person_id,
                    " (",
                    participant.role,
                    ")"
                  ] }),
                  /* @__PURE__ */ jsxs("div", { className: "flex items-center space-x-2", children: [
                    formData.comm_type === "doc" && /* @__PURE__ */ jsxs("label", { className: "flex items-center space-x-1", children: [
                      /* @__PURE__ */ jsx(
                        "input",
                        {
                          type: "checkbox",
                          checked: participant.isdocvisible,
                          onChange: () => toggleDocVisibility(participant.person_id),
                          className: "rounded"
                        }
                      ),
                      /* @__PURE__ */ jsx("span", { className: "text-xs", children: "View Doc" })
                    ] }),
                    /* @__PURE__ */ jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => removeParticipant(participant.person_id),
                        className: "text-red-500 hover:text-red-700",
                        children: /* @__PURE__ */ jsx(X, { size: 16 })
                      }
                    )
                  ] })
                ]
              },
              participant.person_id
            )) })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.comm_type === "meeting" ? "Create Meeting" : "Upload Document"
        }
      )
    ] })
  ] });
};
const BranchList = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/branch/admin?role=admin&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseeebranch", (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.result);
      setSheetData((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.result);
      setTotalItem(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.result) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Branch added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    const payload = {
      userId: "GK123"
    };
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/branch/delete/${id}`, {
        data: payload,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Branch deleted successfully!");
        fetchBranches(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "name"
  }, {
    data: "Role"
  }, {
    data: "Actions"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2) => ({
      id: branch2.id,
      data: [{
        data: branch2.id
      }, {
        data: branch2.branchcode
      }, {
        data: branch2.name
      }, {
        data: branch2.role
      }, {
        data: /* @__PURE__ */ jsx("div", {
          className: "flex flex-wrap justify-center gap-2",
          children: /* @__PURE__ */ jsx(Link$1, {
            to: `/branch/${branch2.branchcode}`,
            children: /* @__PURE__ */ jsx("button", {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              children: /* @__PURE__ */ jsx(Eye, {
                size: 18
              })
            })
          })
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Branch Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Branch", " +"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowMeetingModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
                className: "ml-2",
                size: 15
              })]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Branch",
      children: /* @__PURE__ */ jsx(CreateBranchForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Branch",
      children: /* @__PURE__ */ jsx(EditBranchForm, {
        branch: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Branch Meeting",
      children: /* @__PURE__ */ jsx(BranchMeetingForm, {
        branch: selectedBranch,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this branch? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Branhch"
          })]
        })]
      })
    })]
  });
};
const BranchList$1 = withComponentProps(BranchList);
const route4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: BranchList$1
}, Symbol.toStringTag, { value: "Module" }));
const CreateBranchRole = ({ branch: branch2, onSuccess, onCancel }) => {
  console.log("roleeebranchhc", branch2);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const allEmployeecodeOptions = useEmployeeStore(
    (state) => state.allEmployeecodeOptions
  );
  console.log("employeeopionsmnagerr", allEmployeecodeOptions);
  const { fetchEmployee, fetchBranchEmployee, isStoreLoading } = useEmployeeStore();
  const branchData = branch2[0];
  console.log("branchdataaa", branchData);
  const [formData, setFormData] = useState({
    branch_hours: branchData.branch_hours,
    branchcode: branchData.branchcode,
    name: branchData.name,
    location: branchData.location,
    mobile: branchData.mobile,
    email: branchData.email,
    manager_id: branchData.manager_id,
    managername: branchData.managername,
    notes: branchData.notes,
    role: "",
    status: "active",
    closeReason: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  useEffect(() => {
    fetchEmployee(token);
  }, [token]);
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const response = await axios.post(`${BASE_URL}/branch/create`, formData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create branch");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create Branch`, {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(PlusCircleIcon, { className: "inline mr-2" }),
        "   Additional Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inActive", children: "Inactive" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Role ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "role",
              value: formData.role,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Role",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Branch notes...",
            required: true
          }
        )
      ] }),
      formData.status === "inActive" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Close Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "closeReason",
            value: formData.closeReason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[60px]",
            placeholder: "Closing reason...",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Branch"
        }
      )
    ] })
  ] });
};
const BranchViewPage = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const navigate = useNavigate();
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const {
    id
  } = useParams();
  console.log("useparammss", id);
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a;
    setLoading(true);
    try {
      let url = `${BASE_URL}/branch/read?branchcode=${id}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseeebranch", response);
      setSheetData(response == null ? void 0 : response.data);
      setTotalItem(((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.length) || 0);
      setData((response == null ? void 0 : response.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Branch added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (id2) => {
    setShowDeleteModal(true);
    setDeleteId(id2);
  };
  const handleDeleteSubmit = async () => {
    const id2 = Number(deleteId);
    const payload = {
      userId: "GK123"
    };
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/branch/delete/${id2}`, {
        data: payload,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Branch deleted successfully!");
        fetchBranches(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "name"
  }, {
    data: "Location"
  }, {
    data: "Mobile"
  }, {
    data: "Manager ID"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2) => ({
      id: branch2.id,
      data: [{
        data: branch2.id
      }, {
        data: branch2.branchcode
      }, {
        data: branch2.name
      }, {
        data: branch2.location
      }, {
        data: branch2.mobile
      }, {
        data: branch2.manager_id
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-300"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "active" ? "bg-green-800 dark:bg-green-400" : " bg:text-red-300 bg-red-800"}`
          }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-wrap justify-center gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(branch2),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(branch2.id),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  const handleGoBack = () => {
    navigate(-1);
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-5",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Branch Role Management"
          }), /* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsxs("button", {
              className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
              onClick: handleGoBack,
              children: [/* @__PURE__ */ jsx(LogOut, {
                className: "inline rotate-180 text-gray-500 mr-3"
              }), "Go Back"]
            })
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Role", " +"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowMeetingModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
                className: "ml-2",
                size: 15
              })]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Role",
      children: /* @__PURE__ */ jsx(CreateBranchRole, {
        branch: data,
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Branch",
      children: /* @__PURE__ */ jsx(EditBranchForm, {
        branch: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Branch Meeting",
      children: /* @__PURE__ */ jsx(BranchMeetingForm, {
        branch: selectedBranch,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this branch? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Branhch"
          })]
        })]
      })
    })]
  });
};
const BranchViewPage$1 = withComponentProps(BranchViewPage);
const route5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: BranchViewPage$1
}, Symbol.toStringTag, { value: "Module" }));
const Payslip = () => {
  const payslipRef = React.useRef(null);
  const navigate = useNavigate();
  const employeeData = {
    name: "John Doe",
    employeeId: "EMP-2023-001",
    designation: "Senior Software Engineer",
    department: "Development",
    bankAccount: "XXXXXX7890",
    panNumber: "ABCDE1234F",
    joiningDate: "15/03/2020",
    payPeriod: "June 2023",
    paymentDate: "30/06/2023"
  };
  const salaryDetails = {
    basic: 1e4,
    conveyanceAllowance: 5e3,
    otherAllowances: 0,
    totalEarnings: 15e3,
    pf: 1800,
    totalDeductions: 500,
    netPay: 14500,
    inWords: "Fourteen Thousand five Hundred Only"
  };
  const handleGoBack = () => {
    navigate(-1);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-4",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between items-center mb-6 no-print",
      children: [/* @__PURE__ */ jsxs("button", {
        className: "text-gray-500 bg-gray-200 px-3 py-2 rounded-lg",
        onClick: handleGoBack,
        children: [/* @__PURE__ */ jsx(LogOut, {
          className: "inline rotate-180 text-gray-500 mr-3"
        }), "Go Back"]
      }), /* @__PURE__ */ jsx("h1", {
        className: "text-2xl font-bold text-gray-600",
        children: "Salary Slip"
      }), /* @__PURE__ */ jsx("div", {
        className: "flex gap-4"
      })]
    }), /* @__PURE__ */ jsxs("div", {
      ref: payslipRef,
      className: "payslip-container bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto border border-gray-200",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "text-center mb-8",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-3xl font-bold text-red-700",
          children: "Almino Structural Consultancy"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-gray-600",
          children: "123 Business Park, City - 600001"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-gray-600",
          children: "GSTIN: 22AAAAA0000A1Z5"
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "border-b-2 border-gray-300 pb-4 mb-6",
        children: [/* @__PURE__ */ jsx("h3", {
          className: "text-2xl font-semibold text-center text-gray-800",
          children: "SALARY SLIP"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-center text-gray-600",
          children: employeeData.payPeriod
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("h4", {
            className: "text-lg font-semibold text-gray-700 mb-2",
            children: "Employee Details"
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Name:"
              }), " ", employeeData.name]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Employee ID:"
              }), " ", employeeData.employeeId]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Designation:"
              }), " ", employeeData.designation]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Department:"
              }), " ", employeeData.department]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("h4", {
            className: "text-lg font-semibold text-gray-700 mb-2",
            children: "Payment Details"
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Bank Account:"
              }), " ", employeeData.bankAccount]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "PAN Number:"
              }), " ", employeeData.panNumber]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Joining Date:"
              }), " ", employeeData.joiningDate]
            }), /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium",
                children: "Payment Date:"
              }), " ", employeeData.paymentDate]
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "mb-8",
        children: [/* @__PURE__ */ jsx("h4", {
          className: "text-lg font-semibold text-gray-700 mb-4",
          children: "Salary Details"
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsxs("table", {
            className: "min-w-full border border-gray-300",
            children: [/* @__PURE__ */ jsx("thead", {
              children: /* @__PURE__ */ jsxs("tr", {
                className: "bg-gray-100",
                children: [/* @__PURE__ */ jsx("th", {
                  className: "py-2 px-4 border-b border-r border-gray-300 text-left",
                  children: "Earnings"
                }), /* @__PURE__ */ jsx("th", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: "Amount ()"
                }), /* @__PURE__ */ jsx("th", {
                  className: "py-2 px-4 border-b border-l border-r border-gray-300 text-left",
                  children: "Deductions"
                }), /* @__PURE__ */ jsx("th", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: "Amount ()"
                })]
              })
            }), /* @__PURE__ */ jsxs("tbody", {
              children: [/* @__PURE__ */ jsxs("tr", {
                children: [/* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-r border-gray-300",
                  children: "Basic Salary"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.basic.toLocaleString()
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-l border-r border-gray-300",
                  children: "Provident Fund"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.pf.toLocaleString()
                })]
              }), /* @__PURE__ */ jsxs("tr", {
                children: [/* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-r border-gray-300",
                  children: "Food Allowance"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.conveyanceAllowance.toLocaleString()
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-l border-r border-gray-300"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right"
                })]
              }), /* @__PURE__ */ jsxs("tr", {
                children: [/* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-r border-gray-300",
                  children: "Other Allowances"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.otherAllowances.toLocaleString()
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-l border-r border-gray-300"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right"
                })]
              }), /* @__PURE__ */ jsxs("tr", {
                className: "font-semibold",
                children: [/* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-r border-gray-300",
                  children: "Total Earnings"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.totalEarnings.toLocaleString()
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-l border-r border-gray-300",
                  children: "Total Deductions"
                }), /* @__PURE__ */ jsx("td", {
                  className: "py-2 px-4 border-b border-gray-300 text-right",
                  children: salaryDetails.totalDeductions.toLocaleString()
                })]
              })]
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-between items-center mb-8 p-4 bg-gray-100 rounded",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("p", {
            className: "font-semibold",
            children: "Net Pay (In Words):"
          }), /* @__PURE__ */ jsx("p", {
            className: "italic",
            children: salaryDetails.inWords
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "text-right",
          children: [/* @__PURE__ */ jsx("p", {
            className: "font-semibold",
            children: "Net Payable Amount:"
          }), /* @__PURE__ */ jsxs("p", {
            className: "text-2xl font-bold",
            children: [" ", salaryDetails.netPay.toLocaleString()]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-between pt-4 border-t border-gray-300",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("p", {
            className: "font-medium",
            children: "Employee Signature"
          }), /* @__PURE__ */ jsx("div", {
            className: "h-16"
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("p", {
            className: "font-medium",
            children: "For Almino Structural Consultancy"
          }), /* @__PURE__ */ jsx("div", {
            className: "h-16"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "text-center text-sm text-gray-500 mt-8",
        children: [/* @__PURE__ */ jsx("p", {
          children: "This is a system generated payslip and does not require signature"
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-1",
          children: "For any queries, please contact HR Department"
        })]
      })]
    })]
  });
};
const PaySlip = withComponentProps(Payslip);
const route7 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: PaySlip
}, Symbol.toStringTag, { value: "Module" }));
const AddNewEmployeeDetail = () => {
  const [activeTab, setActiveTab] = useState("personal");
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const staff_id = decodeURIComponent(id);
  const [isLoading, setIsLoading] = useState(false);
  const [personalData, setPersonalData] = useState([]);
  const [masterLanguages, setMasterLanguages] = useState([]);
  const [masterSoftware, setMasterSoftware] = useState([]);
  const branchcode = useAuthStore((state) => state.branchcode);
  const [existingData, setExistingData] = useState({
    education: [],
    employment: [],
    references: [],
    emergencyContacts: [],
    software: [],
    languages: []
  });
  const [formData, setFormData] = useState({
    education: [{
      sno: 1,
      degree: "",
      institute: "",
      yearOfPassing: "",
      percentage: "",
      start_year: "",
      end_year: ""
    }],
    employment: [{
      sno: 1,
      companyName: "",
      designation: "",
      salary: "",
      periodFrom: "",
      periodTo: "",
      reasonForResign: ""
    }],
    references: [{
      sno: 1,
      name: "",
      relation: "",
      contactNo: "",
      address: "",
      referstaff_id: ""
    }],
    emergencyContacts: [{
      sno: 1,
      name: "",
      relation: "",
      mobileNo: "",
      landlineNo: ""
    }],
    software: [],
    languages: []
  });
  const navigate = useNavigate();
  const getPersonalData = async () => {
    var _a;
    const response = await axios.get(`${BASE_URL}/users/read?staff_id=${staff_id}`, {
      headers: {
        Authorization: `Bearer ${token}`
      }
    });
    console.log("userpersonalresponsee", response);
    setPersonalData(((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data[0]) || []);
  };
  const fetchMasterData = async () => {
    try {
      const langRes = await axios.get(`${BASE_URL}/master/language/read?branchcode=${branchcode}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setMasterLanguages(langRes.data.data || []);
      console.log("response eof languagess>>>>>>>>>>>>>>>", langRes);
      const softRes = await axios.get(`${BASE_URL}/master/software/read?branchcode=${branchcode}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseesoftwareeee", softRes);
      setMasterSoftware(softRes.data.data || []);
    } catch (error) {
      console.error("Error fetching master data:", error);
      toast$1.error("Failed to fetch master data");
    }
  };
  useEffect(() => {
    getPersonalData();
    fetchMasterData();
  }, []);
  useEffect(() => {
    const fetchData = async () => {
      var _a, _b, _c, _d, _e, _f;
      try {
        setIsLoading(true);
        const eduRes = await axios.get(`${BASE_URL}/users/education/read?staff_id=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("response for education", eduRes);
        if (((_a = eduRes.data.data) == null ? void 0 : _a.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            education: eduRes.data.data.map((item, index) => ({
              sno: index + 1,
              degree: item.degree,
              institute: item.institute,
              yearOfPassing: item.passing,
              percentage: item.percentage,
              start_year: item.start_year,
              end_year: item.end_year
            }))
          }));
        }
        const empRes = await axios.get(`${BASE_URL}/users/experience/read?usersId=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (((_b = empRes.data.data) == null ? void 0 : _b.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            employment: empRes.data.data.map((item, index) => ({
              sno: index + 1,
              companyName: item.companyname,
              designation: item.designation,
              salary: item.lastsalary,
              periodFrom: item.start_year,
              periodTo: item.end_year,
              reasonForResign: item.reason
            }))
          }));
        }
        const emgRes = await axios.get(`${BASE_URL}/users/emergency/read?branchcode=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("responsefor emergencycontact", emgRes);
        if (((_c = emgRes.data.data) == null ? void 0 : _c.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            emergencyContacts: emgRes.data.data.map((item, index) => ({
              sno: index + 1,
              name: item.name,
              relation: item.relation,
              mobileNo: item.contactno,
              landlineNo: item.landline
            }))
          }));
        }
        const refRes = await axios.get(`${BASE_URL}/users/reference/read?staff_id=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (((_d = refRes.data.data) == null ? void 0 : _d.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            references: refRes.data.data.map((item, index) => ({
              sno: index + 1,
              name: item.name,
              relation: item.relation,
              contactNo: item.contactno,
              address: item.address,
              referstaff_id: item.referstaff_id
            }))
          }));
        }
        const langRes = await axios.get(`${BASE_URL}/users/language/read?staff_id=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("laanguage previous datas", langRes);
        if (((_e = langRes.data.data) == null ? void 0 : _e.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            languages: langRes.data.data.map((item, index) => ({
              sno: index + 1,
              language_id: item.language_id,
              language: item.name,
              // Assuming API returns language_name
              read: item.can_read,
              speak: item.can_speak,
              write: item.can_write,
              fluency: item.proficiency
            }))
          }));
        }
        const softRes = await axios.get(`${BASE_URL}/users/software/read?staff_id=${staff_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("software previous response", softRes);
        if (((_f = softRes.data.data) == null ? void 0 : _f.length) > 0) {
          setExistingData((prev) => ({
            ...prev,
            software: softRes.data.data.map((item, index) => ({
              sno: index + 1,
              software_id: item.software_id,
              softwareName: item.software_name,
              // Assuming API returns software_name
              proficiency: item.proficiency,
              remark: item.remark
            }))
          }));
        }
      } catch (error) {
        console.error("Error fetching data:", error);
        toast$1.error("Failed to fetch existing data");
      } finally {
        setIsLoading(false);
      }
    };
    if (staff_id) {
      fetchData();
    }
  }, [staff_id, token]);
  useEffect(() => {
    if (masterLanguages.length > 0) {
      setFormData((prev) => ({
        ...prev,
        languages: masterLanguages.map((lang, index) => ({
          sno: index + 1,
          language_id: lang.id,
          language: lang.name,
          read: false,
          speak: false,
          write: false,
          fluency: ""
        }))
      }));
    }
  }, [masterLanguages]);
  useEffect(() => {
    if (masterSoftware.length > 0) {
      setFormData((prev) => ({
        ...prev,
        software: masterSoftware.map((soft, index) => ({
          sno: index + 1,
          software_id: soft.id,
          softwareName: soft.name,
          proficiency: "",
          remark: ""
        }))
      }));
    }
  }, [masterSoftware]);
  const handleGoBack = () => {
    navigate(-1);
  };
  const handleLanguagesSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const languagesToSubmit = formData.languages.filter((item) => item.fluency || item.read || item.speak || item.write || item.remark);
      const payload = {
        userDatas: languagesToSubmit.map((item) => ({
          staff_id,
          language_id: item.language_id,
          can_read: item.read,
          can_speak: item.speak,
          can_write: item.write,
          proficiency: item.fluency,
          remark: item.remark || ""
        }))
      };
      console.log("create languageemployee", payload);
      await axios.post(`${BASE_URL}/users/language/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Language details saved successfully");
    } catch (error) {
      console.error("Error saving language details:", error);
      toast$1.error("Failed to save language details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleSoftwareSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const softwareToSubmit = formData.software.filter((item) => item.proficiency);
      const payload = {
        userDatas: softwareToSubmit.map((item) => ({
          staff_id,
          software_id: item.software_id,
          proficiency: item.proficiency,
          remark: item.remark || ""
        }))
      };
      await axios.post(`${BASE_URL}/users/software/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Software proficiency saved successfully");
    } catch (error) {
      console.error("Error saving software proficiency:", error);
      toast$1.error("Failed to save software proficiency");
    } finally {
      setIsLoading(false);
    }
  };
  const nextTab = () => {
    const tabs = ["personal", "education", "other"];
    const currentIndex = tabs.indexOf(activeTab);
    if (currentIndex < tabs.length - 1) {
      setActiveTab(tabs[currentIndex + 1]);
    }
  };
  const prevTab = () => {
    const tabs = ["personal", "education", "other"];
    const currentIndex = tabs.indexOf(activeTab);
    if (currentIndex > 0) {
      setActiveTab(tabs[currentIndex - 1]);
    }
  };
  const addNewEntry = (arrayName, template) => {
    setFormData((prev) => ({
      ...prev,
      [arrayName]: [...prev[arrayName], {
        ...template,
        sno: prev[arrayName].length + 1
      }]
    }));
  };
  const handleArrayChange = (arrayName, index, field, value) => {
    const updatedArray = [...formData[arrayName]];
    updatedArray[index][field] = value;
    setFormData({
      ...formData,
      [arrayName]: updatedArray
    });
  };
  const handleEducationSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const educationToSubmit = formData.education.filter((item) => item.degree && item.institute && item.yearOfPassing);
      const payload = {
        userDatas: educationToSubmit.map((item) => ({
          staff_id,
          degree: item.degree,
          institute: item.institute,
          passing: item.yearOfPassing,
          percentage: item.percentage,
          start_year: item.start_year,
          end_year: item.end_year
        }))
      };
      await axios.post(`${BASE_URL}/users/education/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Education details saved successfully");
      nextTab();
    } catch (error) {
      console.error("Error saving education:", error);
      toast$1.error("Failed to save education details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleEmploymentSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const employmentToSubmit = formData.employment.filter((item) => item.companyName && item.designation);
      const payload = {
        userDatas: employmentToSubmit.map((item) => ({
          staff_id,
          companyname: item.companyName,
          designation: item.designation,
          lastsalary: item.salary,
          start_year: item.periodFrom,
          end_year: item.periodTo,
          reason: item.reasonForResign
        }))
      };
      await axios.post(`${BASE_URL}/users/experience/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Employment details saved successfully");
      nextTab();
    } catch (error) {
      console.error("Error saving employment:", error);
      toast$1.error("Failed to save employment details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleReferencesSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const referencesToSubmit = formData.references.filter((item) => item.name && item.relation);
      const payload = {
        userDatas: referencesToSubmit.map((item) => ({
          staff_id,
          referstaff_id: item.referstaff_id || staff_id,
          // fallback to staff_id if not provided
          name: item.name,
          relation: item.relation,
          contactno: item.contactNo,
          address: item.address
        }))
      };
      await axios.post(`${BASE_URL}/users/reference/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("References saved successfully");
    } catch (error) {
      console.error("Error saving references:", error);
      toast$1.error("Failed to save references");
    } finally {
      setIsLoading(false);
    }
  };
  const handleEmergencySubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const emergencyToSubmit = formData.emergencyContacts.filter((item) => item.name && item.relation);
      const payload = {
        userDatas: emergencyToSubmit.map((item) => ({
          staff_id,
          name: item.name,
          relation: item.relation,
          contactno: item.mobileNo,
          landline: item.landlineNo
        }))
      };
      await axios.post(`${BASE_URL}/users/emergency/create`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Emergency contacts saved successfully");
    } catch (error) {
      console.error("Error saving emergency contacts:", error);
      toast$1.error("Failed to save emergency contacts");
    } finally {
      setIsLoading(false);
    }
  };
  const handleFinalSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      await Promise.all([handleReferencesSubmit(e), handleEmergencySubmit(e), handleSoftwareSubmit(e), handleLanguagesSubmit(e)]);
      toast$1.success("All details saved successfully");
      navigate(-1);
    } catch (error) {
      console.error("Error in final submission:", error);
      toast$1.error("Failed to save some details");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-6xl mx-auto bg-transparent dark:bg-gray-800 overflow-hidden",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx("div", {
          className: "p-4 text-red-700 mb-10",
          children: /* @__PURE__ */ jsx("h1", {
            className: "text-2xl font-bold",
            children: "Employee Information Form"
          })
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          children: /* @__PURE__ */ jsxs("button", {
            className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
            onClick: handleGoBack,
            children: [/* @__PURE__ */ jsx(LogOut, {
              className: "inline rotate-180 text-gray-500 mr-3"
            }), "Go Back"]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex border-b border-gray-200 dark:border-gray-700 mb-10",
        children: [/* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "personal" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("personal"),
          children: "Personal Information"
        }), /* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "education" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("education"),
          children: "Education & Experience"
        }), /* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "other" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("other"),
          children: "Other Details"
        })]
      }), activeTab === "personal" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8 bg-white rounded-2xl h-[750px] overflow-y-auto",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Personal Information"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
            children: [" ", /* @__PURE__ */ jsxs("div", {
              children: [" ", /* @__PURE__ */ jsxs("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: [" ", "First Name", " "]
              }), " ", /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.firstname || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Last Name"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.lastname || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Date of Birth"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.dob ? new Date(personalData.dob).toISOString().split("T")[0] : "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Gender"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.gender || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Marital Status"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.marital || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Blood Group"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.bloodgroup || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Mobile No"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.phonenumber || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Residence Contact no"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.alternumber || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Email ID (Personal)"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.email || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Branch Code"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.branchcode || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Role"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.role || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "PSN CODE"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.psn || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Pan Card Number"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.pannumber || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Adhar Card Number"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.aadharnumber || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Department"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: personalData.department || "",
                disabled: true,
                className: "max-w-[400px] w-[300px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Present Address"
              }), /* @__PURE__ */ jsx("textarea", {
                value: personalData.presentaddress || "",
                disabled: true,
                rows: 3,
                className: "w-[1020px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Permanent Address"
              }), /* @__PURE__ */ jsx("textarea", {
                value: personalData.permanentaddress || "",
                disabled: true,
                rows: 3,
                className: "w-[1020px] bg-gray-100 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded cursor-not-allowed"
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex m-10 justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            disabled: true,
            className: "px-4 py-2 bg-gray-300 text-gray-700 rounded-md cursor-not-allowed",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: nextTab,
            className: "px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",
            children: "Next"
          })]
        })]
      }), activeTab === "education" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Educational Qualification"
            }), /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: () => addNewEntry("education", {
                sno: formData.education.length + 1,
                degree: "",
                institute: "",
                yearOfPassing: "",
                percentage: "",
                start_year: "",
                end_year: ""
              }),
              className: "px-3 py-1.5 bg-red-600 text-white rounded-sm hover:bg-red-700 focus:outline-none focus:ring-2  text-sm",
              children: "+ Add Education"
            })]
          }), existingData.education.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing Education"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Degree"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Institute"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Year of Passing"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Percentage"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.education.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.degree
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.institute
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.yearOfPassing
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.percentage
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "overflow-x-auto",
            children: [/* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Degree/Diploma/Certificate"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Institute/University"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Year of Passing"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Percentage"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.education.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.degree,
                      onChange: (e) => handleArrayChange("education", index, "degree", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.institute,
                      onChange: (e) => handleArrayChange("education", index, "institute", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.yearOfPassing,
                      onChange: (e) => handleArrayChange("education", index, "yearOfPassing", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.percentage,
                      onChange: (e) => handleArrayChange("education", index, "percentage", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("button", {
                      type: "button",
                      onClick: () => {
                        const updatedEducation = formData.education.filter((_, i) => i !== index);
                        const withUpdatedSno = updatedEducation.map((ref, idx) => ({
                          ...ref,
                          sno: idx + 1
                        }));
                        setFormData({
                          ...formData,
                          education: withUpdatedSno
                        });
                      },
                      className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",
                      children: "Remove"
                    })
                  })]
                }, item.sno))
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "flex justify-end p-6",
              children: /* @__PURE__ */ jsx("button", {
                className: "px-3 py-2 bg-red-600 text-white rounded-sm  hover:bg-red-700 focus:outline-none focus:ring-2  text-sm",
                onClick: handleEducationSubmit,
                children: "Submit Education"
              })
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Previous Employment Details"
            }), /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: () => addNewEntry("employment", {
                sno: formData.employment.length + 1,
                companyName: "",
                designation: "",
                salary: "",
                periodFrom: "",
                periodTo: "",
                reasonForResign: ""
              }),
              className: "px-3 py-1.5 bg-red-600 text-white rounded-sm hover:bg-red-700 focus:outline-none focus:ring-2  text-sm",
              children: "+ Add Employment"
            })]
          }), existingData.employment.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing Employment"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Company"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Designation"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Salary"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Period"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.employment.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.companyName
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.designation
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.salary
                    }), /* @__PURE__ */ jsxs("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: [item.periodFrom, " to ", item.periodTo]
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Company Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Designation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Salary Last Drawn"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Period From"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Period To"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Reason for Resign"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.employment.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.companyName,
                      onChange: (e) => handleArrayChange("employment", index, "companyName", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.designation,
                      onChange: (e) => handleArrayChange("employment", index, "designation", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.salary,
                      onChange: (e) => handleArrayChange("employment", index, "salary", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.periodFrom,
                      onChange: (e) => handleArrayChange("employment", index, "periodFrom", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.periodTo,
                      onChange: (e) => handleArrayChange("employment", index, "periodTo", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.reasonForResign,
                      onChange: (e) => handleArrayChange("employment", index, "reasonForResign", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("button", {
                      type: "button",
                      onClick: () => {
                        const updatedEmployment = formData.employment.filter((_, i) => i !== index);
                        const withUpdatedSno = updatedEmployment.map((ref, idx) => ({
                          ...ref,
                          sno: idx + 1
                        }));
                        setFormData({
                          ...formData,
                          employment: withUpdatedSno
                        });
                      },
                      className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",
                      children: "Remove"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: prevTab,
            className: "px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: handleEmploymentSubmit,
            disabled: isLoading,
            className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
            children: isLoading ? "Saving..." : "Save & Next"
          })]
        })]
      }), activeTab === "other" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Software Proficiency"
          }), existingData.software.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing Software Proficiency"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Software"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Proficiency Level"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.software.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.softwareName
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.proficiency
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Software"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Proficiency Level"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.software.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",
                    children: item.softwareName
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsxs("select", {
                      value: item.proficiency,
                      onChange: (e) => handleArrayChange("software", index, "proficiency", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
                      children: [/* @__PURE__ */ jsx("option", {
                        value: "",
                        children: "Select"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Beginner",
                        children: "Beginner"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Intermediate",
                        children: "Intermediate"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Advanced",
                        children: "Advanced"
                      })]
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Languages Known"
          }), existingData.languages.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing Languages"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Language"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Read"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Speak"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Write"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Fluency"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.languages.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.language
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.read ? "Yes" : "No"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.speak ? "Yes" : "No"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.write ? "Yes" : "No"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.fluency
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Language"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Read"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Speak"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Write"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Fluency"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Remarks"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.languages.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",
                    children: item.language
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.read,
                      onChange: (e) => handleArrayChange("languages", index, "read", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.speak,
                      onChange: (e) => handleArrayChange("languages", index, "speak", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.write,
                      onChange: (e) => handleArrayChange("languages", index, "write", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsxs("select", {
                      value: item.fluency,
                      onChange: (e) => handleArrayChange("languages", index, "fluency", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
                      children: [/* @__PURE__ */ jsx("option", {
                        value: "",
                        children: "Select"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Fluent",
                        children: "Fluent"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Moderate",
                        children: "Moderate"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Basic",
                        children: "Basic"
                      })]
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.remark,
                      onChange: (e) => handleArrayChange("languages", index, "remark", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "References"
            }), /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: () => addNewEntry("references", {
                sno: formData.references.length + 1,
                name: "",
                relation: "",
                contactNo: "",
                address: "",
                referstaff_id: ""
              }),
              className: "px-3 py-1.5 bg-red-600 text-white rounded-sm hover:bg-red-700 focus:outline-none f text-sm",
              children: "+ Add Reference"
            })]
          }), existingData.references.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing References"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Name"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Relation"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Contact No"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.references.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.name
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.relation
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.contactNo
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Referrence_Id"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Relation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Contact No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Address"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.references.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.referstaff_id,
                      onChange: (e) => handleArrayChange("references", index, "referstaff_id", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.name,
                      onChange: (e) => handleArrayChange("references", index, "name", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.relation,
                      onChange: (e) => handleArrayChange("references", index, "relation", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.contactNo,
                      onChange: (e) => handleArrayChange("references", index, "contactNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.address,
                      onChange: (e) => handleArrayChange("references", index, "address", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("button", {
                      type: "button",
                      className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",
                      onClick: () => {
                        const updatedReferences = formData.references.filter((_, i) => i !== index);
                        const withUpdateSno = updatedReferences.map((ref, idx) => ({
                          ...ref,
                          sno: idx + 1
                        }));
                        setFormData({
                          ...formData,
                          references: withUpdateSno
                        });
                      },
                      children: "Remove"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Emergency Contact Details"
            }), /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: () => addNewEntry("emergencyContacts", {
                sno: formData.emergencyContacts.length + 1,
                name: "",
                relation: "",
                mobileNo: "",
                landlineNo: ""
              }),
              className: "px-3 py-1.5 bg-red-600 text-white rounded-sm hover:bg-red-700 focus:outline-none focus:ring-2  text-sm",
              children: "+ Add Emergency"
            })]
          }), existingData.emergencyContacts.length > 0 && /* @__PURE__ */ jsxs("div", {
            className: "mb-6",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",
              children: "Existing Emergency Contacts"
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsxs("table", {
                className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "bg-gray-50 dark:bg-gray-700",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "S.No"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Name"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Relation"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                      children: "Mobile No"
                    })]
                  })
                }), /* @__PURE__ */ jsx("tbody", {
                  className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                  children: existingData.emergencyContacts.map((item) => /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.sno
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.name
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.relation
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                      children: item.mobileNo
                    })]
                  }, item.sno))
                })]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Contact Person Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Relation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Mobile No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Landline No"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.emergencyContacts.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.name,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "name", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.relation,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "relation", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.mobileNo,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "mobileNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.landlineNo,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "landlineNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("button", {
                      type: "button",
                      onClick: () => {
                        const updatedEmergerncyContact = formData.emergencyContacts.filter((_, i) => i !== index);
                        const withUpdatedSno = updatedEmergerncyContact.map((emergency, idx) => ({
                          ...emergency,
                          sno: idx + 1
                        }));
                        setFormData({
                          ...formData,
                          emergencyContacts: withUpdatedSno
                        });
                      },
                      className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",
                      children: "Remove"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: prevTab,
            className: "px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: handleFinalSubmit,
            disabled: isLoading,
            className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
            children: isLoading ? "Submitting..." : "Submit"
          })]
        })]
      })]
    })
  });
};
const AddNewEmployeeDetail$1 = withComponentProps(AddNewEmployeeDetail);
const route8 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: AddNewEmployeeDetail$1
}, Symbol.toStringTag, { value: "Module" }));
const EditEmployeeDetail = () => {
  const [activeTab, setActiveTab] = useState("personal");
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const staff_id = decodeURIComponent(id);
  const [isLoading, setIsLoading] = useState(false);
  const [personalData, setPersonalData] = useState({});
  const [masterLanguages, setMasterLanguages] = useState([]);
  const [masterSoftware, setMasterSoftware] = useState([]);
  const branchcode = useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    personal: {
      firstname: "",
      lastname: "",
      dob: "",
      gender: "",
      marital: "",
      bloodgroup: "",
      phonenumber: "",
      alternumber: "",
      email: "",
      permanentaddress: "",
      presentaddress: "",
      department: "",
      designation: "",
      pannumber: "",
      aadharnumber: "",
      profileurl: "",
      dateofjoining: "",
      relivingdate: "",
      status: "active",
      notes: ""
    },
    education: [],
    employment: [],
    references: [],
    emergencyContacts: [],
    software: [],
    languages: []
  });
  const navigate = useNavigate();
  const fetchEmployeeData = async () => {
    var _a, _b, _c, _d, _e, _f;
    try {
      setIsLoading(true);
      const personalRes = await axios.get(`${BASE_URL}/users/read?staff_id=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_b = (_a = personalRes.data) == null ? void 0 : _a.data) == null ? void 0 : _b.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          personal: {
            ...prev.personal,
            ...personalRes.data.data[0],
            dob: personalRes.data.data[0].dob ? new Date(personalRes.data.data[0].dob).toISOString().split("T")[0] : "",
            dateofjoining: personalRes.data.data[0].dateofjoining ? new Date(personalRes.data.data[0].dateofjoining).toISOString().split("T")[0] : "",
            relivingdate: personalRes.data.data[0].relivingdate ? new Date(personalRes.data.data[0].relivingdate).toISOString().split("T")[0] : ""
          }
        }));
      }
      const eduRes = await axios.get(`${BASE_URL}/users/education/read?staff_id=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_c = eduRes.data.data) == null ? void 0 : _c.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          education: eduRes.data.data.map((item, index) => ({
            id: item.id,
            sno: index + 1,
            degree: item.degree,
            institute: item.institute,
            yearOfPassing: item.passing,
            percentage: item.percentage,
            start_year: item.start_year,
            end_year: item.end_year
          }))
        }));
      }
      const empRes = await axios.get(`${BASE_URL}/users/experience/read?usersId=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_d = empRes.data.data) == null ? void 0 : _d.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          employment: empRes.data.data.map((item, index) => ({
            id: item.id,
            sno: index + 1,
            companyName: item.companyname,
            designation: item.designation,
            salary: item.lastsalary,
            periodFrom: item.start_year,
            periodTo: item.end_year,
            reasonForResign: item.reason
          }))
        }));
      }
      const emgRes = await axios.get(`${BASE_URL}/users/emergency/read?branchcode=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_e = emgRes.data.data) == null ? void 0 : _e.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          emergencyContacts: emgRes.data.data.map((item, index) => ({
            id: item.id,
            sno: index + 1,
            name: item.name,
            relation: item.relation,
            mobileNo: item.contactno,
            landlineNo: item.landline
          }))
        }));
      }
      const refRes = await axios.get(`${BASE_URL}/users/reference/read?staff_id=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_f = refRes.data.data) == null ? void 0 : _f.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          references: refRes.data.data.map((item, index) => ({
            id: item.id,
            sno: index + 1,
            name: item.name,
            relation: item.relation,
            contactNo: item.contactno,
            address: item.address,
            referstaff_id: item.referstaff_id
          }))
        }));
      }
      await fetchMasterData();
    } catch (error) {
      console.error("Error fetching employee data:", error);
      toast$1.error("Failed to fetch employee data");
    } finally {
      setIsLoading(false);
    }
  };
  const fetchMasterData = async () => {
    var _a, _b, _c, _d;
    try {
      const langRes = await axios.get(`${BASE_URL}/master/language/read?branchcode=${branchcode}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setMasterLanguages(langRes.data.data || []);
      const softRes = await axios.get(`${BASE_URL}/master/software/read?branchcode=${branchcode}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setMasterSoftware(softRes.data.data || []);
      const empLangRes = await axios.get(`${BASE_URL}/users/language/read?staff_id=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_a = empLangRes.data.data) == null ? void 0 : _a.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          languages: empLangRes.data.data.map((item) => ({
            id: item.id,
            language_id: item.language_id,
            language: item.name,
            read: item.can_read,
            speak: item.can_speak,
            write: item.can_write,
            fluency: item.proficiency,
            remark: item.remark || ""
          }))
        }));
      } else if (((_b = langRes.data.data) == null ? void 0 : _b.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          languages: langRes.data.data.map((lang, index) => ({
            sno: index + 1,
            language_id: lang.id,
            language: lang.name,
            read: false,
            speak: false,
            write: false,
            fluency: "",
            remark: ""
          }))
        }));
      }
      const empSoftRes = await axios.get(`${BASE_URL}/users/software/read?staff_id=${staff_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (((_c = empSoftRes.data.data) == null ? void 0 : _c.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          software: empSoftRes.data.data.map((item) => ({
            id: item.id,
            software_id: item.software_id,
            softwareName: item.software_name,
            proficiency: item.proficiency,
            remark: item.remark || ""
          }))
        }));
      } else if (((_d = softRes.data.data) == null ? void 0 : _d.length) > 0) {
        setFormData((prev) => ({
          ...prev,
          software: softRes.data.data.map((soft, index) => ({
            sno: index + 1,
            software_id: soft.id,
            softwareName: soft.name,
            proficiency: "",
            remark: ""
          }))
        }));
      }
    } catch (error) {
      console.error("Error fetching master data:", error);
      toast$1.error("Failed to fetch master data");
    }
  };
  useEffect(() => {
    fetchEmployeeData();
  }, [staff_id, token]);
  const nextTab = () => {
    const tabs = ["personal", "education", "other"];
    const currentIndex = tabs.indexOf(activeTab);
    if (currentIndex < tabs.length - 1) {
      setActiveTab(tabs[currentIndex + 1]);
    }
  };
  const prevTab = () => {
    const tabs = ["personal", "education", "other"];
    const currentIndex = tabs.indexOf(activeTab);
    if (currentIndex > 0) {
      setActiveTab(tabs[currentIndex - 1]);
    }
  };
  const handlePersonalChange = (field, value) => {
    setFormData((prev) => ({
      ...prev,
      personal: {
        ...prev.personal,
        [field]: value
      }
    }));
  };
  const handleArrayChange = (arrayName, index, field, value) => {
    const updatedArray = [...formData[arrayName]];
    updatedArray[index][field] = value;
    setFormData({
      ...formData,
      [arrayName]: updatedArray
    });
  };
  const handlePersonalSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const payload = {
        profile: {
          ...formData.personal,
          staff_id,
          branchcode,
          role: formData.personal.role || "Employee"
          // Default role if not specified
        }
      };
      await axios.put(`${BASE_URL}/users/edit`, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success("Personal details updated successfully");
      nextTab();
    } catch (error) {
      console.error("Error updating personal details:", error);
      toast$1.error("Failed to update personal details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleEducationSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.education.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/education/edit/${item.id}`, {
        userData: {
          staff_id,
          degree: item.degree,
          institute: item.institute,
          passing: item.yearOfPassing,
          percentage: item.percentage,
          start_year: item.start_year,
          end_year: item.end_year
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("Education details updated successfully");
      nextTab();
    } catch (error) {
      console.error("Error updating education:", error);
      toast$1.error("Failed to update education details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleEmploymentSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.employment.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/experience/edit/${item.id}`, {
        userData: {
          staff_id,
          companyname: item.companyName,
          designation: item.designation,
          lastsalary: item.salary,
          start_year: item.periodFrom,
          end_year: item.periodTo,
          reason: item.reasonForResign
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("Employment details updated successfully");
      nextTab();
    } catch (error) {
      console.error("Error updating employment:", error);
      toast$1.error("Failed to update employment details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleLanguagesSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.languages.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/language/edit/${item.id}`, {
        userData: {
          staff_id,
          language_id: item.language_id,
          can_read: item.read,
          can_speak: item.speak,
          can_write: item.write,
          proficiency: item.fluency,
          remark: item.remark || ""
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("Language details updated successfully");
    } catch (error) {
      console.error("Error updating language details:", error);
      toast$1.error("Failed to update language details");
    } finally {
      setIsLoading(false);
    }
  };
  const handleSoftwareSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.software.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/software/edit/${item.id}`, {
        userData: {
          staff_id,
          software_id: item.software_id,
          proficiency: item.proficiency,
          remark: item.remark || ""
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("Software proficiency updated successfully");
    } catch (error) {
      console.error("Error updating software proficiency:", error);
      toast$1.error("Failed to update software proficiency");
    } finally {
      setIsLoading(false);
    }
  };
  const handleReferencesSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.references.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/reference/edit/${item.id}`, {
        userData: {
          staff_id,
          referstaff_id: item.referstaff_id || staff_id,
          name: item.name,
          relation: item.relation,
          contactno: item.contactNo,
          address: item.address
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("References updated successfully");
    } catch (error) {
      console.error("Error updating references:", error);
      toast$1.error("Failed to update references");
    } finally {
      setIsLoading(false);
    }
  };
  const handleEmergencySubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      const updatePromises = formData.emergencyContacts.filter((item) => item.id).map((item) => axios.put(`${BASE_URL}/users/emergency/edit/${item.id}`, {
        userData: {
          staff_id,
          name: item.name,
          relation: item.relation,
          contactno: item.mobileNo,
          landline: item.landlineNo
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      }));
      await Promise.all(updatePromises);
      toast$1.success("Emergency contacts updated successfully");
    } catch (error) {
      console.error("Error updating emergency contacts:", error);
      toast$1.error("Failed to update emergency contacts");
    } finally {
      setIsLoading(false);
    }
  };
  const handleFinalSubmit = async (e) => {
    e.preventDefault();
    try {
      setIsLoading(true);
      await Promise.all([handleReferencesSubmit(e), handleEmergencySubmit(e), handleSoftwareSubmit(e), handleLanguagesSubmit(e), handleEmploymentSubmit(e)]);
      toast$1.success("All details updated successfully");
      navigate(-1);
    } catch (error) {
      console.error("Error in final submission:", error);
      toast$1.error("Failed to update some details");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-6xl mx-auto bg-transparent dark:bg-gray-800 overflow-hidden",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx("div", {
          className: "p-4 text-red-700 mb-10",
          children: /* @__PURE__ */ jsx("h1", {
            className: "text-2xl font-bold",
            children: "Edit Employee Information"
          })
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          children: /* @__PURE__ */ jsxs("button", {
            className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
            onClick: () => navigate(-1),
            children: [/* @__PURE__ */ jsx(LogOut, {
              className: "inline rotate-180 text-gray-500 mr-3"
            }), "Go Back"]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex border-b border-gray-200 dark:border-gray-700 mb-10",
        children: [/* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "personal" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("personal"),
          children: "Personal Information"
        }), /* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "education" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("education"),
          children: "Education & Experience"
        }), /* @__PURE__ */ jsx("button", {
          className: `px-6 py-3 font-medium text-sm ${activeTab === "other" ? " dark:bg-gray-800 text-red-700 dark:text-red-400 border-b-2 border-red-700 dark:border-red-400" : "text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,
          onClick: () => setActiveTab("other"),
          children: "Other Details"
        })]
      }), activeTab === "personal" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8 bg-white rounded-2xl h-[750px] overflow-y-auto",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Personal Information"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "First Name"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.firstname || "",
                onChange: (e) => handlePersonalChange("firstname", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Last Name"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.lastname || "",
                onChange: (e) => handlePersonalChange("lastname", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Date of Birth"
              }), /* @__PURE__ */ jsx("input", {
                type: "date",
                value: formData.personal.dob || "",
                onChange: (e) => handlePersonalChange("dob", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Gender"
              }), /* @__PURE__ */ jsxs("select", {
                value: formData.personal.gender || "",
                onChange: (e) => handlePersonalChange("gender", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Gender"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Male",
                  children: "Male"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Female",
                  children: "Female"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Other",
                  children: "Other"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Marital Status"
              }), /* @__PURE__ */ jsxs("select", {
                value: formData.personal.marital || "",
                onChange: (e) => handlePersonalChange("marital", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Status"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Single",
                  children: "Single"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Married",
                  children: "Married"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Divorced",
                  children: "Divorced"
                }), /* @__PURE__ */ jsx("option", {
                  value: "Widowed",
                  children: "Widowed"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Blood Group"
              }), /* @__PURE__ */ jsxs("select", {
                value: formData.personal.bloodgroup || "",
                onChange: (e) => handlePersonalChange("bloodgroup", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Blood Group"
                }), /* @__PURE__ */ jsx("option", {
                  value: "A+ve",
                  children: "A+ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "A-ve",
                  children: "A-ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "B+ve",
                  children: "B+ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "B-ve",
                  children: "B-ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "AB+ve",
                  children: "AB+ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "AB-ve",
                  children: "AB-ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "O+ve",
                  children: "O+ve"
                }), /* @__PURE__ */ jsx("option", {
                  value: "O-ve",
                  children: "O-ve"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Mobile No"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.phonenumber || "",
                onChange: (e) => handlePersonalChange("phonenumber", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Residence Contact no"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.alternumber || "",
                onChange: (e) => handlePersonalChange("alternumber", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Email ID (Personal)"
              }), /* @__PURE__ */ jsx("input", {
                type: "email",
                value: formData.personal.email || "",
                onChange: (e) => handlePersonalChange("email", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Department"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.department || "",
                onChange: (e) => handlePersonalChange("department", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Designation"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.designation || "",
                onChange: (e) => handlePersonalChange("designation", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Pan Card Number"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.pannumber || "",
                onChange: (e) => handlePersonalChange("pannumber", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Adhar Card Number"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: formData.personal.aadharnumber || "",
                onChange: (e) => handlePersonalChange("aadharnumber", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Date of Joining"
              }), /* @__PURE__ */ jsx("input", {
                type: "date",
                value: formData.personal.dateofjoining || "",
                onChange: (e) => handlePersonalChange("dateofjoining", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Reliving Date"
              }), /* @__PURE__ */ jsx("input", {
                type: "date",
                value: formData.personal.relivingdate || "",
                onChange: (e) => handlePersonalChange("relivingdate", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Status"
              }), /* @__PURE__ */ jsxs("select", {
                value: formData.personal.status || "active",
                onChange: (e) => handlePersonalChange("status", e.target.value),
                className: "max-w-[400px] w-[300px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "active",
                  children: "Active"
                }), /* @__PURE__ */ jsx("option", {
                  value: "inactive",
                  children: "Inactive"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Present Address"
              }), /* @__PURE__ */ jsx("textarea", {
                value: formData.personal.presentaddress || "",
                onChange: (e) => handlePersonalChange("presentaddress", e.target.value),
                rows: 3,
                className: "w-[1020px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Permanent Address"
              }), /* @__PURE__ */ jsx("textarea", {
                value: formData.personal.permanentaddress || "",
                onChange: (e) => handlePersonalChange("permanentaddress", e.target.value),
                rows: 3,
                className: "w-[1020px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                children: "Notes"
              }), /* @__PURE__ */ jsx("textarea", {
                value: formData.personal.notes || "",
                onChange: (e) => handlePersonalChange("notes", e.target.value),
                rows: 3,
                className: "w-[1020px] bg-white dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 rounded"
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex m-10 justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            disabled: true,
            className: "px-4 py-2 bg-gray-300 text-gray-700 rounded-md cursor-not-allowed",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: handlePersonalSubmit,
            disabled: isLoading,
            className: "px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
            children: isLoading ? "Saving..." : "Save & Next"
          })]
        })]
      }), activeTab === "education" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("div", {
            className: "flex justify-between items-center mb-4",
            children: /* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Educational Qualification"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Degree/Diploma/Certificate"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Institute/University"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Year of Passing"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Percentage"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Start Year"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "End Year"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.education.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.degree,
                      onChange: (e) => handleArrayChange("education", index, "degree", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.institute,
                      onChange: (e) => handleArrayChange("education", index, "institute", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.yearOfPassing,
                      onChange: (e) => handleArrayChange("education", index, "yearOfPassing", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.percentage,
                      onChange: (e) => handleArrayChange("education", index, "percentage", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.start_year,
                      onChange: (e) => handleArrayChange("education", index, "start_year", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.end_year,
                      onChange: (e) => handleArrayChange("education", index, "end_year", e.target.value),
                      className: "max-w-[400px] w-[200px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "flex justify-end p-6",
            children: /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: handleEducationSubmit,
              disabled: isLoading,
              className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
              children: isLoading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Education"
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("div", {
            className: "flex justify-between items-center mb-4",
            children: /* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Previous Employment Details"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Company Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Designation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Salary Last Drawn"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Period From"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Period To"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Reason for Resign"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.employment.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.companyName,
                      onChange: (e) => handleArrayChange("employment", index, "companyName", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.designation,
                      onChange: (e) => handleArrayChange("employment", index, "designation", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.salary,
                      onChange: (e) => handleArrayChange("employment", index, "salary", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.periodFrom,
                      onChange: (e) => handleArrayChange("employment", index, "periodFrom", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "date",
                      value: item.periodTo,
                      onChange: (e) => handleArrayChange("employment", index, "periodTo", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.reasonForResign,
                      onChange: (e) => handleArrayChange("employment", index, "reasonForResign", e.target.value),
                      className: "max-w-[400px] w-[150px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-1 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: prevTab,
            className: "px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: handleEmploymentSubmit,
            disabled: isLoading,
            className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
            children: isLoading ? "Saving..." : "Save & Next"
          })]
        })]
      }), activeTab === "other" && /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Software Proficiency"
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Software"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Proficiency Level"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Remarks"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.software.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: index + 1
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",
                    children: item.softwareName
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsxs("select", {
                      value: item.proficiency,
                      onChange: (e) => handleArrayChange("software", index, "proficiency", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
                      children: [/* @__PURE__ */ jsx("option", {
                        value: "",
                        children: "Select"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Beginner",
                        children: "Beginner"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Intermediate",
                        children: "Intermediate"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Advanced",
                        children: "Advanced"
                      })]
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.remark,
                      onChange: (e) => handleArrayChange("software", index, "remark", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "flex justify-end p-6",
            children: /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: handleSoftwareSubmit,
              disabled: isLoading,
              className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
              children: isLoading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Skills"
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold mb-4 text-gray-500 dark:text-white",
            children: "Languages Known"
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Language"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Read"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Speak"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Write"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Fluency"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Remarks"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.languages.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: index + 1
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",
                    children: item.language
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.read,
                      onChange: (e) => handleArrayChange("languages", index, "read", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.speak,
                      onChange: (e) => handleArrayChange("languages", index, "speak", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: item.write,
                      onChange: (e) => handleArrayChange("languages", index, "write", e.target.checked),
                      className: "h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: /* @__PURE__ */ jsxs("select", {
                      value: item.fluency,
                      onChange: (e) => handleArrayChange("languages", index, "fluency", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
                      children: [/* @__PURE__ */ jsx("option", {
                        value: "",
                        children: "Select"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Fluent",
                        children: "Fluent"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Moderate",
                        children: "Moderate"
                      }), /* @__PURE__ */ jsx("option", {
                        value: "Basic",
                        children: "Basic"
                      })]
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.remark,
                      onChange: (e) => handleArrayChange("languages", index, "remark", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "flex justify-end p-6",
            children: /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: handleLanguagesSubmit,
              className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
              children: isLoading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Language"
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("div", {
            className: "flex justify-between items-center mb-4",
            children: /* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "References"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Referrence ID"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Relation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Contact No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Address"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Action"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.references.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.referstaff_id,
                      onChange: (e) => handleArrayChange("references", index, "referstaff_id", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.name,
                      onChange: (e) => handleArrayChange("references", index, "name", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.relation,
                      onChange: (e) => handleArrayChange("references", index, "relation", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.contactNo,
                      onChange: (e) => handleArrayChange("references", index, "contactNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.address,
                      onChange: (e) => handleArrayChange("references", index, "address", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("button", {
                      type: "button",
                      className: "text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",
                      onClick: () => {
                        const updatedReferences = formData.references.filter((_, i) => i !== index);
                        const withUpdateSno = updatedReferences.map((ref, idx) => ({
                          ...ref,
                          sno: idx + 1
                        }));
                        setFormData({
                          ...formData,
                          references: withUpdateSno
                        });
                      },
                      children: "Remove"
                    })
                  })]
                }, item.sno))
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "flex justify-end p-6",
            children: /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: handleReferencesSubmit,
              disabled: isLoading,
              className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
              children: isLoading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Referrence"
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "border border-gray-200 dark:border-gray-700 rounded-lg p-6 bg-white",
          children: [/* @__PURE__ */ jsx("div", {
            className: "flex justify-between items-center mb-4",
            children: /* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-gray-500 dark:text-white",
              children: "Emergency Contact Details"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "S.No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Contact Person Name"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Relation"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Mobile No"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Landline No"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: formData.emergencyContacts.map((item, index) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
                    children: item.sno
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.name,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "name", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.relation,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "relation", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.mobileNo,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "mobileNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-4 py-3 whitespace-nowrap",
                    children: /* @__PURE__ */ jsx("input", {
                      type: "text",
                      value: item.landlineNo,
                      onChange: (e) => handleArrayChange("emergencyContacts", index, "landlineNo", e.target.value),
                      className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
                    })
                  })]
                }, item.sno))
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: prevTab,
            className: "px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",
            children: "Previous"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            onClick: handleFinalSubmit,
            disabled: isLoading,
            className: "px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",
            children: isLoading ? "Saving..." : "Submit All"
          })]
        })]
      })]
    })
  });
};
const EditEmployeeForm = withComponentProps(EditEmployeeDetail);
const route9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: EditEmployeeForm
}, Symbol.toStringTag, { value: "Module" }));
const CreateLeaveRequestForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const staff_id = useAuthStore((state) => state.staff_id);
  const branchcode = useAuthStore((state) => state.branchcode);
  const leaveTypeOptions = [
    { value: "casual", label: "Casual Leave" },
    { value: "sick", label: "Sick Leave" },
    { value: "event", label: "Event Leave" }
  ];
  const [formData, setFormData] = useState({
    staff_id,
    branchcode,
    leave_type: "casual",
    start_date: "",
    end_date: "",
    reason: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleDateChange = (name, date) => {
    setFormData((prev) => ({
      ...prev,
      [name]: date
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    if (new Date(formData.end_date) < new Date(formData.start_date)) {
      setError("End date cannot be before start date");
      toast$1.error("End date cannot be before start date");
      setLoading(false);
      return;
    }
    try {
      const response = await axios.post(
        `${BASE_URL}/users/leavereq/create`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Leave request submitted successfully");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create leave request");
        toast$1.error(response.data.message || "Failed to create leave request");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Failed to create leave request");
    } finally {
      setLoading(false);
    }
  };
  const formatDateForInput = (dateString) => {
    if (!dateString) return "";
    const date = new Date(dateString);
    return date.toISOString().split("T")[0];
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Clock, { className: "inline mr-2" }),
        " Leave Request Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Staff ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "staff_id",
              value: formData.staff_id,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed",
              type: "text"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branchcode",
              value: formData.branchcode,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed",
              type: "text"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
          " Leave Type"
        ] }),
        /* @__PURE__ */ jsx(
          "select",
          {
            name: "leave_type",
            value: formData.leave_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: leaveTypeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              type: "date",
              value: formatDateForInput(formData.start_date),
              onChange: (e) => handleDateChange("start_date", e.target.value),
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              min: (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              type: "date",
              value: formatDateForInput(formData.end_date),
              onChange: (e) => handleDateChange("end_date", e.target.value),
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              min: formData.start_date || (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "reason",
            value: formData.reason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Reason for leave...",
            required: true
          }
        )
      ] })
    ] }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-sm text-center py-2", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Submit Leave Request"
        }
      )
    ] })
  ] });
};
const EditLeaveRequestForm = ({ leaveRequest, onSuccess, onCancel }) => {
  const [formData, setFormData] = useState({
    leave_type: "",
    start_date: "",
    end_date: "",
    reason: "",
    remarks: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const leaveTypeOptions = [
    { value: "casual", label: "Casual Leave" },
    { value: "sick", label: "Sick Leave" },
    { value: "event", label: "Event Leave" }
  ];
  useEffect(() => {
    if (leaveRequest) {
      setFormData({
        leave_type: leaveRequest.leave_type || "",
        start_date: leaveRequest.start_date || "",
        end_date: leaveRequest.end_date || "",
        reason: leaveRequest.reason || "",
        remarks: leaveRequest.remarks || ""
      });
    }
  }, [leaveRequest]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleDateChange = (name, date) => {
    setFormData((prev) => ({
      ...prev,
      [name]: date
    }));
  };
  console.log("leaverequesttt", leaveRequest);
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    if (new Date(formData.end_date) < new Date(formData.start_date)) {
      setError("End date cannot be before start date");
      toast$1.error("End date cannot be before start date");
      setLoading(false);
      return;
    }
    try {
      const response = await axios.put(
        `${BASE_URL}/users/leavereq/edit/${leaveRequest.req_id}`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        toast$1.success("Leave request updated successfully");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update leave request");
        toast$1.error(response.data.message || "Failed to update leave request");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Failed to update leave request");
    } finally {
      setLoading(false);
    }
  };
  const formatDateForInput = (dateString) => {
    if (!dateString) return "";
    const date = new Date(dateString);
    return date.toISOString().split("T")[0];
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Clock, { className: "inline mr-2" }),
        " Update Leave Request"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
          " Leave Type"
        ] }),
        /* @__PURE__ */ jsx(
          "select",
          {
            name: "leave_type",
            value: formData.leave_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: leaveTypeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              type: "date",
              value: formatDateForInput(formData.start_date),
              onChange: (e) => handleDateChange("start_date", e.target.value),
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              type: "date",
              value: formatDateForInput(formData.end_date),
              onChange: (e) => handleDateChange("end_date", e.target.value),
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              min: formData.start_date || (/* @__PURE__ */ new Date()).toISOString().split("T")[0]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "reason",
            value: formData.reason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Reason for leave...",
            required: true
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Remarks"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "remarks",
            value: formData.remarks,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[60px]",
            placeholder: "Additional remarks..."
          }
        )
      ] })
    ] }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-sm text-center py-2", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Leave Request"
        }
      )
    ] })
  ] });
};
const HRLeaveApprovalForm = ({ leaveRequest, onSuccess, onCancel }) => {
  const [formData, setFormData] = useState({
    action: "approved",
    remarks: "",
    approved_dates: [],
    approval_type: "full"
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [selectedDates, setSelectedDates] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const getAllDatesInRange = (startDate, endDate) => {
    const dates = [];
    const currentDate = new Date(startDate);
    const endDateObj = new Date(endDate);
    while (currentDate <= endDateObj) {
      dates.push(new Date(currentDate));
      currentDate.setDate(currentDate.getDate() + 1);
    }
    return dates;
  };
  useEffect(() => {
    if (leaveRequest) {
      const allDates = getAllDatesInRange(leaveRequest.start_date, leaveRequest.end_date);
      setSelectedDates(allDates);
      setFormData({
        action: leaveRequest.status === "pending" ? "approved" : leaveRequest.status,
        remarks: leaveRequest.remarks || "",
        approved_dates: allDates.map((date) => date.toISOString().split("T")[0]),
        approval_type: "full"
      });
    }
  }, [leaveRequest]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
      ...name === "action" || name === "approval_type" ? { approved_dates: [] } : {}
    }));
  };
  const handleDateSelection = (date) => {
    const dateString = date.toISOString().split("T")[0];
    setFormData((prev) => {
      const newApprovedDates = prev.approved_dates.includes(dateString) ? prev.approved_dates.filter((d) => d !== dateString) : [...prev.approved_dates, dateString];
      return {
        ...prev,
        approved_dates: newApprovedDates,
        approval_type: newApprovedDates.length === selectedDates.length ? "full" : "partial"
      };
    });
  };
  const handleSelectAllDates = () => {
    const allDateStrings = selectedDates.map((date) => date.toISOString().split("T")[0]);
    setFormData((prev) => ({
      ...prev,
      approved_dates: allDateStrings,
      approval_type: "full"
    }));
  };
  const handleClearDates = () => {
    setFormData((prev) => ({
      ...prev,
      approved_dates: [],
      approval_type: "partial"
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    if (formData.action === "approved" && formData.approval_type === "partial" && formData.approved_dates.length === 0) {
      setError("Please select at least one date for partial approval");
      toast$1.error("Please select at least one date for partial approval");
      setLoading(false);
      return;
    }
    try {
      const payload = formData.approval_type === "full" ? { action: formData.action, remarks: formData.remarks } : {
        action: formData.action,
        remarks: formData.remarks,
        approved_dates: formData.approved_dates
      };
      const response = await axios.put(
        `${BASE_URL}/users/leaveaproved/edit/${leaveRequest.req_id}`,
        payload,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        toast$1.success(`Leave request ${formData.action} successfully`);
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update leave status");
        toast$1.error(response.data.message || "Failed to update leave status");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Failed to update leave status");
    } finally {
      setLoading(false);
    }
  };
  const formatDateDisplay = (dateString) => {
    return new Date(dateString).toLocaleDateString("en-US", {
      weekday: "short",
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-2" }),
        " Leave Request Approval"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4 bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff ID" }),
            /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: leaveRequest == null ? void 0 : leaveRequest.staff_id })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Leave Type" }),
            /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 capitalize", children: leaveRequest == null ? void 0 : leaveRequest.leave_type })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Start Date" }),
            /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: formatDateDisplay(leaveRequest == null ? void 0 : leaveRequest.start_date) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "End Date" }),
            /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: formatDateDisplay(leaveRequest == null ? void 0 : leaveRequest.end_date) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Reason" }),
          /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: leaveRequest == null ? void 0 : leaveRequest.reason })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Action" }),
          /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap gap-3", children: [
            /* @__PURE__ */ jsxs("label", { className: "inline-flex items-center", children: [
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "radio",
                  name: "action",
                  value: "approved",
                  checked: formData.action === "approved",
                  onChange: handleChange,
                  className: "form-radio h-4 w-4 text-green-600 dark:text-green-500"
                }
              ),
              /* @__PURE__ */ jsxs("span", { className: "ml-2 text-sm font-medium text-gray-900 dark:text-gray-100", children: [
                /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1", size: 14 }),
                " Approve"
              ] })
            ] }),
            /* @__PURE__ */ jsxs("label", { className: "inline-flex items-center", children: [
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "radio",
                  name: "action",
                  value: "rejected",
                  checked: formData.action === "rejected",
                  onChange: handleChange,
                  className: "form-radio h-4 w-4 text-red-600 dark:text-red-500"
                }
              ),
              /* @__PURE__ */ jsxs("span", { className: "ml-2 text-sm font-medium text-gray-900 dark:text-gray-100", children: [
                /* @__PURE__ */ jsx(XCircle, { className: "inline mr-1", size: 14 }),
                " Reject"
              ] })
            ] })
          ] })
        ] }),
        formData.action === "approved" && /* @__PURE__ */ jsxs(Fragment, { children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Approval Type" }),
            /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap gap-3", children: [
              /* @__PURE__ */ jsxs("label", { className: "inline-flex items-center", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "radio",
                    name: "approval_type",
                    value: "full",
                    checked: formData.approval_type === "full",
                    onChange: handleChange,
                    className: "form-radio h-4 w-4 text-blue-600 dark:text-blue-500"
                  }
                ),
                /* @__PURE__ */ jsx("span", { className: "ml-2 text-sm font-medium text-gray-900 dark:text-gray-100", children: "Full Approval (All Days)" })
              ] }),
              /* @__PURE__ */ jsxs("label", { className: "inline-flex items-center", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "radio",
                    name: "approval_type",
                    value: "partial",
                    checked: formData.approval_type === "partial",
                    onChange: handleChange,
                    className: "form-radio h-4 w-4 text-blue-600 dark:text-blue-500"
                  }
                ),
                /* @__PURE__ */ jsx("span", { className: "ml-2 text-sm font-medium text-gray-900 dark:text-gray-100", children: "Partial Approval (Select Dates)" })
              ] })
            ] })
          ] }),
          formData.approval_type === "partial" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-2", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Select Dates to Approve" }),
              /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
                /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: handleSelectAllDates,
                    className: "text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",
                    children: "Select All"
                  }
                ),
                /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: handleClearDates,
                    className: "text-xs px-2 py-1 bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded",
                    children: "Clear"
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ jsx("div", { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2", children: selectedDates.map((date) => {
              const dateString = date.toISOString().split("T")[0];
              const isSelected = formData.approved_dates.includes(dateString);
              return /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => handleDateSelection(date),
                  className: `p-2 rounded text-center text-sm ${isSelected ? "bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200" : "bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200"}`,
                  children: date.toLocaleDateString("en-US", { weekday: "short", month: "short", day: "numeric" })
                },
                dateString
              );
            }) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Remarks"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "remarks",
              value: formData.remarks,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
              placeholder: formData.action === "approved" ? formData.approval_type === "full" ? "Approval remarks..." : "Partial approval remarks..." : "Rejection reason...",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-sm text-center py-2", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: `px-5 py-2 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm ${formData.action === "approved" ? "bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800" : "bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800"}`,
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.action === "approved" ? formData.approval_type === "full" ? "Approve All Days" : `Approve ${formData.approved_dates.length} Days` : "Reject Leave Request"
        }
      )
    ] })
  ] });
};
const LeaveRequestList = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [leaveRequests, setLeaveRequests] = useState([]);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showFilters2, setShowFilters2] = useState(false);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [selectedLeave, setSelectedLeave] = useState(null);
  const [showEditModal, setShowEditModal] = useState(false);
  const [showApprovedModal, setShowApprovedModal] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const statusOptions = [
    { value: "", label: "All Status" },
    { value: "pending", label: "Pending" },
    { value: "approved", label: "Approved" },
    { value: "rejected", label: "Rejected" }
  ];
  const [selectedStatus, setSelectedStatus] = useState("");
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "hr") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "hr") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "hr") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Leave create Request successfully!");
    fetchLeaveRequests();
  };
  useEffect(() => {
    if (role !== "hr" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "hr" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "hr" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/users/dropdown?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "hr") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const fetchLeaveRequests = async () => {
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/leavereq/read`;
      const params = new URLSearchParams();
      if (role === "superadmin") {
        if (selectedBranchCode) params.append("branchcode", selectedBranchCode);
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else if (role === "hr") {
        params.append("branchcode", userBranchCode);
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else {
        params.append("staff_id", staff_id);
      }
      if (selectedStatus) params.append("status", selectedStatus);
      if (startDate) params.append("start_date", formatDate2(startDate));
      if (endDate) params.append("end_date", formatDate2(endDate));
      params.append("page", currentPage);
      params.append("limit", pageSize);
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setLeaveRequests(response.data.data || []);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching leave requests", error2);
      toast$1.error("Failed to fetch leave requests");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleStatusChange = (value) => {
    setSelectedStatus(value);
    setCurrentPage(1);
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Leave Data updated successfully!");
    fetchBranches(token);
    fetchLeaveRequests();
  };
  const handleApprovedSuccess = () => {
    setShowApprovedModal(false);
    toast$1.success("Leave Request Approved successfully!");
    fetchBranches(token);
    fetchLeaveRequests();
  };
  const handleOnExport = () => {
    if (!leaveRequests || leaveRequests.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = leaveRequests.map((request) => ({
      "Staff ID": request.staff_id,
      "Branch Code": request.branchcode,
      "Leave Type": request.leave_type,
      "Start Date": request.start_date,
      "End Date": request.end_date,
      Reason: request.reason,
      Status: request.status,
      "Applied On": request.requested_on,
      "Approved/Rejected On": request.updated_on
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "LeaveRequests");
    XLSX.writeFile(wb, "LeaveRequests.xlsx");
  };
  useEffect(() => {
    fetchLeaveRequests();
  }, [
    currentPage,
    pageSize,
    selectedBranchCode,
    selectedStaffId,
    selectedStatus,
    startDate,
    endDate,
    role,
    userBranchCode
  ]);
  const handleEditLeave = (request) => {
    setSelectedLeave(request);
    setShowEditModal(true);
  };
  const handleApprovedLeave = (request) => {
    setSelectedLeave(request);
    setShowApprovedModal(true);
  };
  const thead = () => [
    { data: "Staff ID" },
    { data: "Branch Code" },
    { data: "Leave Type" },
    { data: "Start Date" },
    { data: "End Date" },
    { data: "Reason" },
    { data: "Status" },
    { data: "Applied On" },
    { data: "Approved By" },
    { data: "Approved Date" },
    { data: "Action" }
  ];
  const tbody = () => {
    if (!leaveRequests) return [];
    return leaveRequests.map((request) => ({
      id: request._id,
      data: [
        { data: request.staff_id },
        { data: request.branchcode },
        { data: request.leave_type },
        { data: new Date(request.start_date).toLocaleDateString() },
        { data: new Date(request.end_date).toLocaleDateString() },
        { data: request.reason },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${request.status === "approved" ? "bg-green-100 text-green-800" : request.status === "rejected" ? "bg-red-100 text-red-800" : "bg-yellow-100 text-yellow-800"}`,
              children: [
                request.status === "approved" ? /* @__PURE__ */ jsx(CheckCircle, { className: "w-3 h-3 mr-1" }) : request.status === "rejected" ? /* @__PURE__ */ jsx(XCircle, { className: "w-3 h-3 mr-1" }) : /* @__PURE__ */ jsx(Clock, { className: "w-3 h-3 mr-1" }),
                request.status.charAt(0).toUpperCase() + request.status.slice(1)
              ]
            }
          )
        },
        { data: new Date(request.requested_on).toLocaleDateString() },
        { data: request.approved_by_name },
        { data: new Date(request.approval_date).toLocaleDateString() },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex flex-nowrap justify-center gap-2", children: [
            role !== "hr" && role !== "superadmin" && /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditLeave(request),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            role !== "hr" && role !== "superadmin" && /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch(branch.id),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            ),
            (role === "hr" || role === "superadmin") && /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-amber-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleApprovedLeave(request),
                title: "Approve",
                children: /* @__PURE__ */ jsx(CircleCheckBig, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Leave Requests" }),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setShowCreateModal(true),
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            children: [
              !isMobile && "New Leave Req",
              " +"
            ]
          }
        ),
        isMobile && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: [
              /* @__PURE__ */ jsx(Filter, { size: 18, className: "mr-1" }),
              showFilters2 ? "Hide Filters" : "Show Filters"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `grid grid-cols-1 ${role !== "superadmin" && role !== "hr" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
              children: [
                role === "superadmin" && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: filteredBranchOptions(),
                    selectedValue: selectedBranchCode,
                    onSelect: handleBranchCodeChange,
                    placeholder: "Select Branch",
                    className: "w-[245px]",
                    isLoading: isStoreLoading
                  }
                ),
                (role === "superadmin" || role === "hr") && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: staffOptions,
                    selectedValue: selectedStaffId,
                    onSelect: handleStaffChange,
                    placeholder: "Select Staff",
                    className: "w-[245px]",
                    disabled: role === "hr" ? false : !selectedBranchCode,
                    isLoading: loading
                  }
                ),
                /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: statusOptions,
                    selectedValue: selectedStatus,
                    onSelect: handleStatusChange,
                    placeholder: "Select Status",
                    className: "w-[245px]"
                  }
                ),
                /* @__PURE__ */ jsx("div", { className: "w-[245px]", children: /* @__PURE__ */ jsx(
                  DatePicker,
                  {
                    selectsRange: true,
                    startDate,
                    endDate,
                    onChange: handleDateChange,
                    placeholderText: "Select date range",
                    className: "w-full p-2 border rounded h-[40px]",
                    isClearable: true
                  }
                ) })
              ]
            }
          )
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[150px]"
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2",
            disabled: leaveRequests.length === 0,
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              !isMobile && "Export Excel"
            ]
          }
        )
      ] }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
      /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
        DataTable,
        {
          thead,
          tbody,
          responsive: true,
          className: "min-w-full"
        }
      ) }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "leave requests",
          isScroll: true
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "Create New Branch",
        children: /* @__PURE__ */ jsx(
          CreateLeaveRequestForm,
          {
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "Edit Branch",
        children: /* @__PURE__ */ jsx(
          EditLeaveRequestForm,
          {
            leaveRequest: selectedLeave,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showApprovedModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowApprovedModal(false),
        title: "Approved Leave Request",
        children: /* @__PURE__ */ jsx(
          HRLeaveApprovalForm,
          {
            leaveRequest: selectedLeave,
            onSuccess: handleApprovedSuccess,
            onCancel: () => setShowApprovedModal(false)
          }
        )
      }
    )
  ] });
};
const CreateLeaveForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    name: "",
    year: "",
    description: "",
    total_days: "",
    status: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userDatas: [
        {
          branchcode,
          name: formData.name,
          year: formData.year,
          description: formData.description,
          total_days: formData.total_days,
          status: formData.status
        }
      ]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/master/leavetypes/create`,
        softData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create LeaveTypes");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create LeaveTypes`, toastStyle);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-5", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Leave Type"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "name",
              value: formData.name,
              onChange: handleChange,
              placeholder: "Enter LeaveType",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Year"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "year",
              value: formData.year,
              onChange: handleChange,
              placeholder: "Enter Year",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Notebook, { className: "inline mr-1", size: 14 }),
            " Description"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "description",
              value: formData.description,
              onChange: handleChange,
              placeholder: "Enter Description",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarDays, { className: "inline mr-1", size: 14 }),
            " Total Days"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "total_days",
              value: formData.total_days,
              onChange: handleChange,
              placeholder: " Enter Total Days",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            "Type Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "status",
              value: formData.status,
              onChange: handleChange,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Type Status" }),
                /* @__PURE__ */ jsx("option", { value: "open", children: "Open" }),
                /* @__PURE__ */ jsx("option", { value: "close", children: "Close" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create"
          }
        )
      ] })
    ] })
  ] });
};
function EditLeaveForm({ branch: branch2, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    name: "",
    year: "",
    description: "",
    total_days: "",
    status: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  useEffect(() => {
    if (branch2) {
      console.log("branchdata for leaveedit", branch2);
      setFormData({
        name: branch2.name || "",
        year: branch2.year || "",
        description: branch2.description || "",
        total_days: branch2.total_days || "",
        status: branch2.status || ""
      });
    }
  }, [branch2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userData: {
        branchcode,
        name: formData.name,
        year: formData.year,
        description: formData.description,
        total_days: formData.total_days,
        status: formData.status
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/master/leavetypes/edit/${branch2.id}`,
        softData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update leave");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in edit leave`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Languages, { className: "inline mr-1", size: 14 }),
            " Language Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              name: "name",
              value: formData.name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Leave Type"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Year"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "year",
              value: formData.year,
              onChange: handleChange,
              placeholder: "Enter Year",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Notebook, { className: "inline mr-1", size: 14 }),
            " Description"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "description",
              value: formData.description,
              onChange: handleChange,
              placeholder: "Enter Description",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarDays, { className: "inline mr-1", size: 14 }),
            " Total Days"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "total_days",
              value: formData.total_days,
              onChange: handleChange,
              placeholder: " Enter Total Days",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            "Type Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "status",
              value: formData.status,
              onChange: handleChange,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Type Status" }),
                /* @__PURE__ */ jsx("option", { value: "open", children: "Open" }),
                /* @__PURE__ */ jsx("option", { value: "close", children: "Close" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 dark:text-gray-700  hover-effect rounded  dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update"
          }
        )
      ] })
    ] })
  ] });
}
const LeaveTypes = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  useAuthStore((state) => state.branchcode);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getSoftware = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode2 = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/master/leavetypes/read?branchcode=${branchCode2}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode2) url += `&branchcode=${branchCode2}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      console.log("responseeeeleavee", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getSoftware();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedManager,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Leave Type added successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (software) => {
    setSelectedBranch(software);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (id) => {
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/master/leavetypes/delete/${id}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Leave deleted successfully!", toastStyle);
        fetchBranches(token);
        getSoftware();
      }
    } catch (error2) {
      console.error("Error deleting leave", error2);
      toast$1.error("Failed to delete Leave");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Branch Code" },
    { data: "Leave Type" },
    { data: "Year" },
    { data: "TotalDays" },
    { data: "Status" },
    { data: "Actions" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((software) => ({
      id: software.id,
      data: [
        { data: software.id },
        { data: software.branchcode },
        { data: software.name },
        { data: software.year },
        { data: software.total_days },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${software.status === "open" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${software.status === "open" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                software.status.charAt(0).toUpperCase() + software.status.slice(1)
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex  justify-center gap-1 ", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/branch/${software.id}`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(software),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(software.id),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Leave updated successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Software");
    XLSX.writeFile(wb, "SoftWareList.xlsx");
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen w-full", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center ", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "LeaveType Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: "top-center", reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsx(
              "div",
              {
                className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
                children: /* @__PURE__ */ jsxs(
                  "button",
                  {
                    onClick: () => setShowCreateModal(true),
                    className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                    children: [
                      !isMobile && "New Leave Type",
                      " +"
                    ]
                  }
                )
              }
            )
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: pageSizeOptions,
                      selectedValue: pageSize,
                      onSelect: handlePageSizeChange,
                      placeholder: "Items per page",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: handleOnExport,
                      className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-9 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                      children: [
                        /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                        !isMobile && "Export Excel"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[180px] mt-3"}`, children: /* @__PURE__ */ jsx(
                    SearchInput,
                    {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search branches...",
                      className: "w-full"
                    }
                  ) })
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-[50%]"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "CREATE NEW LEAVETYPE",
        children: /* @__PURE__ */ jsx(
          CreateLeaveForm,
          {
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "EDIT LEAVE TYPE",
        children: /* @__PURE__ */ jsx(
          EditLeaveForm,
          {
            branch: selectedBranch,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "DELETE LEAVE TYPE",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 justify-center items-center", children: [
          /* @__PURE__ */ jsx("p", { className: "text-gray-500 text-lg font-bold text-center", children: "Are you sure you want to delete this Leavetype?" }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-4 flex-wrap justify-center", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
                disabled: loading,
                onClick: () => setShowDeleteModal(false),
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "submit",
                className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
                disabled: loading,
                onClick: handleDeleteSubmit,
                children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
              }
            )
          ] })
        ] })
      }
    )
  ] }) });
};
const CreateSoftwareForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    name: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userDatas: [{
        branchcode,
        name: formData.name
      }]
    };
    try {
      const response = await axios.post(`${BASE_URL}/master/software/create`, softData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create branch");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create Branch`, toastStyle);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-1 gap-5", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
          " Software Title"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            className: "w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            name: "name",
            value: formData.name,
            onChange: handleChange,
            placeholder: "Software Name",
            required: true
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create"
          }
        )
      ] })
    ] })
  ] });
};
function EditSoftwareForm({ branch: branch2, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    name: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  useEffect(() => {
    if (branch2) {
      setFormData({
        name: branch2.name || ""
      });
    }
  }, [branch2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userData: {
        branchcode,
        name: formData.name
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/master/software/edit/${branch2.id}`,
        softData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update software");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `${error}, Error in edit software`,
        {
          style: {
            border: "1px solid  rgb(185 28 28)",
            padding: "14px",
            width: "900px",
            color: " rgb(185 28 28)"
          },
          iconTheme: {
            primary: " rgb(185 28 28)",
            secondary: "#FFFAEE"
          }
        }
      );
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-1 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
          " Software Title"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            name: "name",
            value: formData.name,
            onChange: handleChange,
            className: "w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            placeholder: "Enter Software name"
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 dark:text-gray-700  hover-effect rounded  dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update"
          }
        )
      ] })
    ] })
  ] });
}
const CreateLanguageForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    name: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userDatas: [{
        branchcode,
        name: formData.name
      }]
    };
    try {
      const response = await axios.post(`${BASE_URL}/master/language/create`, softData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create Language");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create language`, toastStyle);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-1 gap-5", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Languages, { className: "inline mr-1", size: 14 }),
          " Language Name"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            className: "w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            name: "name",
            value: formData.name,
            onChange: handleChange,
            placeholder: "Enter Language Name",
            required: true
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create"
          }
        )
      ] })
    ] })
  ] });
};
function EditLanguageForm({ branch: branch2, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    name: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchcode = useAuthStore((state) => state.branchcode);
  useEffect(() => {
    if (branch2) {
      setFormData({
        name: branch2.name || ""
      });
    }
  }, [branch2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const softData = {
      userData: {
        branchcode,
        name: formData.name
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/master/language/edit/${branch2.id}`,
        softData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update language");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `${error}, Error in edit language`,
        {
          style: {
            border: "1px solid  rgb(185 28 28)",
            padding: "14px",
            width: "900px",
            color: " rgb(185 28 28)"
          },
          iconTheme: {
            primary: " rgb(185 28 28)",
            secondary: "#FFFAEE"
          }
        }
      );
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsx(Toaster, {}),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-1 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Languages, { className: "inline mr-1", size: 14 }),
          " Language Name"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            name: "name",
            value: formData.name,
            onChange: handleChange,
            className: "w-[300px] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            placeholder: "Enter Language name"
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            onClick: onCancel,
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 dark:text-gray-700  hover-effect rounded  dark:hover:bg-gray-500 transition",
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update"
          }
        )
      ] })
    ] })
  ] });
}
const LeaveTy = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  useAuthStore((state) => state.branchcode);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getSoftware = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode2 = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/master/leavetypes/read?branchcode=${branchCode2}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode2) url += `&branchcode=${branchCode2}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      console.log("responseeeeleavee", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getSoftware();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedManager,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Leave Type added successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (software) => {
    setSelectedBranch(software);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (id) => {
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/master/leavetypes/delete/${id}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Leave deleted successfully!", toastStyle);
        fetchBranches(token);
        getSoftware();
      }
    } catch (error2) {
      console.error("Error deleting leave", error2);
      toast$1.error("Failed to delete Leave");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Branch Code" },
    { data: "Leave Type" },
    { data: "Year" },
    { data: "TotalDays" },
    { data: "Status" },
    { data: "Actions" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((software) => ({
      id: software.id,
      data: [
        { data: software.id },
        { data: software.branchcode },
        { data: software.name },
        { data: software.year },
        { data: software.total_days },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${software.status === "open" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${software.status === "open" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                software.status.charAt(0).toUpperCase() + software.status.slice(1)
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex  justify-center gap-1 ", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/branch/${software.id}`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(software),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(software.id),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Leave updated successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Software");
    XLSX.writeFile(wb, "SoftWareList.xlsx");
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen w-[850px]", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Global LeaveType Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: "top-center", reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: pageSizeOptions,
                      selectedValue: pageSize,
                      onSelect: handlePageSizeChange,
                      placeholder: "Items per page",
                      className: "w-full md:w-[150px]"
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: handleOnExport,
                      className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                      children: [
                        /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                        !isMobile && "Export Excel"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: () => setShowCreateModal(true),
                      className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                      children: [
                        !isMobile && "New Leave Type",
                        " +"
                      ]
                    }
                  )
                ]
              }
            )
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    "div",
                    {
                      className: `${isMobile ? "w-full" : "w-[180px] mt-3"}`,
                      children: /* @__PURE__ */ jsx(
                        SearchInput,
                        {
                          value: searchTerm,
                          onChange: handleSearch,
                          placeholder: "Search branches...",
                          className: "w-full"
                        }
                      )
                    }
                  )
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-[50%]"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "CREATE NEW LEAVETYPE",
        children: /* @__PURE__ */ jsx(
          CreateLeaveForm,
          {
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "EDIT LEAVE TYPE",
        children: /* @__PURE__ */ jsx(
          EditLeaveForm,
          {
            branch: selectedBranch,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "DELETE LEAVE TYPE",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 justify-center items-center", children: [
          /* @__PURE__ */ jsx("p", { className: "text-gray-500 text-lg font-bold text-center", children: "Are you sure you want to delete this Leavetype?" }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-4 flex-wrap justify-center", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
                disabled: loading,
                onClick: () => setShowDeleteModal(false),
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "submit",
                className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
                disabled: loading,
                onClick: handleDeleteSubmit,
                children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
              }
            )
          ] })
        ] })
      }
    )
  ] }) });
};
const Leave = () => {
  useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  useAuthStore((state) => state.accessToken);
  const [activeTab, setActiveTab] = useState("leavereq");
  const tabs = [{
    id: "leavereq",
    label: "Leave Request"
  }, {
    id: "leavetype",
    label: "Leave Types"
  }];
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsx("div", {
      className: "  dark:border-gray-700  ",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: ` font-medium text-sm  ${activeTab === tab.id ? " text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm " : "border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm "}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "leavereq" && /* @__PURE__ */ jsx(LeaveRequestList, {}), activeTab === "leavetype" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(LeaveTypes, {})
      }), activeTab === "report" && /* @__PURE__ */ jsx("div", {
        children: "termination Content Goes Here"
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Update Leave Request",
      children: /* @__PURE__ */ jsx(EditLeaveRequestForm, {
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 justify-center items-center",
        children: [/* @__PURE__ */ jsx("p", {
          className: "text-gray-500 text-lg font-bold text-center",
          children: "Are you sure you want to delete this Leave Details?"
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex gap-4 flex-wrap justify-center",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
            disabled: loading,
            onClick: () => setShowDeleteModal(false),
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
          })]
        })]
      })
    })]
  });
};
const Leave$1 = withComponentProps(Leave);
const route10 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Leave$1
}, Symbol.toStringTag, { value: "Module" }));
const EmployeeTimeSheet = () => {
  var _a;
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [selectedProjectCode, setSelectedProjectCode] = useState("");
  const [taskId, setTaskId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [reportData, setReportData] = useState(null);
  const [checkInOutData, setCheckInOutData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [projectOptions, setProjectOptions] = useState([]);
  const [activeTab, setActiveTab] = useState("checkinout");
  const [sortOrder, setSortOrder] = useState("");
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const [totalDuration, setTotalDuration] = useState(0);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  console.log("roleeeeee", role, userBranchCode, staff_id);
  console.log("User role and details:", {
    role,
    staff_id,
    userBranchCode
  });
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [{
    value: 10,
    label: "10 per page"
  }, {
    value: 20,
    label: "20 per page"
  }, {
    value: 50,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter((branch2) => branch2.value === userBranchCode);
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    if (role !== "team-lead" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "team-lead" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "team-lead" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/users/read?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  useEffect(() => {
    const getProjectOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "team-lead" && !userBranchCode) {
        setProjectOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "team-lead" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/project/overview/dropdown?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((project2) => ({
            value: project2.project_code,
            label: project2.title
          }));
          setProjectOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching project list", error2);
        toast$1.error("Failed to fetch projects");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      getProjectOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const fetchCheckInOutData = async () => {
    var _a2;
    const staffIdToUse = role !== "team-lead" && role !== "superadmin" ? staff_id : selectedStaffId;
    if (!staffIdToUse) {
      setCheckInOutData(null);
      return;
    }
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/task/checkinout/read?staff_id=${encodeURIComponent(staffIdToUse)}`;
      if (taskId) {
        url += `&task_id=${taskId}`;
      }
      if (startDate) {
        const formattedStartDate = formatDate2(startDate);
        url += `&start_date=${formattedStartDate}`;
      }
      if (endDate) {
        const formattedEndDate = formatDate2(endDate);
        url += `&end_date=${formattedEndDate}`;
      }
      if (sortOrder) {
        url += `&dec=${sortOrder}`;
      }
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data) {
        setCheckInOutData(response.data);
        setTotalItem(((_a2 = response.data.data) == null ? void 0 : _a2.length) || 0);
      }
    } catch (error2) {
      console.error("Error fetching check-in/out data", error2);
      toast$1.error("Failed to fetch check-in/out data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear().toString().slice(-2);
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setSelectedProjectCode("");
    setTaskId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handleTaskIdChange = (e) => {
    setTaskId(e.target.value);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
  };
  const handleOnExport = () => {
    var _a2;
    let dataToExport = [];
    let fileName = "";
    if (activeTab === "timesheetreport" && ((_a2 = reportData == null ? void 0 : reportData.data) == null ? void 0 : _a2.summary)) {
      dataToExport = reportData.data.summary;
      fileName = "TimeSheetReport";
    } else if (activeTab === "checkinout" && (checkInOutData == null ? void 0 : checkInOutData.data)) {
      dataToExport = checkInOutData.data;
      fileName = "CheckInOutReport";
    }
    if (dataToExport.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, fileName);
    XLSX.writeFile(wb, `${fileName}.xlsx`);
  };
  const generateReport = () => {
    fetchCheckInOutData();
  };
  useEffect(() => {
    if (role !== "superadmin" && role !== "team-lead") {
      fetchCheckInOutData();
    }
  }, []);
  const checkInOutThead = () => [{
    data: "Id"
  }, {
    data: "Task ID"
  }, {
    data: "Project"
  }, {
    data: "Task"
  }, {
    data: "Subtask"
  }, {
    data: "Check-in"
  }, {
    data: "Check-out"
  }, {
    data: "Duration (mins)"
  }, {
    data: "Staff"
  }];
  const checkInOutTbody = () => {
    if (!(checkInOutData == null ? void 0 : checkInOutData.data)) return [];
    return checkInOutData.data.map((item, index) => ({
      id: item.id || index,
      data: [{
        data: index + 1
      }, {
        data: item.task_id
      }, {
        data: item.project_title
      }, {
        data: item.task_title
      }, {
        data: item.subtask_title
      }, {
        data: new Date(item.check_in).toLocaleString()
      }, {
        data: item.check_out ? new Date(item.check_out).toLocaleString() : "Still checked in"
      }, {
        data: item.duration
      }, {
        data: item.staff_name
      }]
    }));
  };
  const calculateTotalDuration = () => {
    if (!checkInOutData) return 0;
    return checkInOutData.data.reduce((total, item) => {
      const duration = typeof item.duration === "string" ? parseFloat(item.duration) : item.duration;
      return total + (duration || 0);
    }, 0);
  };
  useEffect(() => {
    if (checkInOutData == null ? void 0 : checkInOutData.data) {
      setTotalDuration(calculateTotalDuration());
    } else {
      setTotalDuration(0);
    }
  }, [checkInOutData]);
  console.log("calculatetotallldura", calculateTotalDuration());
  const formatDuration = (minutes) => {
    if (isNaN(minutes)) return "0 minutes";
    const hours = Math.floor(minutes / 60);
    const remainingMinutes = Math.round(minutes % 60);
    if (hours > 0 && remainingMinutes > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""} ${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    }
  };
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsx("div", {
      className: "flex flex-col min-h-screen",
      children: /* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsx("div", {
          className: "flex justify-between items-center mb-4",
          children: /* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",
            children: "Employee Check In - Check Out"
          })
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-4 mb-5",
          children: [/* @__PURE__ */ jsxs("div", {
            className: `grid grid-cols-1${role !== "superadmin" && role !== "team-lead" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : " md:grid-cols-4 lg:grid-cols-4 gap-20"}  `,
            children: [(role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(Dropdown, {
              options: filteredBranchOptions(),
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Select Branch",
              className: "w-[245px]",
              isLoading: isStoreLoading,
              disabled: role === "team-lead"
            }), (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(Dropdown, {
              options: staffOptions,
              selectedValue: selectedStaffId,
              onSelect: handleStaffChange,
              placeholder: "Select Staff",
              className: "w-[245px]",
              disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
              isLoading: loading
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[245px]",
              children: /* @__PURE__ */ jsx("input", {
                type: "number",
                value: taskId,
                onChange: handleTaskIdChange,
                placeholder: "Enter Task ID (optional)",
                className: "w-full p-2 border rounded h-[40px]"
              })
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-[245px]"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-wrap justify-between items-center ",
            children: [/* @__PURE__ */ jsxs("div", {
              className: `flex  ${role !== "superadmin" && role !== "team-lead" ? "gap-91" : "gap-19"}`,
              children: [/* @__PURE__ */ jsxs("button", {
                onClick: toggleSortOrder,
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect px-18 h-[40px] rounded-sm",
                children: [sortOrder === "desc" ? /* @__PURE__ */ jsx(SortDesc, {
                  className: "mr-1"
                }) : /* @__PURE__ */ jsx(SortAsc, {
                  className: "mr-1"
                }), "Sort ", sortOrder === "desc" ? "Desc" : "Asc"]
              }), /* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
                disabled: !(checkInOutData == null ? void 0 : checkInOutData.data),
                children: [/* @__PURE__ */ jsx(FileDown, {
                  className: "mr-1"
                }), !isMobile && "Export Excel"]
              })]
            }), /* @__PURE__ */ jsx("button", {
              onClick: generateReport,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              disabled: (role !== "team-lead" && role !== "superadmin" ? false : !selectedStaffId) || loading,
              children: loading ? "Loading..." : "Generate Report"
            })]
          })]
        }), checkInOutData && /* @__PURE__ */ jsxs("div", {
          className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg text-red-700 font-semibold mb-2",
            children: "Report Summary"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-3 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-sm text-gray-500 mb-3",
                children: [/* @__PURE__ */ jsx(SquareKanban, {
                  className: "inline",
                  size: 20
                }), " Staff ID"]
              }), /* @__PURE__ */ jsx("p", {
                className: "font-medium",
                children: role !== "team-lead" && role !== "superadmin" ? staff_id : selectedStaffId
              })]
            }), taskId && /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-sm text-gray-500 mb-3",
                children: [/* @__PURE__ */ jsx(SquareKanban, {
                  className: "inline",
                  size: 20
                }), " Task ID"]
              }), /* @__PURE__ */ jsx("p", {
                className: "font-medium",
                children: taskId
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-sm text-gray-500 mb-3",
                children: [/* @__PURE__ */ jsx(Hourglass, {
                  className: "inline",
                  size: 20
                }), " Duration Range"]
              }), /* @__PURE__ */ jsx("p", {
                className: "font-medium",
                children: formatDuration(totalDuration)
              })]
            })]
          })]
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), (checkInOutData == null ? void 0 : checkInOutData.data) && /* @__PURE__ */ jsxs(Fragment, {
          children: [/* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead: checkInOutThead,
              tbody: checkInOutTbody,
              responsive: true,
              className: "min-w-full"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
            children: /* @__PURE__ */ jsx(CustomPagination, {
              total: totalItem,
              currentPage,
              defaultPageSize: pageSize,
              onChange: handlePageChange,
              paginationLabel: "records",
              isScroll: true
            })
          })]
        }), !loading && !checkInOutData && /* @__PURE__ */ jsx("div", {
          className: "text-center py-10 text-gray-500",
          children: role !== "team-lead" && role !== "superadmin" ? "Click 'Generate Report' to view your check-in/out data" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !selectedStaffId ? "Please select Staff to view check-in/out data" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !selectedStaffId ? "Please select Staff to view check-in/out data" : "Click 'Generate Report' to view data"
        })]
      })
    })
  });
};
const EmployeeTimeSheet$1 = withComponentProps(EmployeeTimeSheet);
const route11 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: EmployeeTimeSheet$1
}, Symbol.toStringTag, { value: "Module" }));
Chart.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);
const DynamicBarChart = ({ data, className, theme = "light" }) => {
  const defaultDataset = {
    label: "Dataset",
    backgroundColor: "rgba(59, 130, 246, 0.7)",
    borderColor: "rgba(59, 130, 246, 1)",
    borderWidth: 1,
    borderRadius: 6,
    // rounded bars
    barPercentage: 0.9,
    // controls individual bar width
    categoryPercentage: 0.6
    // controls spacing between bars
  };
  const chartData = {
    labels: data.labels || [],
    datasets: data.datasets.map((dataset, index) => ({
      ...defaultDataset,
      ...dataset,
      backgroundColor: dataset.backgroundColor || `${getColor(index)}BB`,
      borderColor: dataset.borderColor || getColor(index)
    }))
  };
  const options = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: "top",
        labels: {
          color: theme === "dark" ? "#e5e7eb" : "#6b7280",
          font: {
            size: 12,
            weight: "500"
          }
        }
      },
      title: {
        display: !!data.title,
        text: data.title,
        color: theme === "dark" ? "#f9fafb" : "rgb(156 163 175)",
        font: {
          size: 18,
          weight: "600"
        },
        padding: {
          top: 1,
          bottom: 2
        }
      },
      tooltip: {
        backgroundColor: theme === "dark" ? "#1f2937" : "#ffffff",
        titleColor: theme === "dark" ? "#e5e7eb" : "#111827",
        bodyColor: theme === "dark" ? "#e5e7eb" : "#111827",
        borderColor: theme === "dark" ? "#374151" : "#e5e7eb",
        borderWidth: 1,
        padding: 5,
        titleFont: { size: 14 },
        bodyFont: { size: 12 }
      }
    },
    scales: {
      x: {
        grid: {
          display: false
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280"
        }
      },
      y: {
        grid: {
          color: theme === "dark" ? "rgba(229, 231, 235, 0.1)" : "rgba(0,0,0,0.05)"
        },
        ticks: {
          color: theme === "dark" ? "#9ca3af" : "#6b7280"
        }
      }
    }
  };
  return /* @__PURE__ */ jsx("div", { className: twMerge(
    "p-5 rounded-xl shadow-md transition-all duration-300",
    "dark:bg-gray-800 dark:border-gray-700 bg-white border border-gray-200",
    className
  ), children: /* @__PURE__ */ jsx("div", { className: "h-[200px] w-full", children: /* @__PURE__ */ jsx(Bar, { data: chartData, options }) }) });
};
function getColor(index) {
  const colors = [
    "#3b82f6",
    "#ef4444",
    "#10b981",
    "#f59e0b",
    "#8b5cf6",
    "#ec4899",
    "#14b8a6",
    "#f97316",
    "#6366f1",
    "#d946ef",
    "#0ea5e9",
    "#84cc16"
  ];
  return colors[index % colors.length];
}
const TimeSheetReport = () => {
  var _a, _b;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [selectedProjectCode, setSelectedProjectCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [reportData, setReportData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [projectOptions, setProjectOptions] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const [activeTab, setActiveTab] = useState("timesheetreport");
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (!selectedBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/users/read?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    getStaffOptions();
  }, [selectedBranchCode, token]);
  useEffect(() => {
    const getProjectOptions = async () => {
      if (!selectedBranchCode) {
        setProjectOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/project/overview/dropdown?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((project2) => ({
            value: project2.project_code,
            label: project2.title
          }));
          setProjectOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching project list", error2);
        toast$1.error("Failed to fetch projects");
      } finally {
        setLoading(false);
      }
    };
    getProjectOptions();
  }, [selectedBranchCode, token]);
  const fetchReportData = async () => {
    var _a2, _b2;
    if (!selectedStaffId || !selectedProjectCode) {
      setReportData(null);
      return;
    }
    setLoading(true);
    try {
      let url = `${BASE_URL}/report/tasksummary/read?project_code=${encodeURIComponent(selectedProjectCode)}&staff_id=${encodeURIComponent(selectedStaffId)}`;
      if (startDate) {
        const formattedStartDate = formatDate2(startDate);
        url += `&start_date=${formattedStartDate}`;
      }
      if (endDate) {
        const formattedEndDate = formatDate2(endDate);
        url += `&end_date=${formattedEndDate}`;
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setReportData(response.data);
        setTotalItem(((_b2 = (_a2 = response.data.data) == null ? void 0 : _a2.summary) == null ? void 0 : _b2.length) || 0);
      }
    } catch (error2) {
      console.error("Error fetching time sheet report", error2);
      toast$1.error("Failed to fetch time sheet report");
      setError("Failed to fetch report");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear().toString().slice(-2);
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setSelectedProjectCode("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handleProjectChange = (value) => {
    setSelectedProjectCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleOnExport = () => {
    var _a2;
    if (!((_a2 = reportData == null ? void 0 : reportData.data) == null ? void 0 : _a2.summary)) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(reportData.data.summary);
    XLSX.utils.book_append_sheet(wb, ws, "TimeSheetReport");
    XLSX.writeFile(wb, "TimeSheetReport.xlsx");
  };
  const thead = () => [
    { data: "Task ID" },
    { data: "Task Title" },
    { data: "Priority" },
    { data: "Status" },
    { data: "Subtask" },
    { data: "Rating" },
    { data: "Duration (mins)" },
    { data: "Delay_By" },
    { data: "Delay Reason" },
    { data: "Last Check-in" },
    { data: "Last Check-out" }
  ];
  const tbody = () => {
    var _a2;
    if (!((_a2 = reportData == null ? void 0 : reportData.data) == null ? void 0 : _a2.summary)) return [];
    return reportData.data.summary.map((item, index) => ({
      id: item.task_id || index,
      data: [
        { data: item.task_id },
        { data: item.task_title },
        { data: item.task_priority },
        { data: item.task_status },
        { data: item.subtask_title },
        { data: item.rating },
        { data: item.total_duration_minutes },
        { data: item.delay_by || "Task Ontime" },
        { data: item.delay_reason || "No Delay Reason" },
        { data: new Date(item.last_check_in).toLocaleString() },
        { data: new Date(item.last_check_out).toLocaleString() }
      ]
    }));
  };
  const tabs = [
    { id: "timesheetreport", label: "Time Sheet Report" },
    { id: "ProjectTimesheetReport", label: "Project Time Sheet Report" },
    { id: "usertimesheet", label: "Employee Time Sheet Report" }
  ];
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
    /* @__PURE__ */ jsx("div", { className: "border-b m-5 border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
      "button",
      {
        onClick: () => setActiveTab(tab.id),
        className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
        children: tab.label
      },
      tab.id
    )) }) }),
    activeTab == "timesheetreport" && /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Time Sheet Report" }),
        isMobile && /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setShowFilters(!showFilters),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters ? "Hide Filters" : "Show Filters"
          }
        )
      ] }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-19", children: [
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Select Branch",
              className: "w-full",
              isLoading: isStoreLoading
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: staffOptions,
              selectedValue: selectedStaffId,
              onSelect: handleStaffChange,
              placeholder: "Select Staff",
              className: "w-full",
              disabled: !selectedBranchCode,
              isLoading: loading
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: projectOptions,
              selectedValue: selectedProjectCode,
              onSelect: handleProjectChange,
              placeholder: "Select Project",
              className: "w-full",
              disabled: !selectedBranchCode,
              isLoading: loading
            }
          ),
          /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
            DatePicker,
            {
              selectsRange: true,
              startDate,
              endDate,
              onChange: handleDateChange,
              placeholderText: "Select date range",
              className: "w-full p-2 border rounded",
              isClearable: true
            }
          ) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex gap-19", children: [
            /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: pageSizeOptions,
                selectedValue: pageSize,
                onSelect: handlePageSizeChange,
                placeholder: "Items per page",
                className: "w-[245px]"
              }
            ),
            /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[245px]",
                disabled: !((_a = reportData == null ? void 0 : reportData.data) == null ? void 0 : _a.summary),
                children: [
                  /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                  !isMobile && "Export Excel"
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: fetchReportData,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              disabled: !selectedStaffId || !selectedProjectCode || loading,
              children: loading ? "Loading..." : "Generate Report"
            }
          )
        ] })
      ] }),
      reportData && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-2", children: "Report Summary" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3", children: [
              /* @__PURE__ */ jsx(SquareKanban, { className: "inline", size: 20 }),
              " Project Code"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data.project_code })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3", children: [
              /* @__PURE__ */ jsx(UserCheck, { className: "inline", size: 20 }),
              " Staff ID"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: selectedStaffId })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3", children: [
              /* @__PURE__ */ jsx(CalendarFold, { className: "inline", size: 20 }),
              " Date Range"
            ] }),
            /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
              startDate ? formatDate2(startDate) : "N/A",
              " - ",
              endDate ? formatDate2(endDate) : "N/A"
            ] })
          ] })
        ] })
      ] }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
      ((_b = reportData == null ? void 0 : reportData.data) == null ? void 0 : _b.summary) && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) }),
        /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "tasks",
            isScroll: true
          }
        ) })
      ] }),
      !loading && !reportData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: selectedBranchCode ? !selectedStaffId || !selectedProjectCode ? "Please select both Staff and Project to generate report" : "Click 'Generate Report' to view data" : "Please select a Branch to view available options" })
    ] })
  ] }) });
};
const ClientSummaryReport = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedClientCode, setSelectedClientCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [reportData, setReportData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [clientOptions, setClientOptions] = useState([]);
  const [sortField, setSortField] = useState("");
  const [sortDirection, setSortDirection] = useState("ASC");
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const staticBranchCode = useAuthStore((state) => state.branchcode);
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const sortFieldOptions = [
    { value: "client_name", label: "Client Name" },
    { value: "company_name", label: "Company Name" },
    { value: "total_projects", label: "Total Projects" },
    { value: "minor_priority_projects", label: "Minor Priority Projects" },
    { value: "major_priority_projects", label: "Major Priority Projects" },
    { value: "critical_priority_projects", label: "Critical Priority Projects" },
    { value: "blocker_priority_projects", label: "Blocker Priority Projects" },
    { value: "draft_projects", label: "Draft Projects" },
    { value: "planning_projects", label: "Planning Projects" },
    { value: "inprocess_projects", label: "In Process Projects" },
    { value: "active_projects", label: "Active Projects" },
    { value: "lead_review_projects", label: "Lead Review Projects" },
    { value: "completed_projects", label: "Completed Projects" },
    { value: "revised_projects", label: "Revised Projects" },
    { value: "client_review_projects", label: "Client Review Projects" },
    { value: "drop_projects", label: "Dropped Projects" },
    { value: "total_milestones", label: "Total Milestones" },
    { value: "total_tasks", label: "Total Tasks" }
  ];
  const sortDirectionOptions = [
    { value: "ASC", label: "Ascending" },
    { value: "DESC", label: "Descending" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  useEffect(() => {
    const getClientOptions = async () => {
      const branchCodeToUse = userRole === "superadmin" ? selectedBranchCode : staticBranchCode;
      if (!branchCodeToUse) {
        setClientOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/client/overview/dropdown?branchcode=${branchCodeToUse}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((client) => ({
            value: client.client_code,
            label: `${client.client_name} (${client.client_code})`
          }));
          setClientOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching client list", error2);
        toast$1.error("Failed to fetch clients");
      } finally {
        setLoading(false);
      }
    };
    getClientOptions();
  }, [selectedBranchCode, staticBranchCode, token, userRole]);
  const fetchReportData = async () => {
    var _a;
    setLoading(true);
    try {
      let url = `${BASE_URL}/report/branchsummary/read`;
      const params = new URLSearchParams();
      if (selectedClientCode) {
        params.append("client_code", selectedClientCode);
      }
      if (startDate) {
        params.append("start_date", formatDate2(startDate));
      }
      if (endDate) {
        params.append("end_date", formatDate2(endDate));
      }
      if (sortField) {
        params.append("sortField", sortField);
      }
      if (sortDirection) {
        params.append("sortDirection", sortDirection);
      }
      const branchCodeToUse = userRole === "superadmin" ? selectedBranchCode : staticBranchCode;
      if (branchCodeToUse) {
        params.append("branchcode", branchCodeToUse);
      }
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setReportData(response.data);
        setTotalItem(((_a = response.data.data) == null ? void 0 : _a.length) || 0);
      }
    } catch (error2) {
      console.error("Error fetching client summary report", error2);
      toast$1.error("Failed to fetch client summary report");
      setError("Failed to fetch report");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedClientCode("");
    setCurrentPage(1);
  };
  const handleClientChange = (value) => {
    setSelectedClientCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleSortFieldChange = (value) => {
    setSortField(value);
  };
  const handleSortDirectionChange = (value) => {
    setSortDirection(value);
  };
  const handleOnExport = () => {
    if (!(reportData == null ? void 0 : reportData.data)) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const clientDetails = reportData.data.map((client) => ({
      "Client Code": client.client_code,
      "Client Name": client.client_name,
      "Branch Code": client.branchcode,
      "Company Name": client.company_name,
      "Email": client.email,
      "Communication Type": client.comm_type,
      "Created On": client.created_on ? new Date(client.created_on).toLocaleDateString() : "N/A",
      "Total Projects": client.total_projects,
      "Minor Priority Projects": client.minor_priority_projects,
      "Major Priority Projects": client.major_priority_projects,
      "Critical Priority Projects": client.critical_priority_projects,
      "Blocker Priority Projects": client.blocker_priority_projects,
      "Draft Projects": client.draft_projects,
      "Planning Projects": client.planning_projects,
      "In Process Projects": client.inprocess_projects,
      "Active Projects": client.active_projects,
      "Lead Review Projects": client.lead_review_projects,
      "Completed Projects": client.completed_projects,
      "Revised Projects": client.revised_projects,
      "Client Review Projects": client.client_review_projects,
      "Dropped Projects": client.drop_projects,
      "Total Milestones": client.total_milestones,
      "Draft Milestones": client.draft_milestones,
      "In Process Milestones": client.inprocess_milestones,
      "Archived Milestones": client.archived_milestones,
      "Dropped Milestones": client.drop_milestones,
      "Verified Milestones": client.verified_milestones,
      "Total Tasks": client.total_tasks,
      "Minor Priority Tasks": client.minor_priority_task,
      "Major Priority Tasks": client.major_priority_task,
      "Critical Priority Tasks": client.critical_priority_task,
      "Blocker Priority Tasks": client.blocker_priority_task,
      "In Process Tasks": client.inprocess_tasks,
      "Archived Tasks": client.archived_tasks,
      "Verified/Closed Tasks": client.verified_closed_tasks
    }));
    const wsClient = XLSX.utils.json_to_sheet(clientDetails);
    XLSX.utils.book_append_sheet(wb, wsClient, "Client Summary");
    XLSX.writeFile(wb, "ClientSummaryReport.xlsx");
  };
  const clientThead = () => [
    { data: "Client Code" },
    { data: "Client Name" },
    { data: "Company" },
    { data: "Total Projects" },
    { data: "Draft" },
    { data: "In Process" },
    { data: "Completed" },
    { data: "Total Tasks" },
    { data: "Created On" }
  ];
  const clientTbody = () => {
    if (!(reportData == null ? void 0 : reportData.data)) return [];
    return reportData.data.map((client, index) => ({
      id: client.client_code,
      data: [
        { data: client.client_code },
        { data: client.client_name },
        { data: client.company_name },
        { data: client.total_projects },
        { data: client.draft_projects },
        { data: client.inprocess_projects },
        { data: client.completed_projects },
        { data: client.total_tasks },
        { data: client.created_on ? new Date(client.created_on).toLocaleDateString() : "N/A" }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow ", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Client Summary Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5 ml-5", children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-40", children: [
        userRole === "superadmin" && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: branchCodeOptions,
            selectedValue: selectedBranchCode,
            onSelect: handleBranchCodeChange,
            placeholder: "Select Branch",
            className: "w-full",
            isLoading: isStoreLoading
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: clientOptions,
            selectedValue: selectedClientCode,
            onSelect: handleClientChange,
            placeholder: "Select Client",
            className: "w-full",
            disabled: userRole === "superadmin" ? !selectedBranchCode : false,
            isLoading: loading
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
          DatePicker,
          {
            selectsRange: true,
            startDate,
            endDate,
            onChange: handleDateChange,
            placeholderText: "Select date range",
            className: "w-full p-2 border rounded",
            isClearable: true
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-40", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: sortFieldOptions,
            selectedValue: sortField,
            onSelect: handleSortFieldChange,
            placeholder: "Sort By Field",
            className: "w-full"
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: sortDirectionOptions,
            selectedValue: sortDirection,
            onSelect: handleSortDirectionChange,
            placeholder: "Sort Direction",
            className: "w-full"
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-full"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center gap-4", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",
            disabled: !(reportData == null ? void 0 : reportData.data),
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              !isMobile && "Export Excel"
            ]
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: fetchReportData,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 mr-[48px] ",
            disabled: loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        )
      ] })
    ] }),
    reportData && /* @__PURE__ */ jsx(Fragment, { children: reportData.data.length > 0 ? /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
        /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: clientThead,
            tbody: clientTbody,
            responsive: true,
            className: "min-w-full"
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "clients",
            isScroll: true
          }
        ) })
      ] }),
      selectedClientCode && reportData.data.length === 1 && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-4", children: "Detailed Client Summary" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
              /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
              " Client Code"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: reportData.data[0].client_code })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
              /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
              " Client Name"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: reportData.data[0].client_name })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
              /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
              " Company"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: reportData.data[0].company_name })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Projects Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Projects" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Draft" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].draft_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Completed" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].completed_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Dropped" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].drop_projects })
            ] })
          ] }),
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Priority Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Minor" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].minor_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Major" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].major_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Critical" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].critical_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Blocker" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].blocker_priority_projects })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Milestones Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Milestones" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Draft" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].draft_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Verified" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].verified_milestones })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Tasks Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Tasks" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Verified/Closed" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].verified_closed_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Archived" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].archived_tasks })
            ] })
          ] })
        ] })
      ] })
    ] }) : /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: "No data found for the selected filters" }) }),
    !loading && !reportData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: userRole === "superadmin" && !selectedBranchCode ? "Please select a Branch to view available clients" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const BranchSummaryReport = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [reportData, setReportData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [sortField, setSortField] = useState("");
  const [sortDirection, setSortDirection] = useState("ASC");
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const staticBranchCode = useAuthStore((state) => state.branchcode);
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const sortFieldOptions = [
    { value: "branchcode", label: "Branch Code" },
    { value: "total_projects", label: "Total Projects" },
    { value: "minor_priority_projects", label: "Minor Priority Projects" },
    { value: "major_priority_projects", label: "Major Priority Projects" },
    { value: "critical_priority_projects", label: "Critical Priority Projects" },
    { value: "blocker_priority_projects", label: "Blocker Priority Projects" },
    { value: "draft_projects", label: "Draft Projects" },
    { value: "inprocess_projects", label: "In Process Projects" },
    { value: "completed_projects", label: "Completed Projects" },
    { value: "total_milestones", label: "Total Milestones" },
    { value: "total_tasks", label: "Total Tasks" }
  ];
  const sortDirectionOptions = [
    { value: "ASC", label: "Ascending" },
    { value: "DESC", label: "Descending" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const fetchReportData = async () => {
    setLoading(true);
    try {
      let url = `${BASE_URL}/report/branchsummary/read`;
      const params = new URLSearchParams();
      const branchCodeToUse = userRole === "superadmin" ? selectedBranchCode : staticBranchCode;
      if (branchCodeToUse) {
        params.append("branchcode", branchCodeToUse);
      }
      if (startDate) {
        params.append("start_date", formatDate2(startDate));
      }
      if (endDate) {
        params.append("end_date", formatDate2(endDate));
      }
      if (sortField) {
        params.append("sortField", sortField);
      }
      if (sortDirection) {
        params.append("sortDirection", sortDirection);
      }
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        const aggregatedData = aggregateBranchData(response.data.data);
        setReportData({
          ...response.data,
          data: aggregatedData,
          aggregated: true
        });
        setTotalItem(aggregatedData.length);
      }
    } catch (error2) {
      console.error("Error fetching branch summary report", error2);
      toast$1.error("Failed to fetch branch summary report");
      setError("Failed to fetch report");
    } finally {
      setLoading(false);
    }
  };
  const aggregateBranchData = (clientData) => {
    if (!clientData || clientData.length === 0) return [];
    const branchMap = {};
    clientData.forEach((client) => {
      if (!branchMap[client.branchcode]) {
        branchMap[client.branchcode] = {
          branchcode: client.branchcode,
          total_projects: 0,
          minor_priority_projects: 0,
          major_priority_projects: 0,
          critical_priority_projects: 0,
          blocker_priority_projects: 0,
          draft_projects: 0,
          planning_projects: 0,
          inprocess_projects: 0,
          active_projects: 0,
          lead_review_projects: 0,
          completed_projects: 0,
          revised_projects: 0,
          client_review_projects: 0,
          drop_projects: 0,
          total_milestones: 0,
          draft_milestones: 0,
          inprocess_milestones: 0,
          archived_milestones: 0,
          drop_milestones: 0,
          verified_milestones: 0,
          total_tasks: 0,
          minor_priority_task: 0,
          major_priority_task: 0,
          critical_priority_task: 0,
          blocker_priority_task: 0,
          inprocess_tasks: 0,
          archived_tasks: 0,
          verified_closed_tasks: 0,
          client_count: 0
        };
      }
      const branch2 = branchMap[client.branchcode];
      Object.keys(client).forEach((key) => {
        if (typeof client[key] === "string" && !isNaN(client[key]) && client[key] !== "") {
          branch2[key] = (branch2[key] || 0) + parseInt(client[key]);
        }
      });
      branch2.client_count += 1;
    });
    return Object.values(branchMap);
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleSortFieldChange = (value) => {
    setSortField(value);
  };
  const handleSortDirectionChange = (value) => {
    setSortDirection(value);
  };
  const handleOnExport = () => {
    if (!(reportData == null ? void 0 : reportData.data)) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const branchDetails = reportData.data.map((branch2) => ({
      "Branch Code": branch2.branchcode,
      "Total Clients": branch2.client_count,
      "Total Projects": branch2.total_projects,
      "Minor Priority Projects": branch2.minor_priority_projects,
      "Major Priority Projects": branch2.major_priority_projects,
      "Critical Priority Projects": branch2.critical_priority_projects,
      "Blocker Priority Projects": branch2.blocker_priority_projects,
      "Draft Projects": branch2.draft_projects,
      "Planning Projects": branch2.planning_projects,
      "In Process Projects": branch2.inprocess_projects,
      "Active Projects": branch2.active_projects,
      "Lead Review Projects": branch2.lead_review_projects,
      "Completed Projects": branch2.completed_projects,
      "Revised Projects": branch2.revised_projects,
      "Client Review Projects": branch2.client_review_projects,
      "Dropped Projects": branch2.drop_projects,
      "Total Milestones": branch2.total_milestones,
      "Draft Milestones": branch2.draft_milestones,
      "In Process Milestones": branch2.inprocess_milestones,
      "Archived Milestones": branch2.archived_milestones,
      "Dropped Milestones": branch2.drop_milestones,
      "Verified Milestones": branch2.verified_milestones,
      "Total Tasks": branch2.total_tasks,
      "Minor Priority Tasks": branch2.minor_priority_task,
      "Major Priority Tasks": branch2.major_priority_task,
      "Critical Priority Tasks": branch2.critical_priority_task,
      "Blocker Priority Tasks": branch2.blocker_priority_task,
      "In Process Tasks": branch2.inprocess_tasks,
      "Archived Tasks": branch2.archived_tasks,
      "Verified/Closed Tasks": branch2.verified_closed_tasks
    }));
    const wsBranch = XLSX.utils.json_to_sheet(branchDetails);
    XLSX.utils.book_append_sheet(wb, wsBranch, "Branch Summary");
    XLSX.writeFile(wb, "BranchSummaryReport.xlsx");
  };
  const branchThead = () => [
    { data: "Branch Code" },
    { data: "Total Clients" },
    { data: "Total Projects" },
    { data: "Draft Projects" },
    { data: "In Process" },
    { data: "Completed" },
    { data: "Total Milestones" },
    { data: "Total Tasks" }
  ];
  const branchTbody = () => {
    if (!(reportData == null ? void 0 : reportData.data)) return [];
    return reportData.data.map((branch2, index) => ({
      id: branch2.branchcode,
      data: [
        { data: branch2.branchcode },
        { data: branch2.client_count },
        { data: branch2.total_projects },
        { data: branch2.draft_projects },
        { data: branch2.inprocess_projects },
        { data: branch2.completed_projects },
        { data: branch2.total_milestones },
        { data: branch2.total_tasks }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow ", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Branch Summary Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5 ml-5", children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-40", children: [
        userRole === "superadmin" && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: branchCodeOptions,
            selectedValue: selectedBranchCode,
            onSelect: handleBranchCodeChange,
            placeholder: "Select Branch",
            className: "w-full",
            isLoading: isStoreLoading
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
          DatePicker,
          {
            selectsRange: true,
            startDate,
            endDate,
            onChange: handleDateChange,
            placeholderText: "Select date range",
            className: "w-full p-2 border rounded",
            isClearable: true
          }
        ) }),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-full"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-40", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: sortFieldOptions,
            selectedValue: sortField,
            onSelect: handleSortFieldChange,
            placeholder: "Sort By Field",
            className: "w-full"
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: sortDirectionOptions,
            selectedValue: sortDirection,
            onSelect: handleSortDirectionChange,
            placeholder: "Sort Direction",
            className: "w-full"
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "flex items-center justify-end", children: /* @__PURE__ */ jsx(
          "button",
          {
            onClick: fetchReportData,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 w-full",
            disabled: loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: handleOnExport,
          className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",
          disabled: !(reportData == null ? void 0 : reportData.data),
          children: [
            /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
            !isMobile && "Export Excel"
          ]
        }
      ) })
    ] }),
    reportData && /* @__PURE__ */ jsx(Fragment, { children: reportData.data.length > 0 ? /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
        /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: branchThead,
            tbody: branchTbody,
            responsive: true,
            className: "min-w-full"
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "branches",
            isScroll: true
          }
        ) })
      ] }),
      selectedBranchCode && reportData.data.length === 1 && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-4", children: "Detailed Branch Summary" }),
        /* @__PURE__ */ jsx("div", { className: "mb-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
            /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: reportData.data[0].branchcode })
        ] }) }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Projects Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Projects" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Clients" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].client_count })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Draft" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].draft_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Completed" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].completed_projects })
            ] })
          ] }),
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Priority Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Minor" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].minor_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Major" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].major_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Critical" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].critical_priority_projects })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Blocker" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].blocker_priority_projects })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Milestones Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Milestones" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Draft" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].draft_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_milestones })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Verified" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].verified_milestones })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h4", { className: "text-md font-semibold mb-3", children: "Tasks Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Total Tasks" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].total_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Process" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].inprocess_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Verified/Closed" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].verified_closed_tasks })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Archived" }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: reportData.data[0].archived_tasks })
            ] })
          ] })
        ] })
      ] })
    ] }) : /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: "No data found for the selected filters" }) }),
    !loading && !reportData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: userRole === "superadmin" && !selectedBranchCode ? "Please select a Branch to view report" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const TeamProjectReport = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedTeamId, setSelectedTeamId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [projectData, setProjectData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [teamOptions, setTeamOptions] = useState([]);
  const [showDemoData, setShowDemoData] = useState(false);
  const demoData = [{
    project_id: "PRJ-001",
    project_name: "VasundraConstruction",
    client_name: "Vasundra",
    project_value: "50000",
    paid_amount: "30000",
    pending_amount: "20000",
    start_date: "2023-01-01",
    end_date: "2023-12-31",
    status: "Active",
    team_lead_name: "Nasrin Fathima",
    milestones_count: "5",
    tasks_count: "20"
  }];
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    const fetchTeams = async () => {
      if (!selectedBranchCode) {
        setTeamOptions([]);
        return;
      }
      try {
        const url = `${BASE_URL}/teams/read?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((team) => ({
            value: team.team_id,
            label: team.team_name
          }));
          setTeamOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching teams", error2);
        toast$1.error("Failed to fetch teams");
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      fetchTeams();
    }
  }, [selectedBranchCode, token, role]);
  const isAllZeros = (data) => {
    if (!data || !data.data || data.data.length === 0) return true;
    const project2 = data.data[0];
    return (project2.project_value === "0" || !project2.project_value) && (project2.paid_amount === "0" || !project2.paid_amount) && (project2.pending_amount === "0" || !project2.pending_amount) && (project2.milestones_count === "0" || !project2.milestones_count) && (project2.tasks_count === "0" || !project2.tasks_count);
  };
  const fetchProjectData = async () => {
    if (!selectedTeamId || !startDate || !endDate) {
      setProjectData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      const url = `${BASE_URL}/teamview/report/read?startdate=${formattedStartDate}&enddate=${formattedEndDate}&teamid=${encodeURIComponent(selectedTeamId)}&page=${currentPage}&limit=${pageSize}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setShowDemoData(isAllZeros(response.data));
        setProjectData(response.data);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching project data", error2);
      toast$1.error("Failed to fetch project data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const getDisplayData = () => {
    if (showDemoData) {
      return demoData;
    }
    return (projectData == null ? void 0 : projectData.data) || [];
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedTeamId("");
    setCurrentPage(1);
  };
  const handleTeamChange = (value) => {
    setSelectedTeamId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateRangeChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const clearDateRange = () => {
    setStartDate(null);
    setEndDate(null);
  };
  const handleOnExport = () => {
    const dataToExport = getDisplayData();
    if (dataToExport.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const exportData = dataToExport.map((project2) => ({
      "Project ID": project2.project_id,
      "Project Name": project2.project_name,
      "Client Name": project2.client_name,
      "Project Value": formatCurrency(project2.project_value),
      "Paid Amount": formatCurrency(project2.paid_amount),
      "Pending Amount": formatCurrency(project2.pending_amount),
      "Start Date": project2.start_date,
      "End Date": project2.end_date,
      "Status": project2.status,
      "Team Lead": project2.team_lead_name,
      "Milestones": project2.milestones_count,
      "Tasks": project2.tasks_count
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(exportData);
    XLSX.utils.book_append_sheet(wb, ws, "TeamProjectReport");
    XLSX.writeFile(wb, "TeamProjectReport.xlsx");
  };
  const generateReport = () => {
    fetchProjectData();
  };
  const formatCurrency = (amount) => {
    if (!amount || isNaN(amount)) return "0";
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const formatNumber = (num) => {
    if (!num || isNaN(num)) return "0";
    return parseInt(num).toLocaleString("en-IN");
  };
  const getStatusIcon = (status) => {
    switch (status.toLowerCase()) {
      case "draft":
        return /* @__PURE__ */ jsx(FileText, { className: "inline mr-1 text-gray-500", size: 16 });
      case "planning":
        return /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1 text-blue-500", size: 16 });
      case "in process":
        return /* @__PURE__ */ jsx(Clock, { className: "inline mr-1 text-yellow-500", size: 16 });
      case "active":
        return /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-1 text-green-500", size: 16 });
      case "completed":
        return /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1 text-purple-500", size: 16 });
      case "lead review":
        return /* @__PURE__ */ jsx(UserCheck, { className: "inline mr-1 text-indigo-500", size: 16 });
      case "client review":
        return /* @__PURE__ */ jsx(Flag, { className: "inline mr-1 text-orange-500", size: 16 });
      case "archived":
        return /* @__PURE__ */ jsx(Archive, { className: "inline mr-1 text-gray-400", size: 16 });
      case "drop":
        return /* @__PURE__ */ jsx(AlertCircle, { className: "inline mr-1 text-red-500", size: 16 });
      default:
        return /* @__PURE__ */ jsx(FileText, { className: "inline mr-1 text-gray-500", size: 16 });
    }
  };
  const projectThead = () => [
    { data: "Project ID" },
    { data: "Project Name" },
    { data: "Client" },
    { data: "Value" },
    { data: "Status" },
    { data: "Start Date" },
    { data: "End Date" },
    { data: "Milestones" },
    { data: "Tasks" }
  ];
  const projectTbody = () => {
    const displayData = getDisplayData();
    if (displayData.length === 0) return [];
    return displayData.map((project2, index) => ({
      id: project2.project_id || index,
      data: [
        { data: project2.project_id },
        { data: project2.project_name },
        { data: project2.client_name },
        { data: formatCurrency(project2.project_value) },
        {
          data: /* @__PURE__ */ jsxs("span", { className: `flex items-center ${project2.status === "Completed" ? "text-green-600" : project2.status === "Active" ? "text-blue-600" : project2.status === "In Process" ? "text-yellow-600" : project2.status === "Draft" ? "text-gray-600" : "text-gray-800"}`, children: [
            getStatusIcon(project2.status),
            project2.status
          ] })
        },
        { data: project2.start_date || "N/A" },
        { data: project2.end_date || "N/A" },
        { data: formatNumber(project2.milestones_count) },
        { data: formatNumber(project2.tasks_count) }
      ]
    }));
  };
  const calculateSummary = () => {
    const displayData = getDisplayData();
    if (displayData.length === 0) return null;
    return displayData.reduce((acc, project2) => {
      return {
        totalProjects: acc.totalProjects + 1,
        totalValue: acc.totalValue + (parseFloat(project2.project_value) || 0),
        totalPaid: acc.totalPaid + (parseFloat(project2.paid_amount) || 0),
        totalPending: acc.totalPending + (parseFloat(project2.pending_amount) || 0),
        milestones: acc.milestones + (parseInt(project2.milestones_count) || 0),
        tasks: acc.tasks + (parseInt(project2.tasks_count) || 0)
      };
    }, {
      totalProjects: 0,
      totalValue: 0,
      totalPaid: 0,
      totalPending: 0,
      milestones: 0,
      tasks: 0
    });
  };
  const summary = calculateSummary();
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "Team Project Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
      /* @__PURE__ */ jsxs(
        "div",
        {
          className: `grid grid-cols-1 ${role !== "superadmin" && role !== "team-lead" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
          children: [
            (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: filteredBranchOptions(),
                selectedValue: selectedBranchCode,
                onSelect: handleBranchCodeChange,
                placeholder: "Select Branch",
                className: "w-[245px]",
                isLoading: isStoreLoading,
                disabled: role === "team-lead"
              }
            ),
            (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: teamOptions,
                selectedValue: selectedTeamId,
                onSelect: handleTeamChange,
                placeholder: "Select Team",
                className: "w-[245px]",
                disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
                isLoading: loading
              }
            ),
            /* @__PURE__ */ jsxs("div", { className: "w-[245px] relative", children: [
              /* @__PURE__ */ jsx(
                DatePicker,
                {
                  selectsRange: true,
                  startDate,
                  endDate,
                  onChange: handleDateRangeChange,
                  placeholderText: "Select date range",
                  className: "w-full p-2 border rounded h-[40px]",
                  isClearable: true
                }
              ),
              (startDate || endDate) && /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: clearDateRange,
                  className: "absolute right-2 top-2 text-gray-500 hover:text-gray-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ] }),
            /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: pageSizeOptions,
                selectedValue: pageSize,
                onSelect: handlePageSizeChange,
                placeholder: "Items per page",
                className: "w-[245px]"
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center", children: [
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${role !== "superadmin" && role !== "team-lead" ? "gap-91" : "gap-19"}`,
            children: /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
                disabled: !(projectData == null ? void 0 : projectData.data) && !showDemoData,
                children: [
                  /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                  !isMobile && "Export Excel"
                ]
              }
            )
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: generateReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            disabled: (role !== "team-lead" && role !== "superadmin" ? false : !selectedTeamId || !startDate || !endDate) || loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    ((projectData == null ? void 0 : projectData.data) || showDemoData) && /* @__PURE__ */ jsxs(Fragment, { children: [
      summary && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-[var(--color-primary)] font-semibold mb-2", children: "Project Summary" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Users, { className: "mr-1", size: 16 }),
              " Total Projects"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatNumber(summary.totalProjects) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(DollarSign, { className: "mr-1", size: 16 }),
              " Total Value"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(summary.totalValue) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(CreditCard, { className: "mr-1", size: 16 }),
              " Paid Amount"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(summary.totalPaid) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(PieChart, { className: "mr-1", size: 16 }),
              " Pending Amount"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(summary.totalPending) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Flag, { className: "mr-1", size: 16 }),
              " Total Milestones"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatNumber(summary.milestones) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(ClipboardList, { className: "mr-1", size: 16 }),
              " Total Tasks"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatNumber(summary.tasks) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Calendar, { className: "mr-1", size: 16 }),
              " Date Range"
            ] }),
            /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
              startDate ? new Date(startDate).toLocaleDateString() : "N/A",
              " ",
              "-",
              " ",
              endDate ? new Date(endDate).toLocaleDateString() : "N/A"
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(FileText, { className: "mr-2", size: 20 }),
          " Project Details"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: projectThead,
            tbody: projectTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "projects",
          isScroll: true
        }
      ) })
    ] }),
    !loading && !projectData && !showDemoData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: role !== "team-lead" && role !== "superadmin" ? !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view project details" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !selectedTeamId ? "Please select Team and date range" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !selectedTeamId ? "Please select Team" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const ProjectOverviewReport = () => {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedProjectCode, setSelectedProjectCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [reportData, setReportData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [projectOptions, setProjectOptions] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const [activeTab, setActiveTab] = useState("projectOoverviewreport");
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const tabs = [
    { id: "projectOoverviewreport", label: "Project Report" },
    { id: "clientproject", label: "Client Project Report" },
    { id: "branchwiseproject", label: "Branchwise Project Report" },
    { id: "teamwiseproject", label: "Teamwise Project Report" }
  ];
  useEffect(() => {
    const getProjectOptions = async () => {
      if (!selectedBranchCode) {
        setProjectOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/project/overview/dropdown?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((project2) => ({
            value: project2.project_code,
            label: `${project2.title} (${project2.project_code})`
          }));
          setProjectOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching project list", error2);
        toast$1.error("Failed to fetch projects");
      } finally {
        setLoading(false);
      }
    };
    getProjectOptions();
  }, [selectedBranchCode, token]);
  const fetchReportData = async () => {
    var _a2, _b2;
    if (!selectedProjectCode) {
      setReportData(null);
      return;
    }
    setLoading(true);
    try {
      let url = `${BASE_URL}/report/projectoverview/read?project_code=${encodeURIComponent(selectedProjectCode)}`;
      if (startDate) {
        const formattedStartDate = formatDate2(startDate);
        url += `&start_date=${formattedStartDate}`;
      }
      if (endDate) {
        const formattedEndDate = formatDate2(endDate);
        url += `&end_date=${formattedEndDate}`;
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setReportData(response.data);
        const totalItems = ((_b2 = (_a2 = response.data.data) == null ? void 0 : _a2.milestones_summary) == null ? void 0 : _b2.reduce((acc, milestone) => {
          var _a3;
          return acc + (((_a3 = milestone.taskparticipantsummary) == null ? void 0 : _a3.length) || 0);
        }, 0)) || 0;
        setTotalItem(totalItems);
      }
    } catch (error2) {
      console.error("Error fetching project overview report", error2);
      toast$1.error("Failed to fetch project overview report");
      setError("Failed to fetch report");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear().toString().slice(-2);
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedProjectCode("");
    setCurrentPage(1);
  };
  const handleProjectChange = (value) => {
    setSelectedProjectCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleOnExport = () => {
    var _a2, _b2, _c2, _d2, _e2, _f2, _g2;
    if (!(reportData == null ? void 0 : reportData.data)) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const projectDetails = [{
      "Project Code": reportData.data.project_code,
      "Title": ((_a2 = reportData.data.project_details) == null ? void 0 : _a2.title) || "N/A",
      "Start Date": ((_b2 = reportData.data.project_details) == null ? void 0 : _b2.start_date) ? new Date(reportData.data.project_details.start_date).toLocaleDateString() : "N/A",
      "End Date": ((_c2 = reportData.data.project_details) == null ? void 0 : _c2.end_date) ? new Date(reportData.data.project_details.end_date).toLocaleDateString() : "N/A",
      "Status": ((_d2 = reportData.data.project_details) == null ? void 0 : _d2.status) || "N/A",
      "Total Task Duration (mins)": ((_e2 = reportData.data.project_details) == null ? void 0 : _e2.total_task_duration) || 0,
      "Overall Working Hours": ((_f2 = reportData.data.project_details) == null ? void 0 : _f2.overall_working_hours) || 0
    }];
    const wsProject = XLSX.utils.json_to_sheet(projectDetails);
    XLSX.utils.book_append_sheet(wb, wsProject, "Project Summary");
    const milestonesData = ((_g2 = reportData.data.milestones_summary) == null ? void 0 : _g2.flatMap((milestone) => {
      var _a3;
      return (_a3 = milestone.taskparticipantsummary) == null ? void 0 : _a3.map((participant) => ({
        "Milestone Code": milestone.milestone_code,
        "Staff ID": participant.staff_id,
        "Staff Name": `${participant.firstname} ${participant.lastname}`,
        "Total Tasks": participant.total_tasks,
        "Draft Tasks": participant.total_draft,
        "In Progress": participant.total_inprogress,
        "Verified/Closed": participant.total_verified_closed,
        "Archived": participant.total_archived,
        "Dropped": participant.total_drop,
        "Total Duration (mins)": participant.total_duration_minutes
      }));
    })) || [];
    const wsMilestones = XLSX.utils.json_to_sheet(milestonesData);
    XLSX.utils.book_append_sheet(wb, wsMilestones, "Milestones Data");
    XLSX.writeFile(wb, "ProjectOverviewReport.xlsx");
  };
  const milestonesThead = () => [
    { data: "Milestone Code" },
    { data: "Staff ID" },
    { data: "Staff Name" },
    { data: "Total Tasks" },
    { data: "Draft" },
    { data: "In Progress" },
    { data: "Verified/Closed" },
    { data: "Archived" },
    { data: "Dropped" },
    { data: "Duration (mins)" }
  ];
  const milestonesTbody = () => {
    var _a2;
    if (!((_a2 = reportData == null ? void 0 : reportData.data) == null ? void 0 : _a2.milestones_summary)) return [];
    return reportData.data.milestones_summary.flatMap((milestone, mIndex) => {
      var _a3;
      return (_a3 = milestone.taskparticipantsummary) == null ? void 0 : _a3.map((participant, pIndex) => ({
        id: `${milestone.milestone_code}-${participant.staff_id}-${pIndex}`,
        data: [
          { data: milestone.milestone_code },
          { data: participant.staff_id },
          { data: `${participant.firstname} ${participant.lastname}` },
          { data: participant.total_tasks },
          { data: participant.total_draft },
          { data: participant.total_inprogress },
          { data: participant.total_verified_closed },
          { data: participant.total_archived },
          { data: participant.total_drop },
          { data: participant.total_duration_minutes }
        ]
      }));
    });
  };
  const formatDuration = (minutes) => {
    if (!minutes) return "0m";
    const hours = Math.floor(minutes / 60);
    const mins = minutes % 60;
    return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
    /* @__PURE__ */ jsx("div", { className: "border-b border-gray-200 dark:border-gray-700 mb-7 mt-7 ml-8", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
      "button",
      {
        onClick: () => setActiveTab(tab.id),
        className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
        children: tab.label
      },
      tab.id
    )) }) }),
    activeTab === "projectOoverviewreport" && /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow ml-2 ", children: [
      /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-3", children: "Project Overview Report" }) }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5 ml-5", children: [
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-40", children: [
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Select Branch",
              className: "w-full",
              isLoading: isStoreLoading
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: projectOptions,
              selectedValue: selectedProjectCode,
              onSelect: handleProjectChange,
              placeholder: "Select Project",
              className: "w-full",
              disabled: !selectedBranchCode,
              isLoading: loading
            }
          ),
          /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
            DatePicker,
            {
              selectsRange: true,
              startDate,
              endDate,
              onChange: handleDateChange,
              placeholderText: "Select date range",
              className: "w-full p-2 border rounded",
              isClearable: true
            }
          ) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex gap-40", children: [
            /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: pageSizeOptions,
                selectedValue: pageSize,
                onSelect: handlePageSizeChange,
                placeholder: "Items per page",
                className: "w-[285px]"
              }
            ),
            /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2.5 dark:bg-gray-800 dark:text-gray-300 py-2.5 w-[285px]",
                disabled: !(reportData == null ? void 0 : reportData.data),
                children: [
                  /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                  !isMobile && "Export Excel"
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: fetchReportData,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5 mr-[48px] ",
              disabled: !selectedProjectCode || loading,
              children: loading ? "Loading..." : "Generate Report"
            }
          )
        ] })
      ] }),
      reportData && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg", children: [
          /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-4", children: "Project Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
                " Project Code"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: reportData.data.project_code })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(SquareKanban, { className: "inline mr-2", size: 16 }),
                " Title"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium text-lg", children: ((_a = reportData.data.project_details) == null ? void 0 : _a.title) || "N/A" })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(CalendarFold, { className: "inline mr-2", size: 16 }),
                " Status"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium text-lg capitalize", children: ((_b = reportData.data.project_details) == null ? void 0 : _b.status) || "N/A" })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(CalendarFold, { className: "inline mr-2", size: 16 }),
                " Start Date"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: ((_c = reportData.data.project_details) == null ? void 0 : _c.start_date) ? new Date(reportData.data.project_details.start_date).toLocaleDateString() : "N/A" })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(CalendarFold, { className: "inline mr-2", size: 16 }),
                " End Date"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: ((_d = reportData.data.project_details) == null ? void 0 : _d.end_date) ? new Date(reportData.data.project_details.end_date).toLocaleDateString() : "N/A" })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(UserCheck, { className: "inline mr-2", size: 16 }),
                " Total Duration"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatDuration((_e = reportData.data.project_details) == null ? void 0 : _e.total_task_duration) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-200 dark:bg-gray-700 p-4 rounded shadow", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-red-700 mb-1", children: [
                /* @__PURE__ */ jsx(UserCheck, { className: "inline mr-2", size: 16 }),
                " Working Hours"
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
                ((_g = (_f = reportData.data.project_details) == null ? void 0 : _f.overall_working_hours) == null ? void 0 : _g.toFixed(2)) || 0,
                " hours"
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold mb-4", children: "Milestones Summary" }),
          (_h = reportData.data.milestones_summary) == null ? void 0 : _h.map((milestone, index) => {
            var _a2;
            return /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg", children: [
              /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-3", children: [
                /* @__PURE__ */ jsxs("h4", { className: "font-medium text-red-700", children: [
                  "Milestone: ",
                  milestone.milestone_code
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "text-sm", children: [
                  /* @__PURE__ */ jsx("span", { className: "font-medium", children: "Total Tasks: " }),
                  milestone.total_tasks,
                  " |",
                  /* @__PURE__ */ jsx("span", { className: "ml-2 font-medium", children: "Duration: " }),
                  formatDuration(milestone.overall_task_duration)
                ] })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-4", children: [
                /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Draft" }),
                  /* @__PURE__ */ jsx("p", { className: "font-medium", children: milestone.total_draft })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "In Progress" }),
                  /* @__PURE__ */ jsx("p", { className: "font-medium", children: milestone.total_inprogress })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Verified/Closed" }),
                  /* @__PURE__ */ jsx("p", { className: "font-medium", children: milestone.total_verified_closed })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-700 p-3 rounded shadow text-center", children: [
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "Archived" }),
                  /* @__PURE__ */ jsx("p", { className: "font-medium", children: milestone.total_archived })
                ] })
              ] }),
              ((_a2 = milestone.taskparticipantsummary) == null ? void 0 : _a2.length) > 0 && /* @__PURE__ */ jsxs(Fragment, { children: [
                /* @__PURE__ */ jsx("h5", { className: "font-medium mb-2", children: "Participants:" }),
                /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
                  DataTable,
                  {
                    thead: milestonesThead,
                    tbody: () => milestone.taskparticipantsummary.map((participant, pIndex) => ({
                      id: `${milestone.milestone_code}-${participant.staff_id}-${pIndex}`,
                      data: [
                        { data: milestone.milestone_code },
                        { data: participant.staff_id },
                        { data: `${participant.firstname} ${participant.lastname}` },
                        { data: participant.total_tasks },
                        { data: participant.total_draft },
                        { data: participant.total_inprogress },
                        { data: participant.total_verified_closed },
                        { data: participant.total_archived },
                        { data: participant.total_drop },
                        { data: participant.total_duration_minutes }
                      ]
                    })),
                    responsive: true,
                    className: "min-w-full"
                  }
                ) })
              ] })
            ] }, index);
          })
        ] }),
        ((_i = reportData.data.milestones_summary) == null ? void 0 : _i.some((m) => {
          var _a2;
          return ((_a2 = m.taskparticipantsummary) == null ? void 0 : _a2.length) > 0;
        })) && /* @__PURE__ */ jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold mb-4", children: "All Participants Summary" }),
          /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
            DataTable,
            {
              thead: milestonesThead,
              tbody: milestonesTbody,
              responsive: true,
              className: "min-w-full"
            }
          ) }),
          /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
            CustomPagination,
            {
              total: totalItem,
              currentPage,
              defaultPageSize: pageSize,
              onChange: handlePageChange,
              paginationLabel: "participants",
              isScroll: true
            }
          ) })
        ] })
      ] }),
      !loading && !reportData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: selectedBranchCode ? !selectedProjectCode ? "Please select a Project to generate report" : "Click 'Generate Report' to view data" : "Please select a Branch to view available projects" })
    ] }),
    activeTab === "clientproject" && /* @__PURE__ */ jsx(ClientSummaryReport, {}),
    activeTab === "branchwiseproject" && /* @__PURE__ */ jsx(BranchSummaryReport, {}),
    activeTab === "teamwiseproject" && /* @__PURE__ */ jsx(TeamProjectReport, {})
  ] }) });
};
const UserSummaryReport = () => {
  var _a, _b, _c;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [userSummaryData, setUserSummaryData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [sortOrder, setSortOrder] = useState("");
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter((branch2) => branch2.value === userBranchCode);
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    if (role !== "team-lead" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "team-lead" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "team-lead" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/users/read?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const fetchUserSummaryData = async () => {
    var _a2, _b2;
    const staffIdToUse = role !== "team-lead" && role !== "superadmin" ? staff_id : selectedStaffId;
    if (!staffIdToUse || !startDate || !endDate) {
      setUserSummaryData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      let url = `${BASE_URL}/report/usersummary/read?staff_id=${encodeURIComponent(staffIdToUse)}&start_date=${formattedStartDate}&end_date=${formattedEndDate}`;
      if (sortOrder) {
        url += `&dec=${sortOrder}`;
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setUserSummaryData(response.data);
        setTotalItem(((_b2 = (_a2 = response.data.data) == null ? void 0 : _a2.projectsummary) == null ? void 0 : _b2.length) || 0);
      }
    } catch (error2) {
      console.error("Error fetching user summary data", error2);
      toast$1.error("Failed to fetch user summary data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
  };
  const handleOnExport = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary) || userSummaryData.data.projectsummary.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = userSummaryData.data.projectsummary.flatMap(
      (project2) => project2.milestones_summary.flatMap(
        (milestone) => milestone.taskparticipantsummary.map((participant) => ({
          project_code: project2.project_code,
          milestone_code: milestone.milestone_code,
          staff_id: participant.staff_id,
          staff_name: `${participant.firstname} ${participant.lastname}`,
          total_tasks: participant.total_tasks,
          total_duration_minutes: participant.total_duration_minutes,
          total_working_hours: (participant.total_duration_minutes / 60).toFixed(2),
          status: project2.status
        }))
      )
    );
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "UserSummaryReport");
    XLSX.writeFile(wb, "UserSummaryReport.xlsx");
  };
  const generateReport = () => {
    fetchUserSummaryData();
  };
  const formatDuration = (minutes) => {
    if (isNaN(minutes)) return "0 minutes";
    const hours = Math.floor(minutes / 60);
    const remainingMinutes = Math.round(minutes % 60);
    if (hours > 0 && remainingMinutes > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""} ${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    }
  };
  const projectSummaryThead = () => [
    { data: "Project Code" },
    { data: "Status" },
    { data: "Total Tasks" },
    { data: "Total Duration" }
  ];
  const projectSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    return userSummaryData.data.projectsummary.map((project2, index) => ({
      id: project2.project_code || index,
      data: [
        { data: project2.project_code },
        // { data: project.status },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${project2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                project2.status.charAt(0).toUpperCase() + project2.status.slice(1)
              ]
            }
          )
        },
        { data: project2.total_tasks },
        { data: formatDuration(project2.total_duration_minutes) }
      ]
    }));
  };
  const milestoneSummaryThead = () => [
    { data: "Milestone Code" },
    { data: "Total Tasks" },
    { data: "In Progress" },
    { data: "Completed" },
    { data: "Total Duration" }
  ];
  const milestoneSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    const allMilestones = userSummaryData.data.projectsummary.flatMap(
      (project2) => project2.milestones_summary.map((milestone) => ({
        ...milestone,
        project_code: project2.project_code
      }))
    );
    return allMilestones.map((milestone, index) => ({
      id: milestone.milestone_code || index,
      data: [
        { data: milestone.milestone_code },
        { data: milestone.total_tasks },
        { data: milestone.total_inprogress },
        { data: milestone.total_verified_closed },
        { data: formatDuration(milestone.overall_task_duration) }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "User Work Summary Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
      /* @__PURE__ */ jsxs("div", { className: `grid grid-cols-1 ${role !== "superadmin" && role !== "team-lead" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`, children: [
        (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: filteredBranchOptions(),
            selectedValue: selectedBranchCode,
            onSelect: handleBranchCodeChange,
            placeholder: "Select Branch",
            className: "w-[245px]",
            isLoading: isStoreLoading,
            disabled: role === "team-lead"
          }
        ),
        (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: staffOptions,
            selectedValue: selectedStaffId,
            onSelect: handleStaffChange,
            placeholder: "Select Staff",
            className: "w-[245px]",
            disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
            isLoading: loading
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "w-[245px]", children: /* @__PURE__ */ jsx(
          DatePicker,
          {
            selectsRange: true,
            startDate,
            endDate,
            onChange: handleDateChange,
            placeholderText: "Select date range",
            className: "w-full p-2 border rounded h-[40px]",
            isClearable: true
          }
        ) }),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[245px]"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center", children: [
        /* @__PURE__ */ jsxs("div", { className: `flex ${role !== "superadmin" && role !== "team-lead" ? "gap-91" : "gap-19"}`, children: [
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: toggleSortOrder,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect px-18 h-[40px] rounded-sm",
              children: [
                sortOrder === "desc" ? /* @__PURE__ */ jsx(SortDesc, { className: "mr-1" }) : /* @__PURE__ */ jsx(SortAsc, { className: "mr-1" }),
                "Sort ",
                sortOrder === "desc" ? "Desc" : "Asc"
              ]
            }
          ),
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
              disabled: !((_b = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _b.projectsummary),
              children: [
                /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                !isMobile && "Export Excel"
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: generateReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            disabled: (role !== "team-lead" && role !== "superadmin" ? !startDate || !endDate : !selectedStaffId || !startDate || !endDate) || loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        )
      ] })
    ] }),
    userSummaryData && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-2", children: "User Summary" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(UserCheck, { className: "mr-1", size: 16 }),
            " Staff ID"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: userSummaryData.data.staff_id })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Clock, { className: "mr-1", size: 16 }),
            " Date Range"
          ] }),
          /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
            new Date(userSummaryData.data.start_date).toLocaleDateString(),
            " - ",
            new Date(userSummaryData.data.end_date).toLocaleDateString()
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Hourglass, { className: "mr-1", size: 16 }),
            " Total Working Hours"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatDuration(userSummaryData.data.total_duration_minutes) })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Bookmark, { className: "mr-1", size: 16 }),
            " Projects Worked"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: userSummaryData.data.total_projects_worked })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(List, { className: "mr-1", size: 16 }),
            " Total Tasks"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: userSummaryData.data.total_tasks })
        ] })
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    ((_c = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _c.projectsummary) && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(Bookmark, { className: "mr-2", size: 20 }),
          " Project Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: projectSummaryThead,
            tbody: projectSummaryTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(List, { className: "mr-2", size: 20 }),
          " Milestone Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: milestoneSummaryThead,
            tbody: milestoneSummaryTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "projects",
          isScroll: true
        }
      ) })
    ] }),
    !loading && !userSummaryData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: role !== "team-lead" && role !== "superadmin" ? !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view your work summary" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !selectedStaffId ? "Please select Staff and date range" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !selectedStaffId ? "Please select Staff" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const BranchPaymentReport = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [paymentData, setPaymentData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [showDemoData, setShowDemoData] = useState(false);
  const [activeTab, setActiveTab] = useState("branchpay");
  const demoData = [
    {
      team_id: "BRCH-01/TEAM/01",
      team_name: "Archetech Team",
      branchcode: "BRANCH-01",
      team_lead_id: "BRANCH/01/02",
      team_lead_name: "Keerthana",
      total_project_count: "3",
      total_project_amount: "50000",
      total_paid_amount: "15000",
      total_pending_amount: "35000",
      total_project_draft: "1",
      total_project_planning: "1",
      total_project_inprocess: "1",
      total_project_active: "1",
      total_project_completed: "0"
    }
  ];
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  const isAllZeros = (data) => {
    if (!data || !data.data || data.data.length === 0) return true;
    return data.data.every(
      (team) => team.total_project_amount === "0" && team.total_paid_amount === "0" && team.total_pending_amount === "0" && team.total_project_count === "0"
    );
  };
  const fetchPaymentData = async () => {
    if (!selectedBranchCode || !startDate || !endDate) {
      setPaymentData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      const url = `${BASE_URL}/teamview/report/read?branchcode=${selectedBranchCode}&startdate=${formattedStartDate}&enddate=${formattedEndDate}&page=${currentPage}&limit=${pageSize}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setShowDemoData(isAllZeros(response.data));
        setPaymentData(response.data);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching payment data", error2);
      toast$1.error("Failed to fetch payment data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const getDisplayData = () => {
    if (showDemoData) {
      return demoData;
    }
    return (paymentData == null ? void 0 : paymentData.data) || [];
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateRangeChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const clearDateRange = () => {
    setStartDate(null);
    setEndDate(null);
  };
  const handleOnExport = () => {
    const dataToExport = getDisplayData();
    if (dataToExport.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const exportData = dataToExport.map((team) => ({
      "Team Name": team.team_name,
      "Team Lead": team.team_lead_name,
      "Total Projects": team.total_project_count,
      "Total Amount": formatCurrency(team.total_project_amount),
      "Paid Amount": formatCurrency(team.total_paid_amount),
      "Pending Amount": formatCurrency(team.total_pending_amount),
      "Draft Projects": team.total_project_draft,
      "Planning Projects": team.total_project_planning,
      "In Process Projects": team.total_project_inprocess,
      "Active Projects": team.total_project_active,
      "Completed Projects": team.total_project_completed
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(exportData);
    XLSX.utils.book_append_sheet(wb, ws, "BranchPaymentReport");
    XLSX.writeFile(wb, "BranchPaymentReport.xlsx");
  };
  const generateReport = () => {
    fetchPaymentData();
  };
  const formatCurrency = (amount) => {
    if (!amount || isNaN(amount)) return "0";
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const formatNumber = (num) => {
    if (!num || isNaN(num)) return "0";
    return parseInt(num).toLocaleString("en-IN");
  };
  const calculateBranchTotals = () => {
    const displayData = getDisplayData();
    if (displayData.length === 0) return null;
    return {
      totalProjects: displayData.reduce(
        (sum, team) => sum + parseInt(team.total_project_count || "0"),
        0
      ),
      totalAmount: displayData.reduce(
        (sum, team) => sum + parseInt(team.total_project_amount || "0"),
        0
      ),
      totalPaid: displayData.reduce(
        (sum, team) => sum + parseInt(team.total_paid_amount || "0"),
        0
      ),
      totalPending: displayData.reduce(
        (sum, team) => sum + parseInt(team.total_pending_amount || "0"),
        0
      )
    };
  };
  const branchTotals = calculateBranchTotals();
  const paymentThead = () => [
    { data: "Team Name" },
    { data: "Team Lead" },
    { data: "Total Projects" },
    { data: "Total Amount" },
    { data: "Paid Amount" },
    { data: "Pending Amount" }
  ];
  const paymentTbody = () => {
    const displayData = getDisplayData();
    if (displayData.length === 0) return [];
    return displayData.map((team, index) => ({
      id: team.team_id || index,
      data: [
        { data: team.team_name },
        { data: team.team_lead_name },
        { data: formatNumber(team.total_project_count) },
        { data: formatCurrency(team.total_project_amount) },
        { data: formatCurrency(team.total_paid_amount) },
        { data: formatCurrency(team.total_pending_amount) }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "Branch Payment Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: filteredBranchOptions(),
            selectedValue: selectedBranchCode,
            onSelect: handleBranchCodeChange,
            placeholder: "Select Branch",
            className: "w-[245px]",
            isLoading: isStoreLoading,
            disabled: role === "team-lead"
          }
        ),
        /* @__PURE__ */ jsxs("div", { className: "w-[245px] relative", children: [
          /* @__PURE__ */ jsx(
            DatePicker,
            {
              selectsRange: true,
              startDate,
              endDate,
              onChange: handleDateRangeChange,
              placeholderText: "Select date range",
              className: "w-full p-2 border rounded h-[40px]",
              isClearable: true
            }
          ),
          (startDate || endDate) && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: clearDateRange,
              className: "absolute right-2 top-2 text-gray-500 hover:text-gray-700",
              children: /* @__PURE__ */ jsx(X, { size: 16 })
            }
          )
        ] }),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[245px]"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center", children: [
        /* @__PURE__ */ jsx("div", { className: "flex gap-19", children: /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
            disabled: !(paymentData == null ? void 0 : paymentData.data) && !showDemoData,
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              !isMobile && "Export Excel"
            ]
          }
        ) }),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: generateReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            disabled: (role !== "team-lead" && role !== "superadmin" ? false : !selectedBranchCode || !startDate || !endDate) || loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    ((paymentData == null ? void 0 : paymentData.data) || showDemoData) && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-[var(--color-primary)] font-semibold mb-2", children: "Branch Financial Summary" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Building, { className: "mr-1", size: 16 }),
              " Branch"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: selectedBranchCode })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(DollarSign, { className: "mr-1", size: 16 }),
              " Total Amount"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(branchTotals == null ? void 0 : branchTotals.totalAmount) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(CreditCard, { className: "mr-1", size: 16 }),
              " Total Paid"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(branchTotals == null ? void 0 : branchTotals.totalPaid) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(PieChart, { className: "mr-1", size: 16 }),
              " Total Pending"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(branchTotals == null ? void 0 : branchTotals.totalPending) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Users, { className: "mr-1", size: 16 }),
              " Total Projects"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatNumber(branchTotals == null ? void 0 : branchTotals.totalProjects) })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Calendar, { className: "mr-1", size: 16 }),
              " Date Range"
            ] }),
            /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
              startDate ? new Date(startDate).toLocaleDateString() : "N/A",
              " ",
              "-",
              " ",
              endDate ? new Date(endDate).toLocaleDateString() : "N/A"
            ] })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(CreditCard, { className: "mr-2", size: 20 }),
          " Team Payment Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: paymentThead,
            tbody: paymentTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "records",
          isScroll: true
        }
      ) })
    ] }),
    !loading && !paymentData && !showDemoData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: role !== "team-lead" && role !== "superadmin" ? !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view payment summary" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const TeamPaymentReport = () => {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedTeamId, setSelectedTeamId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [paymentData, setPaymentData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [teamOptions, setTeamOptions] = useState([]);
  const [showDemoData, setShowDemoData] = useState(false);
  const [activeTab, setActiveTab] = useState("branchpay");
  const demoData = {
    team_id: "BRCH-01/TEAM/01",
    team_name: "ArchetechTeam",
    branchcode: "BRANCH-01",
    team_lead_id: "BRANCH/01/02",
    team_lead_name: "Keerthana",
    total_project_count: "4",
    total_project_amount: "50000",
    total_paid_amount: "15000",
    total_pending_amount: "35000",
    total_project_draft: "1",
    total_project_planning: "1",
    total_project_inprocess: "1",
    total_project_active: "1",
    total_project_lead_review: "0",
    total_project_completed: "0",
    total_project_revised: "0",
    total_project_client_review: "0",
    total_project_drop: "0",
    total_milestone_count: "8",
    total_milestone_draft: "2",
    total_milestone_archived: "1",
    total_milestone_inprocess: "3",
    total_milestone_verified: "2",
    total_milestone_drop: "0",
    total_task_count: "24",
    total_task_draft: "5",
    total_task_archived: "3",
    total_task_inprocess: "10",
    total_task_verified_closed: "6",
    total_task_drop: "0"
  };
  const tabs = [
    { id: "branchpay", label: "Branchwise Payment Report" },
    { id: "teampay", label: "Teamwise Payment Report" }
  ];
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    const fetchTeams = async () => {
      if (!selectedBranchCode) {
        setTeamOptions([]);
        return;
      }
      try {
        const url = `${BASE_URL}/teams/read?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((team) => ({
            value: team.team_id,
            label: team.team_name
          }));
          setTeamOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching teams", error2);
        toast$1.error("Failed to fetch teams");
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      fetchTeams();
    }
  }, [selectedBranchCode, token, role]);
  const isAllZeros = (data) => {
    if (!data || !data.data || data.data.length === 0) return true;
    const teamData = data.data[0];
    return teamData.total_project_amount === "0" && teamData.total_paid_amount === "0" && teamData.total_pending_amount === "0" && teamData.total_project_count === "0";
  };
  const fetchPaymentData = async () => {
    if (!selectedTeamId || !startDate || !endDate) {
      setPaymentData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      const url = `${BASE_URL}/teamview/report/read?startdate=${formattedStartDate}&enddate=${formattedEndDate}&teamid=${encodeURIComponent(selectedTeamId)}&page=${currentPage}&limit=${pageSize}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setShowDemoData(isAllZeros(response.data));
        setPaymentData(response.data);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching payment data", error2);
      toast$1.error("Failed to fetch payment data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const getDisplayData = () => {
    if (showDemoData) {
      return [demoData];
    }
    return (paymentData == null ? void 0 : paymentData.data) || [];
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedTeamId("");
    setCurrentPage(1);
  };
  const handleTeamChange = (value) => {
    setSelectedTeamId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateRangeChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const clearDateRange = () => {
    setStartDate(null);
    setEndDate(null);
  };
  const handleOnExport = () => {
    const dataToExport = getDisplayData();
    if (dataToExport.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const exportData = dataToExport.map((team) => ({
      "Team Name": team.team_name,
      "Team Lead": team.team_lead_name,
      "Total Projects": team.total_project_count,
      "Total Amount": formatCurrency(team.total_project_amount),
      "Paid Amount": formatCurrency(team.total_paid_amount),
      "Pending Amount": formatCurrency(team.total_pending_amount),
      "Draft Projects": team.total_project_draft,
      "Planning Projects": team.total_project_planning,
      "In Process Projects": team.total_project_inprocess,
      "Active Projects": team.total_project_active,
      "Completed Projects": team.total_project_completed
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(exportData);
    XLSX.utils.book_append_sheet(wb, ws, "TeamPaymentReport");
    XLSX.writeFile(wb, "TeamPaymentReport.xlsx");
  };
  const generateReport = () => {
    fetchPaymentData();
  };
  const formatCurrency = (amount) => {
    if (!amount || isNaN(amount)) return "0";
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  };
  const formatNumber = (num) => {
    if (!num || isNaN(num)) return "0";
    return parseInt(num).toLocaleString("en-IN");
  };
  const paymentThead = () => [
    { data: "Team Name" },
    { data: "Team Lead" },
    { data: "Total Projects" },
    { data: "Total Amount" },
    { data: "Paid Amount" },
    { data: "Pending Amount" }
  ];
  const paymentTbody = () => {
    const displayData = getDisplayData();
    if (displayData.length === 0) return [];
    return displayData.map((team, index) => ({
      id: team.team_id || index,
      data: [
        { data: team.team_name },
        { data: team.team_lead_name },
        { data: formatNumber(team.total_project_count) },
        { data: formatCurrency(team.total_project_amount) },
        { data: formatCurrency(team.total_paid_amount) },
        { data: formatCurrency(team.total_pending_amount) }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
    /* @__PURE__ */ jsx("div", { className: "border-b border-gray-200 dark:border-gray-700 mt-7 mb-7 ml-8", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
      "button",
      {
        onClick: () => setActiveTab(tab.id),
        className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
        children: tab.label
      },
      tab.id
    )) }) }),
    activeTab === "teampay" && /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "Team Payment Report" }),
        showDemoData && /* @__PURE__ */ jsx("div", { className: "bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm", children: "Showing demo data" })
      ] }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: `grid grid-cols-1 ${role !== "superadmin" && role !== "team-lead" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
            children: [
              (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: filteredBranchOptions(),
                  selectedValue: selectedBranchCode,
                  onSelect: handleBranchCodeChange,
                  placeholder: "Select Branch",
                  className: "w-[245px]",
                  isLoading: isStoreLoading,
                  disabled: role === "team-lead"
                }
              ),
              (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: teamOptions,
                  selectedValue: selectedTeamId,
                  onSelect: handleTeamChange,
                  placeholder: "Select Team",
                  className: "w-[245px]",
                  disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
                  isLoading: loading
                }
              ),
              /* @__PURE__ */ jsxs("div", { className: "w-[245px] relative", children: [
                /* @__PURE__ */ jsx(
                  DatePicker,
                  {
                    selectsRange: true,
                    startDate,
                    endDate,
                    onChange: handleDateRangeChange,
                    placeholderText: "Select date range",
                    className: "w-full p-2 border rounded h-[40px]",
                    isClearable: true
                  }
                ),
                (startDate || endDate) && /* @__PURE__ */ jsx(
                  "button",
                  {
                    onClick: clearDateRange,
                    className: "absolute right-2 top-2 text-gray-500 hover:text-gray-700",
                    children: /* @__PURE__ */ jsx(X, { size: 16 })
                  }
                )
              ] }),
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-[245px]"
                }
              )
            ]
          }
        ),
        /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center", children: [
          /* @__PURE__ */ jsx(
            "div",
            {
              className: `flex ${role !== "superadmin" && role !== "team-lead" ? "gap-91" : "gap-19"}`,
              children: /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
                  disabled: !(paymentData == null ? void 0 : paymentData.data) && !showDemoData,
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              )
            }
          ),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: generateReport,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              disabled: (role !== "team-lead" && role !== "superadmin" ? false : !selectedTeamId || !startDate || !endDate) || loading,
              children: loading ? "Loading..." : "Generate Report"
            }
          )
        ] })
      ] }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
      ((paymentData == null ? void 0 : paymentData.data) || showDemoData) && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
          /* @__PURE__ */ jsx("h3", { className: "text-lg text-[var(--color-primary)] font-semibold mb-2", children: "Financial Summary" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
                /* @__PURE__ */ jsx(Users, { className: "mr-1", size: 16 }),
                " Team Name"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: ((_b = getDisplayData()[0]) == null ? void 0 : _b.team_name) || "N/A" })
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
                /* @__PURE__ */ jsx(DollarSign, { className: "mr-1", size: 16 }),
                " Total Amount"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(
                (_c = getDisplayData()[0]) == null ? void 0 : _c.total_project_amount
              ) })
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
                /* @__PURE__ */ jsx(CreditCard, { className: "mr-1", size: 16 }),
                " Paid Amount"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency((_d = getDisplayData()[0]) == null ? void 0 : _d.total_paid_amount) })
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
                /* @__PURE__ */ jsx(PieChart, { className: "mr-1", size: 16 }),
                " Pending Amount"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatCurrency(
                (_e = getDisplayData()[0]) == null ? void 0 : _e.total_pending_amount
              ) })
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
                /* @__PURE__ */ jsx(Calendar, { className: "mr-1", size: 16 }),
                " Date Range"
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
                startDate ? new Date(startDate).toLocaleDateString() : "N/A",
                " ",
                "-",
                " ",
                endDate ? new Date(endDate).toLocaleDateString() : "N/A"
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
          /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
            /* @__PURE__ */ jsx(CreditCard, { className: "mr-2", size: 20 }),
            " Payment Summary"
          ] }),
          /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
            DataTable,
            {
              thead: paymentThead,
              tbody: paymentTbody,
              responsive: true,
              className: "min-w-full"
            }
          ) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
          /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
            /* @__PURE__ */ jsx(PieChart, { className: "mr-2", size: 20 }),
            " Project Status Summary"
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "p-4 bg-white dark:bg-gray-700 rounded-lg shadow", children: [
              /* @__PURE__ */ jsx("h4", { className: "text-sm font-medium text-gray-500 dark:text-gray-300 mb-2", children: "Draft Projects" }),
              /* @__PURE__ */ jsx("p", { className: "text-2xl font-semibold", children: formatNumber((_f = getDisplayData()[0]) == null ? void 0 : _f.total_project_draft) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "p-4 bg-white dark:bg-gray-700 rounded-lg shadow", children: [
              /* @__PURE__ */ jsx("h4", { className: "text-sm font-medium text-gray-500 dark:text-gray-300 mb-2", children: "Planning Projects" }),
              /* @__PURE__ */ jsx("p", { className: "text-2xl font-semibold", children: formatNumber(
                (_g = getDisplayData()[0]) == null ? void 0 : _g.total_project_planning
              ) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "p-4 bg-white dark:bg-gray-700 rounded-lg shadow", children: [
              /* @__PURE__ */ jsx("h4", { className: "text-sm font-medium text-gray-500 dark:text-gray-300 mb-2", children: "In Process Projects" }),
              /* @__PURE__ */ jsx("p", { className: "text-2xl font-semibold", children: formatNumber(
                (_h = getDisplayData()[0]) == null ? void 0 : _h.total_project_inprocess
              ) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "p-4 bg-white dark:bg-gray-700 rounded-lg shadow", children: [
              /* @__PURE__ */ jsx("h4", { className: "text-sm font-medium text-gray-500 dark:text-gray-300 mb-2", children: "Active Projects" }),
              /* @__PURE__ */ jsx("p", { className: "text-2xl font-semibold", children: formatNumber((_i = getDisplayData()[0]) == null ? void 0 : _i.total_project_active) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "p-4 bg-white dark:bg-gray-700 rounded-lg shadow", children: [
              /* @__PURE__ */ jsx("h4", { className: "text-sm font-medium text-gray-500 dark:text-gray-300 mb-2", children: "Completed Projects" }),
              /* @__PURE__ */ jsx("p", { className: "text-2xl font-semibold", children: formatNumber(
                (_j = getDisplayData()[0]) == null ? void 0 : _j.total_project_completed
              ) })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "records",
            isScroll: true
          }
        ) })
      ] }),
      !loading && !paymentData && !showDemoData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: role !== "team-lead" && role !== "superadmin" ? !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view payment summary" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !selectedTeamId ? "Please select Team and date range" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !selectedTeamId ? "Please select Team" : !startDate || !endDate ? "Please select date range" : "Click 'Generate Report' to view data" })
    ] }),
    activeTab === "branchpay" && /* @__PURE__ */ jsx(BranchPaymentReport, {})
  ] }) });
};
const CampaignReport = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [loading, setLoading] = useState(false);
  const [reportData, setReportData] = useState([]);
  const [branchOptions, setBranchOptions] = useState([]);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [campaignOptions, setCampaignOptions] = useState([]);
  const [selectedCampaign, setSelectedCampaign] = useState("");
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const staticBranchCode = useAuthStore((state) => state.branchcode);
  const [chartData, setChartData] = useState({
    title: "Campaign Performance",
    labels: [],
    datasets: [
      {
        label: "Conversion Rate (%)",
        data: [],
        backgroundColor: "rgba(34, 197, 94, 0.7)"
      }
    ]
  });
  useEffect(() => {
    if (userRole === "superadmin") {
      const fetchBranches = async () => {
        try {
          const response = await axios.get(
            `${BASE_URL}/branch/dropdown`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          if (response.data && response.data.data) {
            setBranchOptions(
              response.data.data.map((branch2) => ({
                value: branch2.branchcode,
                label: `${branch2.branchcode} - ${branch2.name}`
              }))
            );
          }
        } catch (error) {
          console.error("Error fetching branches", error);
          toast$1.error("Failed to fetch branches");
        }
      };
      fetchBranches();
    }
  }, [token, userRole]);
  useEffect(() => {
    const fetchCampaigns = async () => {
      const branchCodeToUse = userRole === "superadmin" ? selectedBranchCode : staticBranchCode;
      if (!branchCodeToUse) {
        setCampaignOptions([]);
        return;
      }
      setLoading(true);
      try {
        const response = await axios.get(
          `${BASE_URL}/campaign/overview/dropdown?branchcode=${branchCodeToUse}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        if (response.data && response.data.data) {
          const options = response.data.data.map((campaign) => ({
            value: campaign.campaign_code,
            label: `${campaign.campaignname} (${campaign.campaign_code})`
          }));
          setCampaignOptions(options);
        }
      } catch (error) {
        console.error("Error fetching campaigns", error);
        toast$1.error("Failed to fetch campaigns");
      } finally {
        setLoading(false);
      }
    };
    fetchCampaigns();
  }, [selectedBranchCode, staticBranchCode, token, userRole]);
  useEffect(() => {
    const fetchCampaignReport = async () => {
      const branchCodeToUse = userRole === "superadmin" ? selectedBranchCode : staticBranchCode;
      if (!branchCodeToUse) {
        setReportData([]);
        return;
      }
      setLoading(true);
      try {
        let url = `${BASE_URL}/campaign/report/read/profile?branchcode=${branchCodeToUse}`;
        if (selectedCampaign) {
          url += `&campaign_code=${selectedCampaign}`;
        }
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          setReportData(response.data.data);
          const labels = response.data.data.map(
            (campaign) => campaign.campaignname
          );
          const conversionRates = response.data.data.map(
            (campaign) => parseFloat(campaign.conversion_rate) || 0
          );
          setChartData({
            title: "Campaign Conversion Rates",
            labels,
            datasets: [
              {
                label: "Conversion Rate (%)",
                data: conversionRates,
                backgroundColor: "rgba(34, 197, 94, 0.7)"
              }
            ]
          });
        }
      } catch (error) {
        console.error("Error fetching campaign report", error);
        toast$1.error("Failed to fetch campaign report");
      } finally {
        setLoading(false);
      }
    };
    fetchCampaignReport();
  }, [selectedBranchCode, staticBranchCode, selectedCampaign, token, userRole]);
  const handleBranchChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedCampaign("");
  };
  const handleCampaignChange = (value) => {
    setSelectedCampaign(value);
  };
  const handleOnExport = () => {
    if (!reportData || reportData.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(
      reportData.map((campaign) => ({
        "Branch Code": campaign.branchcode,
        "Campaign Code": campaign.campaign_code,
        "Campaign Name": campaign.campaignname,
        "Total Leads": campaign.total_leads,
        "Leads Assigned": campaign.leads_assigned,
        "Total Followups": campaign.total_followups,
        "Active Followups": campaign.active_followups,
        "Goal Leads": campaign.goallead,
        "Conversion Rate (%)": campaign.conversion_rate
      }))
    );
    XLSX.utils.book_append_sheet(wb, ws, "Campaign Report");
    XLSX.writeFile(wb, "CampaignReport.xlsx");
  };
  const thead = () => [
    { data: "Branch Code" },
    { data: "Campaign Code" },
    { data: "Campaign Name" },
    { data: "Total Leads" },
    { data: "Leads Assigned" },
    { data: "Conversion Rate" },
    { data: "Goal Leads" }
  ];
  const tbody = () => {
    return reportData.map((campaign) => ({
      id: campaign.campaign_code,
      data: [
        { data: campaign.branchcode },
        { data: campaign.campaign_code },
        { data: campaign.campaignname },
        { data: campaign.total_leads },
        { data: campaign.leads_assigned },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${parseFloat(campaign.conversion_rate) >= 50 ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${parseFloat(campaign.conversion_rate) >= 50 ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                campaign.conversion_rate,
                " %"
              ]
            }
          )
        },
        { data: campaign.goallead }
      ]
    }));
  };
  return /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Campaign Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        userRole === "superadmin" && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: branchOptions,
            selectedValue: selectedBranchCode,
            onSelect: handleBranchChange,
            placeholder: "Select Branch",
            className: "w-[250px]",
            disabled: loading
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: campaignOptions,
            selectedValue: selectedCampaign,
            onSelect: handleCampaignChange,
            placeholder: "Select Campaign",
            className: "w-[250px]",
            disabled: loading || userRole === "superadmin" && !selectedBranchCode
          }
        )
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: handleOnExport,
          className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
          disabled: loading || reportData.length === 0,
          children: [
            /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
            !isMobile && "Export Excel"
          ]
        }
      ) })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    !loading && reportData.length > 0 && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "md:flex text-gray-700 mb-5 justify-between gap-3", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-white w-[250px] h-[230px] flex flex-col justify-items-start justify-evenly rounded-lg shadow-lg ps-8", children: [
          /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("h1", { className: "text-bold font-bold text-xl text-gray-700", children: "Total Client & Leads" }) }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-6", children: [
            /* @__PURE__ */ jsx("div", { className: "bg-green-400 w-[40px] h-[40px] rounded-full p-1", children: /* @__PURE__ */ jsx(
              FaHandsHelping,
              {
                className: "text-gray-50 text-center",
                size: 28
              }
            ) }),
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 font-xl mt-2", children: "2 | 50" })
          ] }),
          /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("p", { className: "font-light text-sm", children: "Branch Detail" }) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-white w-[250px] h-[230px] flex flex-col justify-items-start justify-evenly rounded-lg shadow-lg ps-8", children: [
          /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("h1", { className: "text-bold font-bold text-xl text-gray-700", children: "Lead Conversion Rate" }) }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-6", children: [
            /* @__PURE__ */ jsx("div", { className: "bg-indigo-500 w-[40px] h-[40px] rounded-full p-1", children: /* @__PURE__ */ jsx(
              CgArrowsExchange,
              {
                className: "text-gray-50 text-center",
                size: 28
              }
            ) }),
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 font-xl mt-2", children: "2%" })
          ] }),
          /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("p", { className: "font-light text-sm", children: "Leads Detail" }) })
        ] }),
        /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx(
          DynamicBarChart,
          {
            data: chartData,
            theme: "light",
            className: "h-[250px]  w-[550px]"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
        DataTable,
        {
          thead,
          tbody,
          responsive: true,
          className: "min-w-full"
        }
      ) })
    ] }),
    !loading && reportData.length === 0 && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: userRole === "superadmin" && !selectedBranchCode ? "Please select a branch to view campaign reports" : "No campaign data available for the selected filters" })
  ] }) });
};
const Report = () => {
  const [activeTab, setActiveTab] = useState("leadAnalysis");
  const [showEditModal, setShowEditModal] = useState(false);
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const tabs = [{
    id: "leadAnalysis",
    label: "Lead Analysis"
  }, {
    id: "projectwisereport",
    label: "Project Summary"
  }, {
    id: "paymentinsight",
    label: "Payment Summary"
  }, {
    id: "employeereport",
    label: "Employee Summary"
  }];
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsx("div", {
      className: "dark:border-gray-700",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `font-medium text-sm  ${activeTab === tab.id ? "text-gray-200 bg-red-700 w-[180px] h-[40px] rounded-sm" : "border-transparent text-gray-700 hover:text-red-700 bg-gray-200 w-[180px] h-[40px] rounded-sm"}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "leadAnalysis" && /* @__PURE__ */ jsx(Fragment, {
        children: /* @__PURE__ */ jsx(CampaignReport, {})
      }), activeTab == "EmployeeReport" && /* @__PURE__ */ jsx(TimeSheetReport, {}), activeTab === "projectwisereport" && /* @__PURE__ */ jsx(ProjectOverviewReport, {}), activeTab === "employeereport" && /* @__PURE__ */ jsx(UserSummaryReport, {}), activeTab === "paymentinsight" && /* @__PURE__ */ jsx(TeamPaymentReport, {})]
    })]
  });
};
const Report$1 = withComponentProps(Report);
const route12 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Report$1
}, Symbol.toStringTag, { value: "Module" }));
function UpdateAttendanceForm() {
  const [loading, setLoading] = useState(false);
  return /* @__PURE__ */ jsxs("div", { className: "text-medium dark:bg-gray-800 dark:text-gray-200", children: [
    /* @__PURE__ */ jsxs("div", { className: "text-medium sm:flex gap-5", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col py-2 text-left mt-1", children: [
        /* @__PURE__ */ jsx("label", { htmlFor: "", className: "text-sm text-gray-700 dark:text-gray-300 mb-3", children: "Reviewed By" }),
        /* @__PURE__ */ jsx(
          "input",
          {
            className: "max-w-[400px] w-[300px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
            type: "text"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col py-2 text-left mt-1", children: [
        /* @__PURE__ */ jsx("label", { htmlFor: "", className: "text-sm text-gray-700 dark:text-gray-300 mb-3", children: "status" }),
        /* @__PURE__ */ jsx(
          "input",
          {
            className: "max-w-[400px] w-[300px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
            type: "text"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx("div", { className: "text-medium sm:flex gap-5", children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col py-2 text-left mt-1", children: [
      /* @__PURE__ */ jsx("label", { htmlFor: "", className: "text-sm text-gray-700 dark:text-gray-300 mb-3", children: "Notes/Remarks" }),
      /* @__PURE__ */ jsx(
        "textarea",
        {
          className: " w-[625px] bg-blue-200/25 dark:bg-gray-700 text-sm px-2 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded"
        }
      )
    ] }) }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 mt-6", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)]  text-white rounded hover:bg-gradient-to-b hover-effect transition",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader, {}) : "Create Branch"
        }
      )
    ] })
  ] });
}
const AttendanceReport = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [reportData, setReportData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [activeTab, setActiveTab] = useState("department");
  const [showModal, setShowModal] = useState(false);
  const [selectedEmployee, setSelectedEmployee] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const staticBranchCode = useAuthStore((state) => state.branchcode);
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const filterOptions = [
    { value: "all", label: "All Branches" },
    ...branchCodeOptions.map((branch2) => ({
      value: branch2.value,
      label: branch2.label
    }))
  ];
  const tabs = [
    { id: "department", label: "Department View" },
    { id: "team", label: "Team View" }
  ];
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const fetchAttendanceReport = async () => {
    setLoading(true);
    try {
      let url = `${BASE_URL}/report/attendancesummary/read`;
      const params = new URLSearchParams();
      if (userRole === "superadmin" && selectedFilter && selectedFilter !== "all") {
        params.append("branchcode", selectedFilter);
      } else if (userRole !== "superadmin") {
        params.append("branchcode", staticBranchCode);
      }
      if (startDate) {
        params.append("startdate", formatDate2(startDate));
      }
      if (endDate) {
        params.append("enddate", formatDate2(endDate));
      }
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        if (response.data.data && Array.isArray(response.data.data)) {
          setReportData(response.data);
          setSheetData(response.data.data || []);
        } else {
          const singleBranchResponse = {
            data: [response.data.data || response.data],
            message: response.data.message
          };
          setReportData(singleBranchResponse);
          setSheetData([response.data.data || response.data]);
        }
      }
    } catch (error) {
      console.error("Error fetching attendance report", error);
      toast$1.error("Failed to fetch attendance report");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  useEffect(() => {
    fetchAttendanceReport();
  }, [selectedFilter, startDate, endDate]);
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleOnExport = () => {
    if (!reportData) {
      toast$1.error("No data to export");
      return;
    }
    const wb = XLSX.utils.book_new();
    let exportData = [];
    const branches = Array.isArray(reportData.data) ? reportData.data : [reportData.data];
    exportData = branches.flatMap((branch2) => {
      var _a, _b, _c, _d, _e, _f, _g;
      if (!branch2) return [];
      const branchRow = {
        "Branch Code": branch2.branchcode,
        "Branch Name": branch2.branch_name,
        "Total Employees": branch2.total_employees,
        "Active Employees": branch2.total_active_employees,
        "Present": ((_a = branch2.attendance_summary) == null ? void 0 : _a.present_count) || 0,
        "Absent": ((_b = branch2.attendance_summary) == null ? void 0 : _b.absent_count) || 0,
        "On Leave": ((_c = branch2.attendance_summary) == null ? void 0 : _c.leave_count) || 0,
        "Approved Leave": ((_d = branch2.attendance_summary) == null ? void 0 : _d.approved_leave_count) || 0,
        "Half Day Leave": ((_e = branch2.attendance_summary) == null ? void 0 : _e.half_day_leave_count) || 0,
        "Hourly Leave": ((_f = branch2.attendance_summary) == null ? void 0 : _f.hourly_leave_count) || 0,
        "Waiting for Login": ((_g = branch2.attendance_summary) == null ? void 0 : _g.waitingforlogin_count) || 0
      };
      const departmentRows = (branch2.department_counts || []).map((dept) => ({
        ...branchRow,
        "Department": dept.department || "N/A",
        "Dept Employees": dept.employee_count,
        "Dept Present": dept.present_count,
        "Dept Absent": dept.absent_count,
        "Dept On Leave": dept.leave_count,
        "Dept Approved Leave": dept.approved_leave_count,
        "Dept Half Day Leave": dept.half_day_leave_count,
        "Dept Hourly Leave": dept.hourly_leave_count,
        "Dept Waiting for Login": dept.waitingforlogin_count
      }));
      const teamRows = (branch2.team_counts || []).map((team) => ({
        ...branchRow,
        "Team ID": team.team_id,
        "Team Name": team.team_name,
        "Team Lead": team.teamleadname,
        "Team Employees": team.employee_count,
        "Team Present": team.present_count,
        "Team Absent": team.absent_count,
        "Team On Leave": team.leave_count,
        "Team Approved Leave": team.approved_leave_count,
        "Team Half Day Leave": team.half_day_leave_count,
        "Team Hourly Leave": team.hourly_leave_count,
        "Team Waiting for Login": team.waitingforlogin_count
      }));
      return [...departmentRows, ...teamRows];
    });
    const ws = XLSX.utils.json_to_sheet(exportData);
    XLSX.utils.book_append_sheet(wb, ws, "Attendance Summary");
    XLSX.writeFile(wb, "AttendanceReport.xlsx");
  };
  const calculateTotals = () => {
    if (!reportData) return null;
    const branches = Array.isArray(reportData.data) ? reportData.data : [reportData.data];
    return branches.reduce((acc, branch2) => {
      var _a, _b, _c, _d, _e, _f, _g;
      if (!branch2) return acc;
      return {
        totalEmployees: acc.totalEmployees + (branch2.total_employees || 0),
        activeEmployees: acc.activeEmployees + (branch2.total_active_employees || 0),
        present: acc.present + (((_a = branch2.attendance_summary) == null ? void 0 : _a.present_count) || 0),
        absent: acc.absent + (((_b = branch2.attendance_summary) == null ? void 0 : _b.absent_count) || 0),
        leave: acc.leave + (((_c = branch2.attendance_summary) == null ? void 0 : _c.leave_count) || 0),
        approvedLeave: acc.approvedLeave + (((_d = branch2.attendance_summary) == null ? void 0 : _d.approved_leave_count) || 0),
        halfDayLeave: acc.halfDayLeave + (((_e = branch2.attendance_summary) == null ? void 0 : _e.half_day_leave_count) || 0),
        hourlyLeave: acc.hourlyLeave + (((_f = branch2.attendance_summary) == null ? void 0 : _f.hourly_leave_count) || 0),
        waitingForLogin: acc.waitingForLogin + (((_g = branch2.attendance_summary) == null ? void 0 : _g.waitingforlogin_count) || 0)
      };
    }, {
      totalEmployees: 0,
      activeEmployees: 0,
      present: 0,
      absent: 0,
      leave: 0,
      approvedLeave: 0,
      halfDayLeave: 0,
      hourlyLeave: 0,
      waitingForLogin: 0
    });
  };
  const totals = calculateTotals();
  const Card = ({ value, icon, label, color }) => {
    return /* @__PURE__ */ jsxs("div", { className: "flex flex-col bg-white w-full h-[100px] shadow-lg rounded-lg items-center justify-center dark:bg-gray-800", children: [
      /* @__PURE__ */ jsx("p", { className: `text-xl font-extrabold ${color}`, children: value }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
        icon,
        /* @__PURE__ */ jsx("h1", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: label })
      ] })
    ] });
  };
  const departmentThead = () => [
    { data: "Department" },
    { data: "Total" },
    { data: "Present", icon: /* @__PURE__ */ jsx(CheckCircle, { className: "inline text-green-500", size: 16 }) },
    { data: "Absent", icon: /* @__PURE__ */ jsx(XCircle, { className: "inline text-red-500", size: 16 }) },
    { data: "On Leave", icon: /* @__PURE__ */ jsx(Clock, { className: "inline text-yellow-500", size: 16 }) },
    { data: "Approved Leave", icon: /* @__PURE__ */ jsx(UserCheck, { className: "inline text-blue-500", size: 16 }) },
    { data: "Waiting", icon: /* @__PURE__ */ jsx(ClockFading, { className: "inline text-gray-500", size: 16 }) }
  ];
  const departmentTbody = () => {
    if (!reportData) return [];
    const branches = Array.isArray(reportData.data) ? reportData.data : [reportData.data];
    const departmentMap = /* @__PURE__ */ new Map();
    branches.forEach((branch2) => {
      if (!branch2) return;
      (branch2.department_counts || []).forEach((dept) => {
        const key = dept.department || "Unknown";
        if (!departmentMap.has(key)) {
          departmentMap.set(key, {
            department: key,
            employee_count: 0,
            present_count: 0,
            absent_count: 0,
            leave_count: 0,
            approved_leave_count: 0,
            half_day_leave_count: 0,
            hourly_leave_count: 0,
            waitingforlogin_count: 0
          });
        }
        const existing = departmentMap.get(key);
        departmentMap.set(key, {
          department: key,
          employee_count: existing.employee_count + (dept.employee_count || 0),
          present_count: existing.present_count + (dept.present_count || 0),
          absent_count: existing.absent_count + (dept.absent_count || 0),
          leave_count: existing.leave_count + (dept.leave_count || 0),
          approved_leave_count: existing.approved_leave_count + (dept.approved_leave_count || 0),
          half_day_leave_count: existing.half_day_leave_count + (dept.half_day_leave_count || 0),
          hourly_leave_count: existing.hourly_leave_count + (dept.hourly_leave_count || 0),
          waitingforlogin_count: existing.waitingforlogin_count + (dept.waitingforlogin_count || 0)
        });
      });
    });
    return Array.from(departmentMap.values()).map((dept, index) => ({
      id: `${dept.department}-${index}`,
      data: [
        { data: dept.department || "N/A" },
        { data: dept.employee_count },
        { data: dept.present_count },
        { data: dept.absent_count },
        { data: dept.leave_count },
        { data: dept.approved_leave_count },
        { data: dept.waitingforlogin_count }
      ]
    }));
  };
  const teamThead = () => [
    { data: "Team" },
    { data: "Team Lead" },
    { data: "Total" },
    { data: "Present", icon: /* @__PURE__ */ jsx(CheckCircle, { className: "inline text-green-500", size: 16 }) },
    { data: "Absent", icon: /* @__PURE__ */ jsx(XCircle, { className: "inline text-red-500", size: 16 }) },
    { data: "On Leave", icon: /* @__PURE__ */ jsx(Clock, { className: "inline text-yellow-500", size: 16 }) },
    { data: "Approved Leave", icon: /* @__PURE__ */ jsx(UserCheck, { className: "inline text-blue-500", size: 16 }) },
    { data: "Waiting", icon: /* @__PURE__ */ jsx(ClockFading, { className: "inline text-gray-500", size: 16 }) }
  ];
  const teamTbody = () => {
    if (!reportData) return [];
    const branches = Array.isArray(reportData.data) ? reportData.data : [reportData.data];
    const allTeams = branches.flatMap((branch2) => {
      if (!branch2) return [];
      return (branch2.team_counts || []).map((team) => ({
        ...team,
        branch_name: branch2.branch_name
      }));
    });
    return allTeams.map((team, index) => ({
      id: team.team_id || `team-${index}`,
      data: [
        { data: team.team_name },
        { data: team.teamleadname },
        { data: team.employee_count },
        { data: team.present_count },
        { data: team.absent_count },
        { data: team.leave_count },
        { data: team.approved_leave_count },
        { data: team.waitingforlogin_count }
      ]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-4", children: "Attendance Report" }) }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col md:flex-row justify-between gap-4 mb-6", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col md:flex-row gap-4 w-full md:w-auto", children: [
        userRole === "superadmin" && /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: filterOptions,
            selectedValue: selectedFilter,
            onSelect: setSelectedFilter,
            placeholder: "Filter By Branch",
            className: "w-full md:w-[250px]",
            isLoading: isStoreLoading
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "w-full md:w-[300px]", children: /* @__PURE__ */ jsx(
          DatePicker,
          {
            selectsRange: true,
            startDate,
            endDate,
            onChange: handleDateChange,
            placeholderText: "Select date range",
            className: "w-full p-2 border rounded dark:bg-gray-800 dark:border-gray-700",
            isClearable: true
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-4", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: fetchAttendanceReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-none font-medium text-sm rounded-sm px-4 py-2",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Refresh"
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-none font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2",
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              "Export Excel"
            ]
          }
        )
      ] })
    ] }),
    totals && /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-5 mb-10", children: [
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.totalEmployees,
          icon: /* @__PURE__ */ jsx(Users, { className: "text-blue-600", size: 20 }),
          label: "Total Employees",
          color: "text-blue-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.activeEmployees,
          icon: /* @__PURE__ */ jsx(UserCheck, { className: "text-green-600", size: 20 }),
          label: "Active Employees",
          color: "text-green-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.present,
          icon: /* @__PURE__ */ jsx(CheckCircle, { className: "text-green-600", size: 20 }),
          label: "Present Today",
          color: "text-green-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.absent,
          icon: /* @__PURE__ */ jsx(XCircle, { className: "text-red-600", size: 20 }),
          label: "Absent Today",
          color: "text-red-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.leave,
          icon: /* @__PURE__ */ jsx(Clock, { className: "text-yellow-600", size: 20 }),
          label: "On Leave",
          color: "text-yellow-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.approvedLeave,
          icon: /* @__PURE__ */ jsx(BookCheck, { className: "text-purple-600", size: 20 }),
          label: "Approved Leave",
          color: "text-purple-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.halfDayLeave,
          icon: /* @__PURE__ */ jsx(ClockFading, { className: "text-orange-600", size: 20 }),
          label: "Half Day Leave",
          color: "text-orange-600"
        }
      ),
      /* @__PURE__ */ jsx(
        Card,
        {
          value: totals.waitingForLogin,
          icon: /* @__PURE__ */ jsx(ArrowRightToLine, { className: "text-gray-600", size: 20 }),
          label: "Waiting for Login",
          color: "text-gray-600"
        }
      )
    ] }),
    /* @__PURE__ */ jsx("div", { className: "flex border-b border-gray-200 dark:border-gray-700 mb-4", children: tabs.map((tab) => /* @__PURE__ */ jsx(
      "button",
      {
        className: `px-4 py-2 font-medium text-sm ${activeTab === tab.id ? "text-[var(--color-primary)] border-b-2 border-[var(--color-primary)]" : "text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,
        onClick: () => setActiveTab(tab.id),
        children: tab.label
      },
      tab.id
    )) }),
    /* @__PURE__ */ jsx("div", { className: "mb-4", children: /* @__PURE__ */ jsx(
      SearchInput,
      {
        value: searchTerm,
        onChange: setSearchTerm,
        placeholder: `Search ${activeTab === "department" ? "departments" : "teams"}...`
      }
    ) }),
    activeTab === "department" ? /* @__PURE__ */ jsx(
      DataTable,
      {
        thead: departmentThead,
        tbody: departmentTbody,
        maxHeight: "500px"
      }
    ) : /* @__PURE__ */ jsx(
      DataTable,
      {
        thead: teamThead,
        tbody: teamTbody,
        maxHeight: "500px"
      }
    ),
    /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
      CustomPagination,
      {
        total: activeTab === "department" ? departmentTbody().length : teamTbody().length,
        currentPage,
        defaultPageSize: 10,
        onChange: setCurrentPage,
        paginationLabel: activeTab === "department" ? "departments" : "teams",
        isScroll: true
      }
    ) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-full md:w-[700px]",
        onClose: () => setShowModal(false),
        title: "Employee Attendance Details",
        children: selectedEmployee && /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Employee Details" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Employee Name" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.name || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Employee ID" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.empId || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Department" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.department || "N/A" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Attendance Information" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Status" }),
                /* @__PURE__ */ jsx("p", { className: `text-sm font-medium mt-1 ${selectedEmployee.status === "Present" ? "text-green-600" : selectedEmployee.status === "Absent" ? "text-red-600" : selectedEmployee.status === "On Leave" ? "text-yellow-600" : "text-gray-600"}`, children: selectedEmployee.status || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Check-in Time" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.checkIn || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Check-out Time" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.checkOut || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Total Hours" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.totalHours || "N/A" })
              ] })
            ] })
          ] }),
          selectedEmployee.status === "On Leave" && /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Leave Details" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Leave Type" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.leaveType || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Leave Days" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.leaveDays || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "From Date" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.leaveStart || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "To Date" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedEmployee.leaveEnd || "N/A" })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsx("div", { className: "flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx(
            "button",
            {
              type: "button",
              className: "px-5 py-2 bg-gray-800 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-md transition-colors duration-200 font-medium text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:focus:ring-gray-400",
              onClick: () => setShowModal(false),
              children: "Close"
            }
          ) })
        ] })
      }
    )
  ] });
};
const formatDate = (startDate, endDate) => {
  {
    return formatSingleDate(startDate);
  }
};
const formatSingleDate = (date) => {
  const d = new Date(date);
  return d.toLocaleDateString("en-US", {
    day: "numeric",
    month: "short",
    year: "numeric"
  });
};
const AttendanceLogList = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [attendanceLogs, setAttendanceLogs] = useState([]);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showFilters2, setShowFilters2] = useState(false);
  const [showCheckModal, setShowCheckModal] = useState(false);
  const [hasCheckedInToday, setHasCheckedInToday] = useState(false);
  const [todayAttendance, setTodayAttendance] = useState(null);
  const [isCheckingIn, setIsCheckingIn] = useState(true);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const [showEditModal, setShowEditModal] = useState(false);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const [selectedLog, setSelectedLog] = useState(null);
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "hr") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "hr") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "hr") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    if (role !== "hr" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "hr" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "hr" ? userBranchCode : selectedBranchCode;
        const url = `${BASE_URL}/users/dropdown?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "hr") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const checkTodayAttendance = async () => {
    if (role === "superadmin" || role === "hr") return;
    try {
      const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
      const url = `${BASE_URL}/users/attendance-log/read?staff_id=${staff_id}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      console.log("responseee", response);
      if (response.data && response.data.data) {
        setTodayAttendance(response.data.data);
        setHasCheckedInToday(
          response.data.data.check_in && !response.data.data.check_out
        );
      } else {
        setTodayAttendance(null);
        setHasCheckedInToday(false);
      }
    } catch (error2) {
      console.error("Error checking today's attendance", error2);
      toast$1.error("Failed to check today's attendance");
    }
  };
  const handleCheckIn = async () => {
    var _a2, _b;
    try {
      const now = /* @__PURE__ */ new Date();
      const today = now.toISOString().split("T")[0];
      const timeString = now.toISOString();
      const checkInData = {
        staff_id,
        attendance_date: today,
        check_in: timeString
      };
      const checkinRes = await axios.post(
        `${BASE_URL}/users/attendance-log/create`,
        checkInData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      console.log("responseeee", checkinRes);
      setShowCheckModal(false);
      toast$1.success("Checked in successfully");
      await checkTodayAttendance();
      await fetchAttendanceLogs();
    } catch (error2) {
      console.error("Error during check in", error2);
      toast$1.error(((_b = (_a2 = error2.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "Failed to check in");
    }
  };
  const handleCheckOut = async () => {
    var _a2, _b;
    try {
      if (!todayAttendance) {
        toast$1.error("No check-in record found for today");
        return;
      }
      const now = /* @__PURE__ */ new Date();
      const timeString = now.toISOString();
      const checkOutData = {
        id: todayAttendance._id,
        check_out: timeString
      };
      const checkoutRes = await axios.post(
        `${BASE_URL}/users/attendance-log/create`,
        checkOutData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      console.log("checkoutdataaa", checkoutRes);
      toast$1.success("Checked out successfully");
      await checkTodayAttendance();
      await fetchAttendanceLogs();
      setShowCheckModal(false);
    } catch (error2) {
      console.error("Error during check out", error2);
      toast$1.error(((_b = (_a2 = error2.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "Failed to check out");
    }
  };
  const fetchAttendanceLogs = async () => {
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/attendance-log/read`;
      const params = new URLSearchParams();
      if (role === "superadmin") {
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else if (role === "hr") {
        if (selectedStaffId) params.append("staff_id", selectedStaffId);
      } else {
        params.append("staff_id", staff_id);
      }
      if (startDate) params.append("start_date", formatDate2(startDate));
      if (endDate) params.append("end_date", formatDate2(endDate));
      params.append("page", currentPage);
      params.append("limit", pageSize);
      params.append("sort", "-date");
      url += `?${params.toString()}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setAttendanceLogs(response.data.data || []);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching attendance logs", error2);
      toast$1.error("Failed to fetch attendance logs");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleOnExport = () => {
    if (!attendanceLogs || attendanceLogs.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = attendanceLogs.map((log) => ({
      "Staff ID": log.staff_id,
      "Branch Code": log.branchcode,
      Date: log.date,
      "Check In": log.check_in,
      "Check Out": log.check_out || "N/A",
      "Total Hours": log.total_hours || "N/A",
      Status: log.status
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "AttendanceLogs");
    XLSX.writeFile(wb, "AttendanceLogs.xlsx");
  };
  useEffect(() => {
    fetchAttendanceLogs();
    if (role !== "superadmin" && role !== "hr") {
      checkTodayAttendance();
    }
  }, [
    currentPage,
    pageSize,
    selectedStaffId,
    startDate,
    endDate,
    role,
    userBranchCode
  ]);
  const handleEditAttendance = (log) => {
    setSelectedLog(log);
    setShowEditModal(true);
  };
  const formatDuration = (totalSeconds) => {
    if (!totalSeconds || isNaN(totalSeconds)) return "N/A";
    const hours = Math.floor(totalSeconds / 3600);
    const minutes = Math.floor(totalSeconds % 3600 / 60);
    const seconds = totalSeconds % 60;
    return `${hours}:${String(minutes).padStart(2, "0")}:${String(seconds).padStart(2, "0")}`;
  };
  const thead = () => [
    { data: "Staff ID" },
    { data: "Staff Name" },
    { data: "Date" },
    { data: "Check In" },
    { data: "Check Out" },
    { data: "Total Hours" },
    { data: "Status" },
    { data: "Action" }
  ];
  const tbody = () => {
    if (!attendanceLogs) return [];
    return attendanceLogs.map((log) => ({
      id: log._id,
      data: [
        { data: log.staff_id },
        { data: log.staff_name },
        { data: new Date(log.create_datetime).toLocaleDateString() },
        { data: formatDate2(log.check_in) || "N/A" },
        { data: formatDate2(log.check_out) || "N/A" },
        { data: formatDuration(log.duration) },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${log.status === "checkin" ? "bg-green-100 text-green-800" : log.status === "checkout" ? "bg-red-100 text-red-800" : "bg-yellow-100 text-yellow-800"}`,
              children: [
                log.status === "present" ? /* @__PURE__ */ jsx(CheckCircle, { className: "w-3 h-3 mr-1" }) : log.status === "absent" ? /* @__PURE__ */ jsx(XCircle, { className: "w-3 h-3 mr-1" }) : /* @__PURE__ */ jsx(Clock, { className: "w-3 h-3 mr-1" }),
                log.status
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsx("div", { className: "flex flex-wrap justify-center gap-2", children: /* @__PURE__ */ jsx(
            "button",
            {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditAttendance(log),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
            }
          ) }),
          className: "action-cell"
        }
      ]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Attendance Logs" }),
        isMobile && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: [
              /* @__PURE__ */ jsx(Filter, { size: 18, className: "mr-1" }),
              showFilters2 ? "Hide Filters" : "Show Filters"
            ]
          }
        ),
        role !== "superadmin" && role !== "hr" && /* @__PURE__ */ jsxs("div", { className: "flex space-x-2", children: [
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: () => {
                setIsCheckingIn(true);
                setShowCheckModal(true);
              },
              className: `flex items-center justify-center text-white font-medium text-sm rounded-sm px-5 py-2.5 ${hasCheckedInToday ? "bg-gray-400 cursor-not-allowed" : "bg-[var(--color-primary)] hover-effect"}`,
              disabled: hasCheckedInToday,
              children: [
                !isMobile && "Check In",
                /* @__PURE__ */ jsx(Clock1, { className: "ml-4", size: 20 })
              ]
            }
          ),
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: () => {
                setIsCheckingIn(false);
                setShowCheckModal(true);
              },
              className: `flex items-center justify-center text-white font-medium text-sm rounded-sm px-5 py-2.5 ${!hasCheckedInToday ? "bg-gray-400 cursor-not-allowed" : "bg-[var(--color-primary)] hover-effect"}`,
              children: [
                !isMobile && "Check Out",
                /* @__PURE__ */ jsx(Clock1, { className: "ml-4", size: 20 })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `grid grid-cols-1 ${role !== "superadmin" && role !== "hr" ? "md:grid-cols-1 lg:grid-cols-1 gap-3" : "md:grid-cols-3 lg:grid-cols-3 gap-20"}`,
              children: [
                role === "superadmin" && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: filteredBranchOptions(),
                    selectedValue: selectedBranchCode,
                    onSelect: handleBranchCodeChange,
                    placeholder: "Select Branch",
                    className: "w-[245px]",
                    isLoading: isStoreLoading
                  }
                ),
                (role === "superadmin" || role === "hr") && /* @__PURE__ */ jsx(
                  Dropdown,
                  {
                    options: staffOptions,
                    selectedValue: selectedStaffId,
                    onSelect: handleStaffChange,
                    placeholder: "Select Staff",
                    className: "w-[245px]",
                    disabled: role === "hr" ? false : !selectedBranchCode,
                    isLoading: loading
                  }
                )
              ]
            }
          )
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[150px]"
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2",
            disabled: attendanceLogs.length === 0,
            children: [
              /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
              !isMobile && "Export Excel"
            ]
          }
        )
      ] }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
      /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
        DataTable,
        {
          thead,
          tbody,
          responsive: true,
          className: "min-w-full"
        }
      ) }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "attendance logs",
          isScroll: true
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCheckModal,
        className: "w-full md:w-[400px]",
        onClose: () => setShowCheckModal(false),
        title: isCheckingIn ? "Check In Confirmation" : "Check Out Confirmation",
        children: /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
          /* @__PURE__ */ jsx("p", { className: "mb-4", children: isCheckingIn ? "Are you sure you want to check in?" : "Are you sure you want to check out?" }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end space-x-2", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                onClick: () => setShowCheckModal(false),
                className: "px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100",
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                onClick: isCheckingIn ? handleCheckIn : handleCheckOut,
                className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded-md hover:bg-red-800",
                children: isCheckingIn ? "Check In" : "Check Out"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
const AttendanceSheet = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [loading, setLoading] = useState(false);
  const [staffList, setStaffList] = useState([]);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [selectedStaff, setSelectedStaff] = useState(null);
  const [attendanceDate, setAttendanceDate] = useState(/* @__PURE__ */ new Date());
  const [status, setStatus] = useState("present");
  const [remarks, setRemarks] = useState("");
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const { branchCodeOptions, fetchBranches, isLoading: isStoreLoading } = useBranchStore$1();
  useEffect(() => {
    if (role === "superadmin" || role === "hr") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "hr") {
      setSelectedBranchCode(userBranchCode);
      fetchStaffList(userBranchCode);
    }
  }, [role, userBranchCode]);
  const fetchStaffList = async (branchCode) => {
    setLoading(true);
    try {
      const url = `${BASE_URL}/users/read?branchcode=${branchCode}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setStaffList(response.data.data);
      }
    } catch (error) {
      console.error("Error fetching staff list", error);
      toast$1.error("Failed to fetch staff");
    } finally {
      setLoading(false);
    }
  };
  const handleBranchChange = (value) => {
    setSelectedBranchCode(value);
    fetchStaffList(value);
  };
  const handleCreateAttendance = (staff) => {
    setSelectedStaff(staff);
    setShowCreateModal(true);
  };
  const handleSubmitAttendance = async () => {
    var _a2, _b;
    if (!selectedStaff) return;
    try {
      setLoading(true);
      const formattedDate = attendanceDate.toISOString().split("T")[0];
      const attendanceData = {
        staff_id: selectedStaff.staff_id,
        branchcode: selectedStaff.branchcode,
        attendance_date: formattedDate,
        status,
        remarks
      };
      await axios.post(`${BASE_URL}/users/attendance/create`, attendanceData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      toast$1.success("Attendance recorded successfully");
      setShowCreateModal(false);
    } catch (error) {
      console.error("Error creating attendance", error);
      toast$1.error(((_b = (_a2 = error.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "Failed to record attendance");
    } finally {
      setLoading(false);
    }
  };
  const thead = () => [
    { data: "Staff ID" },
    { data: "Name" },
    { data: "Department" },
    { data: "Designation" },
    { data: "Branch" },
    { data: "Actions" }
  ];
  const tbody = () => {
    return staffList.map((staff) => ({
      id: staff.staff_id,
      data: [
        { data: staff.staff_id },
        { data: `${staff.firstname} ${staff.lastname}` },
        { data: staff.department },
        { data: staff.designation },
        { data: staff.branchcode },
        {
          data: /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: () => handleCreateAttendance(staff),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect text-sm rounded-sm px-3 py-1.5",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Attendance"
              ]
            }
          )
        }
      ]
    }));
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
    /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Attendance Sheet" }),
        /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
        isMobile && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: [
              /* @__PURE__ */ jsx(Filter, { size: 18, className: "mr-1" }),
              showFilters2 ? "Hide Filters" : "Show Filters"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsx("div", { className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`, children: /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: (role === "superadmin" || role === "hr") && /* @__PURE__ */ jsx("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsx(
        Dropdown,
        {
          options: branchCodeOptions,
          selectedValue: selectedBranchCode,
          onSelect: handleBranchChange,
          placeholder: "Select Branch",
          className: "w-[50%]",
          isLoading: isStoreLoading,
          disabled: role === "hr"
        }
      ) }) }) }),
      loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
      staffList.length > 0 ? /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
        DataTable,
        {
          thead,
          tbody,
          responsive: true,
          className: "min-w-full"
        }
      ) }) : /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: selectedBranchCode ? "No staff members found in this branch" : "Please select a branch to view staff members" })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowCreateModal(false),
        title: "Record Attendance",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          selectedStaff && /* @__PURE__ */ jsx("div", { className: "space-y-4", children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff ID" }),
              /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: selectedStaff.staff_id })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Name" }),
              /* @__PURE__ */ jsxs("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: [
                selectedStaff.firstname,
                " ",
                selectedStaff.lastname
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Attendance Date" }),
              /* @__PURE__ */ jsx(
                DatePicker,
                {
                  selected: attendanceDate,
                  onChange: (date) => setAttendanceDate(date),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  dateFormat: "yyyy-MM-dd"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Status" }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  value: status,
                  onChange: (e) => setStatus(e.target.value),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "present", children: "Present" }),
                    /* @__PURE__ */ jsx("option", { value: "absent", children: "Absent" }),
                    /* @__PURE__ */ jsx("option", { value: "halfday", children: "Half Day" }),
                    /* @__PURE__ */ jsx("option", { value: "leave", children: "Leave" })
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg col-span-2 border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Remarks" }),
              /* @__PURE__ */ jsx(
                "textarea",
                {
                  value: remarks,
                  onChange: (e) => setRemarks(e.target.value),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none border rounded p-2",
                  rows: "3",
                  placeholder: "Enter remarks (optional)"
                }
              )
            ] })
          ] }) }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowCreateModal(false),
                disabled: loading,
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-[var(--color-primary)] hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                onClick: handleSubmitAttendance,
                disabled: loading,
                children: loading ? "Saving..." : "Save Attendance"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
const AttendanceSheetReport = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedTeamId, setSelectedTeamId] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [selectedStatus, setSelectedStatus] = useState([]);
  const [pageSize, setPageSize] = useState(10);
  const [attendanceData, setAttendanceData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [attendanceDate, setAttendanceDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [teamOptions, setTeamOptions] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 10, label: "10 per page" },
    { value: 20, label: "20 per page" },
    { value: 50, label: "50 per page" },
    { value: 100, label: "100 per page" }
  ];
  const statusOptions = [
    { value: "present", label: "Present" },
    { value: "absent", label: "Absent" },
    { value: "leave", label: "Leave" },
    { value: "halfday", label: "Half Day" }
  ];
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    } else if (role === "team-lead") {
      return branchCodeOptions.filter(
        (branch2) => branch2.value === userBranchCode
      );
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin" || role === "team-lead") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role === "team-lead") {
      setSelectedBranchCode(userBranchCode);
    }
  }, [role, userBranchCode]);
  useEffect(() => {
    if (role !== "team-lead" && role !== "superadmin") {
      setSelectedStaffId(staff_id);
    }
  }, [role, staff_id]);
  useEffect(() => {
    const fetchTeams = async () => {
      if (!selectedBranchCode) {
        setTeamOptions([]);
        return;
      }
      try {
        const url = `${BASE_URL}/teams/read?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((team) => ({
            value: team.team_id,
            label: team.team_name
          }));
          setTeamOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching teams", error2);
        toast$1.error("Failed to fetch teams");
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      fetchTeams();
    }
  }, [selectedBranchCode, token, role]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role === "superadmin" && !selectedBranchCode || role === "team-lead" && !userBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const branchToUse = role === "team-lead" ? userBranchCode : selectedBranchCode;
        let url = `${BASE_URL}/users/read?branchcode=${branchToUse}`;
        if (selectedTeamId) {
          url += `&team_id=${selectedTeamId}`;
        }
        const response = await axios.get(url, {
          headers: { Authorization: `Bearer ${token}` }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" || role === "team-lead") {
      getStaffOptions();
    }
  }, [selectedBranchCode, selectedTeamId, token, role, userBranchCode]);
  const fetchAttendanceData = async () => {
    const staffIdToUse = role !== "team-lead" && role !== "superadmin" ? staff_id : selectedStaffId;
    if ((role === "superadmin" || role === "team-lead") && !staffIdToUse && !selectedTeamId) {
      toast$1.error("Please select at least Staff or Team to filter");
      return;
    }
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/attendance/read?page=${currentPage}&limit=${pageSize}`;
      if (staffIdToUse) url += `&staff_id=${encodeURIComponent(staffIdToUse)}`;
      if (selectedBranchCode)
        url += `&branchcode=${encodeURIComponent(selectedBranchCode)}`;
      if (selectedTeamId)
        url += `&team_id=${encodeURIComponent(selectedTeamId)}`;
      if (startDate) url += `&start_date=${formatDate2(startDate)}`;
      if (endDate) url += `&end_date=${formatDate2(endDate)}`;
      if (attendanceDate)
        url += `&attendance_date=${formatDate2(attendanceDate)}`;
      if (selectedStatus.length > 0) {
        selectedStatus.forEach((status) => {
          url += `&status=${encodeURIComponent(status)}`;
        });
      }
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setAttendanceData(response.data);
        setTotalItem(response.data.totalDocuments || 0);
      }
    } catch (error2) {
      console.error("Error fetching attendance data", error2);
      toast$1.error("Failed to fetch attendance data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
    fetchAttendanceData();
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedTeamId("");
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleTeamChange = (value) => {
    setSelectedTeamId(value);
    setSelectedStaffId("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectedStatus(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleDateRangeChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
    setAttendanceDate(null);
  };
  const handleSingleDateChange = (date) => {
    setAttendanceDate(date);
    setStartDate(null);
    setEndDate(null);
  };
  const clearDateRange = () => {
    setStartDate(null);
    setEndDate(null);
  };
  const clearSingleDate = () => {
    setAttendanceDate(null);
  };
  const handleOnExport = () => {
    if (!(attendanceData == null ? void 0 : attendanceData.data) || attendanceData.data.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = attendanceData.data.map((record) => ({
      "Staff ID": record.staff_id,
      "Staff Name": record.staff_name,
      Date: record.attendance_date,
      Status: record.status,
      "Total Hours": record.total_worked_hours,
      Branch: record.branch_name || "N/A",
      Team: record.team_id || "N/A",
      Designation: record.designation,
      Department: record.department,
      Remarks: record.remarks || "N/A"
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "AttendanceReport");
    XLSX.writeFile(wb, "AttendanceReport.xlsx");
  };
  const generateReport = () => {
    fetchAttendanceData();
  };
  const getStatusBadge = (status) => {
    let bgColor = "";
    let textColor = "";
    switch (status.toLowerCase()) {
      case "present":
        bgColor = "bg-green-100";
        textColor = "text-green-800";
        break;
      case "absent":
        bgColor = "bg-red-100";
        textColor = "text-red-800";
        break;
      case "leave":
        bgColor = "bg-blue-100";
        textColor = "text-blue-800";
        break;
      case "halfday":
        bgColor = "bg-yellow-100";
        textColor = "text-yellow-800";
        break;
      default:
        bgColor = "bg-gray-100";
        textColor = "text-gray-800";
    }
    return /* @__PURE__ */ jsx(
      "span",
      {
        className: `px-2 py-1 rounded-full text-xs ${bgColor} ${textColor}`,
        children: status.charAt(0).toUpperCase() + status.slice(1)
      }
    );
  };
  const attendanceThead = () => [
    { data: "Staff ID" },
    { data: "Staff Name" },
    { data: "Date" },
    { data: "Status" },
    { data: "Total Hours" },
    { data: "Branch" },
    { data: "Team" }
  ];
  const attendanceTbody = () => {
    if (!(attendanceData == null ? void 0 : attendanceData.data)) return [];
    return attendanceData.data.map((record, index) => ({
      id: record.id || index,
      data: [
        { data: record.staff_id },
        { data: record.staff_name },
        { data: new Date(record.attendance_date).toLocaleDateString() },
        { data: getStatusBadge(record.status) },
        { data: record.total_worked_hours },
        { data: record.branch_name || "N/A" },
        { data: record.team_id || "N/A" }
      ]
    }));
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "Attendance Report" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4 mb-5", children: [
      /* @__PURE__ */ jsxs(
        "div",
        {
          className: `grid grid-cols-1 ${role !== "superadmin" && role !== "team-lead" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
          children: [
            (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: filteredBranchOptions(),
                selectedValue: selectedBranchCode,
                onSelect: handleBranchCodeChange,
                placeholder: "Select Branch",
                className: "w-[245px]",
                isLoading: isStoreLoading,
                disabled: role === "team-lead"
              }
            ),
            (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: teamOptions,
                selectedValue: selectedTeamId,
                onSelect: handleTeamChange,
                placeholder: "Select Team",
                className: "w-[245px]",
                disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
                isLoading: loading
              }
            ),
            (role === "superadmin" || role === "team-lead") && /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: staffOptions,
                selectedValue: selectedStaffId,
                onSelect: handleStaffChange,
                placeholder: "Select Staff",
                className: "w-[245px]",
                disabled: role === "team-lead" ? !userBranchCode : !selectedBranchCode,
                isLoading: loading
              }
            ),
            /* @__PURE__ */ jsx(
              Dropdown,
              {
                options: statusOptions,
                selectedValue: selectedStatus,
                onSelect: handleStatusChange,
                placeholder: "Select Status",
                className: "w-[245px]",
                isMulti: true
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "w-[245px] relative", children: [
          /* @__PURE__ */ jsx(
            DatePicker,
            {
              selectsRange: true,
              startDate,
              endDate,
              onChange: handleDateRangeChange,
              placeholderText: "Select date range",
              className: "w-full p-2 border rounded h-[40px]",
              isClearable: true
            }
          ),
          (startDate || endDate) && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: clearDateRange,
              className: "absolute right-2 top-2 text-gray-500 hover:text-gray-700",
              children: /* @__PURE__ */ jsx(X, { size: 16 })
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "w-[245px] relative", children: [
          /* @__PURE__ */ jsx(
            DatePicker,
            {
              selected: attendanceDate,
              onChange: handleSingleDateChange,
              placeholderText: "Select specific date",
              className: "w-full p-2 border rounded h-[40px]",
              isClearable: true
            }
          ),
          attendanceDate && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: clearSingleDate,
              className: "absolute right-2 top-2 text-gray-500 hover:text-gray-700",
              children: /* @__PURE__ */ jsx(X, { size: 16 })
            }
          )
        ] }),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: pageSizeOptions,
            selectedValue: pageSize,
            onSelect: handlePageSizeChange,
            placeholder: "Items per page",
            className: "w-[245px]"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-between items-center", children: [
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${role !== "superadmin" && role !== "team-lead" ? "gap-91" : "gap-19"}`,
            children: /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
                disabled: !(attendanceData == null ? void 0 : attendanceData.data),
                children: [
                  /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                  !isMobile && "Export Excel"
                ]
              }
            )
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: generateReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            disabled: (role !== "team-lead" && role !== "superadmin" ? !attendanceDate && !startDate : !selectedStaffId && !selectedTeamId && !attendanceDate && !startDate) || loading,
            children: loading ? "Loading..." : "Generate Report"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    (attendanceData == null ? void 0 : attendanceData.data) && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg text-[var(--color-primary)] font-semibold mb-2", children: "Summary" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(BookUser, { className: "mr-1", size: 16 }),
              " Total Records"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: attendanceData.totalDocuments })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Users, { className: "mr-1", size: 16 }),
              " Unique Staff"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: new Set(
              attendanceData.data.map((item) => item.staff_id)
            ).size })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
              /* @__PURE__ */ jsx(Clock, { className: "mr-1", size: 16 }),
              " Date Range"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "font-medium", children: attendanceData.data.length > 0 ? `${new Date(attendanceData.data[0].attendance_date).toLocaleDateString()} - 
                           ${new Date(attendanceData.data[attendanceData.data.length - 1].attendance_date).toLocaleDateString()}` : "N/A" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(UserCheck, { className: "mr-2", size: 20 }),
          " Attendance Records"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: attendanceThead,
            tbody: attendanceTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "records",
          isScroll: true
        }
      ) })
    ] }),
    !loading && !attendanceData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: role !== "team-lead" && role !== "superadmin" ? !attendanceDate && !startDate ? "Please select date to generate report" : "Click 'Generate Report' to view your attendance" : role === "team-lead" ? !userBranchCode ? "Loading branch information..." : !selectedStaffId && !selectedTeamId ? "Please select Staff or Team and date" : !attendanceDate && !startDate ? "Please select date" : "Click 'Generate Report' to view data" : !selectedBranchCode ? "Please select Branch to view available options" : !selectedStaffId && !selectedTeamId ? "Please select Staff or Team" : !attendanceDate && !startDate ? "Please select date" : "Click 'Generate Report' to view data" })
  ] }) }) });
};
const Attandance = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("employeeattandance");
  const data = [{
    id: "SAL_12",
    date: "25-05-2025",
    name: "Bharathi",
    status: "Presend",
    checkin: "true",
    checkInTime: "09:04 AM",
    checkout: "true",
    checkouttime: "06:00 PM"
  }, {
    id: "AC_12",
    date: "25-05-2025",
    name: "Karthick",
    status: "Absent",
    checkin: "false",
    checkInTime: "--",
    checkouttime: "--",
    checkout: "false"
  }];
  const tabs = [{
    id: "employeeattandance",
    label: " Attendance Log"
  }, {
    id: "createattendance",
    label: " Attendance Entry"
  }, {
    id: "attendancereport",
    label: "Report"
  }, {
    id: "attendancesheet",
    label: "Attendance Report"
  }];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsx("div", {
      className: "  dark:border-gray-700 mb-[60px] ",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: ` font-medium text-sm ${activeTab === tab.id ? " text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[150px] h-[40px] rounded-sm " : "border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[150px] h-[40px] rounded-sm "}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "employeeattandance" && /* @__PURE__ */ jsx(AttendanceLogList, {}), activeTab === "attendancesheet" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(AttendanceSheetReport, {})
      }), activeTab === "createattendance" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(AttendanceSheet, {})
      }), activeTab === "attendancereport" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(AttendanceReport, {})
      }), /* @__PURE__ */ jsx(Modal, {
        isVisible: showModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowModal(false),
        title: "ATTENDANCE APPROVAL ",
        children: /* @__PURE__ */ jsx(UpdateAttendanceForm, {})
      })]
    })]
  });
};
const Attandance$1 = withComponentProps(Attandance);
const route13 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Attandance$1
}, Symbol.toStringTag, { value: "Module" }));
const AddNewProject = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const [campaignOptions, setCampaignOptions] = useState([]);
  const [clientOptions, setClientOptions] = useState([]);
  const [isFetchingCampaigns, setIsFetchingCampaigns] = useState(false);
  const [isFetchingClients, setIsFetchingClients] = useState(false);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOptions = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [formData, setFormData] = useState({
    branchcode: "",
    client_code: "",
    project_code: "",
    title: "",
    priority: "",
    type: "",
    loc: "",
    start_date: "",
    end_date: "",
    handler_by: "",
    notes: "",
    status: "draft"
  });
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  useEffect(() => {
    if (formData.branchcode) {
      fetchCampaignOptions(formData.branchcode);
      fetchClientOptions(formData.branchcode);
    } else {
      setCampaignOptions([]);
      setClientOptions([]);
    }
  }, [formData.branchcode]);
  const fetchCampaignOptions = async (branchcode) => {
    setIsFetchingCampaigns(true);
    try {
      const response = await axios.get(
        `${BASE_URL}/campaign/overview/dropdown?branchcode=${branchcode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((campaign) => ({
          value: campaign.campaign_code,
          label: campaign.campaignname
        }));
        setCampaignOptions(options);
      } else {
        setCampaignOptions([]);
      }
    } catch (err) {
      toast$1.error("Failed to fetch campaign options");
      setCampaignOptions([]);
    } finally {
      setIsFetchingCampaigns(false);
    }
  };
  const fetchClientOptions = async (branchcode) => {
    setIsFetchingClients(true);
    try {
      const response = await axios.get(
        `${BASE_URL}/client/overview/dropdown?branchcode=${branchcode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((client) => ({
          value: client.client_code,
          label: client.client_name
        }));
        setClientOptions(options);
      } else {
        setClientOptions([]);
      }
    } catch (err) {
      toast$1.error("Failed to fetch client options");
      setClientOptions([]);
    } finally {
      setIsFetchingClients(false);
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const ProjectData = {
      data: {
        branchcode: formData.branchcode,
        client_code: formData.client_code,
        project_code: formData.project_code,
        title: formData.title,
        priority: formData.priority,
        type: formData.type,
        loc: formData.loc,
        start_date: formData.start_date,
        end_date: formData.end_date,
        handler_by: formData.handler_by,
        notes: formData.notes,
        status: formData.status
      }
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/project/overview/create`,
        ProjectData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Project created successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create project");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating project");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookUser, { className: "inline mr-2" }),
        " Project Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOptions == null ? void 0 : branchCodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-1", size: 14 }),
            " Client Code"
          ] }),
          isFetchingClients ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading clients..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "client_code",
              value: formData.client_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode || clientOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Client" }),
                clientOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          formData.branchcode && clientOptions.length === 0 && !isFetchingClients && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No clients found for this branch" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Network, { className: "inline mr-1", size: 14 }),
            " Project Codes"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "project_code",
              value: formData.project_code,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Project Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Network, { className: "inline mr-1", size: 14 }),
            " Project Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Project Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Map$1, { className: "inline mr-1", size: 14 }),
            " Location"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "loc",
              value: formData.loc,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Location",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
            " Department"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              value: selectedDepartment,
              onChange: (e) => {
                handleDepartmentChange(e.target.value);
                setFormData((prev) => ({
                  ...prev,
                  handler_by: "",
                  handler_to: ""
                }));
              },
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Handler By"
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "handler_by",
              value: formData.handler_by,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !selectedDepartment || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Priority"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "priority",
              value: formData.priority,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select priority" }),
                /* @__PURE__ */ jsx("option", { value: "minor", children: "Minor" }),
                /* @__PURE__ */ jsx("option", { value: "major", children: "Major" }),
                /* @__PURE__ */ jsx("option", { value: "critical", children: "Critical" }),
                /* @__PURE__ */ jsx("option", { value: "blocker", children: "Blocker" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Project & Status" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Project Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "type",
              value: formData.type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "residential", children: "Residential" }),
                /* @__PURE__ */ jsx("option", { value: "commercial", children: "Commercial" }),
                /* @__PURE__ */ jsx("option", { value: "industrial", children: "Industrial" }),
                /* @__PURE__ */ jsx("option", { value: "land", children: "Land" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                /* @__PURE__ */ jsx("option", { value: "planning", children: "Planning" }),
                /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "lead_review", children: "Lead Review" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "revised", children: "Revised" }),
                /* @__PURE__ */ jsx("option", { value: "client_review", children: "Client_review" }),
                /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Notes & Summary"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "notes",
          value: formData.notes,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter project notes and summary..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Project"
        }
      )
    ] })
  ] });
};
const useClientStore = create(
  persist(
    (set) => ({
      clients: [],
      clientscodeOptions: [],
      isLoading: false,
      error: null,
      fetchClients: async (token) => {
        var _a;
        try {
          set({ isLoading: true });
          const response = await axios.get(
            `${BASE_URL}/client/overview/read?limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log("responseeeclientzustandd", response);
          const clients = ((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data) || [];
          const clientscodeOptions = [
            ...new Set(
              clients.map(
                (client) => JSON.stringify({
                  value: client.client_code,
                  label: client.client_name
                })
              )
            )
          ].map((str) => JSON.parse(str));
          console.log("zustandclienttt", clients, clientscodeOptions);
          set({
            clients,
            clientscodeOptions
          });
        } catch (error) {
          set({ error, isLoading: false });
        }
      }
    }),
    { name: "client-storage" }
  )
);
const useLeadsStore = create(
  persist(
    (set) => ({
      leads: [],
      campaigns: [],
      campaigncodeOptions: [],
      branchCampaign: [],
      branchCampaigncodeOptions: [],
      leadcodeOptions: [],
      isLoading: false,
      error: null,
      fetchLeads: async (token, branchcode) => {
        var _a, _b, _c, _d, _e, _f;
        try {
          set({ isLoading: true });
          const response = await axios.get(
            `${BASE_URL}/campaign/leads/read?limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          const camResponse = await axios.get(
            `${BASE_URL}/campaign/overview/read?limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          const branchcamResponse = await axios.get(
            `${BASE_URL}/campaign/overview/read?branchcode=${branchcode}&limit=1000`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log(
            "response for the zustand stored datas for leads",
            (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data,
            (_b = camResponse == null ? void 0 : camResponse.data) == null ? void 0 : _b.data,
            (_c = branchcamResponse == null ? void 0 : branchcamResponse.data) == null ? void 0 : _c.data
          );
          const leads = ((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || [];
          const campaigns = ((_e = camResponse == null ? void 0 : camResponse.data) == null ? void 0 : _e.data) || [];
          const branchCampaign = ((_f = branchcamResponse == null ? void 0 : branchcamResponse.data) == null ? void 0 : _f.data) || [];
          const leadcodeOptions = [
            ...new Set(
              leads.map(
                (lead) => JSON.stringify({
                  value: lead.id,
                  label: lead.lead_name
                })
              )
            )
          ].map((str) => JSON.parse(str));
          const campaigncodeOptions = [
            ...new Set(
              campaigns.map(
                (camp) => JSON.stringify({
                  value: camp.campaign_code,
                  label: camp.campaignname
                  // Make sure this matches your API response
                })
              )
            )
          ].map((str) => JSON.parse(str));
          const branchCampaigncodeOptions = [
            ...new Set(
              branchCampaign.map(
                (camp) => JSON.stringify({
                  value: camp.campaign_code,
                  label: camp.campaignname
                  // Make sure this matches your API response
                })
              )
            )
          ].map((str) => JSON.parse(str));
          console.log("lead options", leadcodeOptions);
          console.log("campaign options", campaigncodeOptions);
          set({
            leads,
            campaigns,
            // Changed from campaign to campaigns for clarity
            campaigncodeOptions,
            leadcodeOptions,
            branchCampaigncodeOptions,
            isLoading: false
          });
        } catch (error) {
          set({ error, isLoading: false });
        }
      }
    }),
    { name: "lead-storage" }
  )
);
const EditProjectForm = ({ project: project2, onSuccess, onCancel }) => {
  console.log("projectdataaa", project2);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  const { fetchClients, isStoreLoading } = useClientStore();
  const clientcodeOptions = useClientStore((state) => state.clientscodeOptions);
  console.log("clientcodefor project", clientcodeOptions);
  useEffect(() => {
    fetchClients(token);
  }, []);
  const [formData, setFormData] = useState({
    branchcode: "",
    campaign_code: "",
    client_code: "",
    title: "",
    priority: "",
    type: "",
    loc: "",
    budget: 0,
    overallcost: 0,
    start_date: "",
    end_date: "",
    handler_by: "",
    handler_to: "",
    notes: "",
    status: "draft"
  });
  useEffect(() => {
    if (project2) {
      setFormData({
        branchcode: project2.branchcode || "",
        campaign_code: project2.campaign_code || "",
        client_code: project2.client_code || "",
        title: project2.title || "",
        priority: project2.priority || "",
        type: project2.type || "",
        loc: project2.loc || "",
        budget: project2.budget || "",
        overallcost: project2.overallcost || "",
        start_date: project2.start_date || "",
        end_date: project2.end_date || "",
        handler_by: project2.handler_by || "",
        handler_to: project2.handler_to || "",
        notes: project2.notes || "",
        status: project2.status || ""
      });
    }
  }, [project2]);
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const ProjectData = {
      data: {
        branchcode: formData.branchcode,
        campaign_code: formData.campaign_code,
        project_code: project2.project_code,
        client_code: formData.client_code,
        title: formData.title,
        priority: formData.priority,
        type: formData.type,
        loc: formData.loc,
        budget: formData.budget,
        overallcost: formData.overallcost,
        start_date: formData.start_date,
        end_date: formData.end_date,
        handler_by: formData.handler_by,
        handler_to: formData.handler_to,
        notes: formData.notes,
        status: formData.status
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/project/overview/edit`,
        ProjectData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Project Updated successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update Project");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating project");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookUser, { className: "inline mr-2" }),
        " Project Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tent, { className: "inline mr-1", size: 14 }),
            " Camapign Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "campaign_code",
              value: formData.campaign_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Briefcase, { className: "inline mr-1", size: 14 }),
            " Client Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "client_code",
              value: formData.client_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Network, { className: "inline mr-1", size: 14 }),
            " Project Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Project Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Map$1, { className: "inline mr-1", size: 14 }),
            " Location"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "loc",
              value: formData.loc,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Location",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
            " Department"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              value: selectedDepartment,
              onChange: (e) => {
                handleDepartmentChange(e.target.value);
                setFormData((prev) => ({
                  ...prev,
                  handler_by: "",
                  handler_to: ""
                }));
              },
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Handler By"
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "handler_by",
              value: formData.handler_by,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !selectedDepartment || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Handler To"
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "handler_to",
              value: formData.handler_to,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !selectedDepartment || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            "Priority"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "priority",
              value: formData.priority,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select priority" }),
                /* @__PURE__ */ jsx("option", { value: "minor", children: "Minor" }),
                /* @__PURE__ */ jsx("option", { value: "major", children: "Major" }),
                /* @__PURE__ */ jsx("option", { value: "critical", children: "Critical" }),
                /* @__PURE__ */ jsx("option", { value: "blocker", children: "Blocker" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Payment Details" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " Budget"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "budget",
              value: formData.budget,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Budget"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(IndianRupee, { className: "inline mr-1", size: 14 }),
            " Overall cost"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "overallcost",
              value: formData.overallcost,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Overallcost"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Project & Status" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Project Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "type",
              value: formData.type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "residential", children: "Residential" }),
                /* @__PURE__ */ jsx("option", { value: "commercial", children: "Commercial" }),
                /* @__PURE__ */ jsx("option", { value: "industrial", children: "Industrial" }),
                /* @__PURE__ */ jsx("option", { value: "land", children: "Land" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                /* @__PURE__ */ jsx("option", { value: "planning", children: "Planning" }),
                /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "lead_review", children: "Lead Review" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "revised", children: "Revised" }),
                /* @__PURE__ */ jsx("option", { value: "client_review", children: "Client_review" }),
                /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Notes & Summary"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "notes",
          value: formData.notes,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter lead summary and notes..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Project"
        }
      )
    ] })
  ] });
};
const useProjectStore = create(
  persist(
    (set) => ({
      allprojects: [],
      branchProject: [],
      Allmilestone: [],
      branchMilestone: [],
      allProjectcodeOptions: [],
      branchProjectOption: [],
      allMilestonecodeOptions: [],
      branchMilestonecodeOptions: [],
      isLoading: false,
      error: null,
      fetchProject: async (token, branchcode) => {
        try {
          set({ isLoading: true });
          const response = await axios.get(
            `${BASE_URL}/project/overview/read`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log("responseeeprojectzus", response.data.data);
          const branchResponse = await axios.get(
            `${BASE_URL}/project/overview/read`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          console.log("projectbranchzuz", branchResponse);
          const allMilestoneRes = await axios.get(
            `${BASE_URL}/project/milestone/read`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          const branchMilestoneRes = await axios.get(
            `${BASE_URL}/project/milestone/read?branchcode=${branchcode}`,
            {
              headers: { Authorization: `Bearer ${token}` }
            }
          );
          const allProjects = response.data.data || [];
          const branchProject = branchResponse.data.data || [];
          const Allmilestone = allMilestoneRes.data.data || [];
          const branchMilestone = branchMilestoneRes.data.data || [];
          const allProjectcodeOptions = [
            ...new Set(
              allProjects.map(
                (project2) => JSON.stringify({
                  value: project2.project_code,
                  label: project2.title
                })
              )
            )
          ].map((str) => JSON.parse(str));
          const branchProjectOption = [
            ...new Set(
              branchProject.map(
                (project2) => JSON.stringify({
                  value: project2.project_code,
                  label: project2.title
                })
              )
            )
          ].map((str) => JSON.parse(str));
          const allMilestonecodeOptions = [
            ...new Set(
              Allmilestone.map(
                (milestone) => JSON.stringify({
                  value: milestone.milestone_code,
                  label: milestone.miles_title
                })
              )
            )
          ].map((str) => JSON.parse(str));
          set({
            allProjects,
            branchProject,
            Allmilestone,
            branchMilestone,
            allProjectcodeOptions,
            branchProjectOption,
            allMilestonecodeOptions
          });
        } catch (error) {
          set({ error, isLoading: false });
        }
      }
    }),
    { name: "project-storage" }
  )
);
const ProjectMeetingForm = ({ project: project2, onSuccess, onCancel }) => {
  console.log("projectcodeee", project2);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [customTargets, setCustomTargets] = useState([]);
  const [branches, setBranches] = useState([]);
  const [teams, setTeams] = useState([]);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showParticipants, setShowParticipants] = useState(false);
  const [showCustomTargets, setShowCustomTargets] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const [filterTargets, setFilterTargets] = useState([
    {
      type: "",
      branchcode: "",
      teamId: "",
      staffType: "staff"
    }
  ]);
  const [formData, setFormData] = useState({
    branchcode: project2.branchcode,
    client_code: project2.client_code,
    project_code: project2.project_code,
    title: "",
    notes: "",
    comm_type: "meeting",
    status: "active",
    doc_status: "none",
    meet_link: "",
    start_date_time: "2025-02-01T00:00:00Z,",
    end_date_time: "2025-02-01T23:59:59Z",
    category: "branch",
    field: "custom",
    doc: [],
    custom: [],
    communication_participants: []
  });
  useEffect(() => {
    const fetchInitialData = async () => {
      try {
        const branchesRes = await axios.get(`${BASE_URL}/branch/dropdown`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        setBranches(branchesRes.data.result);
      } catch (err) {
        console.error("Error fetching initial data:", err);
        toast$1.error("Failed to load initial data");
      }
    };
    fetchInitialData();
  }, [token]);
  useEffect(() => {
    const branchcodes = [
      ...new Set(
        filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode)
      )
    ];
    const fetchTeamsForBranches = async () => {
      try {
        const teamsPromises = branchcodes.map(async (branchcode) => {
          const teamsRes = await axios.get(
            `${BASE_URL}/teams/read?branchcode=${branchcode}`,
            { headers: { Authorization: `Bearer ${token}` } }
          );
          return teamsRes.data.data;
        });
        const teamsResults = await Promise.all(teamsPromises);
        setTeams(teamsResults.flat());
      } catch (err) {
        console.error("Error fetching teams:", err);
        toast$1.error("Failed to load teams");
      }
    };
    if (branchcodes.length > 0) {
      fetchTeamsForBranches();
    }
  }, [filterTargets, token]);
  useEffect(() => {
    if (formData.category === "custom") {
      fetchCustomParticipants();
    } else if (formData.category === "branch" && formData.branchcode) {
      fetchBranchParticipants();
    } else if (formData.category === "team") {
      fetchTeamParticipants();
    }
  }, [formData.category, formData.branchcode, filterTargets]);
  const fetchBranchParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchTeamParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchCustomParticipants = async () => {
    try {
      const branchFilters = filterTargets.filter((target) => target.type === "branch" && target.branchcode).map((target) => target.branchcode);
      const teamFilters = filterTargets.filter(
        (target) => target.type === "team" && target.teamId && target.branchcode
      ).map((target) => {
        const teamIdParts = target.teamId.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        return `${target.branchcode}/TEAM/${teamId}`;
      });
      const teamBranchFilters = filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode);
      const allBranchFilters = [
        .../* @__PURE__ */ new Set([...branchFilters, ...teamBranchFilters])
      ];
      const staffTypeFilters = [];
      filterTargets.forEach((target) => {
        if (target.type === "branch" || target.type === "team") {
          if (target.staffType === "staff") staffTypeFilters.push("staff");
          if (target.staffType === "client") staffTypeFilters.push("client");
          if (target.staffType === "both") {
            staffTypeFilters.push("staff");
            staffTypeFilters.push("client");
          }
        }
      });
      const uniqueStaffTypes = [...new Set(staffTypeFilters)];
      console.log("Sending filter request with:", {
        branch: allBranchFilters,
        team: teamFilters,
        type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
      });
      if (allBranchFilters.length > 0 || teamFilters.length > 0) {
        const response = await axios.post(
          `${BASE_URL}/users/filter`,
          {
            branch: allBranchFilters,
            team: teamFilters,
            type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
          },
          { headers: { Authorization: `Bearer ${token}` } }
        );
        setStaffOptions([...response.data.staff, ...response.data.client]);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      console.error("Error fetching custom participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "category") {
      setCustomTargets([]);
      setFilterTargets([
        { type: "", branchcode: "", teamId: "", staffType: "staff" }
      ]);
    }
  };
  const handleFileUpload = (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const uploadedFiles = files.map((file) => ({
      file,
      // Store the actual File object
      name: file.name,
      type: file.type.split("/")[1] || "file"
    }));
    setFormData((prev) => ({
      ...prev,
      doc: [...prev.doc, ...uploadedFiles]
    }));
  };
  const removeFile = (index) => {
    setFormData((prev) => {
      const updatedFiles = [...prev.doc];
      updatedFiles.splice(index, 1);
      return { ...prev, doc: updatedFiles };
    });
  };
  const addParticipant = (person) => {
    if (!participants.some((p) => p.person_id === person.person_id)) {
      setParticipants([
        ...participants,
        {
          person_id: person.person_id,
          role: person.role,
          isdocvisible: formData.comm_type === "doc"
        }
      ]);
    }
  };
  const removeParticipant = (personId) => {
    setParticipants(participants.filter((p) => p.person_id !== personId));
  };
  const toggleDocVisibility = (personId) => {
    setParticipants(
      participants.map(
        (p) => p.person_id === personId ? { ...p, isdocvisible: !p.isdocvisible } : p
      )
    );
  };
  const addCustomTarget = (type, id) => {
    if (type === "team") {
      const target = filterTargets.find(
        (t) => t.type === "team" && t.teamId === id
      );
      if (target && target.branchcode) {
        const teamIdParts = id.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        const formattedId = `${target.branchcode}/TEAM/${teamId}`;
        if (!customTargets.some(
          (t) => t.target_id === formattedId && t.type === type
        )) {
          setCustomTargets([
            ...customTargets,
            { target_id: formattedId, type }
          ]);
        }
        return;
      }
    }
    if (!customTargets.some((t) => t.target_id === id && t.type === type)) {
      setCustomTargets([...customTargets, { target_id: id, type }]);
    }
  };
  const handleFilterTargetChange = (index, field, value) => {
    const updatedTargets = [...filterTargets];
    updatedTargets[index][field] = value;
    if (field === "type") {
      updatedTargets[index].branchcode = "";
      updatedTargets[index].teamId = "";
    } else if (field === "branchcode" && updatedTargets[index].type === "team") {
      updatedTargets[index].teamId = "";
    }
    setFilterTargets(updatedTargets);
  };
  const addFilterTarget = () => {
    setFilterTargets([
      ...filterTargets,
      { type: "", branchcode: "", teamId: "", staffType: "staff" }
    ]);
  };
  const removeFilterTarget = (index) => {
    var _a, _b, _c, _d;
    if (filterTargets.length > 1) {
      const updatedTargets = [...filterTargets];
      updatedTargets.splice(index, 1);
      setFilterTargets(updatedTargets);
      if (((_a = updatedTargets[index]) == null ? void 0 : _a.type) === "branch" && ((_b = updatedTargets[index]) == null ? void 0 : _b.branchcode)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "branch" && t.target_id === updatedTargets[index].branchcode)
          )
        );
      } else if (((_c = updatedTargets[index]) == null ? void 0 : _c.type) === "team" && ((_d = updatedTargets[index]) == null ? void 0 : _d.teamId)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "team" && t.target_id === updatedTargets[index].teamId)
          )
        );
      }
    }
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const meetingData = {
        branchcode: project2.branchcode,
        project_code: project2.project_code,
        title: formData.title,
        notes: formData.notes,
        comm_type: formData.comm_type,
        status: formData.status,
        meet_link: formData.meet_link,
        start_date_time: formData.start_date_time,
        end_date_time: formData.end_date_time,
        doc_status: formData.doc_status,
        category: formData.category,
        field: formData.field,
        custom: customTargets,
        communication_participants: participants
      };
      const formDataToSend = new FormData();
      formDataToSend.append("data", JSON.stringify([meetingData]));
      formData.doc.forEach((fileObj) => {
        formDataToSend.append("URL", fileObj.file);
      });
      console.log("formataaaanew form", formDataToSend);
      const response = await axios.post(
        `${BASE_URL}/doc_meet/create`,
        formDataToSend,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "multipart/form-data"
          }
        }
      );
      if (response.status === 201) {
        onSuccess();
        setFormData({
          branchcode: project2.branchcode,
          client_code: project2.client_code,
          project_code: project2.project_code,
          title: "",
          notes: "",
          comm_type: "meeting",
          status: "active",
          doc_status: "none",
          meet_link: "",
          start_date_time: "2025-02-01T00:00:00Z,",
          end_date_time: "2025-02-01T23:59:59Z",
          category: "branch",
          field: "custom",
          doc: [],
          custom: [],
          communication_participants: []
        });
      } else {
        setError(response.data.message || "Failed to create communication");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `Error creating ${formData.comm_type === "meeting" ? "meeting" : "document"}`
      );
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        formData.comm_type === "meeting" ? /* @__PURE__ */ jsx(Video, { className: "inline mr-2" }) : /* @__PURE__ */ jsx(FileUp, { className: "inline mr-2" }),
        formData.comm_type === "meeting" ? "Meeting Information" : "Document Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Title",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Title",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Type",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "meeting", children: "Meeting" }),
                /* @__PURE__ */ jsx("option", { value: "doc", children: "Document" }),
                /* @__PURE__ */ jsx("option", { value: "followup", children: "Follow-up" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "declined", children: "Declined" })
              ]
            }
          )
        ] }),
        formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Document Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "doc_status",
              value: formData.doc_status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "none", children: "None" }),
                /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Verified & Closed" }),
                /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" })
              ]
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Link$2, { className: "inline mr-1", size: 14 }),
            " Meeting Link",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "meet_link",
              value: formData.meet_link,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "url",
              placeholder: "https://meet.google.com/example",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date_time",
              value: formData.start_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " End Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date_time",
              value: formData.end_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Category",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "category",
              value: formData.category,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                /* @__PURE__ */ jsx("option", { value: "team", children: "Team" }),
                /* @__PURE__ */ jsx("option", { value: "all", children: "All" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Field"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "field",
              value: formData.field,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "project", children: "Project" }),
                /* @__PURE__ */ jsx("option", { value: "task", children: "Task" }),
                /* @__PURE__ */ jsx("option", { value: "lead", children: "Lead" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Notes...",
            required: true
          }
        )
      ] }),
      formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileUp, { className: "inline mr-1", size: 14 }),
          " Documents"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "file",
            id: "file-upload",
            multiple: true,
            onChange: handleFileUpload,
            className: "w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-primary)] file:text-white hover:file:bg-[var(--color-hover)]"
          }
        ),
        formData.doc.length > 0 && /* @__PURE__ */ jsx("div", { className: "mt-4 space-y-2", children: formData.doc.map((file, index) => /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
            children: [
              /* @__PURE__ */ jsx("span", { className: "text-sm", children: file.name }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => removeFile(index),
                  className: "text-red-500 hover:text-red-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ]
          },
          index
        )) })
      ] }),
      formData.category === "custom" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowCustomTargets(!showCustomTargets),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Custom Filters (",
                customTargets.length,
                ")"
              ] }),
              showCustomTargets ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showCustomTargets && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          filterTargets.map((target, index) => /* @__PURE__ */ jsxs(
            "div",
            {
              className: "space-y-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",
              children: [
                /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsxs("h5", { className: "text-sm font-medium", children: [
                    "Filter ",
                    index + 1
                  ] }),
                  filterTargets.length > 1 && /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeFilterTarget(index),
                      className: "text-red-500 hover:text-red-700 p-1",
                      children: /* @__PURE__ */ jsx(Minus, { size: 16 })
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Filter Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.type,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "type",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select filter type" }),
                          /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                          /* @__PURE__ */ jsx("option", { value: "team", children: "Team" })
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Branch" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.branchcode,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "branchcode",
                            e.target.value
                          );
                          handleFilterTargetChange(index, "teamId", "");
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select branch" }),
                          branches.map((branch2) => /* @__PURE__ */ jsxs(
                            "option",
                            {
                              value: branch2.branchcode,
                              children: [
                                branch2.branchcode,
                                " - ",
                                branch2.name
                              ]
                            },
                            branch2.branchcode
                          ))
                        ]
                      }
                    )
                  ] }),
                  target.type === "team" && target.branchcode && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.teamId,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "teamId",
                            e.target.value
                          );
                          if (e.target.value) {
                            addCustomTarget("team", e.target.value);
                          }
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select team" }),
                          teams.filter(
                            (team) => team.branchcode === target.branchcode
                          ).map((team) => /* @__PURE__ */ jsx("option", { value: team.team_id, children: team.team_name }, team.team_id))
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.staffType,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "staffType",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "staff", children: "Staff" }),
                          /* @__PURE__ */ jsx("option", { value: "client", children: "Client" }),
                          /* @__PURE__ */ jsx("option", { value: "both", children: "Both" })
                        ]
                      }
                    )
                  ] })
                ] }),
                target.type === "branch" && target.branchcode && /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: () => addCustomTarget("branch", target.branchcode),
                    className: "text-xs bg-red-700 hover:bg-red-700 text-white px-2 py-1 rounded",
                    children: "Add Branch Filter"
                  }
                ) })
              ]
            },
            index
          )),
          /* @__PURE__ */ jsxs(
            "button",
            {
              type: "button",
              onClick: addFilterTarget,
              className: "flex items-center text-sm text-blue-500 hover:text-blue-700",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Another Filter"
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowParticipants(!showParticipants),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Participants (",
                participants.length,
                ")"
              ] }),
              showParticipants ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showParticipants && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: formData.category === "custom" ? "Select participants from filtered results" : `Select participants from ${formData.category}` }),
            staffOptions.length > 0 ? /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: staffOptions.map((person) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    person.person_id,
                    " (",
                    person.role,
                    ")"
                  ] }),
                  participants.some(
                    (p) => p.person_id === person.person_id
                  ) ? /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeParticipant(person.person_id),
                      className: "text-red-500 hover:text-red-700",
                      children: /* @__PURE__ */ jsx(X, { size: 16 })
                    }
                  ) : /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => addParticipant(person),
                      className: "text-green-500 hover:text-green-700",
                      children: /* @__PURE__ */ jsx(Check, { size: 16 })
                    }
                  )
                ]
              },
              person.person_id
            )) }) : /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "No participants available based on current filters" })
          ] }),
          participants.length > 0 && /* @__PURE__ */ jsxs("div", { className: "mt-4", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: "Selected Participants" }),
            /* @__PURE__ */ jsx("div", { className: "space-y-2", children: participants.map((participant) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    participant.person_id,
                    " (",
                    participant.role,
                    ")"
                  ] }),
                  /* @__PURE__ */ jsxs("div", { className: "flex items-center space-x-2", children: [
                    formData.comm_type === "doc" && /* @__PURE__ */ jsxs("label", { className: "flex items-center space-x-1", children: [
                      /* @__PURE__ */ jsx(
                        "input",
                        {
                          type: "checkbox",
                          checked: participant.isdocvisible,
                          onChange: () => toggleDocVisibility(participant.person_id),
                          className: "rounded"
                        }
                      ),
                      /* @__PURE__ */ jsx("span", { className: "text-xs", children: "View Doc" })
                    ] }),
                    /* @__PURE__ */ jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => removeParticipant(participant.person_id),
                        className: "text-red-500 hover:text-red-700",
                        children: /* @__PURE__ */ jsx(X, { size: 16 })
                      }
                    )
                  ] })
                ]
              },
              participant.person_id
            )) })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.comm_type === "meeting" ? "Create Meeting" : "Upload Document"
        }
      )
    ] })
  ] });
};
const Project = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const [sortOrder, setSortOrder] = useState("");
  const [selectedPriority, setSelectedPriority] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [selectedFilterType, setSelectedFilterType] = useState("");
  const [selectedPayStatus, setSelectedPayStatus] = useState("");
  const {
    fetchProject
  } = useProjectStore();
  const branchcode = useAuthStore((state) => state.branchcode);
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const managerOptions = [{
    value: "",
    label: "All Priority"
  }, {
    value: "minor",
    label: "Minor Projects"
  }, {
    value: "major",
    label: "Major Project"
  }, {
    value: "critical",
    label: "Critical Project"
  }, {
    value: "blocker",
    label: "Blocker Project"
  }];
  const statusOptions = [{
    value: "",
    label: "All Projects"
  }, {
    value: "active",
    label: "Active Projects"
  }, {
    value: "draft",
    label: "Draft Project"
  }, {
    value: "planning",
    label: "Planning Project"
  }, {
    value: "paused",
    label: "Paused Project"
  }, {
    value: "completed",
    label: "Completed Project"
  }, {
    value: "revised",
    label: "Revised Project"
  }, {
    value: "client_review",
    label: "Client Review Project"
  }, {
    value: "drop",
    label: "Drop Project"
  }];
  const filterTypeOptions = [{
    value: "",
    label: "All Types"
  }, {
    value: "upcoming",
    label: "Upcoming Projects"
  }, {
    value: "custom",
    label: "Custom Projects"
  }, {
    value: "deadline",
    label: "Deadline Projects"
  }];
  const payStatusOptions = [{
    value: "",
    label: "All Payment Status"
  }, {
    value: "paid",
    label: "Paid"
  }, {
    value: "payment_closed",
    label: "Payment Closed"
  }, {
    value: "request",
    label: "Payment Request"
  }, {
    value: "none",
    label: "No Payment"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchProject(token, branchcode);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, priority = selectedPriority, branchCode = selectedBranchCode, sort = sortOrder, filterStartDate = startDate, filterEndDate = endDate, filterType = selectedFilterType, payStatus = selectedPayStatus) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/overview/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (priority) url += `&priority=${priority}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      if (filterStartDate) url += `&start_date=${formatDate2(filterStartDate)}`;
      if (filterEndDate) url += `&end_date=${formatDate2(filterEndDate)}`;
      if (filterType) url += `&filter_type=${filterType}`;
      if (payStatus) url += `&paystatus=${payStatus}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching project list", error2);
      setError("Failed to fetch project");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    const d = new Date(date);
    let month = "" + (d.getMonth() + 1);
    let day = "" + d.getDate();
    const year = d.getFullYear();
    if (month.length < 2) month = "0" + month;
    if (day.length < 2) day = "0" + day;
    return [year, month, day].join("-");
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedPriority, selectedBranchCode, sortOrder, pageSize, startDate, endDate, selectedFilterType, selectedPayStatus]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Project added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (project2) => {
    setShowDeleteModal(true);
    setDeleteData(project2);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/project/overview/delete`, {
        data: deletedData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Project Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedPriority(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleStartDateChange = (date) => {
    setStartDate(date);
    setCurrentPage(1);
  };
  const handleEndDateChange = (date) => {
    setEndDate(date);
    setCurrentPage(1);
  };
  const handleFilterTypeChange = (value) => {
    setSelectedFilterType(value);
    setCurrentPage(1);
  };
  const handlePayStatusChange = (value) => {
    setSelectedPayStatus(value);
    setCurrentPage(1);
  };
  const clearDateFilters = () => {
    setStartDate(null);
    setEndDate(null);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Project_Code"
  }, {
    data: "Project Name"
  }, {
    data: "Client_Code"
  }, {
    data: "Type"
  }, {
    data: "Budget"
  }, {
    data: "Duration_Days"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((project2, index) => ({
      id: project2.id,
      data: [{
        data: index + 1
      }, {
        data: project2.branchcode
      }, {
        data: project2.project_code
      }, {
        data: project2.title
      }, {
        data: project2.client_code
      }, {
        data: project2.type
      }, {
        data: project2.budget
      }, {
        data: project2.duration_days
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${project2.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), project2.status.charAt(0).toUpperCase() + project2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex  justify-center gap-2",
          children: [/* @__PURE__ */ jsx(Link$1, {
            to: `/project/${project2.project_code}`,
            children: /* @__PURE__ */ jsx("button", {
              className: " px-4 py-2 dark:text-blue-600 text-blue-700 rounded-sm",
              children: /* @__PURE__ */ jsx(Eye, {
                className: "inline",
                size: 20
              })
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(project2),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(project2),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "ProjectList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Project Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Project", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Project Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedPriority,
              onSelect: handleManagerChange,
              placeholder: "Priority",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: filterTypeOptions,
              selectedValue: selectedFilterType,
              onSelect: handleFilterTypeChange,
              placeholder: "Filter Type",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: payStatusOptions,
              selectedValue: selectedPayStatus,
              onSelect: handlePayStatusChange,
              placeholder: "Payment Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[180px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search projects...",
                className: "w-full"
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: `w-full md:w-[200px] z-[15]`,
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-xs text-gray-500 dark:text-gray-400 mb-1 z-500",
                children: "Start Date"
              }), /* @__PURE__ */ jsx(DatePicker, {
                selected: startDate,
                onChange: handleStartDateChange,
                selectsStart: true,
                startDate,
                endDate,
                className: "w-full p-2 border rounded-md text-sm z-[15]",
                placeholderText: "Select start date"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: `w-full md:w-[200px] z-[15]`,
              children: [/* @__PURE__ */ jsx("label", {
                className: "block text-xs text-gray-500 dark:text-gray-400 mb-1 z-[15]",
                children: "End Date"
              }), /* @__PURE__ */ jsx(DatePicker, {
                selected: endDate,
                onChange: handleEndDateChange,
                selectsEnd: true,
                startDate,
                endDate,
                minDate: startDate,
                className: "w-full p-2 border rounded-md text-sm z-[15]",
                placeholderText: "Select end date"
              })]
            }), (startDate || endDate) && /* @__PURE__ */ jsx("button", {
              onClick: clearDateFilters,
              className: "h-[40px] text-white bg-red-700 hover:bg-red-800 px-2 py-1 rounded-sm text-sm",
              children: "Clear Dates"
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "projects",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Project",
      children: /* @__PURE__ */ jsx(AddNewProject, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Project",
      children: /* @__PURE__ */ jsx(EditProjectForm, {
        project: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Branch Meeting",
      children: /* @__PURE__ */ jsx(ProjectMeetingForm, {
        project: selectedBranch,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Project",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx(Network, {
              className: "inline mr-2"
            }), " Delete Project"]
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 text-sm font-medium text-center",
            children: "Are you sure you want to delete this Project?"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(ClipboardType, {
                  className: "inline mr-1",
                  size: 14
                }), " Type"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "delete_type",
                value: inActiveData.delete_type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Type"
                }), /* @__PURE__ */ jsx("option", {
                  value: "temp",
                  children: "Temporary"
                }), /* @__PURE__ */ jsx("option", {
                  value: "permanent",
                  children: "Permanent"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(Tag, {
                  className: "inline mr-1",
                  size: 14
                }), " Status"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                value: inActiveData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "draft",
                  children: "Draft"
                }), /* @__PURE__ */ jsx("option", {
                  value: "planning",
                  children: "Planning"
                }), /* @__PURE__ */ jsx("option", {
                  value: "active",
                  children: "Active"
                }), /* @__PURE__ */ jsx("option", {
                  value: "paused",
                  children: "Paused"
                }), /* @__PURE__ */ jsx("option", {
                  value: "completed",
                  children: "Completed"
                }), /* @__PURE__ */ jsx("option", {
                  value: "revised",
                  children: "Revised"
                }), /* @__PURE__ */ jsx("option", {
                  value: "client_review",
                  children: "Client_review"
                }), /* @__PURE__ */ jsx("option", {
                  value: "drop",
                  children: "Drop"
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? "Processing..." : "Confirm"
          })]
        })]
      })
    })]
  });
};
const Project$1 = withComponentProps(Project);
const route14 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Project$1
}, Symbol.toStringTag, { value: "Module" }));
const userProfiles = "data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAGGwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAABAA0ABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAALkAAAC5AAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEAYIDBAAABiNtZGF0EgAKChkmbjuPggIaDQgyigwRQAEEEEFA9LrNyy9Il6LMWWcCoG7e3fR+Ni4S+KmSHgWobWA8OsnC3u3o61LIvkaxlreqbd2Ps5kMLUV8/8+APk09mJaYq6FDDNHnJHnv4s6hfMfBNeBTGdrk4uDU8C3d/0mKYpteaAhCH5bacXE5llb2oSCTUIRNFx++277Xl4bgaHU+Z9DjTE9rKAh783wRovToyhRDx8vnFClcQDAQkPQYEJ4U5nUXNHp/wiUV2xQ3t7fw2339dC9kwI3rJWPLTDGkb2MV/JGGV+GVhvrRsYF7YVYSfkQT6JevoB9/jQSV7l8boxofb6zKZqaQKJr0qf6YDM0GPX8QvD+qir3klaLwuZsB8zMRWrNihA5QfIjHTllOB5BTFSKJsQSuKl01Yq0AVElHKwdAn2jE18Rk9ejNCipux7WBTOMpedKbBO5URgY3ZOxAgN73jIdinoXpkxPTg7cUx57ebgNpEfWJOuQYvfkOV98NCE2BiJKOBrXkyPcvgvCjgT6ZOWbNqzlpaBqthVMLYCkKBBdk066aX/YutUej9rYoJcYnt5ojLZwI2p6ucCckWDNi+GhUOR/2LG7dgy4a5p6dqU56pF9GmxEKvRNXln5NU0jp4VEnXNFWibzQDqASWT13o1/lgnUnyzGdwDs5fno9zfftTEJVep11HyyvrtNPntkp0ZzQBS7okE77YztZvDbYlJS60KR2QhNRlLt0syffLR6/G7IdAR41TC9WQ3SUU/arMvk/eme+iSZWBtSaZaSyfX7GG5Z4rqWzOHAqHF9A7GU4nKwRe5eDUAu8rRG3SgTacUHIxKoL1YqziDLvn1GzhnikP40k8CraplEEP1Ohcvgk4cCFcNs+CIphTB3lxX3/dQ+HFsJtQ4zCykrYImLVhvH2gdeHA1hFErMY04rGZIwkSz+WomBwy6XRyN3BqwkrY1IPOvtYIaHM6BcX7iYvxkAQuPbIASwo7UKzMTmRA+wSIFuSgqjr9EECQsq7dmNixzrSjTk1Q86Dr0aovkNvfAG9MPv8kkXrz2dYBG67CvidH2ChsWteQsgrVc9kpRj4sSrQ0ZGFWu7iYEiRk2FGejsY3FerwHmDwm+JiE6zRaGP0xkZSo7KpejcuKXHrrRN1nwMFtGW4n26hDQV339PmANf29bQGI7j3yoK4qSkiy3xjfGVE/gpeKiytIZF2S1wna/6LV1XSJXfpkpwKPqPwYlSmjSvQPM7gIxGxrZaEwOFj2N3BJFZerq5fdvnAy+g5XPnX+h1oycq8PMB8d9fWNJP0SM/JfM/34e0KjGEZQaNpFgsEcHqpNfw1x6vPO4fuhcSgjiYrvoBYhMy99TQfrVtnKwsXwcE4ioKtK94A7+aASv/O4XQ1sTyU1vZ8sfB3exBqBRtytV1ZNYeUmWyKdUu/2CGNszx9VMxatjDXMFipw25X+FC736PbmL1lzfOKWVrii1AhpQCkj/zQy2sG3pnutOSQUguhPW3XaX8JY5+auZowGLceHGGUDQg6tBpSmXp4p/dqkjCjfu0xX3DukSgjkrrx0Q2NXwfxqzJ1TvKnq+hZJysz+Qhu4wj2mA6Z13BQzZMJedbBGf1msTKjJdxFi/o8o1DHMph1+Bk4dWw+GIcDY65lV+yG5U+dWkLjwKS6DpHZUJvvdDV51m/ZgTNTpa/0coYWpa5kPgGKBBRoPvBhxgtDAUvtXkZmUG93LhfUAIQDr8F7ZxH+MAWTHrn7LVTGaXWzNDHjjiBGkZwxLGjYYqV8lQtx0NJ8+G1Rg54LO27VkcroFC76eBLL90Jb9Ln1WkXYsKEelODXYQ0kHsV/qkWIgoifUPJPYr6+YF8jYmN0wDMI2nFDE/j7qT0nr7px5eeiYfDFg7iXuzdaUi36X/0hJNISzYs6LNoadn9kG6FASBdgxcSlqwJ9c2XJjF5GiCfU7GS0UZ6dDRhsefdke9lm4skSbMPEeAd+g5O8RD4FuoP+UkcMR1Uzxk3dNJK62SuyRDdZSWIgMr8WQ9+RQ7URRx2OBv+2d9kUrdcSZ7Lcn7crX3YXR/myaUrl6L5+1RVNcqr4s2M";
const UserRoles = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [selectedFilter, setSelectedFilter] = useState("");
  const data = [{
    id: "1",
    name: "Bharathi",
    email: "bharathi@gmail.com",
    position: "Team Lead"
  }, {
    id: "2",
    name: "Bharathi",
    email: "bharathi@gmail.com",
    position: "Team Lead"
  }];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  const thead = () => [{
    data: "id"
  }, {
    data: "name"
  }, {
    data: "email"
  }, {
    data: "Position"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((user) => ({
      id: user.id,
      data: [{
        data: user.id
      }, {
        data: user.name
      }, {
        data: user.email
      }, {
        data: user.position
      }]
    }));
  };
  const filterOptions = [{
    value: "client",
    label: "Client"
  }, {
    value: "Project",
    label: "Project"
  }, {
    value: "Leads",
    label: "Leads"
  }, {
    value: "Employee",
    label: "Employee"
  }];
  const statusOptions = [{
    value: "Pending",
    label: "Pending"
  }, {
    value: "Paid",
    label: "Paid"
  }, {
    value: "Un Paid",
    label: "Un-Paid"
  }];
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [/* @__PURE__ */ jsx("h2", {
        className: "text-xl font-semibold mb-4 text-red-700 dark:text-red-700",
        children: "User List "
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx(Dropdown, {
          options: filterOptions,
          selectedValue: selectedFilter,
          onSelect: setSelectedFilter,
          placeholder: "Filter By",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(Dropdown, {
          options: statusOptions,
          selectedValue: selectStatus,
          onSelect: setSelectStatus,
          placeholder: "Payment Status",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(Dropdown, {
          options: filterOptions,
          selectedValue: selectedFilter,
          onSelect: setSelectedFilter,
          placeholder: "Sort by",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(SearchInput, {
          value: searchTerm,
          onChange: setSearchTerm,
          placeholder: "Search users..."
        })]
      }), /* @__PURE__ */ jsx(DataTable, {
        thead,
        tbody,
        isSearch: true,
        actionIcons: ["Eye", "Edit", "Trash2"]
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "sticky bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
      children: /* @__PURE__ */ jsx(CustomPagination, {
        total: 100,
        currentPage,
        defaultPageSize: 10,
        onChange: setCurrentPage,
        paginationLabel: "employees",
        isScroll: true
      })
    })]
  });
};
const UserRoles$1 = withComponentProps(UserRoles);
const route46 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: UserRoles$1
}, Symbol.toStringTag, { value: "Module" }));
const AddMilestone = ({ project: project2, onSuccess, onCancel }) => {
  console.log("projectdataaaa>>>>>", project2);
  const [loading, setLoading] = useState(false);
  useClientStore((state) => state.clientscodeOptions);
  const [error, setError] = useState(null);
  useProjectStore(
    (state) => state.allProjectcodeOptions
  );
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(project2.branchcode);
  useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    branchcode: "",
    // project_code: "",
    milestone_code: "",
    miles_title: "",
    milestone_type: "",
    start_date: "",
    end_date: "",
    base_amount: 0,
    additional_amount: 0,
    revision_reason: "",
    handler_by: "",
    approved_staff_id: "",
    isrevised: false,
    status: "draft"
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const milestoneData = {
      data: [
        {
          branchcode: project2.branchcode,
          project_code: project2.project_code,
          milestone_code: formData.milestone_code,
          miles_title: formData.miles_title,
          milestone_type: formData.milestone_type,
          start_date: formData.start_date,
          end_date: formData.end_date,
          base_amount: Number(formData.base_amount),
          additional_amount: Number(formData.additional_amount),
          revision_reason: formData.revision_reason,
          handler_by: formData.handler_by,
          approved_staff_id: formData.approved_staff_id,
          isrevised: formData.isrevised === "true",
          status: formData.status
        }
      ]
    };
    console.log("formdataaa>>>", formData);
    try {
      const response = await axios.post(
        `${BASE_URL}/project/milestone/create`,
        milestoneData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create lead");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating lead");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Flag, { className: "inline mr-2" }),
        " Milestone Information"
      ] }),
      /* @__PURE__ */ jsxs("h2", { className: "text-md font-medium text-red-700 dark:text-gray-300 mt-2 text-center ", children: [
        /* @__PURE__ */ jsx("span", { className: "text-gray-600 mr-4", children: " Project Duration: " }),
        formatDate(project2.start_date),
        " - ",
        formatDate(project2.end_date)
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Milestone Code Milestone Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "milestone_code",
              value: formData.milestone_code,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter milestone code"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Milestone Title"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "miles_title",
              value: formData.miles_title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter milestone name"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Milestone Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "milestone_type",
              value: formData.milestone_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "initial", children: "Initial" }),
                /* @__PURE__ */ jsx("option", { value: "revision-minor", children: "Minor Revision" }),
                /* @__PURE__ */ jsx("option", { value: "revision-major", children: "Major Revision" }),
                /* @__PURE__ */ jsx("option", { value: "feature_add", children: "Feature Add" }),
                /* @__PURE__ */ jsx("option", { value: "bug_fix", children: "Changes Fix" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
          " Department"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            value: selectedDepartment,
            onChange: (e) => {
              handleDepartmentChange(e.target.value);
              setFormData((prev) => ({
                ...prev,
                handler_by: "",
                handler_to: ""
              }));
            },
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
              departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Select Handler By"
        ] }),
        isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
          "select",
          {
            name: "handler_by",
            value: formData.handler_by,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            disabled: !selectedDepartment || staffOptions.length === 0,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
              staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        ),
        selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Select Approved Staff Id"
        ] }),
        isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
          "select",
          {
            name: "approved_staff_id",
            value: formData.approved_staff_id,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            disabled: !selectedDepartment || staffOptions.length === 0,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
              staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        ),
        selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
              /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
              /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
              /* @__PURE__ */ jsx("option", { value: "verified", children: "Verified" }),
              /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
              /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Revised Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "isrevised",
            value: formData.isrevised,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "true", children: "Is Revised" }),
              /* @__PURE__ */ jsx("option", { value: "false", children: "Not Revised" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-2" }),
        " Reason"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(Target, { className: "inline mr-1", size: 14 }),
          " Revision Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "revision_reason",
            value: formData.revision_reason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "List the key deliverables for this milestone..."
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Milestone"
        }
      )
    ] })
  ] });
};
const EditMilestoneForm = ({ project: project2, milestone, onSuccess, onCancel }) => {
  console.log("projecttttdataaa", project2);
  useBranchStore$1((state) => state.branchCodeOptions);
  const [loading, setLoading] = useState(false);
  useClientStore((state) => state.clientscodeOptions);
  const [error, setError] = useState(null);
  useProjectStore(
    (state) => state.allProjectcodeOptions
  );
  const employeeOption = useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    branchcode: "",
    project_code: "",
    milestone_code: "",
    miles_title: "",
    milestone_type: "",
    start_date: "",
    end_date: "",
    base_amount: 0,
    additional_amount: 0,
    revision_reason: "",
    handler_by: "",
    approved_staff_id: "",
    isrevised: false,
    status: "draft"
  });
  useEffect(() => {
    if (milestone) {
      const formattedStartDate = milestone.start_date ? milestone.start_date.split("T")[0] : "";
      const formattedEndDate = milestone.end_date ? milestone.end_date.split("T")[0] : "";
      setFormData({
        branchcode: milestone.branchcode || "",
        project_code: milestone.project_code || "",
        milestone_code: milestone.milestone_code || "",
        miles_title: milestone.miles_title || "",
        milestone_type: milestone.milestone_type || "",
        start_date: formattedStartDate,
        end_date: formattedEndDate,
        base_amount: Number(milestone.base_amount) || 0,
        additional_amount: Number(milestone.additional_amount) || 0,
        revision_reason: milestone.revision_reason || "",
        handler_by: milestone.handler_by || "",
        approved_staff_id: milestone.approved_staff_id || "",
        isrevised: milestone.isrevised === true || milestone.isrevised === "true",
        status: milestone.status || "draft"
      });
    }
  }, [milestone]);
  const handleChange = (e) => {
    const { name, value, type } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: type === "checkbox" ? e.target.checked : value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const milestoneData = {
      data: {
        branchcode: formData.branchcode,
        project_code: formData.project_code,
        milestone_code: formData.milestone_code,
        miles_title: formData.miles_title,
        milestone_type: formData.milestone_type,
        start_date: formData.start_date,
        end_date: formData.end_date,
        base_amount: Number(formData.base_amount),
        additional_amount: Number(formData.additional_amount),
        revision_reason: formData.revision_reason,
        handler_by: formData.handler_by,
        approved_staff_id: formData.approved_staff_id,
        isrevised: formData.isrevised,
        status: formData.status
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/project/milestone/edit`,
        milestoneData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update milestone");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating milestone");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Flag, { className: "inline mr-2" }),
        " Milestone Information"
      ] }),
      /* @__PURE__ */ jsxs("h2", { className: "text-md font-medium text-red-700 dark:text-gray-300 mt-2 text-center ", children: [
        /* @__PURE__ */ jsx("span", { className: "text-gray-600 mr-4", children: " Project Duration: " }),
        formatDate(project2.start_date),
        " - ",
        formatDate(project2.end_date)
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Milestone Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "milestone_code",
              value: formData.milestone_code,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter milestone code",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Milestone Title"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "miles_title",
              value: formData.miles_title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter milestone name"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Related Project"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "project_code",
              value: formData.project_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Milestone Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "milestone_type",
              value: formData.milestone_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "initial", children: "Initial" }),
                /* @__PURE__ */ jsx("option", { value: "revision-minor", children: "Minor Revision" }),
                /* @__PURE__ */ jsx("option", { value: "revision-major", children: "Major Revision" }),
                /* @__PURE__ */ jsx("option", { value: "feature_add", children: "Feature Add" }),
                /* @__PURE__ */ jsx("option", { value: "bug_fix", children: "Changes Fix" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Banknote, { className: "inline mr-1", size: 14 }),
            " Milestone Base Amount"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "base_amount",
              value: formData.base_amount,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter amount"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " Additional Amount"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "additional_amount",
              value: formData.additional_amount,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter Additional Amount"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Assigned To"
        ] }),
        /* @__PURE__ */ jsx(
          "select",
          {
            name: "handler_by",
            value: formData.handler_by,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: employeeOption == null ? void 0 : employeeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Select Approved Staff"
        ] }),
        /* @__PURE__ */ jsx(
          "select",
          {
            name: "approved_staff_id",
            value: formData.approved_staff_id,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: employeeOption == null ? void 0 : employeeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
              /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
              /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
              /* @__PURE__ */ jsx("option", { value: "verified", children: "Verified" }),
              /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
              /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Revised Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "isrevised",
            value: formData.isrevised ? "true" : "false",
            onChange: (e) => setFormData((prev) => ({
              ...prev,
              isrevised: e.target.value === "true"
            })),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "true", children: "Is Revised" }),
              /* @__PURE__ */ jsx("option", { value: "false", children: "Not Revised" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-2" }),
        " Reason"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(Target, { className: "inline mr-1", size: 14 }),
          " Revision Reason"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "revision_reason",
            value: formData.revision_reason,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "List the key deliverables for this milestone..."
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Milestone"
        }
      )
    ] })
  ] });
};
const Milestone = ({ projectData }) => {
  console.log("projectdataaa", projectData);
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedPriority, setSelectedPriority] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const project_code = projectData.project_code;
  console.log("project codeeemiles", project_code);
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOptions = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [
    { value: "", label: "All Milestone" },
    { value: "draft", label: "Draft Milestone" },
    { value: "active", label: "Active Milestone" },
    { value: "paused", label: "Paused Milestone" },
    { value: "completed", label: "Completed Milestone" },
    { value: "archived", label: "Archived Milestone" },
    { value: "drop", label: "Drop Milestone" }
  ];
  const priorityOptions = [
    { value: "", label: "All Milestone Type" },
    { value: "initial", label: "Initial Level" },
    { value: "revision", label: "Revision Level" },
    { value: "feature_add", label: "Feature_add Level" },
    { value: "bug_fix", label: "Change Fix Level" },
    { value: "feature_remove", label: "Feature Remove Level" }
  ];
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, priority = selectedPriority, branchCode2 = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/milestone/read?project_code=${project_code}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (priority) url += `&priority=${priority}`;
      if (branchCode2) url += `&branchcode=${branchCode2}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.length) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedPriority,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Milestone created successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (milestone) => {
    setShowDeleteModal(true);
    setDeleteData(milestone);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        milestone_code: deleteData.milestone_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/project/milestone/delete`,
        {
          data: deletedData,
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Milestone Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting milestone", error2);
      toast$1.error("Failed to delete milestone");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedPriority(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Branch Code" },
    { data: "Milestone Name" },
    { data: "Duration Days" },
    // { data: "Base Amount" },
    // { data: "Total Amount" },
    { data: "Milestone Status" },
    { data: "Total Task" },
    { data: "Archivedtask" },
    { data: "Total Duration" },
    { data: "Status" },
    { data: "Actions", className: "text-center" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2, index) => ({
      id: branch2.id,
      data: [
        { data: index + 1 },
        { data: branch2.branchcode },
        { data: branch2.miles_title },
        { data: branch2.duration_days },
        // { data: branch.base_amount },
        // { data: branch.total_amount },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.isrevised === false ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${branch2.isrevised === false ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                branch2.isrevised === false ? "No Revision" : "Revision"
              ]
            }
          )
        },
        { data: branch2.totaltask_count },
        { data: branch2.archivedtask_count },
        { data: branch2.totalprojectworkinghrsduration },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "active" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex  justify-center gap-2", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/milestone/${branch2.milestone_code}`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1  text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(branch2),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(branch2),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Milestone Updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Milestone Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", { className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`, children: [
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setShowCreateModal(true),
                  className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                  children: [
                    !isMobile && "Add Milestone",
                    " +"
                  ]
                }
              )
            ] })
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: statusOptions,
                      selectedValue: selectStatus,
                      onSelect: handleStatusChange,
                      placeholder: "Branch Status",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: priorityOptions,
                      selectedValue: selectedPriority,
                      onSelect: handleManagerChange,
                      placeholder: "Manager",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`, children: /* @__PURE__ */ jsx(
                    SearchInput,
                    {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search branches...",
                      className: "w-full"
                    }
                  ) })
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "Add New Milestone",
        children: /* @__PURE__ */ jsx(
          AddMilestone,
          {
            project: projectData,
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false),
            projectData
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "Edit Milestone",
        children: /* @__PURE__ */ jsx(
          EditMilestoneForm,
          {
            project: projectData,
            milestone: selectedBranch,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "Drop Milestone",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(Network, { className: "inline mr-2" }),
              " Drop Milestone"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 text-sm font-medium text-center", children: "Are you sure you want to Drop this Milestone?" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(ClipboardType, { className: "inline mr-1", size: 14 }),
                  " Type"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "delete_type",
                    value: inActiveData.delete_type,
                    onChange: handleChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    required: true,
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Type" }),
                      /* @__PURE__ */ jsx("option", { value: "temp", children: "Temporary" }),
                      /* @__PURE__ */ jsx("option", { value: "permanent", children: "Permanent" })
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
                  " Status"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "status",
                    value: inActiveData.status,
                    onChange: handleChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    required: true,
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                      /* @__PURE__ */ jsx("option", { value: "planning", children: "Planning" }),
                      /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                      /* @__PURE__ */ jsx("option", { value: "paused", children: "Paused" }),
                      /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                      /* @__PURE__ */ jsx("option", { value: "revised", children: "Revised" }),
                      /* @__PURE__ */ jsx("option", { value: "client_review", children: "Client_review" }),
                      /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
                    ]
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowDeleteModal(false),
                disabled: loading,
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                onClick: handleDeleteSubmit,
                disabled: loading,
                children: loading ? "Processing..." : "Confirm"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
const AddNewTaskForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [teamOptions, setTeamOptions] = useState([]);
  const [teamMembers, setTeamMembers] = useState([]);
  const [projectOptions, setProjectOptions] = useState([]);
  const [milestoneOptions, setMilestoneOptions] = useState([]);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [formData, setFormData] = useState({
    branchcode: "",
    project_code: "",
    milestone_code: "",
    task_title: "",
    task_priority: "",
    start_date: "",
    end_date: "",
    team_id: "",
    handler_by: "",
    notes: "",
    collaborate: [
      {
        subtask_title: "",
        staff_id: "",
        status: "open"
      }
    ],
    status: "draft"
  });
  useEffect(() => {
    if (formData.branchcode) {
      fetchTeams(formData.branchcode);
      fetchProjects(formData.branchcode);
    } else {
      setTeamOptions([]);
      setTeamMembers([]);
      setProjectOptions([]);
      setMilestoneOptions([]);
    }
  }, [formData.branchcode]);
  useEffect(() => {
    if (formData.project_code) {
      fetchMilestones(formData.project_code);
    } else {
      setMilestoneOptions([]);
    }
  }, [formData.project_code]);
  useEffect(() => {
    if (formData.team_id) {
      fetchTeamMembers(formData.team_id);
    } else {
      setTeamMembers([]);
    }
  }, [formData.team_id]);
  const fetchTeams = async (branchcode) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read?branchcode=${branchcode}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((team) => ({
          value: team.team_id,
          label: team.team_name,
          team_lead: team.team_lead
        }));
        setTeamOptions(options);
      }
    } catch (err) {
      console.error("Error fetching teams:", err);
      toast$1.error("Failed to load teams");
    }
  };
  const fetchProjects = async (branchcode) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/project/overview/dropdown?branchcode=${branchcode}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((project2) => ({
          value: project2.project_code,
          label: project2.title
        }));
        setProjectOptions(options);
      }
    } catch (err) {
      console.error("Error fetching projects:", err);
      toast$1.error("Failed to load projects");
    }
  };
  const fetchMilestones = async (project_code) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/project/milestone/dropdown?project_code=${project_code}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((milestone) => ({
          value: milestone.milestone_code,
          label: milestone.miles_title
        }));
        setMilestoneOptions(options);
      }
    } catch (err) {
      console.error("Error fetching milestones:", err);
      toast$1.error("Failed to load milestones");
    }
  };
  const fetchTeamMembers = async (teamId) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read/profile?team_id=${teamId}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const members = response.data.data.members.filter(
          (member) => member.role !== "lead"
        );
        setTeamMembers(members);
        const teamLead = response.data.data.members.find(
          (member) => member.role === "lead"
        );
        if (teamLead) {
          setFormData((prev) => ({
            ...prev,
            handler_by: teamLead.staff_id
          }));
        }
      }
    } catch (err) {
      console.error("Error fetching team members:", err);
      toast$1.error("Failed to load team members");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    if (name === "branchcode") {
      setFormData((prev) => ({
        ...prev,
        [name]: value,
        project_code: "",
        milestone_code: ""
      }));
    } else if (name === "project_code") {
      setFormData((prev) => ({
        ...prev,
        [name]: value,
        milestone_code: ""
      }));
    } else {
      setFormData((prev) => ({
        ...prev,
        [name]: value
      }));
    }
  };
  const handleCollaborateChange = (index, e) => {
    const { name, value } = e.target;
    const updatedCollaborate = [...formData.collaborate];
    updatedCollaborate[index] = {
      ...updatedCollaborate[index],
      [name]: value
    };
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const addCollaborate = () => {
    setFormData((prev) => ({
      ...prev,
      collaborate: [
        ...prev.collaborate,
        {
          subtask_title: "",
          staff_id: "",
          status: "open"
        }
      ]
    }));
  };
  const removeCollaborate = (index) => {
    if (formData.collaborate.length === 1) return;
    const updatedCollaborate = formData.collaborate.filter(
      (_, i) => i !== index
    );
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const validateForm = () => {
    if (!formData.branchcode) {
      setError("Branch code is required");
      return false;
    }
    if (!formData.project_code) {
      setError("Project is required");
      return false;
    }
    if (!formData.milestone_code) {
      setError("Milestone is required");
      return false;
    }
    if (!formData.task_title) {
      setError("Task title is required");
      return false;
    }
    if (!formData.start_date || !formData.end_date) {
      setError("Both start and end dates are required");
      return false;
    }
    if (new Date(formData.start_date) > new Date(formData.end_date)) {
      setError("End date must be after start date");
      return false;
    }
    if (!formData.team_id) {
      setError("Team is required");
      return false;
    }
    if (!formData.handler_by) {
      setError("Handler is required");
      return false;
    }
    for (const collab of formData.collaborate) {
      if (!collab.staff_id) {
        setError("All collaborators must have a staff selected");
        return false;
      }
    }
    return true;
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    setError(null);
    if (!validateForm()) {
      setLoading(false);
      return;
    }
    const taskData2 = {
      data: [
        {
          branchcode: formData.branchcode,
          project_code: formData.project_code,
          milestone_code: formData.milestone_code,
          task_title: formData.task_title,
          task_priority: formData.task_priority,
          start_date: formData.start_date,
          end_date: formData.end_date,
          handler_by: formData.handler_by,
          team_id: formData.team_id,
          notes: formData.notes,
          collaborate: formData.collaborate,
          status: formData.status
        }
      ]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/project/task/create`,
        taskData2,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Task created successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create task");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Error creating task");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Flag, { className: "inline mr-2" }),
        " Task Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Network, { className: "inline mr-1", size: 14 }),
            " Select Project"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "project_code",
              value: formData.project_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Project" }),
                projectOptions == null ? void 0 : projectOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Milestone$1, { className: "inline mr-1", size: 14 }),
            " Select Milestone"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "milestone_code",
              value: formData.milestone_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.project_code,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Milestone" }),
                milestoneOptions == null ? void 0 : milestoneOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Select Team"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "team_id",
              value: formData.team_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Team" }),
                teamOptions == null ? void 0 : teamOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Task Title"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "task_title",
              value: formData.task_title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter task name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Task Priority"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "task_priority",
              value: formData.task_priority,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Priority" }),
                /* @__PURE__ */ jsx("option", { value: "minor", children: "Minor" }),
                /* @__PURE__ */ jsx("option", { value: "major", children: "Major" }),
                /* @__PURE__ */ jsx("option", { value: "critical", children: "Critical" }),
                /* @__PURE__ */ jsx("option", { value: "blocker", children: "Blocker" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Handle By (Team Lead)"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "handler_by",
            value: formData.handler_by,
            readOnly: true,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
              /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
              /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Completed" }),
              /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
              /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" }),
              /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Collaborators" }),
      formData.collaborate.map((collaborate, index) => /* @__PURE__ */ jsxs(
        "div",
        {
          className: "grid grid-cols-1 md:grid-cols-2 gap-4 relative",
          children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
                " Sub Task Title"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "subtask_title",
                  value: collaborate.subtask_title,
                  onChange: (e) => handleCollaborateChange(index, e),
                  type: "text",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  placeholder: "Enter Subtask Title",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                " Team Member"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "staff_id",
                  value: collaborate.staff_id,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  disabled: !formData.team_id,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "", children: "Select Team Member" }),
                    teamMembers == null ? void 0 : teamMembers.map((member) => /* @__PURE__ */ jsxs("option", { value: member.staff_id, children: [
                      member.staff_name,
                      " (",
                      member.department,
                      ")"
                    ] }, member.staff_id))
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
                " Collaboration Status"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "status",
                  value: collaborate.status,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                    /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
                    /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Completed" }),
                    /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                    /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" }),
                    /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
                  ]
                }
              )
            ] }),
            index > 0 && /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                onClick: () => removeCollaborate(index),
                className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
                children: /* @__PURE__ */ jsx(Trash2, { size: 16 })
              }
            )
          ]
        },
        index
      )),
      /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: addCollaborate,
          className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
          disabled: !formData.team_id,
          children: [
            /* @__PURE__ */ jsx(Plus, { size: 16 }),
            " Add Another Collaborator"
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-2" }),
        " Notes"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(Target, { className: "inline mr-1", size: 14 }),
          " Task Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Enter the Task Notes"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          disabled: loading,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm disabled:opacity-70",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Task"
        }
      )
    ] })
  ] });
};
const EditTaskForm = ({ taskData: taskData2, onSuccess, onCancel }) => {
  console.log("taskkidin tssk", taskData2 == null ? void 0 : taskData2.id);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const [loading, setLoading] = useState(false);
  const taskId = taskData2.id;
  const [fetching, setFetching] = useState(true);
  const clientcodeOptions = useClientStore((state) => state.clientscodeOptions);
  const [error, setError] = useState(null);
  const allProjectcodeOptions = useProjectStore(
    (state) => state.allProjectcodeOptions
  );
  const employeeOption = useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  const milestonecodeOption = useProjectStore(
    (state) => state.allMilestonecodeOptions
  );
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    branchcode: "",
    client_code: "",
    project_code: "",
    milestone_code: "",
    task_title: "",
    task_priority: "",
    start_date: "",
    end_date: "",
    handler_by: "",
    notes: "",
    collaborate: [],
    status: "draft"
  });
  useEffect(() => {
    if (taskData2) {
      const formattedStartDate = taskData2.start_date ? taskData2.start_date.split("T")[0] : "";
      const formattedEndDate = taskData2.end_date ? taskData2.end_date.split("T")[0] : "";
      setFormData({
        branchcode: taskData2.branchcode || "",
        client_code: taskData2.client_code || "",
        project_code: taskData2.project_code || "",
        milestone_code: taskData2.milestone_code || "",
        task_title: taskData2.task_title || "",
        task_priority: taskData2.task_priority || "",
        start_date: formattedStartDate,
        end_date: formattedEndDate,
        handler_by: taskData2.handler_by || "",
        notes: taskData2.notes || "",
        collaborate: taskData2.collaborate || [],
        status: taskData2.status || "draft"
      });
    }
  }, [taskData2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    setError(null);
    const taskData22 = {
      data: {
        branchcode: formData.branchcode,
        client_code: formData.client_code,
        project_code: formData.project_code,
        milestone_code: formData.milestone_code,
        task_title: formData.task_title,
        task_priority: formData.task_priority,
        start_date: formData.start_date,
        end_date: formData.end_date,
        handler_by: formData.handler_by,
        notes: formData.notes,
        status: formData.status
      }
    };
    try {
      console.log("taskdataaaa", taskData22, taskId);
      const response = await axios.put(
        `${BASE_URL}/project/task/edit/${taskId}`,
        taskData22,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update task");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Error updating task");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Flag, { className: "inline mr-2" }),
        " Task Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Network, { className: "inline mr-1", size: 14 }),
            " Related Project"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "project_code",
              value: formData.project_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Project" }),
                allProjectcodeOptions == null ? void 0 : allProjectcodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Milestone$1, { className: "inline mr-1", size: 14 }),
            " Select Milestone"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "milestone_code",
              value: formData.milestone_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Milestone" }),
                milestonecodeOption == null ? void 0 : milestonecodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Task Title"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "task_title",
              value: formData.task_title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter task name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User2Icon, { className: "inline mr-1", size: 14 }),
            " Select Client"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "client_code",
              value: formData.client_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Client" }),
                clientcodeOptions == null ? void 0 : clientcodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Task Priority"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "task_priority",
              value: formData.task_priority,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Priority" }),
                /* @__PURE__ */ jsx("option", { value: "minor", children: "Minor" }),
                /* @__PURE__ */ jsx("option", { value: "major", children: "Major" }),
                /* @__PURE__ */ jsx("option", { value: "critical", children: "Critical" }),
                /* @__PURE__ */ jsx("option", { value: "blocker", children: "Blocker" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Handle By"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "handler_by",
            value: formData.handler_by,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Handler" }),
              employeeOption == null ? void 0 : employeeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
              /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
              /* @__PURE__ */ jsx("option", { value: "paused", children: "Paused" }),
              /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
              /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" })
            ]
          }
        )
      ] })
    ] }),
    formData.collaborate.length > 0 && /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Collaborators (Read Only)" }),
      formData.collaborate.map((collaborate, index) => {
        var _a;
        return /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Staff Member"
            ] }),
            /* @__PURE__ */ jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: ((_a = employeeOption == null ? void 0 : employeeOption.find(
              (opt) => opt.value === collaborate.staff_id
            )) == null ? void 0 : _a.label) || collaborate.staff_id })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
              " Collaboration Status"
            ] }),
            /* @__PURE__ */ jsx("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 capitalize", children: collaborate.status })
          ] })
        ] }, index);
      })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-2" }),
        " Notes"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(Target, { className: "inline mr-1", size: 14 }),
          " Task Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Enter the Task Notes"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          disabled: loading,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm disabled:opacity-70",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Task"
        }
      )
    ] })
  ] });
};
const Task = ({ projectData }) => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const project_code = projectData.project_code;
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [
    { value: "", label: "All Branches" },
    { value: "active", label: "Active Branches" },
    { value: "inactive", label: "Inactive Branches" }
  ];
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/task/read?project_code=${project_code}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const uniqueTasks = (_b = (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data) == null ? void 0 : _b.reduce((acc, current) => {
        const x = acc.find((item) => item.id === current.id);
        if (!x) {
          return acc.concat([current]);
        } else {
          return acc;
        }
      }, []);
      setSheetData(uniqueTasks || []);
      setTotalItem(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(uniqueTasks || []);
    } catch (error2) {
      console.error("Error fetching task list", error2);
      setError("Failed to fetch tasks");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedManager,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Task added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    console.log("branchhhhtaskk", branch2);
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (milestone) => {
    setShowDeleteModal(true);
    setDeleteData(milestone);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        milestone_code: deleteData.milestone_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/project/milestone/delete`,
        {
          data: deletedData,
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Milestone Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting milestone", error2);
      toast$1.error("Failed to delete milestone");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Branch Code" },
    { data: "Project Code" },
    { data: "Duration Days" },
    { data: "Task Name" },
    { data: "Task Priority" },
    { data: "Start Date" },
    { data: "End Date" },
    { data: "Handle By" },
    { data: "Status" },
    { data: "Actions", className: "text-center" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2, index) => ({
      id: branch2.id,
      data: [
        { data: index + 1 },
        { data: branch2.branchcode },
        { data: branch2.project_code },
        { data: branch2.duration_days },
        { data: branch2.task_title },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.task_priority === "minor" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${branch2.task_priority === "minor" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                branch2.task_priority.charAt(0).toUpperCase() + branch2.task_priority.slice(1)
              ]
            }
          )
        },
        // { data: branch.start_date },
        // { data: branch.end_date },
        {
          data: new Date(branch2.start_date).toLocaleString("en-IN", {
            dateStyle: "medium",
            timeStyle: "short"
          })
        },
        {
          data: new Date(branch2.end_date).toLocaleString("en-IN", {
            dateStyle: "medium",
            timeStyle: "short"
          })
        },
        { data: branch2.handler_by },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)
              ]
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex  justify-center gap-2", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/task_view/${branch2.id}`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(branch2),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(branch2),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Task updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Task Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", { className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`, children: [
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setShowCreateModal(true),
                  className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                  children: [
                    !isMobile && "Add New Task",
                    " +"
                  ]
                }
              )
            ] })
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: statusOptions,
                      selectedValue: selectStatus,
                      onSelect: handleStatusChange,
                      placeholder: "Branch Status",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: managerOptions,
                      selectedValue: selectedManager,
                      onSelect: handleManagerChange,
                      placeholder: "Manager",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`, children: /* @__PURE__ */ jsx(
                    SearchInput,
                    {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search branches...",
                      className: "w-full"
                    }
                  ) })
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "Add New Task Form",
        children: /* @__PURE__ */ jsx(
          AddNewTaskForm,
          {
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "Edit Task Form",
        children: /* @__PURE__ */ jsx(
          EditTaskForm,
          {
            taskData: selectedBranch,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "Drop Milestone",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(Network, { className: "inline mr-2" }),
              " Drop Milestone"
            ] }),
            /* @__PURE__ */ jsx("p", { className: "text-gray-500 text-sm font-medium text-center", children: "Are you sure you want to Drop this Milestone?" }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(ClipboardType, { className: "inline mr-1", size: 14 }),
                  " Type"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "delete_type",
                    value: inActiveData.delete_type,
                    onChange: handleChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    required: true,
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Type" }),
                      /* @__PURE__ */ jsx("option", { value: "temp", children: "Temporary" }),
                      /* @__PURE__ */ jsx("option", { value: "permanent", children: "Permanent" })
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
                  " Status"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "status",
                    value: inActiveData.status,
                    onChange: handleChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    required: true,
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                      /* @__PURE__ */ jsx("option", { value: "planning", children: "Planning" }),
                      /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                      /* @__PURE__ */ jsx("option", { value: "paused", children: "Paused" }),
                      /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                      /* @__PURE__ */ jsx("option", { value: "revised", children: "Revised" }),
                      /* @__PURE__ */ jsx("option", { value: "client_review", children: "Client_review" }),
                      /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
                    ]
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowDeleteModal(false),
                disabled: loading,
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                onClick: handleDeleteSubmit,
                disabled: loading,
                children: loading ? "Processing..." : "Confirm"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
function ClientDocument() {
  const documents = [
    {
      uri: "/documents/Abc Client Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Client Documents.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject draft.pdf",
      fileType: "pdf",
      fileName: "AbcProject Meeting Document.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject Final 2 Documents.pdf",
      fileType: "pdf",
      fileName: "Abc company overview.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject final Document.pdf",
      fileType: "pdf",
      fileName: "Abc structure Documents.pdf",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-bold text-red-800 mb-8", children: "Client Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          },
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          }
        },
        key
      ) })
    ] })
  ] });
}
function DraftDocument() {
  const documents = [
    {
      uri: "/documents/AbcProject draft.pdf",
      fileType: "pdf",
      fileName: "AbcProject Draft 1.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/Abc Client Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Draft 2.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject Final 2 Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Draft 3.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject final Document.pdf",
      fileType: "pdf",
      fileName: "Abc Draft 4 Documents.pdf",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-bold text-red-800 mb-8", children: "Client Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          },
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          }
        },
        key
      ) })
    ] })
  ] });
}
function FinalDocument() {
  const documents = [
    {
      uri: "/documents/AbcProject Final 2 Documents.pdf",
      fileType: "pdf",
      fileName: "Abc company Final Doc.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject final Document.pdf",
      fileType: "pdf",
      fileName: "Abc Final Documents.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/Abc Client Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Final Documents.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject draft.pdf",
      fileType: "pdf",
      fileName: "AbcProject Final Document.pdf",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-bold text-red-800 mb-8", children: "Client Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? (
                // <svg className="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                //   <path fillRule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clipRule="evenodd" />
                // </svg>
                /* @__PURE__ */ jsxs(
                  "svg",
                  {
                    className: "w-5 h-5 text-red-500",
                    viewBox: "0 0 24 24",
                    fill: "none",
                    xmlns: "http://www.w3.org/2000/svg",
                    children: [
                      /* @__PURE__ */ jsx(
                        "path",
                        {
                          d: "M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",
                          stroke: "currentColor",
                          strokeWidth: "2",
                          strokeLinecap: "round",
                          strokeLinejoin: "round"
                        }
                      ),
                      /* @__PURE__ */ jsx(
                        "path",
                        {
                          d: "M14 2V8H20",
                          stroke: "currentColor",
                          strokeWidth: "2",
                          strokeLinecap: "round",
                          strokeLinejoin: "round"
                        }
                      ),
                      /* @__PURE__ */ jsx(
                        "path",
                        {
                          d: "M8 13H9.5C10.163 13 10.7989 13.2634 11.2678 13.7322C11.7366 14.2011 12 14.837 12 15.5C12 16.163 11.7366 16.7989 11.2678 17.2678C10.7989 17.7366 10.163 18 9.5 18H8V13Z",
                          fill: "currentColor"
                        }
                      ),
                      /* @__PURE__ */ jsx(
                        "path",
                        {
                          d: "M16 13V18",
                          stroke: "currentColor",
                          strokeWidth: "2",
                          strokeLinecap: "round"
                        }
                      ),
                      /* @__PURE__ */ jsx(
                        "path",
                        {
                          d: "M16 13H15C14.4477 13 14 13.4477 14 14V17C14 17.5523 14.4477 18 15 18H16",
                          stroke: "currentColor",
                          strokeWidth: "2",
                          strokeLinecap: "round",
                          strokeLinejoin: "round"
                        }
                      )
                    ]
                  }
                )
              ) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx(
                "svg",
                {
                  className: "w-5 h-5 text-blue-500",
                  fill: "currentColor",
                  viewBox: "0 0 20 20",
                  children: /* @__PURE__ */ jsx(
                    "path",
                    {
                      fillRule: "evenodd",
                      d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",
                      clipRule: "evenodd"
                    }
                  )
                }
              ) : /* @__PURE__ */ jsx(
                "svg",
                {
                  className: "w-5 h-5 text-gray-500",
                  fill: "currentColor",
                  viewBox: "0 0 20 20",
                  children: /* @__PURE__ */ jsx(
                    "path",
                    {
                      fillRule: "evenodd",
                      d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",
                      clipRule: "evenodd"
                    }
                  )
                }
              ) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          },
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          }
        },
        key
      ) })
    ] })
  ] });
}
function MeetingDocumentViewer({ documents }) {
  const formattedDocs = documents.map((doc, index) => ({
    uri: doc.url,
    // Use the actual URL from API
    fileType: doc.type.toLowerCase(),
    // Ensure lowercase for type checking
    fileName: doc.title || `Meeting Document ${index + 1}`,
    fileSize: "N/A"
    // You can calculate this if needed
  }));
  const [selectedDoc, setSelectedDoc] = useState(formattedDocs[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  if (formattedDocs.length === 0) {
    return /* @__PURE__ */ jsx("div", { className: "p-4 text-gray-500", children: "No documents available" });
  }
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-2xl font-bold text-red-800 mb-8", children: "Meeting Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      "    ",
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: formattedDocs.map((doc, index) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          `${doc.uri}-${index}`
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: [...DocViewerRenderers, MSDocRenderer],
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            },
            // Add this for better MS Office document handling
            msOffice: {
              // If you have a web viewer service
              webviewerServerURL: "https://webviewer.yourserver.com",
              // Or use Google Docs viewer as fallback
              googleDocsViewerURL: "https://docs.google.com/viewer?url="
            }
          },
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          }
        },
        key
      ) })
    ] })
  ] });
}
const MeetingDocuments = () => {
  const [meetings, setMeetings] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const staff_id = useAuthStore((state) => state.staff_id);
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    const fetchMeetingDocuments = async () => {
      var _a, _b;
      try {
        setLoading(true);
        const response = await axios.get(`${BASE_URL}/doc_meet/read`, {
          params: {
            person_id: staff_id,
            role: "staff",
            comm_type: "doc"
          },
          headers: { Authorization: `Bearer ${token}` }
        });
        setMeetings(response.data.data || []);
      } catch (err) {
        setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || err.message);
      } finally {
        setLoading(false);
      }
    };
    if (staff_id) {
      fetchMeetingDocuments();
    }
  }, [staff_id, token]);
  if (loading) {
    return /* @__PURE__ */ jsx("div", { className: "p-4", children: "Loading meeting documents..." });
  }
  if (error) {
    return /* @__PURE__ */ jsxs("div", { className: "p-4 text-red-500", children: [
      "Error: ",
      error
    ] });
  }
  const allDocuments = meetings.flatMap(
    (meeting) => meeting.doc.map((doc) => ({
      ...doc,
      title: meeting.title,
      created_on: meeting.created_on,
      doc_status: meeting.doc_status
    }))
  );
  return /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
    /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold mb-4", children: "Meeting Documents" }),
    allDocuments.length === 0 ? /* @__PURE__ */ jsx("p", { children: "No meeting documents found." }) : /* @__PURE__ */ jsx(MeetingDocumentViewer, { documents: allDocuments })
  ] });
};
const ProjectFiles = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("clientdocuments");
  const [documents] = useState([
    {
      id: "1",
      name: "Production Department Structure Charts.pdf",
      type: "PDF",
      size: "2.4 MB",
      url: "http://localhost:5173/documents/Production%20Department%20Structure%20Chart.pdf",
      category: "HR"
    },
    {
      id: "2",
      name: "Salary Structure.docx",
      type: "Word",
      size: "1.2 MB",
      url: "/documents/Interview Evaluation Form.docx",
      category: "Finance"
    }
  ]);
  const tabs = [
    { id: "clientdocuments", label: "Client Documents" },
    { id: "finaldocument", label: "Final Documents" },
    { id: "draftdocuments", label: "Draft Documents" },
    { id: "meetingdocuments", label: "Meeting Documents" }
  ];
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsx("div", { className: "border-b border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx("nav", { className: "flex -mb-px", children: tabs.map((tab) => /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setActiveTab(tab.id),
          className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
          children: tab.label
        },
        tab.id
      )) }) }),
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        activeTab === "clientdocuments" && /* @__PURE__ */ jsx(ClientDocument, {}),
        activeTab === "finaldocument" && /* @__PURE__ */ jsx(FinalDocument, {}),
        activeTab === "draftdocuments" && /* @__PURE__ */ jsx(DraftDocument, {}),
        activeTab === "meetingdocuments" && /* @__PURE__ */ jsx(MeetingDocuments, {})
      ] })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        title: "Add Salary Form",
        children: /* @__PURE__ */ jsx(CreateSalaryForm, {})
      }
    )
  ] });
};
const ProjectTimesheet = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const filterOptions = [
    { value: "client", label: "Client" },
    { value: "Project", label: "Project" },
    { value: "Leads", label: "Leads" },
    { value: "Employee", label: "Employee" }
  ];
  const statusOptions = [
    { value: "Pending", label: "Pending" },
    { value: "Paid", label: "Paid" },
    { value: "Un Paid", label: "Un-Paid" }
  ];
  const data = [
    {
      id: "Task_1",
      date: "Karthick ",
      name: "25-05-2025",
      branch: "ABC Commercial 1",
      priority: "64:12:52 ",
      progress: 65
    },
    {
      id: "Task_2",
      date: "Kathir",
      name: "25-05-2025",
      branch: "ABC Commercial 1",
      priority: "20:12:52 ",
      progress: 20
    }
    // More data...
  ];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  const thead = () => [
    { data: "Task Id" },
    { data: "Member Name" },
    { data: "Date" },
    { data: "Task Name" },
    { data: "Duration" },
    { data: "Hours" },
    { data: "View" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((user) => ({
      id: user.id,
      data: [
        { data: user.id },
        { data: user.name },
        { data: user.date },
        { data: user.branch },
        { data: user.priority },
        {
          data: /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex", children: [
            /* @__PURE__ */ jsx("div", { className: "w-[80px] rounded-full h-2 dark:bg-dark-600 bg-gray-200 dark:bg-gray-700", children: /* @__PURE__ */ jsx(
              "div",
              {
                className: `bg-red-700 h-2 rounded-full transition-all duration-500`,
                style: { width: `${user.progress}%` }
              }
            ) }),
            /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsxs("span", { className: "text-red-700 ml-1", children: [
              " ",
              user.progress,
              " %"
            ] }) })
          ] }) })
        },
        {
          data: /* @__PURE__ */ jsx(Link$1, { to: "/task_view", children: /* @__PURE__ */ jsx("button", { className: "bg-red-400/25 dark:bg-red-700/15 px-4 py-2 dark:text-red-200 text-red-700 rounded-sm", children: "View" }) })
        }
      ]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Almino");
    XLSX.writeFile(wb, "EmployeeList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
      /* @__PURE__ */ jsx("div", { className: "flex items-end justify-end", children: /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: handleOnExport,
          className: "text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5 text-center mr-5 mb-5 flex items-center",
          children: [
            /* @__PURE__ */ jsx(FileDown, {}),
            "Export Excel"
          ]
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between", children: [
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: filterOptions,
            selectedValue: selectedFilter,
            onSelect: setSelectedFilter,
            placeholder: "Filter By",
            className: "w-[200px]"
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: statusOptions,
            selectedValue: selectStatus,
            onSelect: setSelectStatus,
            placeholder: "Payment Status",
            className: "w-[200px]"
          }
        ),
        /* @__PURE__ */ jsx(
          Dropdown,
          {
            options: filterOptions,
            selectedValue: selectedFilter,
            onSelect: setSelectedFilter,
            placeholder: "Sort by",
            className: "w-[200px]"
          }
        ),
        /* @__PURE__ */ jsx(
          SearchInput,
          {
            value: searchTerm,
            onChange: setSearchTerm,
            placeholder: "Search users..."
          }
        )
      ] }),
      /* @__PURE__ */ jsx(DataTable, { thead, tbody, isSearch: true }),
      /* @__PURE__ */ jsx("div", { className: "sticky bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: 100,
          currentPage,
          defaultPageSize: 10,
          onChange: setCurrentPage,
          paginationLabel: "employees",
          isScroll: true
        }
      ) })
    ] }) }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        title: "Add Salary Form",
        children: /* @__PURE__ */ jsx(CreateSalaryForm, {})
      }
    )
  ] });
};
const ProjectOverview = () => {
  const [activeTab, setActiveTab] = useState("overview");
  const [projectData, setProjectData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const {
    id
  } = useParams();
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    const fetchProjectData = async () => {
      var _a;
      try {
        const response = await axios.get(`${BASE_URL}/project/overview/profile/read?project_code=${id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("responseprojecttvieww", response);
        setProjectData(((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data) || []);
      } catch (error) {
        console.error("Error fetching project data:", error);
      } finally {
        setLoading(false);
      }
    };
    fetchProjectData();
  }, [id]);
  const tabs = [{
    id: "overview",
    label: "OverView"
  }, {
    id: "milestone",
    label: "Milestones"
  }, {
    id: "task",
    label: "Tasks"
  }, {
    id: "files",
    label: "Files"
  }, {
    id: "timesheet",
    label: "TimeSheet"
  }];
  const Project2 = projectData;
  const progressItems = [{
    type: "Completed Tasks",
    value: 650,
    color: "bg-green-600",
    icon: /* @__PURE__ */ jsx(FaCheckCircle, {
      className: "text-green-600 mr-2"
    }),
    label: "Completed Task"
  }, {
    type: "Inprogress Task",
    value: 150,
    color: "bg-yellow-600",
    icon: /* @__PURE__ */ jsx(FaClock, {
      className: "text-yellow-600 mr-2"
    }),
    label: "Inprogress Task"
  }, {
    type: "overdue Task",
    value: 200,
    color: "bg-red-600",
    icon: /* @__PURE__ */ jsx(FaExclamationCircle, {
      className: "text-red-600 mr-2"
    }),
    label: "Overdue Task"
  }, {
    type: "todo Task",
    value: 200,
    color: "bg-blue-600",
    icon: /* @__PURE__ */ jsx(FaExclamationCircle, {
      className: "text-blue-600 mr-2"
    }),
    label: "ToDo Task"
  }];
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex justify-center items-center min-h-screen",
      children: "Loading..."
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsx("div", {
      className: "text-red-700 dark:text-red-700 flex justify-between text-2xl font-bold mb-8 m-6",
      children: /* @__PURE__ */ jsxs("div", {
        children: [Project2.title, "            ", /* @__PURE__ */ jsxs("div", {
          className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 ${Project2.status === "completed" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : Project2.status === "rejected" ? "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400" : "bg-yellow-100 text-yellow-800 dark:bg-yellow-800/25 dark:text-yellow-400"}`,
          children: [/* @__PURE__ */ jsx(Dot, {}), Project2.status]
        })]
      })
    }), /* @__PURE__ */ jsx(Toaster, {
      position: toastposition,
      reverseOrder: false
    }), /* @__PURE__ */ jsx("div", {
      className: "dark:border-gray-700 mb-[60px]",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `font-medium text-sm ${activeTab === tab.id ? "text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm" : "border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm"}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "overview" && /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "w-full max-w-full mx-auto p-15 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-4",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-2xl font-bold text-gray-600 dark:text-white",
              children: Project2.title
            }), /* @__PURE__ */ jsx("div", {
              className: "flex justify-end",
              children: /* @__PURE__ */ jsxs("button", {
                onClick: () => setShowMeetingModal(true),
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                children: ["New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
                  className: "ml-2",
                  size: 15
                })]
              })
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-300",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium text-gray-700 dark:text-gray-100",
                children: "Client Code:"
              }), " ", Project2.client_code]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium text-gray-700 dark:text-gray-100",
                children: "Project Code:"
              }), " ", Project2.project_code]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsxs("span", {
                className: "font-medium text-green-700 dark:text-gray-100",
                children: [/* @__PURE__ */ jsx(CalendarCheck2, {
                  className: "inline",
                  size: 20
                }), " Start Date:"]
              }), " ", new Date(Project2.start_date).toLocaleDateString()]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsxs("span", {
                className: "font-medium text-red-700 dark:text-gray-100",
                children: [/* @__PURE__ */ jsx(CalendarClock, {
                  className: "inline",
                  size: 20
                }), " End Date:"]
              }), " ", new Date(Project2.end_date).toLocaleDateString()]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium text-blue-700 dark:text-gray-100",
                children: "Priority:"
              }), " ", Project2.priority]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium text-purple-700 dark:text-gray-100",
                children: "Type:"
              }), " ", Project2.type]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-medium text-orange-700 dark:text-gray-100",
                children: "Location:"
              }), " ", Project2.loc]
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "text-sm text-gray-700 dark:text-gray-200",
            children: /* @__PURE__ */ jsxs("p", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Project Description:"
              }), /* @__PURE__ */ jsx("br", {}), Project2.notes]
            })
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-3 gap-4 text-sm text-gray-700 dark:text-gray-200",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Budget:"
              }), " ", Project2.budget]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Overall Cost:"
              }), " ", Project2.overallcost]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Balance:"
              }), " ", Project2.balance]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex items-center justify-between text-sm",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "text-gray-700 dark:text-gray-200",
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Project Progress:"
              }), " ", Project2.milestone_count ? `Milestones (${Project2.milestone_count})` : "No milestones yet"]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-[250px] rounded-full h-2.5 dark:bg-dark-600 bg-gray-200 dark:bg-gray-700",
                children: /* @__PURE__ */ jsx("div", {
                  className: `bg-red-700 h-2.5 rounded-full transition-all duration-500`,
                  style: {
                    width: `${Project2.progress}%`
                  }
                })
              }), /* @__PURE__ */ jsx("div", {
                children: /* @__PURE__ */ jsxs("span", {
                  className: "text-red-700 ml-3",
                  children: [70, "%"]
                })
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "text-blue-400 dark:text-blue-500 italic",
              children: Project2.duration_days ? `${Project2.duration_days} days duration` : "Duration not specified"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col sm:flex-row sm:items-center justify-between text-sm text-gray-700 dark:text-gray-200",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "mb-5",
              children: [/* @__PURE__ */ jsx("span", {
                className: "font-semibold",
                children: "Assigned by:"
              }), " ", Project2.handler_by]
            }), /* @__PURE__ */ jsx("div", {
              className: "flex flex-col sm:flex-row sm:items-center justify-between text-sm text-gray-200 dark:text-gray-200",
              children: /* @__PURE__ */ jsx("div", {
                className: "mt-2",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center space-x-2 sm:mt-0",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "font-semibold mr-2",
                    children: "Team Members:"
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "flex -space-x-4",
                    children: [/* @__PURE__ */ jsx("img", {
                      className: "w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-800",
                      src: userProfiles,
                      alt: "Member 1"
                    }), /* @__PURE__ */ jsx("img", {
                      className: "w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",
                      src: userProfiles,
                      alt: "Member 2"
                    }), /* @__PURE__ */ jsx("img", {
                      className: "w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",
                      src: userProfiles,
                      alt: "Member 3"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "w-8 h-8 rounded-full bg-gray-300 text-gray-700 dark:bg-gray-600 dark:text-white flex items-center justify-center text-xs font-semibold border-2 border-white dark:border-gray-800",
                      children: "+5"
                    })]
                  })]
                })
              })
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex",
          children: [/* @__PURE__ */ jsx(PaymentProgressCard, {
            items: progressItems,
            className: "dark:bg-gray-800 w-[600px] mt-10 bg-white p-15",
            title: "Project Status"
          }), /* @__PURE__ */ jsxs("div", {
            className: "w-[45%] max-w-3xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-6 mt-10",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "text-2xl font-semibold text-gray-800 dark:text-white",
              children: "Project Activity"
            }), Project2.milestone && Project2.milestone.length > 0 ? Project2.milestone.map((milestone) => /* @__PURE__ */ jsx("div", {
              className: "rounded-lg p-2 dark:bg-gray-700 space-y-2",
              children: /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex",
                  children: [/* @__PURE__ */ jsx("img", {
                    className: "w-15 h-15 rounded-full border-2 mr-2 -ml-5 border-white dark:border-gray-800",
                    src: userProfiles,
                    alt: "Member"
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "w-[90%] flex justify-between items-center",
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300 font-medium",
                      children: ["Milestone:", " ", /* @__PURE__ */ jsx("span", {
                        className: "font-semibold",
                        children: milestone.miles_title
                      })]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "text-xs text-gray-500 dark:text-gray-400",
                      children: new Date(milestone.created_on).toLocaleString()
                    })]
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "ml-10 -mt-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "text-xs font-bold text-gray-100 text-center flex justify-center rounded bg-red-700 w-[70px] h-[20px]",
                    children: /* @__PURE__ */ jsx("p", {
                      className: "mt-0.5",
                      children: "Active"
                    })
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: ["Deadline:", " ", /* @__PURE__ */ jsx("span", {
                      className: "font-semibold text-red-500",
                      children: new Date(milestone.end_date).toLocaleDateString()
                    })]
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: ["Status:", " ", /* @__PURE__ */ jsx("span", {
                      className: "font-semibold",
                      children: milestone.status
                    })]
                  })]
                })]
              })
            }, milestone.milestone_code)) : /* @__PURE__ */ jsx("div", {
              className: "rounded-lg p-2 dark:bg-gray-700 space-y-2",
              children: /* @__PURE__ */ jsx("p", {
                className: "text-sm text-gray-600 dark:text-gray-300",
                children: "No milestones available for this project."
              })
            })]
          })]
        }), /* @__PURE__ */ jsx(Modal, {
          isVisible: showMeetingModal,
          className: "w-full md:w-[800px]",
          onClose: () => setShowMeetingModal(false),
          title: "Create Meeting",
          children: /* @__PURE__ */ jsx(ProjectMeetingForm, {
            project: projectData,
            onSuccess: handleMeetingSuccess,
            onCancel: () => setShowMeetingModal(false)
          })
        })]
      }), activeTab === "milestone" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(Milestone, {
          projectData: Project2
        })
      }), activeTab === "task" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(Task, {
          projectData: Project2
        })
      }), activeTab === "files" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(ProjectFiles, {
          projectData: Project2
        })
      }), activeTab === "timesheet" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(ProjectTimesheet, {
          projectData: Project2
        })
      })]
    })]
  });
};
const ProjectOverview$1 = withComponentProps(ProjectOverview);
const route15 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ProjectOverview$1
}, Symbol.toStringTag, { value: "Module" }));
const MilestoneMeetingForm = ({ milestone, onSuccess, onCancel }) => {
  console.log("projectcodeee", milestone);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [customTargets, setCustomTargets] = useState([]);
  const [branches, setBranches] = useState([]);
  const [teams, setTeams] = useState([]);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showParticipants, setShowParticipants] = useState(false);
  const [showCustomTargets, setShowCustomTargets] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const [filterTargets, setFilterTargets] = useState([
    {
      type: "",
      branchcode: "",
      teamId: "",
      staffType: "staff"
    }
  ]);
  const [formData, setFormData] = useState({
    branchcode: milestone.branchcode,
    milestone_code: milestone.milestone_code,
    title: "",
    notes: "",
    comm_type: "meeting",
    status: "active",
    doc_status: "none",
    meet_link: "",
    start_date_time: "2025-02-01T00:00:00Z,",
    end_date_time: "2025-02-01T23:59:59Z",
    category: "branch",
    field: "custom",
    doc: [],
    custom: [],
    communication_participants: []
  });
  useEffect(() => {
    const fetchInitialData = async () => {
      try {
        const branchesRes = await axios.get(`${BASE_URL}/branch/dropdown`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        setBranches(branchesRes.data.result);
      } catch (err) {
        console.error("Error fetching initial data:", err);
        toast$1.error("Failed to load initial data");
      }
    };
    fetchInitialData();
  }, [token]);
  useEffect(() => {
    const branchcodes = [
      ...new Set(
        filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode)
      )
    ];
    const fetchTeamsForBranches = async () => {
      try {
        const teamsPromises = branchcodes.map(async (branchcode) => {
          const teamsRes = await axios.get(
            `${BASE_URL}/teams/read?branchcode=${branchcode}`,
            { headers: { Authorization: `Bearer ${token}` } }
          );
          return teamsRes.data.data;
        });
        const teamsResults = await Promise.all(teamsPromises);
        setTeams(teamsResults.flat());
      } catch (err) {
        console.error("Error fetching teams:", err);
        toast$1.error("Failed to load teams");
      }
    };
    if (branchcodes.length > 0) {
      fetchTeamsForBranches();
    }
  }, [filterTargets, token]);
  useEffect(() => {
    if (formData.category === "custom") {
      fetchCustomParticipants();
    } else if (formData.category === "branch" && formData.branchcode) {
      fetchBranchParticipants();
    } else if (formData.category === "team") {
      fetchTeamParticipants();
    }
  }, [formData.category, formData.branchcode, filterTargets]);
  const fetchBranchParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchTeamParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchCustomParticipants = async () => {
    try {
      const branchFilters = filterTargets.filter((target) => target.type === "branch" && target.branchcode).map((target) => target.branchcode);
      const teamFilters = filterTargets.filter(
        (target) => target.type === "team" && target.teamId && target.branchcode
      ).map((target) => {
        const teamIdParts = target.teamId.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        return `${target.branchcode}/TEAM/${teamId}`;
      });
      const teamBranchFilters = filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode);
      const allBranchFilters = [
        .../* @__PURE__ */ new Set([...branchFilters, ...teamBranchFilters])
      ];
      const staffTypeFilters = [];
      filterTargets.forEach((target) => {
        if (target.type === "branch" || target.type === "team") {
          if (target.staffType === "staff") staffTypeFilters.push("staff");
          if (target.staffType === "client") staffTypeFilters.push("client");
          if (target.staffType === "both") {
            staffTypeFilters.push("staff");
            staffTypeFilters.push("client");
          }
        }
      });
      const uniqueStaffTypes = [...new Set(staffTypeFilters)];
      console.log("Sending filter request with:", {
        branch: allBranchFilters,
        team: teamFilters,
        type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
      });
      if (allBranchFilters.length > 0 || teamFilters.length > 0) {
        const response = await axios.post(
          `${BASE_URL}/users/filter`,
          {
            branch: allBranchFilters,
            team: teamFilters,
            type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
          },
          { headers: { Authorization: `Bearer ${token}` } }
        );
        setStaffOptions([...response.data.staff, ...response.data.client]);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      console.error("Error fetching custom participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "category") {
      setCustomTargets([]);
      setFilterTargets([
        { type: "", branchcode: "", teamId: "", staffType: "staff" }
      ]);
    }
  };
  const handleFileUpload = (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const uploadedFiles = files.map((file) => ({
      file,
      // Store the actual File object
      name: file.name,
      type: file.type.split("/")[1] || "file"
    }));
    setFormData((prev) => ({
      ...prev,
      doc: [...prev.doc, ...uploadedFiles]
    }));
  };
  const removeFile = (index) => {
    setFormData((prev) => {
      const updatedFiles = [...prev.doc];
      updatedFiles.splice(index, 1);
      return { ...prev, doc: updatedFiles };
    });
  };
  const addParticipant = (person) => {
    if (!participants.some((p) => p.person_id === person.person_id)) {
      setParticipants([
        ...participants,
        {
          person_id: person.person_id,
          role: person.role,
          isdocvisible: formData.comm_type === "doc"
        }
      ]);
    }
  };
  const removeParticipant = (personId) => {
    setParticipants(participants.filter((p) => p.person_id !== personId));
  };
  const toggleDocVisibility = (personId) => {
    setParticipants(
      participants.map(
        (p) => p.person_id === personId ? { ...p, isdocvisible: !p.isdocvisible } : p
      )
    );
  };
  const addCustomTarget = (type, id) => {
    if (type === "team") {
      const target = filterTargets.find(
        (t) => t.type === "team" && t.teamId === id
      );
      if (target && target.branchcode) {
        const teamIdParts = id.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        const formattedId = `${target.branchcode}/TEAM/${teamId}`;
        if (!customTargets.some(
          (t) => t.target_id === formattedId && t.type === type
        )) {
          setCustomTargets([
            ...customTargets,
            { target_id: formattedId, type }
          ]);
        }
        return;
      }
    }
    if (!customTargets.some((t) => t.target_id === id && t.type === type)) {
      setCustomTargets([...customTargets, { target_id: id, type }]);
    }
  };
  const handleFilterTargetChange = (index, field, value) => {
    const updatedTargets = [...filterTargets];
    updatedTargets[index][field] = value;
    if (field === "type") {
      updatedTargets[index].branchcode = "";
      updatedTargets[index].teamId = "";
    } else if (field === "branchcode" && updatedTargets[index].type === "team") {
      updatedTargets[index].teamId = "";
    }
    setFilterTargets(updatedTargets);
  };
  const addFilterTarget = () => {
    setFilterTargets([
      ...filterTargets,
      { type: "", branchcode: "", teamId: "", staffType: "staff" }
    ]);
  };
  const removeFilterTarget = (index) => {
    var _a, _b, _c, _d;
    if (filterTargets.length > 1) {
      const updatedTargets = [...filterTargets];
      updatedTargets.splice(index, 1);
      setFilterTargets(updatedTargets);
      if (((_a = updatedTargets[index]) == null ? void 0 : _a.type) === "branch" && ((_b = updatedTargets[index]) == null ? void 0 : _b.branchcode)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "branch" && t.target_id === updatedTargets[index].branchcode)
          )
        );
      } else if (((_c = updatedTargets[index]) == null ? void 0 : _c.type) === "team" && ((_d = updatedTargets[index]) == null ? void 0 : _d.teamId)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "team" && t.target_id === updatedTargets[index].teamId)
          )
        );
      }
    }
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const meetingData = {
        branchcode: milestone.branchcode,
        client_code: milestone.client_code,
        project_code: milestone.project_code,
        title: formData.title,
        notes: formData.notes,
        comm_type: formData.comm_type,
        status: formData.status,
        meet_link: formData.meet_link,
        start_date_time: formData.start_date_time,
        end_date_time: formData.end_date_time,
        doc_status: formData.doc_status,
        category: formData.category,
        field: formData.field,
        custom: customTargets,
        communication_participants: participants
      };
      const formDataToSend = new FormData();
      formDataToSend.append("data", JSON.stringify([meetingData]));
      formData.doc.forEach((fileObj) => {
        formDataToSend.append("URL", fileObj.file);
      });
      console.log("formataaaanew form", formDataToSend);
      const response = await axios.post(
        `${BASE_URL}/doc_meet/create`,
        formDataToSend,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "multipart/form-data"
          }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create communication");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `Error creating ${formData.comm_type === "meeting" ? "meeting" : "document"}`
      );
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        formData.comm_type === "meeting" ? /* @__PURE__ */ jsx(Video, { className: "inline mr-2" }) : /* @__PURE__ */ jsx(FileUp, { className: "inline mr-2" }),
        formData.comm_type === "meeting" ? "Meeting Information" : "Document Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Title",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Title",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Type",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "meeting", children: "Meeting" }),
                /* @__PURE__ */ jsx("option", { value: "doc", children: "Document" }),
                /* @__PURE__ */ jsx("option", { value: "followup", children: "Follow-up" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "declined", children: "Declined" })
              ]
            }
          )
        ] }),
        formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Document Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "doc_status",
              value: formData.doc_status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "none", children: "None" }),
                /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Verified & Closed" }),
                /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" })
              ]
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Link$2, { className: "inline mr-1", size: 14 }),
            " Meeting Link",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "meet_link",
              value: formData.meet_link,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "url",
              placeholder: "https://meet.google.com/example",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date_time",
              value: formData.start_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " End Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date_time",
              value: formData.end_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Category",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "category",
              value: formData.category,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                /* @__PURE__ */ jsx("option", { value: "team", children: "Team" }),
                /* @__PURE__ */ jsx("option", { value: "all", children: "All" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Field"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "field",
              value: formData.field,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "project", children: "Project" }),
                /* @__PURE__ */ jsx("option", { value: "task", children: "Task" }),
                /* @__PURE__ */ jsx("option", { value: "lead", children: "Lead" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Notes...",
            required: true
          }
        )
      ] }),
      formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileUp, { className: "inline mr-1", size: 14 }),
          " Documents"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "file",
            id: "file-upload",
            multiple: true,
            onChange: handleFileUpload,
            className: "w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-primary)] file:text-white hover:file:bg-[var(--color-hover)]"
          }
        ),
        formData.doc.length > 0 && /* @__PURE__ */ jsx("div", { className: "mt-4 space-y-2", children: formData.doc.map((file, index) => /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
            children: [
              /* @__PURE__ */ jsx("span", { className: "text-sm", children: file.name }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => removeFile(index),
                  className: "text-red-500 hover:text-red-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ]
          },
          index
        )) })
      ] }),
      formData.category === "custom" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowCustomTargets(!showCustomTargets),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Custom Filters (",
                customTargets.length,
                ")"
              ] }),
              showCustomTargets ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showCustomTargets && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          filterTargets.map((target, index) => /* @__PURE__ */ jsxs(
            "div",
            {
              className: "space-y-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",
              children: [
                /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsxs("h5", { className: "text-sm font-medium", children: [
                    "Filter ",
                    index + 1
                  ] }),
                  filterTargets.length > 1 && /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeFilterTarget(index),
                      className: "text-red-500 hover:text-red-700 p-1",
                      children: /* @__PURE__ */ jsx(Minus, { size: 16 })
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Filter Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.type,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "type",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select filter type" }),
                          /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                          /* @__PURE__ */ jsx("option", { value: "team", children: "Team" })
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Branch" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.branchcode,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "branchcode",
                            e.target.value
                          );
                          handleFilterTargetChange(index, "teamId", "");
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select branch" }),
                          branches.map((branch2) => /* @__PURE__ */ jsxs(
                            "option",
                            {
                              value: branch2.branchcode,
                              children: [
                                branch2.branchcode,
                                " - ",
                                branch2.name
                              ]
                            },
                            branch2.branchcode
                          ))
                        ]
                      }
                    )
                  ] }),
                  target.type === "team" && target.branchcode && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.teamId,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "teamId",
                            e.target.value
                          );
                          if (e.target.value) {
                            addCustomTarget("team", e.target.value);
                          }
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select team" }),
                          teams.filter(
                            (team) => team.branchcode === target.branchcode
                          ).map((team) => /* @__PURE__ */ jsx("option", { value: team.team_id, children: team.team_name }, team.team_id))
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.staffType,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "staffType",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "staff", children: "Staff" }),
                          /* @__PURE__ */ jsx("option", { value: "client", children: "Client" }),
                          /* @__PURE__ */ jsx("option", { value: "both", children: "Both" })
                        ]
                      }
                    )
                  ] })
                ] }),
                target.type === "branch" && target.branchcode && /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: () => addCustomTarget("branch", target.branchcode),
                    className: "text-xs bg-red-700 hover:bg-red-700 text-white px-2 py-1 rounded",
                    children: "Add Branch Filter"
                  }
                ) })
              ]
            },
            index
          )),
          /* @__PURE__ */ jsxs(
            "button",
            {
              type: "button",
              onClick: addFilterTarget,
              className: "flex items-center text-sm text-blue-500 hover:text-blue-700",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Another Filter"
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowParticipants(!showParticipants),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Participants (",
                participants.length,
                ")"
              ] }),
              showParticipants ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showParticipants && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: formData.category === "custom" ? "Select participants from filtered results" : `Select participants from ${formData.category}` }),
            staffOptions.length > 0 ? /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: staffOptions.map((person) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    person.person_id,
                    " (",
                    person.role,
                    ")"
                  ] }),
                  participants.some(
                    (p) => p.person_id === person.person_id
                  ) ? /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeParticipant(person.person_id),
                      className: "text-red-500 hover:text-red-700",
                      children: /* @__PURE__ */ jsx(X, { size: 16 })
                    }
                  ) : /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => addParticipant(person),
                      className: "text-green-500 hover:text-green-700",
                      children: /* @__PURE__ */ jsx(Check, { size: 16 })
                    }
                  )
                ]
              },
              person.person_id
            )) }) : /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "No participants available based on current filters" })
          ] }),
          participants.length > 0 && /* @__PURE__ */ jsxs("div", { className: "mt-4", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: "Selected Participants" }),
            /* @__PURE__ */ jsx("div", { className: "space-y-2", children: participants.map((participant) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    participant.person_id,
                    " (",
                    participant.role,
                    ")"
                  ] }),
                  /* @__PURE__ */ jsxs("div", { className: "flex items-center space-x-2", children: [
                    formData.comm_type === "doc" && /* @__PURE__ */ jsxs("label", { className: "flex items-center space-x-1", children: [
                      /* @__PURE__ */ jsx(
                        "input",
                        {
                          type: "checkbox",
                          checked: participant.isdocvisible,
                          onChange: () => toggleDocVisibility(participant.person_id),
                          className: "rounded"
                        }
                      ),
                      /* @__PURE__ */ jsx("span", { className: "text-xs", children: "View Doc" })
                    ] }),
                    /* @__PURE__ */ jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => removeParticipant(participant.person_id),
                        className: "text-red-500 hover:text-red-700",
                        children: /* @__PURE__ */ jsx(X, { size: 16 })
                      }
                    )
                  ] })
                ]
              },
              participant.person_id
            )) })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.comm_type === "meeting" ? "Create Meeting" : "Upload Document"
        }
      )
    ] })
  ] });
};
const AddNewTaskForMilestone = ({ milestone, onSuccess, onCancel }) => {
  console.log("milestoneedataa", milestone);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [teamOptions, setTeamOptions] = useState([]);
  const [teamMembers, setTeamMembers] = useState([]);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const milestonecodeOption = useProjectStore(
    (state) => state.allMilestonecodeOptions
  );
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    branchcode: "",
    milestone_code: milestone.milestone_code,
    task_title: "",
    task_priority: "",
    start_date: "",
    end_date: "",
    team_id: "",
    handler_by: "",
    notes: "",
    collaborate: [
      {
        subtask_title: "",
        staff_id: "",
        status: "open"
      }
    ],
    status: "draft"
  });
  useEffect(() => {
    if (formData.branchcode) {
      fetchTeams(formData.branchcode);
    } else {
      setTeamOptions([]);
      setTeamMembers([]);
    }
  }, [formData.branchcode]);
  useEffect(() => {
    if (formData.team_id) {
      fetchTeamMembers(formData.team_id);
    } else {
      setTeamMembers([]);
    }
  }, [formData.team_id]);
  const fetchTeams = async (branchcode) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read?branchcode=${branchcode}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((team) => ({
          value: team.team_id,
          label: team.team_name,
          team_lead: team.team_lead
        }));
        setTeamOptions(options);
      }
    } catch (err) {
      console.error("Error fetching teams:", err);
      toast$1.error("Failed to load teams");
    }
  };
  const fetchTeamMembers = async (teamId) => {
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read/profile?team_id=${teamId}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data && response.data.data) {
        const members = response.data.data.members.filter(
          (member) => member.role !== "lead"
        );
        setTeamMembers(members);
        const teamLead = response.data.data.members.find(
          (member) => member.role === "lead"
        );
        if (teamLead) {
          setFormData((prev) => ({
            ...prev,
            handler_by: teamLead.staff_id
          }));
        }
      }
    } catch (err) {
      console.error("Error fetching team members:", err);
      toast$1.error("Failed to load team members");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleCollaborateChange = (index, e) => {
    const { name, value } = e.target;
    const updatedCollaborate = [...formData.collaborate];
    updatedCollaborate[index] = {
      ...updatedCollaborate[index],
      [name]: value
    };
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const addCollaborate = () => {
    setFormData((prev) => ({
      ...prev,
      collaborate: [
        ...prev.collaborate,
        {
          subtask_title: "",
          staff_id: "",
          status: "open"
        }
      ]
    }));
  };
  const removeCollaborate = (index) => {
    if (formData.collaborate.length === 1) return;
    const updatedCollaborate = formData.collaborate.filter(
      (_, i) => i !== index
    );
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const validateForm = () => {
    if (!formData.branchcode) {
      setError("Branch code is required");
      return false;
    }
    if (!formData.milestone_code) {
      setError("Milestone code is required");
      return false;
    }
    if (!formData.task_title) {
      setError("Task title is required");
      return false;
    }
    if (!formData.start_date || !formData.end_date) {
      setError("Both start and end dates are required");
      return false;
    }
    if (new Date(formData.start_date) > new Date(formData.end_date)) {
      setError("End date must be after start date");
      return false;
    }
    if (!formData.team_id) {
      setError("Team is required");
      return false;
    }
    if (!formData.handler_by) {
      setError("Handler is required");
      return false;
    }
    for (const collab of formData.collaborate) {
      if (!collab.staff_id) {
        setError("All collaborators must have a staff selected");
        return false;
      }
    }
    return true;
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    setError(null);
    if (!validateForm()) {
      setLoading(false);
      return;
    }
    const taskData2 = {
      data: [
        {
          branchcode: formData.branchcode,
          milestone_code: milestone.milestone_code,
          task_title: formData.task_title,
          task_priority: formData.task_priority,
          start_date: formData.start_date,
          end_date: formData.end_date,
          handler_by: formData.handler_by,
          team_id: formData.team_id,
          notes: formData.notes,
          collaborate: formData.collaborate,
          status: formData.status
        }
      ]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/project/task/create`,
        taskData2,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Task created successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create task");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Error creating task");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-md  font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Flag, { className: "inline mr-2" }),
        " Task Information"
      ] }),
      /* @__PURE__ */ jsxs("h2", { className: "text-lg font-medium text-red-700 dark:text-gray-300 mt-2 text-center ", children: [
        /* @__PURE__ */ jsx("span", { className: "text-gray-600 mr-4", children: " Milestone Duration: " }),
        formatDate(milestone.start_date),
        " - ",
        formatDate(milestone.end_date)
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Select Team"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "team_id",
              value: formData.team_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Team" }),
                teamOptions == null ? void 0 : teamOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Milestone$1, { className: "inline mr-1", size: 14 }),
            " Select Milestone"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "milestone_code",
              value: formData.milestone_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Milestone" }),
                milestonecodeOption == null ? void 0 : milestonecodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Task Title"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "task_title",
              value: formData.task_title,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter task name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Task Priority"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "task_priority",
              value: formData.task_priority,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Priority" }),
                /* @__PURE__ */ jsx("option", { value: "minor", children: "Minor" }),
                /* @__PURE__ */ jsx("option", { value: "major", children: "Major" }),
                /* @__PURE__ */ jsx("option", { value: "critical", children: "Critical" }),
                /* @__PURE__ */ jsx("option", { value: "blocker", children: "Blocker" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date",
              value: formData.start_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date",
              value: formData.end_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Handle By (Team Lead)"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "handler_by",
            value: formData.handler_by,
            readOnly: true,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
              /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
              /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Completed" }),
              /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
              /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" }),
              /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Collaborators" }),
      formData.collaborate.map((collaborate, index) => /* @__PURE__ */ jsxs(
        "div",
        {
          className: "grid grid-cols-1 md:grid-cols-2 gap-4 relative",
          children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
                " Sub Task Title"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "subtask_title",
                  value: collaborate.subtask_title,
                  onChange: (e) => handleCollaborateChange(index, e),
                  type: "text",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  placeholder: "Enter Subtask Title",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                " Team Member"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "staff_id",
                  value: collaborate.staff_id,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  disabled: !formData.team_id,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "", children: "Select Team Member" }),
                    teamMembers == null ? void 0 : teamMembers.map((member) => /* @__PURE__ */ jsxs("option", { value: member.staff_id, children: [
                      member.staff_name,
                      " (",
                      member.department,
                      ")"
                    ] }, member.staff_id))
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
                " Collaboration Status"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "status",
                  value: collaborate.status,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                    /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
                    /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Completed" }),
                    /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                    /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" }),
                    /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
                  ]
                }
              )
            ] }),
            index > 0 && /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                onClick: () => removeCollaborate(index),
                className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
                children: /* @__PURE__ */ jsx(Trash2, { size: 16 })
              }
            )
          ]
        },
        index
      )),
      /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: addCollaborate,
          className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
          disabled: !formData.team_id,
          children: [
            /* @__PURE__ */ jsx(Plus, { size: 16 }),
            " Add Another Collaborator"
          ]
        }
      )
    ] }),
    " ",
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-2" }),
        " Notes"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(Target, { className: "inline mr-1", size: 14 }),
          " Task Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Enter the Task Notes"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          disabled: loading,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm disabled:opacity-70",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Task"
        }
      )
    ] })
  ] });
};
function MilestoneDocument() {
  const documents = [
    {
      uri: "/documents/Abc Client Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Client Documents.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject draft.pdf",
      fileType: "pdf",
      fileName: "AbcProject Meeting Document.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject Final 2 Documents.pdf",
      fileType: "pdf",
      fileName: "Abc company overview.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject final Document.pdf",
      fileType: "pdf",
      fileName: "Abc structure Documents.pdf",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-bold text-red-800 mb-8", children: "Client Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          },
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          }
        },
        key
      ) })
    ] })
  ] });
}
const MilestoneTaskList = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const [milestoneData, setMilestoneData] = useState(null);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const [activeTab, setActiveTab] = useState("taskList");
  const navigate = useNavigate();
  const {
    id
  } = useParams();
  console.log("iddmilestonee", id);
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const tabs = [{
    id: "taskList",
    label: "Task List"
  }, {
    id: "milestonedoc",
    label: "Milestone Documents"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  useEffect(() => {
    const fetchMilestoneData = async () => {
      try {
        const response = await axios.get(`${BASE_URL}/project/milestone/read?milestone_code=${encodeURIComponent(id)}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (response.data.data && response.data.data.length > 0) {
          setMilestoneData(response.data.data[0]);
        }
      } catch (error2) {
        console.error("Error fetching milestone data", error2);
        toast$1.error("Failed to load milestone details");
      }
    };
    if (id) {
      fetchMilestoneData();
    }
  }, [id, token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    console.log("milestoneeeiddd", id);
    try {
      let url = `${BASE_URL}/project/task/read?milestone_code=${encodeURIComponent(id)}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      console.log("milestoneurll", url);
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.length) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Task added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    console.log("branchhhhtaskk", branch2);
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (milestone) => {
    setShowDeleteModal(true);
    setDeleteData(milestone);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        milestone_code: deleteData.milestone_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/project/milestone/delete`, {
        data: deletedData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Milestone Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting milestone", error2);
      toast$1.error("Failed to delete milestone");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Milestone Name"
  }, {
    data: "Task Name"
  }, {
    data: "Duration Days"
  }, {
    data: "Participant Count"
  }, {
    data: "Task Priority"
  }, {
    data: "Start Date"
  }, {
    data: "End Date"
  }, {
    data: "Handle By"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2, index) => ({
      id: branch2.id,
      data: [
        {
          data: branch2.id
        },
        {
          data: branch2.branchcode
        },
        {
          data: branch2.milestonetitle
        },
        {
          data: branch2.task_title
        },
        {
          data: branch2.duration_days
        },
        {
          data: branch2.participant_count
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.task_priority === "minor" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
            children: [/* @__PURE__ */ jsx("span", {
              className: `w-2 h-2 rounded-full mr-2 ${branch2.task_priority === "minor" ? "bg-green-800" : "bg-red-700"}`
            }), branch2.task_priority.charAt(0).toUpperCase() + branch2.task_priority.slice(1)]
          })
        },
        // { data: branch.start_date },
        // { data: branch.end_date },
        {
          data: new Date(branch2.start_date).toLocaleDateString("en-IN", {
            day: "numeric",
            month: "short",
            year: "numeric"
          })
        },
        {
          data: new Date(branch2.end_date).toLocaleDateString("en-IN", {
            day: "numeric",
            month: "short",
            year: "numeric"
          })
        },
        {
          data: branch2.handler_by
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
            children: [/* @__PURE__ */ jsx("span", {
              className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
            }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
          })
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: "flex  justify-center gap-2",
            children: [/* @__PURE__ */ jsx(Link$1, {
              to: `/task_view/${branch2.id}`,
              children: /* @__PURE__ */ jsx("button", {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, {
                  size: 18
                })
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditBranch(branch2),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, {
                size: 18
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleDeleteBranch2(branch2),
              title: "Delete",
              children: /* @__PURE__ */ jsx(Trash2, {
                size: 18
              })
            })]
          }),
          className: "action-cell"
        }
      ]
    }));
  };
  const calculateCompletionPercentage = () => {
    if (!milestoneData || !milestoneData.totaltask_count) return 0;
    const totalTasks = parseInt(milestoneData.totaltask_count);
    const completedTasks = parseInt(milestoneData.verified_closedtask_count || 0);
    if (totalTasks === 0) return 0;
    return Math.round(completedTasks / totalTasks * 100);
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Task updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between items-center mb-4",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-2xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] p-5",
          children: "View Milestone"
        }), /* @__PURE__ */ jsx("div", {
          children: /* @__PURE__ */ jsxs("button", {
            className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
            onClick: () => navigate(-1),
            children: [/* @__PURE__ */ jsx(LogOut, {
              className: "inline rotate-180 text-gray-500 mr-3"
            }), "Go Back"]
          })
        })]
      }), milestoneData ? /* @__PURE__ */ jsxs("div", {
        className: "w-full max-w-full mx-auto p-15 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-4",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("h2", {
            className: "text-2xl font-bold text-red-700 dark:text-white",
            children: [/* @__PURE__ */ jsx(NetworkIcon, {
              className: "inline mr-3"
            }), " ", (milestoneData == null ? void 0 : milestoneData.miles_title) || "Milestone Details"]
          }), /* @__PURE__ */ jsx("div", {
            className: "flex justify-end",
            children: /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowMeetingModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: ["New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
                className: "ml-2",
                size: 15
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-300",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-gray-700 dark:text-gray-100",
              children: "Milestone Code:"
            }), " ", milestoneData == null ? void 0 : milestoneData.milestone_code]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-gray-700 dark:text-gray-100",
              children: "Project Code:"
            }), " ", milestoneData == null ? void 0 : milestoneData.project_code]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-purple-700 dark:text-gray-100",
              children: "Status:"
            }), " ", /* @__PURE__ */ jsx("span", {
              className: `px-2 py-1 rounded-full text-xs ${(milestoneData == null ? void 0 : milestoneData.status) === "completed" ? "bg-green-100 text-green-800" : "bg-yellow-100 text-yellow-800"}`,
              children: milestoneData == null ? void 0 : milestoneData.status
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-green-700 dark:text-gray-100",
              children: "Start Date:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.start_date) ? new Date(milestoneData.start_date).toLocaleDateString() : "N/A"]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-red-700 dark:text-gray-100",
              children: "End Date:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.end_date) ? new Date(milestoneData.end_date).toLocaleDateString() : "N/A"]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-blue-700 dark:text-gray-100",
              children: "Duration:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.duration_days) || 0, " days"]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-3 gap-4 text-sm text-gray-700 dark:text-gray-200",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Base Amount:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.base_amount) || "0.00"]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Additional Amount:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.additional_amount) || "0.00"]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Total Amount:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.total_amount) || "0.00"]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex items-center  justify-between text-sm",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "text-gray-700 dark:text-gray-200",
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Task Progress:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.totaltask_count) ? `${milestoneData.verified_closedtask_count || 0}/${milestoneData.totaltask_count} tasks completed` : "No tasks yet"]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex items-center",
            children: [/* @__PURE__ */ jsx("div", {
              className: "w-[250px] rounded-full h-2.5 bg-gray-200 dark:bg-gray-700",
              children: /* @__PURE__ */ jsx("div", {
                className: "bg-red-700 h-2.5 rounded-full transition-all duration-500",
                style: {
                  width: `${calculateCompletionPercentage()}%`
                }
              })
            }), /* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsxs("span", {
                className: "text-red-700 ml-3",
                children: [calculateCompletionPercentage(), "%"]
              })
            })]
          })]
        }), (milestoneData == null ? void 0 : milestoneData.revision_reason) && /* @__PURE__ */ jsx("div", {
          className: "text-sm text-gray-700 dark:text-gray-200",
          children: /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Revision Reason:"
            }), /* @__PURE__ */ jsx("br", {}), milestoneData.revision_reason]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between text-sm text-gray-700 dark:text-gray-200",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Assigned by:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.handler_by) || "N/A"]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-semibold",
              children: "Created by:"
            }), " ", (milestoneData == null ? void 0 : milestoneData.createby) || "N/A"]
          })]
        })]
      }) : /* @__PURE__ */ jsx("div", {
        children: "Loading milestone details..."
      }), /* @__PURE__ */ jsx("div", {
        className: "border-b border-gray-200 dark:border-gray-700 ml-5 mb-5 mt-10",
        children: /* @__PURE__ */ jsx("nav", {
          className: "flex -mb-px",
          children: tabs.map((tab) => /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
            children: tab.label
          }, tab.id))
        })
      }), activeTab === "taskList" && /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "p-4 flex-grow",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center",
            children: [/* @__PURE__ */ jsxs("h2", {
              className: "text-2xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] ",
              children: [/* @__PURE__ */ jsx(ClipboardCheck, {
                className: "inline mr-4"
              }), " ", milestoneData == null ? void 0 : milestoneData.miles_title, " Tasks"]
            }), isMobile && /* @__PURE__ */ jsx("button", {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            })]
          }), /* @__PURE__ */ jsx(Toaster, {
            position: toastposition,
            reverseOrder: false
          }), /* @__PURE__ */ jsx("div", {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", {
              className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: pageSizeOptions,
                selectedValue: pageSize,
                onSelect: handlePageSizeChange,
                placeholder: "Items per page",
                className: "w-full md:w-[150px]"
              }), /* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                children: [/* @__PURE__ */ jsx(FileDown, {
                  className: "mr-1"
                }), !isMobile && "Export Excel"]
              }), /* @__PURE__ */ jsxs("button", {
                onClick: () => setShowCreateModal(true),
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                children: [!isMobile && "Add New Task", " +"]
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs("div", {
              className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: statusOptions,
                selectedValue: selectStatus,
                onSelect: handleStatusChange,
                placeholder: "Branch Status",
                className: "w-full md:w-[200px]"
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: branchCodeOptions,
                selectedValue: selectedBranchCode,
                onSelect: handleBranchCodeChange,
                placeholder: "Branch Code",
                className: "w-full md:w-[200px]",
                isLoading: isStoreLoading
              }), /* @__PURE__ */ jsxs("button", {
                onClick: toggleSortOrder,
                className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                children: ["Sort ", sortOrder === "desc" ? "" : ""]
              }), /* @__PURE__ */ jsx("div", {
                className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
                children: /* @__PURE__ */ jsx(SearchInput, {
                  value: searchTerm,
                  onChange: handleSearch,
                  placeholder: "Search branches...",
                  className: "w-full"
                })
              })]
            })
          }), loading && /* @__PURE__ */ jsx("div", {
            className: "text-center py-4",
            children: "Loading..."
          }), error && /* @__PURE__ */ jsx("div", {
            className: "text-red-500 text-center py-4",
            children: error
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead,
              tbody,
              responsive: true,
              className: "min-w-full"
            })
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
          children: /* @__PURE__ */ jsx(CustomPagination, {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "branches",
            isScroll: true
          })
        })]
      }), activeTab === "milestonedoc" && /* @__PURE__ */ jsx(MilestoneDocument, {})]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Add New Task Form",
      children: /* @__PURE__ */ jsx(AddNewTaskForMilestone, {
        milestone: milestoneData,
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Task Form",
      children: /* @__PURE__ */ jsx(EditTaskForm, {
        taskData: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Drop Milestone",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx(Network, {
              className: "inline mr-2"
            }), " Drop Milestone"]
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 text-sm font-medium text-center",
            children: "Are you sure you want to Drop this Milestone?"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(ClipboardType, {
                  className: "inline mr-1",
                  size: 14
                }), " Type"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "delete_type",
                value: inActiveData.delete_type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Type"
                }), /* @__PURE__ */ jsx("option", {
                  value: "temp",
                  children: "Temporary"
                }), /* @__PURE__ */ jsx("option", {
                  value: "permanent",
                  children: "Permanent"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(Tag, {
                  className: "inline mr-1",
                  size: 14
                }), " Status"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                value: inActiveData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "draft",
                  children: "Draft"
                }), /* @__PURE__ */ jsx("option", {
                  value: "planning",
                  children: "Planning"
                }), /* @__PURE__ */ jsx("option", {
                  value: "active",
                  children: "Active"
                }), /* @__PURE__ */ jsx("option", {
                  value: "paused",
                  children: "Paused"
                }), /* @__PURE__ */ jsx("option", {
                  value: "completed",
                  children: "Completed"
                }), /* @__PURE__ */ jsx("option", {
                  value: "revised",
                  children: "Revised"
                }), /* @__PURE__ */ jsx("option", {
                  value: "client_review",
                  children: "Client_review"
                }), /* @__PURE__ */ jsx("option", {
                  value: "drop",
                  children: "Drop"
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? "Processing..." : "Confirm"
          })]
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Meeting",
      children: /* @__PURE__ */ jsx(MilestoneMeetingForm, {
        milestone: milestoneData,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    })]
  });
};
const MilestoneTaskList$1 = withComponentProps(MilestoneTaskList);
const route16 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: MilestoneTaskList$1
}, Symbol.toStringTag, { value: "Module" }));
const AddNewLeadForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [campaignOptions, setCampaignOptions] = useState([]);
  const [isFetchingCampaigns, setIsFetchingCampaigns] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  const [formData, setFormData] = useState({
    branchcode: userRole === "superadmin" ? "" : branchcodeForNor,
    campaign_code: "",
    lead_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
    lead_name: "",
    phone: "",
    email: "",
    assignee_id: "",
    comm_type: "",
    proj_type: "",
    status: "active",
    summary: ""
  });
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  useEffect(() => {
    if (formData.branchcode) {
      fetchCampaignOptions(formData.branchcode);
    } else {
      setCampaignOptions([]);
    }
  }, [formData.branchcode]);
  const fetchCampaignOptions = async (branchcode) => {
    setIsFetchingCampaigns(true);
    try {
      const response = await axios.get(
        `${BASE_URL}/campaign/overview/dropdown?branchcode=${branchcode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((campaign) => ({
          value: campaign.campaign_code,
          label: campaign.campaignname
        }));
        setCampaignOptions(options);
      } else {
        setCampaignOptions([]);
      }
    } catch (err) {
      toast$1.error("Failed to fetch campaign options", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setCampaignOptions([]);
    } finally {
      setIsFetchingCampaigns(false);
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const leadData = {
      data: [formData]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/campaign/leads/create`,
        leadData,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create lead");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating lead");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookUser, { className: "inline mr-2" }),
        " Lead Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Campaign Code"
          ] }),
          isFetchingCampaigns ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading campaigns..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "campaign_code",
              value: formData.campaign_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode || campaignOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Campaign" }),
                campaignOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          formData.branchcode && campaignOptions.length === 0 && !isFetchingCampaigns && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No campaigns found for this branch" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Lead Name",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "lead_name",
              value: formData.lead_name,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter lead name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Phone ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "phone",
              value: formData.phone,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter phone number",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "email",
              value: formData.email,
              onChange: handleChange,
              type: "email",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter email"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Lead Date",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "lead_date",
              value: formData.lead_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
            " Department ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              value: selectedDepartment,
              onChange: (e) => {
                handleDepartmentChange(e.target.value);
                setFormData((prev) => ({ ...prev, assignee_id: "" }));
              },
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Assigned To ",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "assignee_id",
              value: formData.assignee_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !selectedDepartment || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Communication Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "email", children: "Email" }),
                /* @__PURE__ */ jsx("option", { value: "call", children: "Phone Call" }),
                /* @__PURE__ */ jsx("option", { value: "sms", children: "SMS" }),
                /* @__PURE__ */ jsx("option", { value: "whatsapp", children: "WhatsApp" }),
                /* @__PURE__ */ jsx("option", { value: "in-person", children: "In-Person" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Project Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "proj_type",
              value: formData.proj_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select type" }),
                /* @__PURE__ */ jsx("option", { value: "residential", children: "Residential" }),
                /* @__PURE__ */ jsx("option", { value: "commercial", children: "Commercial" }),
                /* @__PURE__ */ jsx("option", { value: "industrial", children: "Industrial" }),
                /* @__PURE__ */ jsx("option", { value: "land", children: "Land" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inactive", children: "Inactive" }),
                /* @__PURE__ */ jsx("option", { value: "converted", children: "Converted" }),
                /* @__PURE__ */ jsx("option", { value: "lost", children: "Lost" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Notes & Summary"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "summary",
          value: formData.summary,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter lead summary and notes..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Lead"
        }
      )
    ] })
  ] });
};
const CreateFollowupForm = ({ leadData, leadId, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const campaignCodeOption = useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  console.log("leaddeaafor", leadData);
  const [formData, setFormData] = useState({
    branchcode: leadData.branchcode,
    campaign_code: leadData.campaigncode,
    lead_id: leadId,
    next_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
    status: "active",
    notes: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const apiData = {
      data: [formData]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/campaign/followup/create`,
        apiData,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        toast$1.success("Followup created successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create followup");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating followup");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Add New Followup" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Camapign Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "campaign_code",
              value: formData.campaign_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Camapign" }),
                campaignCodeOption == null ? void 0 : campaignCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarClock, { className: "inline mr-1", size: 14 }),
            " Next Follow-up Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "next_date",
              value: formData.next_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "cancelled", children: "Cancelled" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Notes"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "notes",
          value: formData.notes,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter followup notes..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Followup"
        }
      )
    ] })
  ] });
};
const CampaignPage = () => {
  var _a;
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [campaignData, setCampaignData] = useState(null);
  const [loading, setLoading] = useState(true);
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const campaign_code = decodeURIComponent(id);
  const filterOptions = [{
    value: "client",
    label: "Client"
  }, {
    value: "Project",
    label: "Project"
  }, {
    value: "Leads",
    label: "Leads"
  }, {
    value: "Employee",
    label: "Employee"
  }];
  const statusOptions = [{
    value: "Pending",
    label: "Pending"
  }, {
    value: "Paid",
    label: "Paid"
  }, {
    value: "Un Paid",
    label: "Un-Paid"
  }];
  const getCampaign = async () => {
    try {
      setLoading(true);
      const response = await axios.get(`${BASE_URL}/campaign/overview/read/profile?campaign_code=${campaign_code}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setCampaignData(response.data.data);
      setSheetData(response.data.data.leads || []);
    } catch (error) {
      console.error("Error fetching campaign data:", error);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getCampaign();
  }, [campaign_code]);
  const thead = () => [{
    data: "Lead ID"
  }, {
    data: "Lead Name"
  }, {
    data: "Phone"
  }, {
    data: "Email"
  }, {
    data: "Assignee"
  }, {
    data: "Communication Type"
  }, {
    data: "Status"
  }];
  const tbody = () => {
    if (!(campaignData == null ? void 0 : campaignData.leads)) return [];
    return campaignData.leads.map((lead) => ({
      id: lead.id,
      data: [{
        data: lead.id
      }, {
        data: lead.lead_name
      }, {
        data: lead.phone
      }, {
        data: lead.email
      }, {
        data: lead.assignee_name
      }, {
        data: lead.comm_type
      }, {
        data: /* @__PURE__ */ jsx("div", {
          className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${lead.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,
          children: lead.status.charAt(0).toUpperCase() + lead.status.slice(1)
        })
      }]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "CampaignLeads");
    XLSX.writeFile(wb, `Campaign_${campaign_code}_Leads.xlsx`);
  };
  const navigate = useNavigate();
  const handleGoBack = () => {
    navigate(-1);
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "p-4 text-center",
      children: "Loading campaign data..."
    });
  }
  if (!campaignData) {
    return /* @__PURE__ */ jsx("div", {
      className: "p-4 text-center",
      children: "Failed to load campaign data"
    });
  }
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx("div", {
          className: "p-4 text-red-700 mb-5",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex gap-5",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "text-2xl font-bold",
              children: "Campaign View Page"
            }), /* @__PURE__ */ jsxs("div", {
              className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 ${campaignData.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,
              children: [/* @__PURE__ */ jsx(Dot, {}), campaignData.status.toUpperCase()]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          children: /* @__PURE__ */ jsxs("button", {
            className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
            onClick: handleGoBack,
            children: [/* @__PURE__ */ jsx(LogOut, {
              className: "inline rotate-180 text-gray-500 mr-3"
            }), "Go Back"]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "w-full max-w-full mx-auto p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-6",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-xl font-bold text-gray-600 dark:text-white",
          children: "Campaign Details"
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-2 gap-6",
          children: [/* @__PURE__ */ jsx("div", {
            className: "space-y-4",
            children: /* @__PURE__ */ jsxs("div", {
              className: "p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",
                children: "Campaign Information"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-3 text-sm",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Campaign Name:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.campaginName || "N/A"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Campaign Code:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.campaign_code
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Branch Code:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.branchcode
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Campaign Type:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.campaigntype || "N/A"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Status:"
                  }), /* @__PURE__ */ jsxs("div", {
                    className: `inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${campaignData.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400"}`,
                    children: [/* @__PURE__ */ jsx(Dot, {}), campaignData.status.toUpperCase()]
                  })]
                })]
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "space-y-4",
            children: /* @__PURE__ */ jsxs("div", {
              className: "p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",
                children: "Campaign Timeline & Goals"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-3 text-sm",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Start Date:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: new Date(campaignData.startdate).toLocaleDateString() || "N/A"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "End Date:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: new Date(campaignData.enddate).toLocaleDateString() || "N/A"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Current Leads:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.lead || 0
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Goal Leads:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: campaignData.goallead || 0
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Conversion Rate:"
                  }), /* @__PURE__ */ jsxs("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: [campaignData.conversationrate || 0, "%"]
                  })]
                })]
              })]
            })
          })]
        }), campaignData.summary && /* @__PURE__ */ jsxs("div", {
          className: "p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",
            children: "Campaign Summary"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-sm text-gray-600 dark:text-gray-300",
            children: campaignData.summary
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "flex flex-col",
          children: /* @__PURE__ */ jsxs("div", {
            className: "p-4 flex-grow",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-end justify-end",
              children: [/* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "text-gray-400 bg-white focus:outline-non font-medium text-xs rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-1 text-center mr-5 mb-5 flex items-center",
                children: [/* @__PURE__ */ jsx(FileDown, {}), "Export Excel"]
              }), /* @__PURE__ */ jsx("button", {
                onClick: () => setShowModal(true),
                className: "text-white text-xs bg-red-700 focus:outline-non font-medium rounded px-3 py-2.5 text-center mr-5 mb-5 flex items-center",
                children: "+ Add New Lead"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex justify-between mb-4",
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: filterOptions,
                selectedValue: selectedFilter,
                onSelect: setSelectedFilter,
                placeholder: "Filter By",
                className: "w-[150px]"
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: statusOptions,
                selectedValue: selectStatus,
                onSelect: setSelectStatus,
                placeholder: "Lead Status",
                className: "w-[150px]"
              }), /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: setSearchTerm,
                placeholder: "Search leads..."
              })]
            }), /* @__PURE__ */ jsx(DataTable, {
              thead,
              tbody
            }), /* @__PURE__ */ jsx("div", {
              className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4 mt-10",
              children: /* @__PURE__ */ jsx(CustomPagination, {
                total: ((_a = campaignData.leads) == null ? void 0 : _a.length) || 0,
                currentPage,
                defaultPageSize: 10,
                onChange: setCurrentPage,
                paginationLabel: "leads",
                isScroll: true
              })
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showModal,
      className: "w-[200px]",
      onClose: () => setShowModal(false),
      title: "Add New Lead",
      children: /* @__PURE__ */ jsx(AddNewLeadForm, {
        campaignCode: campaignData.campaign_code,
        onSuccess: () => {
          setShowModal(false);
          getCampaign();
        }
      })
    })]
  });
};
const ViewCampaignDetails = withComponentProps(CampaignPage);
const route17 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ViewCampaignDetails
}, Symbol.toStringTag, { value: "Module" }));
const AddNewTaskMember = ({ taskData: taskData2, onSuccess, onCancel }) => {
  console.log("taskdattaaaa", taskData2);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [teamOptions, setTeamOptions] = useState([]);
  const [teamMembers, setTeamMembers] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    branchcode: taskData2.branchcode,
    task_id: taskData2.id,
    collaborate: [
      {
        subtask_title: "",
        staff_id: "",
        status: "open"
      }
    ],
    status: "draft"
  });
  useEffect(() => {
    setTeamMembers([]);
  }, []);
  const fetchTeamMembers = async () => {
    const teamId = taskData2.team_id;
    console.log("teamiddd", teamId);
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read/profile?team_id=${teamId}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      console.log("teammeberrssss", response);
      if (response.data && response.data.data) {
        const members = response.data.data.members;
        console.log("memberrss", members);
        setTeamMembers(members);
      }
    } catch (err) {
      console.error("Error fetching team members:", err);
      toast$1.error("Failed to load team members");
    }
  };
  useEffect(() => {
    fetchTeamMembers();
  }, []);
  const handleCollaborateChange = (index, e) => {
    const { name, value } = e.target;
    const updatedCollaborate = [...formData.collaborate];
    updatedCollaborate[index] = {
      ...updatedCollaborate[index],
      [name]: value
    };
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const addCollaborate = () => {
    setFormData((prev) => ({
      ...prev,
      collaborate: [
        ...prev.collaborate,
        {
          subtask_title: "",
          staff_id: "",
          status: "open"
        }
      ]
    }));
  };
  const removeCollaborate = (index) => {
    if (formData.collaborate.length === 1) return;
    const updatedCollaborate = formData.collaborate.filter(
      (_, i) => i !== index
    );
    setFormData((prev) => ({
      ...prev,
      collaborate: updatedCollaborate
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d, _e, _f;
    e.preventDefault();
    setLoading(true);
    setError(null);
    const taskDatas = {
      data: {
        branchcode: taskData2.branchcode,
        task_id: taskData2.id,
        collaborate: formData.collaborate
      }
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/project/task/members/create`,
        taskDatas,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (((_c = (_b = (_a = response.data) == null ? void 0 : _a.data) == null ? void 0 : _b.skipped) == null ? void 0 : _c.length) > 0) {
        const skipReason = response.data.data.skipped[0].reason;
        if (skipReason) {
          setError(skipReason);
          toast$1.error(skipReason);
          return;
        }
      }
      if (response.status === 200 || response.status === 201) {
        toast$1.success("Task Member added successfully!");
        onSuccess();
      } else {
        throw new Error(((_d = response.data) == null ? void 0 : _d.message) || "Failed to create task");
      }
    } catch (err) {
      const errorMessage = ((_f = (_e = err.response) == null ? void 0 : _e.data) == null ? void 0 : _f.message) || err.message || "An error occurred while creating task";
      setError(errorMessage);
      toast$1.error(errorMessage);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative", children: error }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Collaborators" }),
      formData.collaborate.map((collaborate, index) => /* @__PURE__ */ jsxs(
        "div",
        {
          className: "grid grid-cols-1 md:grid-cols-2 gap-4 relative",
          children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
                " Sub Task Title"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "subtask_title",
                  value: collaborate.subtask_title,
                  onChange: (e) => handleCollaborateChange(index, e),
                  type: "text",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  placeholder: "Enter Subtask Title",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                " Team Member"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "staff_id",
                  value: collaborate.staff_id,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "", children: "Select Team Member" }),
                    teamMembers == null ? void 0 : teamMembers.map((member) => /* @__PURE__ */ jsxs("option", { value: member.staff_id, children: [
                      member.staff_name,
                      " (",
                      member.department,
                      ")"
                    ] }, member.staff_id))
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
                " Collaboration Status"
              ] }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  name: "status",
                  value: collaborate.status,
                  onChange: (e) => handleCollaborateChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
                    /* @__PURE__ */ jsx("option", { value: "inprocess", children: "In Progress" }),
                    /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Completed" }),
                    /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                    /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" }),
                    /* @__PURE__ */ jsx("option", { value: "drop", children: "Drop" })
                  ]
                }
              )
            ] }),
            index > 0 && /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                onClick: () => removeCollaborate(index),
                className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
                children: /* @__PURE__ */ jsx(Trash2, { size: 16 })
              }
            )
          ]
        },
        index
      )),
      /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: addCollaborate,
          className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
          children: [
            /* @__PURE__ */ jsx(Plus, { size: 16 }),
            " Add Another Collaborator"
          ]
        }
      )
    ] }),
    " ",
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          disabled: loading,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm disabled:opacity-70",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Task"
        }
      )
    ] })
  ] });
};
const StarRating = ({ rating, maxRating = 5, editable = false, onRatingChange }) => {
  const [hoverRating, setHoverRating] = useState(0);
  const handleClick = (newRating) => {
    if (editable && onRatingChange) {
      onRatingChange(newRating);
    }
  };
  const handleMouseEnter = (newHoverRating) => {
    if (editable) {
      setHoverRating(newHoverRating);
    }
  };
  const handleMouseLeave = () => {
    if (editable) {
      setHoverRating(0);
    }
  };
  return /* @__PURE__ */ jsx("div", { className: "flex items-center", children: [...Array(maxRating)].map((_, index) => {
    const starValue = index + 1;
    const isFilled = starValue <= (hoverRating || rating);
    return /* @__PURE__ */ jsx(
      "button",
      {
        type: "button",
        className: `${editable ? "cursor-pointer" : "cursor-default"}`,
        onClick: () => handleClick(starValue),
        onMouseEnter: () => handleMouseEnter(starValue),
        onMouseLeave: handleMouseLeave,
        disabled: !editable,
        children: /* @__PURE__ */ jsx(
          IoIosStar,
          {
            size: 20,
            className: isFilled ? "text-yellow-500" : "text-gray-300 dark:text-gray-500"
          }
        )
      },
      index
    );
  }) });
};
const TaskMeetingForm = ({ taskData: taskData2, onSuccess, onCancel }) => {
  console.log("projectcodeee", taskData2);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [customTargets, setCustomTargets] = useState([]);
  const [branches, setBranches] = useState([]);
  const [teams, setTeams] = useState([]);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showParticipants, setShowParticipants] = useState(false);
  const [showCustomTargets, setShowCustomTargets] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const [filterTargets, setFilterTargets] = useState([
    {
      type: "",
      branchcode: "",
      teamId: "",
      staffType: "staff"
    }
  ]);
  const [formData, setFormData] = useState({
    branchcode: taskData2.branchcode,
    task_id: taskData2.task_id,
    title: "",
    notes: "",
    comm_type: "meeting",
    status: "active",
    doc_status: "none",
    meet_link: "",
    start_date_time: "2025-02-01T00:00:00Z,",
    end_date_time: "2025-02-01T23:59:59Z",
    category: "branch",
    field: "custom",
    doc: [],
    custom: [],
    communication_participants: []
  });
  useEffect(() => {
    const fetchInitialData = async () => {
      try {
        const branchesRes = await axios.get(`${BASE_URL}/branch/dropdown`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        setBranches(branchesRes.data.result);
      } catch (err) {
        console.error("Error fetching initial data:", err);
        toast$1.error("Failed to load initial data");
      }
    };
    fetchInitialData();
  }, [token]);
  useEffect(() => {
    const branchcodes = [
      ...new Set(
        filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode)
      )
    ];
    const fetchTeamsForBranches = async () => {
      try {
        const teamsPromises = branchcodes.map(async (branchcode) => {
          const teamsRes = await axios.get(
            `${BASE_URL}/teams/read?branchcode=${branchcode}`,
            { headers: { Authorization: `Bearer ${token}` } }
          );
          return teamsRes.data.data;
        });
        const teamsResults = await Promise.all(teamsPromises);
        setTeams(teamsResults.flat());
      } catch (err) {
        console.error("Error fetching teams:", err);
        toast$1.error("Failed to load teams");
      }
    };
    if (branchcodes.length > 0) {
      fetchTeamsForBranches();
    }
  }, [filterTargets, token]);
  useEffect(() => {
    if (formData.category === "custom") {
      fetchCustomParticipants();
    } else if (formData.category === "branch" && formData.branchcode) {
      fetchBranchParticipants();
    } else if (formData.category === "team") {
      fetchTeamParticipants();
    }
  }, [formData.category, formData.branchcode, filterTargets]);
  const fetchBranchParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchTeamParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchCustomParticipants = async () => {
    try {
      const branchFilters = filterTargets.filter((target) => target.type === "branch" && target.branchcode).map((target) => target.branchcode);
      const teamFilters = filterTargets.filter(
        (target) => target.type === "team" && target.teamId && target.branchcode
      ).map((target) => {
        const teamIdParts = target.teamId.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        return `${target.branchcode}/TEAM/${teamId}`;
      });
      const teamBranchFilters = filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode);
      const allBranchFilters = [
        .../* @__PURE__ */ new Set([...branchFilters, ...teamBranchFilters])
      ];
      const staffTypeFilters = [];
      filterTargets.forEach((target) => {
        if (target.type === "branch" || target.type === "team") {
          if (target.staffType === "staff") staffTypeFilters.push("staff");
          if (target.staffType === "client") staffTypeFilters.push("client");
          if (target.staffType === "both") {
            staffTypeFilters.push("staff");
            staffTypeFilters.push("client");
          }
        }
      });
      const uniqueStaffTypes = [...new Set(staffTypeFilters)];
      console.log("Sending filter request with:", {
        branch: allBranchFilters,
        team: teamFilters,
        type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
      });
      if (allBranchFilters.length > 0 || teamFilters.length > 0) {
        const response = await axios.post(
          `${BASE_URL}/users/filter`,
          {
            branch: allBranchFilters,
            team: teamFilters,
            type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
          },
          { headers: { Authorization: `Bearer ${token}` } }
        );
        setStaffOptions([...response.data.staff, ...response.data.client]);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      console.error("Error fetching custom participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "category") {
      setCustomTargets([]);
      setFilterTargets([
        { type: "", branchcode: "", teamId: "", staffType: "staff" }
      ]);
    }
  };
  const handleFileUpload = (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const uploadedFiles = files.map((file) => ({
      file,
      // Store the actual File object
      name: file.name,
      type: file.type.split("/")[1] || "file"
    }));
    setFormData((prev) => ({
      ...prev,
      doc: [...prev.doc, ...uploadedFiles]
    }));
  };
  const removeFile = (index) => {
    setFormData((prev) => {
      const updatedFiles = [...prev.doc];
      updatedFiles.splice(index, 1);
      return { ...prev, doc: updatedFiles };
    });
  };
  const addParticipant = (person) => {
    if (!participants.some((p) => p.person_id === person.person_id)) {
      setParticipants([
        ...participants,
        {
          person_id: person.person_id,
          role: person.role,
          isdocvisible: formData.comm_type === "doc"
        }
      ]);
    }
  };
  const removeParticipant = (personId) => {
    setParticipants(participants.filter((p) => p.person_id !== personId));
  };
  const toggleDocVisibility = (personId) => {
    setParticipants(
      participants.map(
        (p) => p.person_id === personId ? { ...p, isdocvisible: !p.isdocvisible } : p
      )
    );
  };
  const addCustomTarget = (type, id) => {
    if (type === "team") {
      const target = filterTargets.find(
        (t) => t.type === "team" && t.teamId === id
      );
      if (target && target.branchcode) {
        const teamIdParts = id.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        const formattedId = `${target.branchcode}/TEAM/${teamId}`;
        if (!customTargets.some(
          (t) => t.target_id === formattedId && t.type === type
        )) {
          setCustomTargets([
            ...customTargets,
            { target_id: formattedId, type }
          ]);
        }
        return;
      }
    }
    if (!customTargets.some((t) => t.target_id === id && t.type === type)) {
      setCustomTargets([...customTargets, { target_id: id, type }]);
    }
  };
  const handleFilterTargetChange = (index, field, value) => {
    const updatedTargets = [...filterTargets];
    updatedTargets[index][field] = value;
    if (field === "type") {
      updatedTargets[index].branchcode = "";
      updatedTargets[index].teamId = "";
    } else if (field === "branchcode" && updatedTargets[index].type === "team") {
      updatedTargets[index].teamId = "";
    }
    setFilterTargets(updatedTargets);
  };
  const addFilterTarget = () => {
    setFilterTargets([
      ...filterTargets,
      { type: "", branchcode: "", teamId: "", staffType: "staff" }
    ]);
  };
  const removeFilterTarget = (index) => {
    var _a, _b, _c, _d;
    if (filterTargets.length > 1) {
      const updatedTargets = [...filterTargets];
      updatedTargets.splice(index, 1);
      setFilterTargets(updatedTargets);
      if (((_a = updatedTargets[index]) == null ? void 0 : _a.type) === "branch" && ((_b = updatedTargets[index]) == null ? void 0 : _b.branchcode)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "branch" && t.target_id === updatedTargets[index].branchcode)
          )
        );
      } else if (((_c = updatedTargets[index]) == null ? void 0 : _c.type) === "team" && ((_d = updatedTargets[index]) == null ? void 0 : _d.teamId)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "team" && t.target_id === updatedTargets[index].teamId)
          )
        );
      }
    }
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const meetingData = {
        branchcode: taskData2.branchcode,
        task_id: taskData2.id,
        title: formData.title,
        notes: formData.notes,
        comm_type: formData.comm_type,
        status: formData.status,
        meet_link: formData.meet_link,
        start_date_time: formData.start_date_time,
        end_date_time: formData.end_date_time,
        doc_status: formData.doc_status,
        category: formData.category,
        field: formData.field,
        custom: customTargets,
        communication_participants: participants
      };
      const formDataToSend = new FormData();
      formDataToSend.append("data", JSON.stringify([meetingData]));
      formData.doc.forEach((fileObj) => {
        formDataToSend.append("URL", fileObj.file);
      });
      console.log("formataaaanew form", formDataToSend);
      const response = await axios.post(
        `${BASE_URL}/doc_meet/create`,
        formDataToSend,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "multipart/form-data"
          }
        }
      );
      if (response.status === 201) {
        onSuccess();
        setFormData({
          branchcode: project.branchcode,
          client_code: project.client_code,
          project_code: project.project_code,
          title: "",
          notes: "",
          comm_type: "meeting",
          status: "active",
          doc_status: "none",
          meet_link: "",
          start_date_time: "2025-02-01T00:00:00Z,",
          end_date_time: "2025-02-01T23:59:59Z",
          category: "branch",
          field: "custom",
          doc: [],
          custom: [],
          communication_participants: []
        });
      } else {
        setError(response.data.message || "Failed to create communication");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `Error creating ${formData.comm_type === "meeting" ? "meeting" : "document"}`
      );
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        formData.comm_type === "meeting" ? /* @__PURE__ */ jsx(Video, { className: "inline mr-2" }) : /* @__PURE__ */ jsx(FileUp, { className: "inline mr-2" }),
        formData.comm_type === "meeting" ? "Meeting Information" : "Document Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Title",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Title",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Type",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "meeting", children: "Meeting" }),
                /* @__PURE__ */ jsx("option", { value: "doc", children: "Document" }),
                /* @__PURE__ */ jsx("option", { value: "followup", children: "Follow-up" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "declined", children: "Declined" })
              ]
            }
          )
        ] }),
        formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Document Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "doc_status",
              value: formData.doc_status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "none", children: "None" }),
                /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Verified & Closed" }),
                /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" })
              ]
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Link$2, { className: "inline mr-1", size: 14 }),
            " Meeting Link",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "meet_link",
              value: formData.meet_link,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "url",
              placeholder: "https://meet.google.com/example",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date_time",
              value: formData.start_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " End Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date_time",
              value: formData.end_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Category",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "category",
              value: formData.category,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                /* @__PURE__ */ jsx("option", { value: "team", children: "Team" }),
                /* @__PURE__ */ jsx("option", { value: "all", children: "All" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Field"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "field",
              value: formData.field,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "project", children: "Project" }),
                /* @__PURE__ */ jsx("option", { value: "task", children: "Task" }),
                /* @__PURE__ */ jsx("option", { value: "lead", children: "Lead" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Notes...",
            required: true
          }
        )
      ] }),
      formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileUp, { className: "inline mr-1", size: 14 }),
          " Documents"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "file",
            id: "file-upload",
            multiple: true,
            onChange: handleFileUpload,
            className: "w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-primary)] file:text-white hover:file:bg-[var(--color-hover)]"
          }
        ),
        formData.doc.length > 0 && /* @__PURE__ */ jsx("div", { className: "mt-4 space-y-2", children: formData.doc.map((file, index) => /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
            children: [
              /* @__PURE__ */ jsx("span", { className: "text-sm", children: file.name }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => removeFile(index),
                  className: "text-red-500 hover:text-red-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ]
          },
          index
        )) })
      ] }),
      formData.category === "custom" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowCustomTargets(!showCustomTargets),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Custom Filters (",
                customTargets.length,
                ")"
              ] }),
              showCustomTargets ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showCustomTargets && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          filterTargets.map((target, index) => /* @__PURE__ */ jsxs(
            "div",
            {
              className: "space-y-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",
              children: [
                /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsxs("h5", { className: "text-sm font-medium", children: [
                    "Filter ",
                    index + 1
                  ] }),
                  filterTargets.length > 1 && /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeFilterTarget(index),
                      className: "text-red-500 hover:text-red-700 p-1",
                      children: /* @__PURE__ */ jsx(Minus, { size: 16 })
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Filter Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.type,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "type",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select filter type" }),
                          /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                          /* @__PURE__ */ jsx("option", { value: "team", children: "Team" })
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Branch" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.branchcode,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "branchcode",
                            e.target.value
                          );
                          handleFilterTargetChange(index, "teamId", "");
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select branch" }),
                          branches.map((branch2) => /* @__PURE__ */ jsxs(
                            "option",
                            {
                              value: branch2.branchcode,
                              children: [
                                branch2.branchcode,
                                " - ",
                                branch2.name
                              ]
                            },
                            branch2.branchcode
                          ))
                        ]
                      }
                    )
                  ] }),
                  target.type === "team" && target.branchcode && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.teamId,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "teamId",
                            e.target.value
                          );
                          if (e.target.value) {
                            addCustomTarget("team", e.target.value);
                          }
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select team" }),
                          teams.filter(
                            (team) => team.branchcode === target.branchcode
                          ).map((team) => /* @__PURE__ */ jsx("option", { value: team.team_id, children: team.team_name }, team.team_id))
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.staffType,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "staffType",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "staff", children: "Staff" }),
                          /* @__PURE__ */ jsx("option", { value: "client", children: "Client" }),
                          /* @__PURE__ */ jsx("option", { value: "both", children: "Both" })
                        ]
                      }
                    )
                  ] })
                ] }),
                target.type === "branch" && target.branchcode && /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: () => addCustomTarget("branch", target.branchcode),
                    className: "text-xs bg-red-700 hover:bg-red-700 text-white px-2 py-1 rounded",
                    children: "Add Branch Filter"
                  }
                ) })
              ]
            },
            index
          )),
          /* @__PURE__ */ jsxs(
            "button",
            {
              type: "button",
              onClick: addFilterTarget,
              className: "flex items-center text-sm text-blue-500 hover:text-blue-700",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Another Filter"
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowParticipants(!showParticipants),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Participants (",
                participants.length,
                ")"
              ] }),
              showParticipants ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showParticipants && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: formData.category === "custom" ? "Select participants from filtered results" : `Select participants from ${formData.category}` }),
            staffOptions.length > 0 ? /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: staffOptions.map((person) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    person.person_id,
                    " (",
                    person.role,
                    ")"
                  ] }),
                  participants.some(
                    (p) => p.person_id === person.person_id
                  ) ? /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeParticipant(person.person_id),
                      className: "text-red-500 hover:text-red-700",
                      children: /* @__PURE__ */ jsx(X, { size: 16 })
                    }
                  ) : /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => addParticipant(person),
                      className: "text-green-500 hover:text-green-700",
                      children: /* @__PURE__ */ jsx(Check, { size: 16 })
                    }
                  )
                ]
              },
              person.person_id
            )) }) : /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "No participants available based on current filters" })
          ] }),
          participants.length > 0 && /* @__PURE__ */ jsxs("div", { className: "mt-4", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: "Selected Participants" }),
            /* @__PURE__ */ jsx("div", { className: "space-y-2", children: participants.map((participant) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    participant.person_id,
                    " (",
                    participant.role,
                    ")"
                  ] }),
                  /* @__PURE__ */ jsxs("div", { className: "flex items-center space-x-2", children: [
                    formData.comm_type === "doc" && /* @__PURE__ */ jsxs("label", { className: "flex items-center space-x-1", children: [
                      /* @__PURE__ */ jsx(
                        "input",
                        {
                          type: "checkbox",
                          checked: participant.isdocvisible,
                          onChange: () => toggleDocVisibility(participant.person_id),
                          className: "rounded"
                        }
                      ),
                      /* @__PURE__ */ jsx("span", { className: "text-xs", children: "View Doc" })
                    ] }),
                    /* @__PURE__ */ jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => removeParticipant(participant.person_id),
                        className: "text-red-500 hover:text-red-700",
                        children: /* @__PURE__ */ jsx(X, { size: 16 })
                      }
                    )
                  ] })
                ]
              },
              participant.person_id
            )) })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.comm_type === "meeting" ? "Create Meeting" : "Upload Document"
        }
      )
    ] })
  ] });
};
function TaskDocuments() {
  const documents = [
    {
      uri: "/documents/Abc Client Documents.pdf",
      fileType: "pdf",
      fileName: "Abc Client Documents.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject draft.pdf",
      fileType: "pdf",
      fileName: "AbcProject Meeting Document.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject Final 2 Documents.pdf",
      fileType: "pdf",
      fileName: "Abc company overview.pdf",
      fileSize: "15MB"
    },
    {
      uri: "/documents/AbcProject final Document.pdf",
      fileType: "pdf",
      fileName: "Abc structure Documents.pdf",
      fileSize: "15MB"
    }
  ];
  const [selectedDoc, setSelectedDoc] = useState(documents[0]);
  const [key, setKey] = useState(0);
  const handleDocSelect = (doc) => {
    setSelectedDoc(doc);
    setKey((prev) => prev + 1);
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col h-[1050px] p-6 bg-gray-50", children: [
    /* @__PURE__ */ jsx("h1", { className: "text-xl font-bold text-red-800 mb-8", children: "Client Documents" }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-1 gap-6 overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "w-96 flex flex-col border-l border-gray-200 pl-6 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300", children: "Documents List" }),
        /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800", children: /* @__PURE__ */ jsx("ul", { className: "space-y-2", children: documents.map((doc) => /* @__PURE__ */ jsx(
          "li",
          {
            className: `p-3 rounded-lg cursor-pointer transition-all duration-200 ${selectedDoc.uri === doc.uri ? "bg-red-50/80 border-l-4 border-red-600 shadow-sm dark:bg-red-900/20 dark:border-red-500" : "bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/70"}`,
            onClick: () => handleDocSelect(doc),
            children: /* @__PURE__ */ jsxs("div", { className: "flex items-start", children: [
              /* @__PURE__ */ jsx("div", { className: "mr-3 mt-0.5", children: doc.fileType === "pdf" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-red-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : doc.fileType === "doc" || doc.fileType === "docx" ? /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-blue-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) : /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 text-gray-500", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z", clipRule: "evenodd" }) }) }),
              /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
                /* @__PURE__ */ jsx("div", { className: "font-medium text-gray-900 truncate dark:text-gray-200", children: doc.fileName }),
                /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mt-1", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-xs font-mono text-gray-500 dark:text-gray-400", children: doc.fileType.toUpperCase() }),
                  /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-400 dark:text-gray-500", children: doc.fileSize || "--" })
                ] })
              ] })
            ] })
          },
          doc.uri
        )) }) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex-1 bg-white rounded-lg shadow-md overflow-hidden", children: /* @__PURE__ */ jsx(
        DocViewer,
        {
          documents: [selectedDoc],
          pluginRenderers: DocViewerRenderers,
          theme: {
            primary: "rgb(185 28 28)",
            secondary: "#BDBDBD",
            tertiary: "#BDBDBD",
            textPrimary: "#ffffff",
            textSecondary: "rgb(185 28 28)",
            textTertiary: "rgb(185 28 28)",
            disableThemeScrollbar: false
          },
          config: {
            header: {
              disableHeader: false,
              disableFileName: true,
              retainURLParams: false
            }
          }
        },
        key
      ) })
    ] })
  ] });
}
const TaskViewPage = () => {
  var _a;
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [taskData2, setTaskData] = useState();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [selectedTask, setSelectedTask] = useState();
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const [activeTab, setActiveTab] = useState("taskmeber");
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const navigate = useNavigate();
  const [editingParticipants, setEditingParticipants] = useState({});
  const fetchTaskData = async () => {
    var _a2, _b, _c, _d;
    try {
      setLoading(true);
      const response = await axios.get(`${BASE_URL}/project/task/read?taskid=${id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setTaskData((_a2 = response == null ? void 0 : response.data) == null ? void 0 : _a2.data[0]);
      const participantsState = {};
      (_d = (_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data[0]) == null ? void 0 : _c.participantdetails) == null ? void 0 : _d.forEach((participant) => {
        participantsState[participant.participants_id] = {
          status: participant.status,
          rating: participant.rating || 0,
          showRating: false
        };
      });
      setEditingParticipants(participantsState);
      setLoading(false);
    } catch (err) {
      setError(err.message);
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchTaskData();
  }, [id]);
  const handleStatusChange = (participantId, newStatus) => {
    setEditingParticipants((prev) => ({
      ...prev,
      [participantId]: {
        ...prev[participantId],
        status: newStatus,
        showRating: newStatus === "verified-closed"
      }
    }));
    if (newStatus !== "verified-closed") {
      handleUpdateParticipant(participantId, newStatus);
    }
  };
  const handleRatingChange = (participantId, newRating) => {
    setEditingParticipants((prev) => ({
      ...prev,
      [participantId]: {
        ...prev[participantId],
        rating: newRating
      }
    }));
  };
  const handleRatingSubmit = async (participantId) => {
    const {
      status,
      rating
    } = editingParticipants[participantId];
    if (rating < 1 || rating > 5) {
      toast$1.error("Please select a rating between 1 and 5");
      return;
    }
    await handleUpdateParticipant(participantId, status, rating);
    setEditingParticipants((prev) => ({
      ...prev,
      [participantId]: {
        ...prev[participantId],
        showRating: false
      }
    }));
  };
  const tabs = [{
    id: "taskmeber",
    label: "Tasks Details"
  }, {
    id: "taskdoc",
    label: "Task Documents"
  }];
  const handleUpdateParticipant = async (participantId, status, rating = null) => {
    const statusData = {
      data: {
        status,
        ...status === "verified-closed" && rating !== null ? {
          rating
        } : {}
      }
    };
    try {
      await axios.put(`${BASE_URL}/project/task/members/edit/${participantId}`, statusData, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setTaskData((prev) => ({
        ...prev,
        participantdetails: prev.participantdetails.map((p) => p.participants_id === participantId ? {
          ...p,
          status,
          ...status === "verified-closed" ? {
            rating
          } : {}
        } : p)
      }));
      toast$1.success("Status updated successfully!");
    } catch (err) {
      console.error("Error updating participant:", err);
      toast$1.error("Failed to update status");
      fetchTaskData();
    }
  };
  const handleAddParticipant = (taskData22) => {
    setSelectedTask(taskData22);
    setShowCreateModal(true);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Member added successfully!");
    fetchTaskData();
  };
  const handleView = (memberId) => {
    navigate(`/member_view/${memberId}`);
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  if (loading) return /* @__PURE__ */ jsx("div", {
    className: "p-4",
    children: "Loading..."
  });
  if (error) return /* @__PURE__ */ jsxs("div", {
    className: "p-4 text-red-500",
    children: ["Error: ", error]
  });
  if (!taskData2) return /* @__PURE__ */ jsx("div", {
    className: "p-4",
    children: "No task data found"
  });
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx(Toaster, {
        position: toastposition
      }), /* @__PURE__ */ jsx("div", {
        className: "p-4 text-red-700 mb-10",
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex gap-5",
          children: [/* @__PURE__ */ jsx("h1", {
            className: "text-2xl font-bold",
            children: "Task View Page"
          }), /* @__PURE__ */ jsxs("div", {
            className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400",
            children: [/* @__PURE__ */ jsx(Dot, {}), taskData2.status]
          })]
        })
      }), /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsxs("button", {
          className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
          onClick: () => navigate(-1),
          children: [/* @__PURE__ */ jsx(LogOut, {
            className: "inline rotate-180 text-gray-500 mr-3"
          }), "Go Back"]
        })
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "w-full max-w-full mx-auto p-10 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-4",
      children: [/* @__PURE__ */ jsx("h2", {
        className: "text-xl font-bold text-gray-600 dark:text-white",
        children: taskData2.task_title
      }), /* @__PURE__ */ jsx("div", {
        className: "flex justify-end",
        children: /* @__PURE__ */ jsxs("button", {
          onClick: () => setShowMeetingModal(true),
          className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
          children: ["New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
            className: "ml-2",
            size: 15
          })]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-300",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Project:"
          }), " ", taskData2.projecttitle]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Milestone:"
          }), " ", taskData2.milestonetitle]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Priority:"
          }), " ", taskData2.task_priority]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Assigned By:"
          }), " ", taskData2.handlername]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("span", {
            className: "font-medium text-green-700 dark:text-gray-100",
            children: [/* @__PURE__ */ jsx(CalendarCheck2, {
              className: "inline",
              size: 20
            }), " Start Date:"]
          }), " ", new Date(taskData2.start_date).toLocaleDateString()]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("span", {
            className: "font-medium text-red-700 dark:text-gray-100",
            children: [/* @__PURE__ */ jsx(CalendarClock, {
              className: "inline",
              size: 20
            }), " End Date:"]
          }), " ", new Date(taskData2.end_date).toLocaleDateString()]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Duration:"
          }), " ", taskData2.duration_days, " days"]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Team:"
          }), " ", taskData2.teamname]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Client:"
          }), " ", taskData2.client_name]
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "text-sm text-gray-700 dark:text-gray-200 mt-4",
        children: /* @__PURE__ */ jsxs("p", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-semibold",
            children: "Task Description:"
          }), /* @__PURE__ */ jsx("br", {}), taskData2.notes]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex items-center justify-between text-sm mt-4",
        children: [/* @__PURE__ */ jsx("div", {
          className: "text-gray-700 dark:text-gray-200",
          children: /* @__PURE__ */ jsx("span", {
            className: "font-semibold",
            children: "Task Progress:"
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex items-center",
          children: [/* @__PURE__ */ jsx("div", {
            className: "w-[250px] rounded-full h-2.5 bg-gray-200 dark:bg-gray-700",
            children: /* @__PURE__ */ jsx("div", {
              className: `bg-red-700 h-2.5 rounded-full transition-all duration-500`,
              style: {
                width: `70%`
              }
            })
          }), /* @__PURE__ */ jsx("span", {
            className: "text-red-700 ml-3",
            children: "70%"
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "border-b border-gray-200 dark:border-gray-700 mt-5 mb-5",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex -mb-px",
        children: tabs.map((tab) => /* @__PURE__ */ jsx("button", {
          onClick: () => setActiveTab(tab.id),
          className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
          children: tab.label
        }, tab.id))
      })
    }), activeTab === "taskmeber" && /* @__PURE__ */ jsxs(Fragment, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "w-full max-w-full mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg mt-6",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-gray-600 dark:text-white",
            children: "Task Participants"
          }), /* @__PURE__ */ jsx("div", {
            className: "flex",
            children: /* @__PURE__ */ jsxs("button", {
              onClick: () => handleAddParticipant(taskData2),
              className: "bg-red-700 hover:bg-red-800 text-white px-6 py-1.5 rounded text-sm",
              children: [/* @__PURE__ */ jsx(UserPlus2, {
                size: 15,
                className: "inline"
              }), " Add"]
            })
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",
          children: (_a = taskData2.participantdetails) == null ? void 0 : _a.map((participant) => {
            var _a2, _b, _c;
            return /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow hover:transition-shadow hover:scale-103",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-start",
                children: [/* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("h3", {
                    className: "font-medium text-red-800 dark:text-white",
                    children: participant.subtitle
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-sm text-red-600 dark:text-gray-300",
                    children: participant.name
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex space-x-2",
                  children: [/* @__PURE__ */ jsx(StarRating, {
                    rating: participant.rating || 0,
                    editable: false
                  }), /* @__PURE__ */ jsx("button", {
                    onClick: () => handleView(participant.participants_id),
                    className: "text-red-600 hover:text-red-800",
                    title: "View",
                    children: /* @__PURE__ */ jsx(Eye, {
                      size: 20
                    })
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-2",
                children: [/* @__PURE__ */ jsxs("select", {
                  value: ((_a2 = editingParticipants[participant.participants_id]) == null ? void 0 : _a2.status) || participant.status,
                  onChange: (e) => handleStatusChange(participant.participants_id, e.target.value),
                  className: "w-full p-2 text-md rounded border dark:bg-gray-600 dark:border-gray-500",
                  children: [/* @__PURE__ */ jsx("option", {
                    value: "draft",
                    children: "Draft"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "inprocess",
                    children: "In Progress"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "archived",
                    children: "Archived"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "drop",
                    children: "Drop"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "verified-closed",
                    children: "Verified & Closed"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "rework",
                    children: "Rework"
                  })]
                }), ((_b = editingParticipants[participant.participants_id]) == null ? void 0 : _b.showRating) && /* @__PURE__ */ jsxs("div", {
                  className: "mt-2",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex items-center justify-between mb-2",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: "Rate this task (1-5):"
                    }), /* @__PURE__ */ jsx(StarRating, {
                      rating: ((_c = editingParticipants[participant.participants_id]) == null ? void 0 : _c.rating) || 0,
                      editable: true,
                      onRatingChange: (rating) => handleRatingChange(participant.participants_id, rating)
                    })]
                  }), /* @__PURE__ */ jsx("button", {
                    onClick: () => handleRatingSubmit(participant.participants_id),
                    className: "w-full bg-red-700 hover:bg-red-800 text-white py-1 rounded text-sm",
                    children: "Submit Rating"
                  })]
                })]
              }), /* @__PURE__ */ jsx("p", {
                className: "text-sm text-red-600 dark:text-gray-300 p-4 flex justify-end",
                children: new Date(participant.lastupdate).toLocaleDateString("en-IN", {
                  day: "numeric",
                  month: "short",
                  year: "numeric"
                })
              })]
            }, participant.participants_id);
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "flex"
      })]
    }), activeTab === "taskdoc" && /* @__PURE__ */ jsx(TaskDocuments, {}), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Meeting",
      children: /* @__PURE__ */ jsx(TaskMeetingForm, {
        taskData: taskData2,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Add Task Member Form",
      children: /* @__PURE__ */ jsx(AddNewTaskMember, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false),
        taskData: selectedTask
      })
    })]
  });
};
const TaskViewPage$1 = withComponentProps(TaskViewPage);
const route18 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: TaskViewPage$1
}, Symbol.toStringTag, { value: "Module" }));
const ProjectTaskList = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  const staff_id = useAuthStore((state) => state.staff_id);
  console.log("staffiddd", staff_id);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      const permissions = useAuthStore.getState().permissions;
      const userRole = (_a = permissions[0]) == null ? void 0 : _a.role;
      let url = `${BASE_URL}/project/task/members/read?page=${page}&limit=${limit}`;
      if (userRole !== "superadmin" && userRole !== "teamlead") {
        url += `&staff_id=${staff_id}`;
      }
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseeeedatataskview", response);
      setSheetData((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data);
      setTotalItem(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.length) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Task added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    console.log("branchhhhtaskk", branch2);
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (milestone) => {
    setShowDeleteModal(true);
    setDeleteData(milestone);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        milestone_code: deleteData.milestone_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/project/milestone/delete`, {
        data: deletedData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Milestone Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting milestone", error2);
      toast$1.error("Failed to delete milestone");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Project Code"
  }, {
    data: "Duration Days"
  }, {
    data: "Task Name"
  }, {
    data: "Task Priority"
  }, {
    data: "Start Date"
  }, {
    data: "End Date"
  }, {
    data: "Handle By"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2, index) => ({
      id: index + 1,
      data: [
        {
          data: branch2.id
        },
        {
          data: branch2.branchcode
        },
        {
          data: branch2.project_code
        },
        {
          data: branch2.duration_days
        },
        {
          data: branch2.task_title
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.task_priority === "minor" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
            children: [/* @__PURE__ */ jsx("span", {
              className: `w-2 h-2 rounded-full mr-2 ${branch2.task_priority === "minor" ? "bg-green-800" : "bg-red-700"}`
            }), branch2.task_priority.charAt(0).toUpperCase() + branch2.task_priority.slice(1)]
          })
        },
        // { data: branch.start_date },
        // { data: branch.end_date },
        {
          data: new Date(branch2.start_date).toLocaleString("en-IN", {
            dateStyle: "medium",
            timeStyle: "short"
          })
        },
        {
          data: new Date(branch2.end_date).toLocaleString("en-IN", {
            dateStyle: "medium",
            timeStyle: "short"
          })
        },
        {
          data: branch2.handler_by
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
            children: [/* @__PURE__ */ jsx("span", {
              className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
            }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
          })
        },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: "flex  justify-center gap-2",
            children: [/* @__PURE__ */ jsx(Link$1, {
              to: `/member_view/${branch2.participants_id}`,
              children: /* @__PURE__ */ jsx("button", {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, {
                  size: 18
                })
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditBranch(branch2),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, {
                size: 18
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleDeleteBranch2(branch2),
              title: "Delete",
              children: /* @__PURE__ */ jsx(Trash2, {
                size: 18
              })
            })]
          }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Task updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Task Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "Add New Task", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Add New Task Form",
      children: /* @__PURE__ */ jsx(AddNewTaskForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Task Form",
      children: /* @__PURE__ */ jsx(EditTaskForm, {
        taskData: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Drop Milestone",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx(Network, {
              className: "inline mr-2"
            }), " Drop Milestone"]
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 text-sm font-medium text-center",
            children: "Are you sure you want to Drop this Milestone?"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(ClipboardType, {
                  className: "inline mr-1",
                  size: 14
                }), " Type"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "delete_type",
                value: inActiveData.delete_type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Type"
                }), /* @__PURE__ */ jsx("option", {
                  value: "temp",
                  children: "Temporary"
                }), /* @__PURE__ */ jsx("option", {
                  value: "permanent",
                  children: "Permanent"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(Tag, {
                  className: "inline mr-1",
                  size: 14
                }), " Status"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                value: inActiveData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "draft",
                  children: "Draft"
                }), /* @__PURE__ */ jsx("option", {
                  value: "planning",
                  children: "Planning"
                }), /* @__PURE__ */ jsx("option", {
                  value: "active",
                  children: "Active"
                }), /* @__PURE__ */ jsx("option", {
                  value: "paused",
                  children: "Paused"
                }), /* @__PURE__ */ jsx("option", {
                  value: "completed",
                  children: "Completed"
                }), /* @__PURE__ */ jsx("option", {
                  value: "revised",
                  children: "Revised"
                }), /* @__PURE__ */ jsx("option", {
                  value: "client_review",
                  children: "Client_review"
                }), /* @__PURE__ */ jsx("option", {
                  value: "drop",
                  children: "Drop"
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? "Processing..." : "Confirm"
          })]
        })]
      })
    })]
  });
};
const ProjectTaskList$1 = withComponentProps(ProjectTaskList);
const route19 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ProjectTaskList$1
}, Symbol.toStringTag, { value: "Module" }));
const EditLeadForm = ({ lead, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const campaignCodeOption = useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  const employeeOption = useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  const [formData, setFormData] = useState({
    branchcode: (lead == null ? void 0 : lead.branchcode) || "",
    campaign_code: (lead == null ? void 0 : lead.campaign_code) || "",
    lead_date: (lead == null ? void 0 : lead.lead_date) || (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
    lead_name: (lead == null ? void 0 : lead.lead_name) || "",
    phone: (lead == null ? void 0 : lead.phone) || "",
    email: (lead == null ? void 0 : lead.email) || "",
    assignee_id: (lead == null ? void 0 : lead.assignee_id) || "",
    comm_type: (lead == null ? void 0 : lead.comm_type) || "",
    proj_type: (lead == null ? void 0 : lead.proj_type) || "",
    status: (lead == null ? void 0 : lead.status) || "active",
    summary: (lead == null ? void 0 : lead.summary) || ""
  });
  useEffect(() => {
    if (lead) {
      setFormData({
        branchcode: lead.branchcode,
        campaign_code: lead.campaign_code,
        lead_date: lead.lead_date,
        lead_name: lead.lead_name,
        phone: lead.phone,
        email: lead.email,
        assignee_id: lead.assignee_id,
        comm_type: lead.comm_type,
        proj_type: lead.proj_type,
        status: lead.status,
        summary: lead.summary
      });
    }
  }, [lead]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const leadData = {
      data: formData
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/campaign/leads/edit/${lead.id}`,
        leadData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update lead");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating lead");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookUser, { className: "inline mr-2" }),
        "Edit Lead Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
          " Branch Code"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "branchcode",
            value: formData.branchcode,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
              branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
          " Camapign Code"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "campaign_code",
            value: formData.campaign_code,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Camapign" }),
              campaignCodeOption == null ? void 0 : campaignCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Lead Name"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "lead_name",
            value: formData.lead_name,
            onChange: handleChange,
            type: "text",
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
          " Phone"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "phone",
            value: formData.phone,
            onChange: handleChange,
            type: "text",
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
          " Email"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "email",
            value: formData.email,
            onChange: handleChange,
            type: "email",
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
          " Lead Date"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            name: "lead_date",
            value: formData.lead_date,
            onChange: handleChange,
            type: "date",
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Assigned To"
        ] }),
        /* @__PURE__ */ jsx(
          "select",
          {
            name: "assignee_id",
            value: formData.assignee_id,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: employeeOption == null ? void 0 : employeeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Communication Type"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "comm_type",
            value: formData.comm_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "email", children: "Email" }),
              /* @__PURE__ */ jsx("option", { value: "call", children: "Phone Call" }),
              /* @__PURE__ */ jsx("option", { value: "sms", children: "SMS" }),
              /* @__PURE__ */ jsx("option", { value: "whatsapp", children: "WhatsApp" }),
              /* @__PURE__ */ jsx("option", { value: "in-person", children: "In-Person" })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Project Type"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "proj_type",
            value: formData.proj_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "residential", children: "Residential" }),
              /* @__PURE__ */ jsx("option", { value: "commercial", children: "Commercial" }),
              /* @__PURE__ */ jsx("option", { value: "industrial", children: "Industrial" }),
              /* @__PURE__ */ jsx("option", { value: "land", children: "Land" })
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
          " Status"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
              /* @__PURE__ */ jsx("option", { value: "inactive", children: "Inactive" }),
              /* @__PURE__ */ jsx("option", { value: "converted", children: "Converted" }),
              /* @__PURE__ */ jsx("option", { value: "lost", children: "Lost" })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
          " Notes & Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "summary",
            value: formData.summary,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Enter lead summary and notes..."
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            onClick: handleSubmit,
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Lead"
          }
        )
      ] })
    ] })
  ] });
};
const LeadClientForm = ({ lead, onSuccess, onCancel }) => {
  console.log("leadclientt", lead);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  const [formData, setFormData] = useState({
    branchcode: "",
    lead_id: "",
    client_name: "",
    company_name: "",
    primary_phone: "",
    email: "",
    office_address: "",
    website: "",
    industry_type: "commercial",
    comm_type: "email",
    status: "active",
    contacts: [
      {
        name: "",
        designation: "",
        phone: "",
        email: ""
      }
    ]
  });
  useEffect(() => {
    if (lead) {
      setFormData({
        branchcode: lead.branchcode,
        lead_id: lead.id,
        client_name: lead.lead_name,
        primary_phone: lead.phone,
        email: lead.email,
        company_name: formData.company_name,
        office_address: formData.office_address,
        website: formData.website,
        industry_type: formData.industry_type,
        comm_type: formData.comm_type,
        status: formData.status,
        contacts: formData.contacts
      });
    }
  }, [lead]);
  const industryOptions = [
    { value: "commercial", label: "Commercial" },
    { value: "residential", label: "Residential" },
    { value: "industrial", label: "Industrial" },
    { value: "retail", label: "Retail" },
    { value: "hospitality", label: "Hospitality" }
  ];
  const communicationOptions = [
    { value: "email", label: "Email" },
    { value: "call", label: "Call" },
    { value: "mom", label: "Meeting" },
    { value: "all", label: "All" },
    { value: "none", label: "None" }
  ];
  const statusOptions = [
    { value: "active", label: "Active" },
    { value: "inactive", label: "Inactive" },
    { value: "blacklisted", label: "Blacklisted" }
  ];
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleContactChange = (index, e) => {
    const { name, value } = e.target;
    const updatedContacts = [...formData.contacts];
    updatedContacts[index] = {
      ...updatedContacts[index],
      [name]: value
    };
    setFormData((prev) => ({
      ...prev,
      contacts: updatedContacts
    }));
  };
  const addContact = () => {
    setFormData((prev) => ({
      ...prev,
      contacts: [
        ...prev.contacts,
        {
          name: "",
          designation: "",
          phone: "",
          email: ""
        }
      ]
    }));
  };
  const removeContact = (index) => {
    if (formData.contacts.length === 1) return;
    const updatedContacts = formData.contacts.filter((_, i) => i !== index);
    setFormData((prev) => ({
      ...prev,
      contacts: updatedContacts
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const clientData = {
      data: [
        {
          branchcode: formData.branchcode,
          lead_id: formData.lead_id,
          company_name: formData.company_name,
          client_name: formData.client_name,
          primary_phone: formData.primary_phone,
          email: formData.email,
          office_address: formData.office_address,
          website: formData.website,
          contacts: formData.contacts,
          industry_type: formData.industry_type,
          comm_type: formData.comm_type,
          status: formData.status
        }
      ]
    };
    console.log("clientdataaa", clientData);
    try {
      const response = await axios.post(
        `${BASE_URL}/client/overview/create`,
        clientData,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      console.log("clientresponseeeee", response.status);
      if (response.status === 201) {
        toast$1.success("New Client Add Successfully!");
        onCancel();
        onSuccess();
      } else {
        console.log("errror in create");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating client", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Client Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Client Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "client_name",
              value: formData.client_name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Client Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Company Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "company_name",
              value: formData.company_name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Company Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Primary Phone"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "primary_phone",
              value: formData.primary_phone,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Primary Phone",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "email",
              value: formData.email,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "email",
              placeholder: "Email",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Industry Type"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "industry_type",
              value: formData.industry_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: industryOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Website"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "website",
              value: formData.website,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Website URL"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Lead ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "lead_id",
              value: formData.lead_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Lead ID"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Address Information" }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(MapPin, { className: "inline mr-1", size: 14 }),
          " Office Address"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "office_address",
            value: formData.office_address,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",
            placeholder: "Office Address",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Contacts" }),
      formData.contacts.map((contact, index) => /* @__PURE__ */ jsxs(
        "div",
        {
          className: "grid grid-cols-1 md:grid-cols-4 gap-4 relative",
          children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                " Contact Name"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "name",
                  value: contact.name,
                  onChange: (e) => handleContactChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  type: "text",
                  placeholder: "Contact Name",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                " Designation"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "designation",
                  value: contact.designation,
                  onChange: (e) => handleContactChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  type: "text",
                  placeholder: "Designation",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
                " Phone"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "phone",
                  value: contact.phone,
                  onChange: (e) => handleContactChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  type: "text",
                  placeholder: "Phone",
                  required: true
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
                " Email"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "email",
                  value: contact.email,
                  onChange: (e) => handleContactChange(index, e),
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  type: "email",
                  placeholder: "Email",
                  required: true
                }
              )
            ] }),
            index > 0 && /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                onClick: () => removeContact(index),
                className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
                children: /* @__PURE__ */ jsx(Trash2, { size: 16 })
              }
            )
          ]
        },
        index
      )),
      /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: addContact,
          className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
          children: [
            /* @__PURE__ */ jsx(Plus, { size: 16 }),
            " Add Another Contact"
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Communication & Status" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Communication Type"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: communicationOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: statusOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Client"
        }
      )
    ] })
  ] });
};
const Leads = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [showConvertClientModal, setShowConvertClientModal] = useState(false);
  const [deleteLead, setDeleteLead] = useState();
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const {
    fetchLeads,
    isStoreLoading
  } = useLeadsStore();
  const branchCodeOptions = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcode = useAuthStore((state) => state.branchcode);
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  useEffect(() => {
    fetchLeads(token, branchcode);
  }, [token, branchcode]);
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/campaign/leads/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responselead", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.length) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Lead created successfully!");
    fetchLeads(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    console.log("branchleaddetailsfor edit", branch2);
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleConvertLead = (branch2) => {
    setSelectedBranch(branch2);
    setShowConvertClientModal(true);
  };
  const handleDeleteBranch2 = (lead) => {
    setShowDeleteModal(true);
    setDeleteLead(lead);
  };
  const handleDeleteSubmit = async () => {
    console.log("de;etedleadin submit", deleteLead);
    const id = Number(deleteLead.id);
    const payload = {
      data: {
        branchcode: deleteLead.branchcode,
        campaign_code: deleteLead.campaign_code
      }
    };
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/campaign/leads/delete/${id}`, {
        data: payload,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Lead deleted successfully!");
        fetchLeads(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting Lead", error2);
      toast$1.error("Failed to delete Lead");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Lead Code"
  }, {
    data: "Lead Name"
  }, {
    data: "Phone"
  }, {
    data: "Email"
  }, {
    data: "assignee_id"
  }, {
    data: "comm_type"
  }, {
    data: "proj_type"
  }, {
    data: "summary"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2) => ({
      id: branch2.id,
      data: [{
        data: branch2.id
      }, {
        data: branch2.branchcode
      }, {
        data: branch2.lead_date
      }, {
        data: branch2.lead_name
      }, {
        data: branch2.phone
      }, {
        data: branch2.email
      }, {
        data: branch2.assignee_id
      }, {
        data: branch2.comm_type
      }, {
        data: branch2.proj_type
      }, {
        data: branch2.summary
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            className: "p-1 text-amber-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleConvertLead(branch2),
            title: "Convert",
            children: /* @__PURE__ */ jsx(GitBranchPlus, {
              size: 18
            })
          }), /* @__PURE__ */ jsx(Link$1, {
            to: `/leadsview/${branch2.id}`,
            children: /* @__PURE__ */ jsx("button", {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              children: /* @__PURE__ */ jsx(Eye, {
                size: 18
              })
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(branch2),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(branch2),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Lead updated successfully!");
    fetchLeads(token);
    getBranch();
  };
  const handleConvertSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Lead to Client converted successfully!");
    fetchLeads(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "LeadList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Lead Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Lead", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Lead",
      children: /* @__PURE__ */ jsx(AddNewLeadForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Branch",
      children: /* @__PURE__ */ jsx(EditLeadForm, {
        lead: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showConvertClientModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowConvertClientModal(false),
      title: "Client Convert Form ",
      children: /* @__PURE__ */ jsx(LeadClientForm, {
        lead: selectedBranch,
        onSuccess: handleConvertSuccess,
        onCancel: () => setShowConvertClientModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this branch? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Branhch"
          })]
        })]
      })
    })]
  });
};
const Leads$1 = withComponentProps(Leads);
const route20 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Leads$1
}, Symbol.toStringTag, { value: "Module" }));
const ClientAddForm = ({
  onSuccess,
  onCancel
}) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const [leadOptions, setLeadOptions] = useState([]);
  const [isFetchingLeads, setIsFetchingLeads] = useState(false);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{
    value: branchcodeForNor,
    label: branchcodeForNor
  }];
  const [formData, setFormData] = useState({
    branchcode: "",
    lead_id: "",
    client_name: "",
    company_name: "",
    primary_phone: "",
    email: "",
    office_address: "",
    website: "",
    industry_type: "commercial",
    comm_type: "email",
    status: "active",
    contacts: [{
      name: "",
      designation: "",
      phone: "",
      email: ""
    }]
  });
  const industryOptions = [{
    value: "commercial",
    label: "Commercial"
  }, {
    value: "residential",
    label: "Residential"
  }, {
    value: "industrial",
    label: "Industrial"
  }, {
    value: "retail",
    label: "Retail"
  }, {
    value: "hospitality",
    label: "Hospitality"
  }];
  const communicationOptions = [{
    value: "email",
    label: "Email"
  }, {
    value: "call",
    label: "Call"
  }, {
    value: "mom",
    label: "Meeting"
  }, {
    value: "all",
    label: "All"
  }, {
    value: "none",
    label: "None"
  }];
  const statusOptions = [{
    value: "active",
    label: "Active"
  }, {
    value: "inactive",
    label: "Inactive"
  }, {
    value: "blacklisted",
    label: "Blacklisted"
  }];
  const fetchLeadOptions = async (branchcode) => {
    var _a;
    if (!branchcode) {
      setLeadOptions([]);
      return;
    }
    setIsFetchingLeads(true);
    try {
      const response = await axios.get(`${BASE_URL}/campaign/leads/read?branchcode=${branchcode}&limit=1000`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((_a = response.data) == null ? void 0 : _a.data) {
        const options = response.data.data.map((lead) => ({
          value: lead.id,
          label: lead.lead_name || lead.name || "Unnamed Lead"
        }));
        setLeadOptions(options);
      } else {
        setLeadOptions([]);
      }
    } catch (error2) {
      console.error("Error fetching lead options", error2);
      toast$1.error("Failed to fetch leads");
      setLeadOptions([]);
    } finally {
      setIsFetchingLeads(false);
    }
  };
  useEffect(() => {
    if (formData.branchcode) {
      fetchLeadOptions(formData.branchcode);
    } else {
      setLeadOptions([]);
      setFormData((prev) => ({
        ...prev,
        lead_id: ""
      }));
    }
  }, [formData.branchcode]);
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "lead_id" && value) {
      const selectedLead = leadOptions.find((lead) => lead.value === value);
      if (selectedLead) {
        setFormData((prev) => ({
          ...prev,
          client_name: selectedLead.label
        }));
      }
    }
  };
  const handleContactChange = (index, e) => {
    const {
      name,
      value
    } = e.target;
    const updatedContacts = [...formData.contacts];
    updatedContacts[index] = {
      ...updatedContacts[index],
      [name]: value
    };
    setFormData((prev) => ({
      ...prev,
      contacts: updatedContacts
    }));
  };
  const addContact = () => {
    setFormData((prev) => ({
      ...prev,
      contacts: [...prev.contacts, {
        name: "",
        designation: "",
        phone: "",
        email: ""
      }]
    }));
  };
  const removeContact = (index) => {
    if (formData.contacts.length === 1) return;
    const updatedContacts = formData.contacts.filter((_, i) => i !== index);
    setFormData((prev) => ({
      ...prev,
      contacts: updatedContacts
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const clientData = {
      data: [{
        branchcode: formData.branchcode,
        lead_id: formData.lead_id,
        company_name: formData.company_name,
        client_name: formData.client_name,
        primary_phone: formData.primary_phone,
        email: formData.email,
        office_address: formData.office_address,
        website: formData.website,
        contacts: formData.contacts,
        industry_type: formData.industry_type,
        comm_type: formData.comm_type,
        status: formData.status
      }]
    };
    try {
      const response = await axios.post(`${BASE_URL}/client/overview/create`, clientData, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.status === 201) {
        toast$1.success("New Client Added Successfully!");
        onCancel();
        onSuccess();
      } else {
        console.error("Error in create");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error creating client");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
    children: [/* @__PURE__ */ jsx(Toaster, {
      position: toastposition
    }), /* @__PURE__ */ jsxs("div", {
      className: "space-y-4",
      children: [/* @__PURE__ */ jsx("h3", {
        className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
        children: "Client Information"
      }), /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-2 gap-4",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(User, {
              className: "inline mr-1",
              size: 14
            }), " Client Name"]
          }), /* @__PURE__ */ jsx("input", {
            name: "client_name",
            value: formData.client_name,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Client Name",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Hash, {
              className: "inline mr-1",
              size: 14
            }), " Branch Code"]
          }), /* @__PURE__ */ jsxs("select", {
            name: "branchcode",
            value: formData.branchcode,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [/* @__PURE__ */ jsx("option", {
              value: "",
              children: "Select Branch"
            }), branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", {
              value: option.value,
              children: option.label
            }, option.value))]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Hash, {
              className: "inline mr-1",
              size: 14
            }), " Company Name"]
          }), /* @__PURE__ */ jsx("input", {
            name: "company_name",
            value: formData.company_name,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Company Name",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Phone, {
              className: "inline mr-1",
              size: 14
            }), " Primary Phone"]
          }), /* @__PURE__ */ jsx("input", {
            name: "primary_phone",
            value: formData.primary_phone,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Primary Phone",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Mail, {
              className: "inline mr-1",
              size: 14
            }), " Email"]
          }), /* @__PURE__ */ jsx("input", {
            name: "email",
            value: formData.email,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "email",
            placeholder: "Email",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(ClipboardList, {
              className: "inline mr-1",
              size: 14
            }), " Industry Type"]
          }), /* @__PURE__ */ jsx("select", {
            name: "industry_type",
            value: formData.industry_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: industryOptions.map((option) => /* @__PURE__ */ jsx("option", {
              value: option.value,
              children: option.label
            }, option.value))
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(FileText, {
              className: "inline mr-1",
              size: 14
            }), " Website"]
          }), /* @__PURE__ */ jsx("input", {
            name: "website",
            value: formData.website,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Website URL"
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(ClipboardList, {
              className: "inline mr-1",
              size: 14
            }), " Lead"]
          }), /* @__PURE__ */ jsxs("select", {
            name: "lead_id",
            value: formData.lead_id,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            disabled: !formData.branchcode || isFetchingLeads,
            required: true,
            children: [/* @__PURE__ */ jsx("option", {
              value: "",
              children: "Select Lead"
            }), isFetchingLeads ? /* @__PURE__ */ jsx("option", {
              value: "",
              disabled: true,
              children: "Loading leads..."
            }) : leadOptions.map((option) => /* @__PURE__ */ jsx("option", {
              value: option.value,
              children: option.label
            }, option.value))]
          })]
        })]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "space-y-4",
      children: [/* @__PURE__ */ jsx("h3", {
        className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
        children: "Address Information"
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
        children: [/* @__PURE__ */ jsxs("p", {
          className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",
          children: [/* @__PURE__ */ jsx(MapPin, {
            className: "inline mr-1",
            size: 14
          }), " Office Address"]
        }), /* @__PURE__ */ jsx("textarea", {
          name: "office_address",
          value: formData.office_address,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",
          placeholder: "Office Address",
          required: true
        })]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "space-y-4",
      children: [/* @__PURE__ */ jsx("h3", {
        className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
        children: "Contacts"
      }), formData.contacts.map((contact, index) => /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-4 gap-4 relative",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(User, {
              className: "inline mr-1",
              size: 14
            }), " Contact Name"]
          }), /* @__PURE__ */ jsx("input", {
            name: "name",
            value: contact.name,
            onChange: (e) => handleContactChange(index, e),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Contact Name",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(User, {
              className: "inline mr-1",
              size: 14
            }), " Designation"]
          }), /* @__PURE__ */ jsx("input", {
            name: "designation",
            value: contact.designation,
            onChange: (e) => handleContactChange(index, e),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Designation",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Phone, {
              className: "inline mr-1",
              size: 14
            }), " Phone"]
          }), /* @__PURE__ */ jsx("input", {
            name: "phone",
            value: contact.phone,
            onChange: (e) => handleContactChange(index, e),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "text",
            placeholder: "Phone",
            required: true
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(Mail, {
              className: "inline mr-1",
              size: 14
            }), " Email"]
          }), /* @__PURE__ */ jsx("input", {
            name: "email",
            value: contact.email,
            onChange: (e) => handleContactChange(index, e),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            type: "email",
            placeholder: "Email",
            required: true
          })]
        }), index > 0 && /* @__PURE__ */ jsx("button", {
          type: "button",
          onClick: () => removeContact(index),
          className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
          children: /* @__PURE__ */ jsx(Trash2, {
            size: 16
          })
        })]
      }, index)), /* @__PURE__ */ jsxs("button", {
        type: "button",
        onClick: addContact,
        className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
        children: [/* @__PURE__ */ jsx(Plus, {
          size: 16
        }), " Add Another Contact"]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "space-y-4",
      children: [/* @__PURE__ */ jsx("h3", {
        className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
        children: "Communication & Status"
      }), /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-2 gap-4",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(ClipboardList, {
              className: "inline mr-1",
              size: 14
            }), " Communication Type"]
          }), /* @__PURE__ */ jsx("select", {
            name: "comm_type",
            value: formData.comm_type,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: communicationOptions.map((option) => /* @__PURE__ */ jsx("option", {
              value: option.value,
              children: option.label
            }, option.value))
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsxs("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
            children: [/* @__PURE__ */ jsx(ClipboardList, {
              className: "inline mr-1",
              size: 14
            }), " Status"]
          }), /* @__PURE__ */ jsx("select", {
            name: "status",
            value: formData.status,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: statusOptions.map((option) => /* @__PURE__ */ jsx("option", {
              value: option.value,
              children: option.label
            }, option.value))
          })]
        })]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
      children: [/* @__PURE__ */ jsx("button", {
        type: "button",
        className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
        onClick: onCancel,
        disabled: loading,
        children: "Cancel"
      }), /* @__PURE__ */ jsx("button", {
        type: "submit",
        className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
        onClick: handleSubmit,
        disabled: loading,
        children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Client"
      })]
    })]
  });
};
const ClientAddForm$1 = withComponentProps(ClientAddForm);
const route22 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ClientAddForm$1
}, Symbol.toStringTag, { value: "Module" }));
const ClientEditForm = ({ client, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const [originalContacts, setOriginalContacts] = useState([]);
  const [formData, setFormData] = useState({
    branchcode: "",
    client_name: "",
    company_name: "",
    primary_phone: "",
    email: "",
    office_address: "",
    website: "",
    industry_type: "commercial",
    comm_type: "email",
    status: "active",
    contacts: [
      {
        name: "",
        designation: "",
        phone: "",
        email: ""
      }
    ]
  });
  useEffect(() => {
    if (client) {
      const initialContacts = client.contacts || [];
      setOriginalContacts(initialContacts);
      setFormData({
        branchcode: client.branchcode || "",
        client_name: client.client_name || "",
        company_name: client.company_name || "",
        primary_phone: client.primary_phone || "",
        email: client.email || "",
        office_address: client.office_address || "",
        website: client.website || "",
        industry_type: client.industry_type || "commercial",
        comm_type: client.comm_type || "email",
        status: client.status || "active",
        contacts: initialContacts.map((contact) => ({
          ...contact,
          // Mark as existing and track original values
          type: "existing",
          originalName: contact.name,
          originalEmail: contact.email
        }))
      });
    }
  }, [client]);
  const industryOptions = [
    { value: "commercial", label: "Commercial" },
    { value: "residential", label: "Residential" },
    { value: "industrial", label: "Industrial" },
    { value: "retail", label: "Retail" },
    { value: "hospitality", label: "Hospitality" }
  ];
  const communicationOptions = [
    { value: "email", label: "Email" },
    { value: "call", label: "Call" },
    { value: "mom", label: "Meeting" },
    { value: "all", label: "All" },
    { value: "none", label: "None" }
  ];
  const statusOptions = [
    { value: "active", label: "Active" },
    { value: "inactive", label: "Inactive" },
    { value: "blacklisted", label: "Blacklisted" }
  ];
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({ ...prev, [name]: value }));
  };
  const handleContactChange = (index, e) => {
    const { name, value } = e.target;
    const updatedContacts = [...formData.contacts];
    const originalContact = originalContacts[index];
    const isChanged = name === "name" && value !== (originalContact == null ? void 0 : originalContact.name) || name === "email" && value !== (originalContact == null ? void 0 : originalContact.email) || name === "designation" && value !== (originalContact == null ? void 0 : originalContact.designation) || name === "phone" && value !== (originalContact == null ? void 0 : originalContact.phone);
    updatedContacts[index] = {
      ...updatedContacts[index],
      [name]: value,
      // Only mark as edit if it's actually changed from original
      type: isChanged ? "edit" : "existing"
    };
    setFormData((prev) => ({ ...prev, contacts: updatedContacts }));
  };
  const addContact = () => {
    setFormData((prev) => ({
      ...prev,
      contacts: [
        ...prev.contacts,
        {
          name: "",
          designation: "",
          phone: "",
          email: "",
          type: "add"
        }
      ]
    }));
  };
  const removeContact = (index) => {
    const contactToRemove = formData.contacts[index];
    let updatedContacts;
    if (contactToRemove.type === "add") {
      updatedContacts = formData.contacts.filter((_, i) => i !== index);
    } else {
      updatedContacts = [...formData.contacts];
      updatedContacts[index] = {
        ...contactToRemove,
        type: "remove"
      };
    }
    setFormData((prev) => ({ ...prev, contacts: updatedContacts }));
  };
  const prepareContactsForSubmit = () => {
    const contactsPayload = [];
    formData.contacts.forEach((contact, index) => {
      if (contact.type === "existing") return;
      if (contact.type === "remove") {
        contactsPayload.push({
          type: "remove",
          index: originalContacts.findIndex(
            (orig) => orig.name === contact.originalName && orig.email === contact.originalEmail
          )
        });
        return;
      }
      if (contact.type === "edit") {
        const originalIndex = originalContacts.findIndex(
          (orig) => orig.name === contact.originalName && orig.email === contact.originalEmail
        );
        contactsPayload.push({
          type: "edit",
          index: originalIndex,
          name: contact.name,
          designation: contact.designation,
          phone: contact.phone,
          email: contact.email
        });
        return;
      }
      if (contact.type === "add") {
        contactsPayload.push({
          type: "add",
          name: contact.name,
          designation: contact.designation,
          phone: contact.phone,
          email: contact.email
        });
      }
    });
    return contactsPayload;
  };
  const handleSubmit = async (e) => {
    var _a, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    const editData = {
      data: {
        branchcode: formData.branchcode,
        client_code: client.client_code,
        company_name: formData.company_name,
        client_name: formData.client_name,
        primary_phone: formData.primary_phone,
        email: formData.email,
        office_address: formData.office_address,
        website: formData.website,
        contacts: prepareContactsForSubmit(),
        industry_type: formData.industry_type,
        comm_type: formData.comm_type,
        status: formData.status
      }
    };
    console.log("Submitting data:", editData);
    try {
      const response = await axios.put(
        `${BASE_URL}/client/overview/edit`,
        editData,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        toast$1.success("Client updated successfully!");
        onSuccess();
        onCancel();
      } else {
        setError(response.data.message || "Failed to update client");
        toast$1.error(response.data.message || "Failed to update client");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Error updating client");
    } finally {
      setLoading(false);
    }
  };
  const renderContactFields = (contact, index) => {
    const isRemoved = contact.type === "remove";
    return /* @__PURE__ */ jsxs(
      "div",
      {
        className: `grid grid-cols-1 md:grid-cols-4 gap-4 relative ${isRemoved ? "opacity-50 bg-gray-100 dark:bg-gray-700" : ""}`,
        children: [
          /* @__PURE__ */ jsx(Toaster, {}),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Contact Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "name",
                value: contact.name,
                onChange: (e) => handleContactChange(index, e),
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "text",
                placeholder: "Contact Name",
                required: true,
                disabled: isRemoved
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Designation"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "designation",
                value: contact.designation,
                onChange: (e) => handleContactChange(index, e),
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "text",
                placeholder: "Designation",
                required: true,
                disabled: isRemoved
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
              " Phone"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "phone",
                value: contact.phone,
                onChange: (e) => handleContactChange(index, e),
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "text",
                placeholder: "Phone",
                required: true,
                disabled: isRemoved
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
              " Email"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "email",
                value: contact.email,
                onChange: (e) => handleContactChange(index, e),
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "email",
                placeholder: "Email",
                required: true,
                disabled: isRemoved
              }
            )
          ] }),
          /* @__PURE__ */ jsx(
            "button",
            {
              type: "button",
              onClick: () => removeContact(index),
              className: "absolute -right-2 -top-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",
              children: /* @__PURE__ */ jsx(Trash2, { size: 16 })
            }
          ),
          isRemoved && /* @__PURE__ */ jsx("div", { className: "absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ jsx("span", { className: "bg-red-500 text-white text-xs px-2 py-1 rounded", children: "Marked for removal" }) })
        ]
      },
      index
    );
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Client Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Client Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "client_name",
              value: formData.client_name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Client Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Client Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              value: (client == null ? void 0 : client.client_code) || "",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Company Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "company_name",
              value: formData.company_name,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Company Name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Phone, { className: "inline mr-1", size: 14 }),
            " Primary Phone"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "primary_phone",
              value: formData.primary_phone,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Primary Phone",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Mail, { className: "inline mr-1", size: 14 }),
            " Email"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "email",
              value: formData.email,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "email",
              placeholder: "Email",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Industry Type"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "industry_type",
              value: formData.industry_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: industryOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Website"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "website",
              value: formData.website,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Website URL"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Address Information" }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(MapPin, { className: "inline mr-1", size: 14 }),
          " Office Address"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "office_address",
            value: formData.office_address,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",
            placeholder: "Office Address",
            required: true
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Contacts" }),
      formData.contacts.map(
        (contact, index) => renderContactFields(contact, index)
      ),
      /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: addContact,
          className: "flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",
          children: [
            /* @__PURE__ */ jsx(Plus, { size: 16 }),
            " Add Another Contact"
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Communication & Status" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Communication Type"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: communicationOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsx(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: statusOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Client"
        }
      )
    ] })
  ] });
};
const Client = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedClient, setselectedClient] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(5);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [deleteType, setDeleteType] = useState("permanent");
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getClient = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/client/overview/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseclient", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getClient();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Client added successfully!");
    fetchBranches(token);
    getClient();
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Client Update Succesfully!");
    getClient();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (client) => {
    setselectedClient(client);
    setShowEditModal(true);
  };
  const handleDeleteClient = (client) => {
    setShowDeleteModal(true);
    setselectedClient(client);
  };
  const handleDelete = async () => {
    var _a, _b;
    setLoading(true);
    const deleteData = {
      data: {
        branchcode: selectedClient.branchcode,
        client_code: selectedClient.client_code,
        status: "inactive",
        delete_type: deleteType
      }
    };
    try {
      const response = await axios.delete(`${BASE_URL}/client/overview/delete`, {
        data: deleteData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setShowDeleteModal(false);
      toast$1.success("Client deleted successfully!");
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error deleting client", {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
      setError(null);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "Client Code"
  }, {
    data: "Branch Code"
  }, {
    data: "Client Name"
  }, {
    data: "Company Name"
  }, {
    data: "Mobile"
  }, {
    data: "Designation"
  }, {
    data: "Mobile"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((client, index) => ({
      data: [{
        data: client.client_code
      }, {
        data: client.branchcode
      }, {
        data: client.client_name
      }, {
        data: client.company_name
      }, {
        data: client.primary_phone
      }, {
        data: client.contacts.map((c) => c.designation).join(", ")
      }, {
        data: client.contacts.map((c) => c.phone).join(", ")
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${client.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${client.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), client.status.charAt(0).toUpperCase() + client.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-2",
          children: [/* @__PURE__ */ jsx(Link$1, {
            to: `/branch/${client.id}`,
            children: /* @__PURE__ */ jsx("button", {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              children: /* @__PURE__ */ jsx(Eye, {
                size: 18
              })
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(client),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteClient(client),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Client Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Client", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: " border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "Clients",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Client",
      children: /* @__PURE__ */ jsx(ClientAddForm$1, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Client",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this client? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("p", {
            className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",
            children: "Delete Type"
          }), /* @__PURE__ */ jsxs("select", {
            value: deleteType,
            onChange: (e) => setDeleteType(e.target.value),
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            children: [/* @__PURE__ */ jsx("option", {
              value: "permanent",
              children: "Permanent Delete"
            }), /* @__PURE__ */ jsx("option", {
              value: "temp",
              children: "Soft Delete (Mark as Inactive)"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDelete,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Client"
          })]
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Client",
      children: /* @__PURE__ */ jsx(ClientEditForm, {
        client: selectedClient,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    })]
  });
};
const Client$1 = withComponentProps(Client);
const route21 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Client$1
}, Symbol.toStringTag, { value: "Module" }));
const MomViewPage = ({ meeting }) => {
  const [participants, setParticipants] = useState([]);
  const [targets, setTargets] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    if (meeting == null ? void 0 : meeting.meet_id) {
      setLoading(true);
      Promise.all([
        axios.get(`${BASE_URL}/doc_meet/participant/read?meet_id=${meeting.meet_id}`, {
          headers: { Authorization: `Bearer ${token}` }
        }),
        axios.get(`${BASE_URL}/doc_meet/target/read?meet_id=${meeting.meet_id}`, {
          headers: { Authorization: `Bearer ${token} ` }
        })
      ]).then(([participantsRes, targetsRes]) => {
        setParticipants(participantsRes.data.data || []);
        setTargets(targetsRes.data.data || []);
        setError(null);
      }).catch((err) => {
        setError("Failed to load meeting details");
        console.error("Error fetching meeting data:", err);
      }).finally(() => {
        setLoading(false);
      });
    }
  }, [meeting]);
  const formatDate2 = (dateString) => {
    if (!dateString) return "N/A";
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const formatDateTime = (dateString) => {
    if (!dateString) return "N/A";
    const date = new Date(dateString);
    return date.toLocaleTimeString("en-US", {
      hour: "2-digit",
      minute: "2-digit"
    });
  };
  const getStatusColor = (status) => {
    switch (status == null ? void 0 : status.toLowerCase()) {
      case "completed":
      case "active":
        return "bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";
      case "pending":
        return "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";
      default:
        return "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", { className: "max-w-4xl mx-auto p-6 text-center text-gray-500 dark:text-gray-400", children: "Loading meeting details..." });
  }
  if (error) {
    return /* @__PURE__ */ jsx("div", { className: "max-w-4xl mx-auto p-6 text-center text-red-500 dark:text-red-400", children: error });
  }
  return /* @__PURE__ */ jsxs("div", { className: "max-w-4xl mx-auto p-6", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("h1", { className: "text-2xl font-bold text-red-700 dark:text-white", children: "Minutes of Meeting" }),
        /* @__PURE__ */ jsxs("p", { className: "text-gray-500 dark:text-gray-400", children: [
          "ID: ",
          (meeting == null ? void 0 : meeting.meet_id) || "N/A"
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center text-sm text-gray-600 dark:text-gray-300", children: [
          /* @__PURE__ */ jsx(Calendar, { className: "h-5 w-5 mr-1.5" }),
          formatDate2(meeting == null ? void 0 : meeting.start_date_time)
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex items-center text-sm text-gray-600 dark:text-gray-300", children: [
          /* @__PURE__ */ jsx(FaUsers, { className: "h-5 w-5 mr-1.5" }),
          participants.length,
          " attendees"
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden", children: [
      /* @__PURE__ */ jsxs("div", { className: "px-6 py-4 border-b border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-gray-800 dark:text-white", children: (meeting == null ? void 0 : meeting.title) || "Meeting Details" }),
        /* @__PURE__ */ jsxs("div", { className: "mt-2 flex items-center text-sm text-gray-600 dark:text-gray-300", children: [
          /* @__PURE__ */ jsx("span", { className: `px-2 py-1 rounded-full text-xs ${getStatusColor(meeting == null ? void 0 : meeting.status)}`, children: (meeting == null ? void 0 : meeting.status) ? meeting.status.charAt(0).toUpperCase() + meeting.status.slice(1) : "N/A" }),
          /* @__PURE__ */ jsx("span", { className: "mx-2", children: "" }),
          /* @__PURE__ */ jsxs("span", { children: [
            formatDateTime(meeting == null ? void 0 : meeting.start_date_time),
            " - ",
            formatDateTime(meeting == null ? void 0 : meeting.end_date_time)
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "p-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-start mb-6", children: [
          /* @__PURE__ */ jsx("div", { className: "bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-4", children: /* @__PURE__ */ jsx(CgFileDocument, { className: "h-6 w-6 text-red-700 dark:text-red-400" }) }),
          /* @__PURE__ */ jsxs("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsx("h3", { className: "text-lg font-medium text-gray-900 dark:text-white", children: "Meeting Details" }),
            /* @__PURE__ */ jsxs("div", { className: "mt-4 grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Branch:" }),
                /* @__PURE__ */ jsx("p", { className: "text-gray-700 dark:text-gray-300", children: (meeting == null ? void 0 : meeting.branchcode) || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Project:" }),
                /* @__PURE__ */ jsx("p", { className: "text-gray-700 dark:text-gray-300", children: (meeting == null ? void 0 : meeting.project_code) || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Created By:" }),
                /* @__PURE__ */ jsx("p", { className: "text-gray-700 dark:text-gray-300", children: (meeting == null ? void 0 : meeting.createdby) || "N/A" })
              ] }),
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-500 dark:text-gray-400", children: "Document Status:" }),
                /* @__PURE__ */ jsx("p", { className: "text-gray-700 dark:text-gray-300 capitalize", children: (meeting == null ? void 0 : meeting.doc_status) || "N/A" })
              ] })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mt-6", children: [
          /* @__PURE__ */ jsxs("h4", { className: "text-md font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Users, { className: "h-5 w-5 mr-2 text-gray-500 dark:text-gray-400" }),
            "Participants"
          ] }),
          /* @__PURE__ */ jsx("div", { className: "space-y-3", children: participants.length > 0 ? participants.map((participant) => /* @__PURE__ */ jsx("div", { className: "p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg", children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsx("p", { className: "font-medium text-gray-800 dark:text-white", children: participant.person_id }),
              /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-300 capitalize", children: [
                participant.role,
                "  ",
                participant.status
              ] })
            ] }),
            /* @__PURE__ */ jsxs("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
              "Added: ",
              new Date(participant.created_at).toLocaleDateString()
            ] })
          ] }) }, participant.id)) : /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400 text-sm", children: "No participants found" }) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "mt-6", children: [
          /* @__PURE__ */ jsxs("h4", { className: "text-md font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(ClipboardCheck, { className: "h-5 w-5 mr-2 text-gray-500 dark:text-gray-400" }),
            "Targets"
          ] }),
          /* @__PURE__ */ jsx("div", { className: "space-y-3", children: targets.length > 0 ? targets.map((target) => /* @__PURE__ */ jsx("div", { className: "p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg", children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsx("p", { className: "font-medium text-gray-800 dark:text-white", children: target.target_id }),
              /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-600 dark:text-gray-300 capitalize", children: target.type })
            ] }),
            /* @__PURE__ */ jsxs("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: [
              "Added: ",
              new Date(target.created_at).toLocaleDateString()
            ] })
          ] }) }, target.id)) : /* @__PURE__ */ jsx("p", { className: "text-gray-500 dark:text-gray-400 text-sm", children: "No targets found" }) })
        ] }),
        (meeting == null ? void 0 : meeting.notes) && /* @__PURE__ */ jsxs("div", { className: "mt-6", children: [
          /* @__PURE__ */ jsxs("h4", { className: "text-md font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(ClipboardCheck, { className: "h-5 w-5 mr-2 text-gray-500 dark:text-gray-400" }),
            "Notes"
          ] }),
          /* @__PURE__ */ jsx("div", { className: "p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg", children: /* @__PURE__ */ jsx("p", { className: "text-gray-700 dark:text-gray-300 whitespace-pre-line", children: meeting.notes }) })
        ] }),
        (meeting == null ? void 0 : meeting.meet_link) && /* @__PURE__ */ jsx("div", { className: "mt-6", children: /* @__PURE__ */ jsxs(
          "a",
          {
            href: meeting.meet_link,
            target: "_blank",
            rel: "noopener noreferrer",
            className: "inline-flex items-center text-blue-600 dark:text-blue-400 hover:underline",
            children: [
              /* @__PURE__ */ jsx("svg", { className: "w-5 h-5 mr-1.5", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsx("path", { fillRule: "evenodd", d: "M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z", clipRule: "evenodd" }) }),
              "Join Meeting"
            ]
          }
        ) })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "mt-6 flex justify-end gap-3", children: [
      /* @__PURE__ */ jsx("button", { className: "px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700", children: "Download PDF" }),
      /* @__PURE__ */ jsx("button", { className: "px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900", children: "Edit Minutes" })
    ] })
  ] });
};
const ClientMom = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const filterOptions = [
    { value: "client", label: "Client" },
    { value: "Project", label: "Project" },
    { value: "Leads", label: "Leads" },
    { value: "Employee", label: "Employee" }
  ];
  const statusOptions = [
    { value: "Pending", label: "Pending" },
    { value: "Paid", label: "Paid" },
    { value: "Un Paid", label: "Un-Paid" }
  ];
  const data = [
    {
      id: "ASC_12",
      date: "Agenda_1",
      name: "ABC 1",
      branch: "TL",
      priority: "Employee",
      progress: "TRACK-1",
      lastdate: "25-05-2025"
    },
    {
      id: "ASC_13",
      date: "Agenda_2",
      name: "ABC 2",
      branch: "TL",
      priority: "Employee",
      progress: "TRACK-2",
      lastdate: "25-05-2025"
    }
  ];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  const thead = () => [
    { data: "MeetId" },
    { data: "Agenda" },
    { data: "Consultant" },
    { data: "OrgBy" },
    { data: "Attendees" },
    { data: "Summary" },
    { data: "Last Meet" },
    { data: "view" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((user) => ({
      id: user.id,
      data: [
        { data: user.id },
        { data: user.name },
        { data: user.date },
        { data: user.branch },
        { data: user.priority },
        {
          data: user.progress
        },
        { data: user.lastdate },
        {
          data: /* @__PURE__ */ jsx("button", { className: "bg-blue-400/25 text-xs dark:bg-blue-700/15 px-2 py-1 dark:text-blue-200 text-blue-700 rounded-2xl", onClick: () => setShowModal(true), children: /* @__PURE__ */ jsx(Eye, {}) })
        }
      ]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Almino");
    XLSX.writeFile(wb, "EmployeeList.xlsx");
  };
  useNavigate();
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "text-red-600 text-2xl font-bold mt-5", children: "Client MOM" }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between", children: [
      " ",
      /* @__PURE__ */ jsx("div", { className: "w-full mt-5", children: /* @__PURE__ */ jsx("div", { className: "flex flex-col", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsx("div", { className: "flex items-end justify-end", children: /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleOnExport,
            className: "text-gray-400 bg-white focus:outline-non font-medium text-xs rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-1 text-center mr-5 mb-5 flex items-center",
            children: [
              /* @__PURE__ */ jsx(FileDown, {}),
              "Export Excel"
            ]
          }
        ) }),
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: filterOptions,
              selectedValue: selectedFilter,
              onSelect: setSelectedFilter,
              placeholder: "Filter By",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: setSelectStatus,
              placeholder: "Payment Status",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: filterOptions,
              selectedValue: selectedFilter,
              onSelect: setSelectedFilter,
              placeholder: "Sort by",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            SearchInput,
            {
              value: searchTerm,
              onChange: setSearchTerm,
              placeholder: "Search users..."
            }
          )
        ] }),
        /* @__PURE__ */ jsx(DataTable, { thead, tbody, maxHeight: "500px" }),
        /* @__PURE__ */ jsx("div", { className: " bottom-0 border-t border-gray-200 dark:border-gray-700 p-4 mt-10", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: 100,
            currentPage,
            defaultPageSize: 10,
            onChange: setCurrentPage,
            paginationLabel: "employees",
            isScroll: true
          }
        ) })
      ] }) }) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        children: /* @__PURE__ */ jsx(MomViewPage, {})
      }
    )
  ] });
};
const ClientFeedbacks = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const filterOptions = [
    { value: "client", label: "Client" },
    { value: "Project", label: "Project" },
    { value: "Leads", label: "Leads" },
    { value: "Employee", label: "Employee" }
  ];
  const statusOptions = [
    { value: "Pending", label: "Pending" },
    { value: "Paid", label: "Paid" },
    { value: "Un Paid", label: "Un-Paid" }
  ];
  const data = [
    {
      id: "ASC_12",
      date: "Agenda_1",
      name: "ABC 1",
      summary: "Requested font change",
      rating: 5
    },
    {
      id: "ASC_13",
      date: "Agenda_1",
      name: "ABC 1",
      summary: "Requested font change",
      rating: 3
    }
  ];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  const thead = () => [
    { data: "Id" },
    { data: "Date" },
    { data: "Rating" },
    { data: "FeedBack" },
    { data: "view" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((user) => ({
      id: user.id,
      data: [
        { data: user.id },
        { data: user.date },
        {
          data: /* @__PURE__ */ jsx(StarRating, { rating: user.rating })
        },
        { data: user.summary },
        {
          data: /* @__PURE__ */ jsx(Link$1, { to: "/task_view", children: /* @__PURE__ */ jsx("button", { className: "bg-red-400/25 text-xs dark:bg-red-700/15 px-3 py-1 dark:text-red-200 text-red-700 rounded-sm", children: "View" }) })
        }
      ]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Almino");
    XLSX.writeFile(wb, "EmployeeList.xlsx");
  };
  useNavigate();
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx("div", { className: "text-red-600 text-2xl font-bold mt-5", children: "Client MOM" }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between", children: [
      " ",
      /* @__PURE__ */ jsx("div", { className: "w-full mt-5", children: /* @__PURE__ */ jsx("div", { className: "flex flex-col", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-end justify-end", children: [
          /* @__PURE__ */ jsxs(
            "button",
            {
              onClick: handleOnExport,
              className: "text-gray-400 bg-white focus:outline-non font-medium text-xs rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-1 text-center mr-5 mb-5 flex items-center",
              children: [
                /* @__PURE__ */ jsx(FileDown, {}),
                "Export Excel"
              ]
            }
          ),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowModal(true),
              className: "text-white text-xs bg-red-700 focus:outline-non font-medium rounded px-3 py-2.5 text-center mr-5 mb-5 flex items-center",
              children: "+ Add MOM"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between", children: [
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: filterOptions,
              selectedValue: selectedFilter,
              onSelect: setSelectedFilter,
              placeholder: "Filter By",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: setSelectStatus,
              placeholder: "Payment Status",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            Dropdown,
            {
              options: filterOptions,
              selectedValue: selectedFilter,
              onSelect: setSelectedFilter,
              placeholder: "Sort by",
              className: "w-[200px]"
            }
          ),
          /* @__PURE__ */ jsx(
            SearchInput,
            {
              value: searchTerm,
              onChange: setSearchTerm,
              placeholder: "Search users..."
            }
          )
        ] }),
        /* @__PURE__ */ jsx(DataTable, { thead, tbody, maxHeight: "500px" }),
        /* @__PURE__ */ jsx("div", { className: " bottom-0 border-t border-gray-200 dark:border-gray-700 p-4 mt-10", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: 100,
            currentPage,
            defaultPageSize: 10,
            onChange: setCurrentPage,
            paginationLabel: "employees",
            isScroll: true
          }
        ) })
      ] }) }) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showModal,
        className: "w-[200px]",
        onClose: () => setShowModal(false),
        title: "Add Salary Form",
        children: /* @__PURE__ */ jsx(CreateSalaryForm, { onCancel: () => setShowModal(false) })
      }
    )
  ] });
};
function Clients() {
  const [activeTab, setActiveTab] = useState("clientProfile");
  const tabs = [{
    id: "clientProfile",
    label: "Client Info"
  }, {
    id: "paymentinfo",
    label: "All Payment Details"
  }, {
    id: "mom",
    label: "Meeting Records"
  }, {
    id: "feedback",
    label: " Feedback"
  }, {
    id: "invoice",
    label: "Client Invoice"
  }];
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx("div", {
      className: "text-red-700 text-2xl font-bold mb-5",
      children: "View Client Page"
    }), /* @__PURE__ */ jsx("div", {
      className: "border-b border-gray-200 dark:border-gray-700",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex -mb-px",
        children: tabs.map((tab) => /* @__PURE__ */ jsx("button", {
          onClick: () => setActiveTab(tab.id),
          className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
          children: tab.label
        }, tab.id))
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "clientProfile" && /* @__PURE__ */ jsxs("div", {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "bg-white h-[100%]  py-10  px-10 w-full text-gray-600 rounded-xl mt-10",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex flex-col justify-between align-middle",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-red-700 font-medium text-xl",
                children: [/* @__PURE__ */ jsx(AiFillProject, {
                  className: "inline mr-3",
                  size: 25
                }), "Project Type"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-3 flex flex-col gap-2 h-[100px] w-[200px] bg-blue-100/45 py-6 rounded-lg items-center",
                children: [/* @__PURE__ */ jsx("p", {
                  children: " Residential"
                }), /* @__PURE__ */ jsx("p", {
                  children: "Commerical"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col justify-between align-middle",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-red-700 font-medium text-xl",
                children: [/* @__PURE__ */ jsx(FaAddressCard, {
                  className: "inline mr-3",
                  size: 25
                }), "Site Address"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-3 flex flex-col gap-2 h-[100px] w-[200px] bg-blue-100/45 py-6  rounded-lg items-center",
                children: [/* @__PURE__ */ jsx("p", {
                  children: " Plot No. 12, Anna Nagar"
                }), /* @__PURE__ */ jsx("p", {
                  children: "Tamil Nadu, 600040"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col justify-between align-middle",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-red-700 font-medium text-xl",
                children: [/* @__PURE__ */ jsx(FaMailBulk, {
                  className: "inline mr-3",
                  size: 25
                }), "Project Requirements"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-3 flex flex-col gap-2 h-[100px] w-[200px] bg-blue-100/45 py-6  rounded-lg items-center",
                children: [/* @__PURE__ */ jsx("p", {
                  children: " 3D Elevation,"
                }), /* @__PURE__ */ jsx("p", {
                  children: "Vastu Compliant Design"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col justify-between align-middle",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-red-700 font-medium text-xl",
                children: [/* @__PURE__ */ jsx(FaProjectDiagram, {
                  className: "inline mr-3",
                  size: 25
                }), "Preferred Software"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-3 flex flex-col gap-2 h-[100px] w-[200px] bg-blue-100/45 py-6  rounded-lg items-center",
                children: [/* @__PURE__ */ jsx("p", {
                  children: " AutoCAD"
                }), /* @__PURE__ */ jsx("p", {
                  children: "SketchUp, Revit"
                })]
              })]
            })]
          }), /* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex align-middle mt-8 ml-4",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-red-700 font-medium text-xl",
                children: [/* @__PURE__ */ jsx(AiFillPushpin, {
                  className: "inline mr-3",
                  size: 25
                }), "Scope of Work"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex rounded-lg items-center justify-evenly w-[900px] gap-8",
                children: [/* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("input", {
                    type: "checkbox",
                    className: "w-4 h-4 mr-3"
                  }), /* @__PURE__ */ jsx("label", {
                    children: "Structural Design"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("input", {
                    type: "checkbox",
                    className: "w-4 h-4 mr-3"
                  }), /* @__PURE__ */ jsx("label", {
                    children: "Supervision"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("input", {
                    type: "checkbox",
                    className: "w-4 h-4 mr-3"
                  }), /* @__PURE__ */ jsx("label", {
                    children: "Consultation"
                  })]
                })]
              })]
            })
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-10",
          children: /* @__PURE__ */ jsx(Project$1, {})
        })]
      }), activeTab === "paymentinfo" && /* @__PURE__ */ jsxs("div", {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-evenly w-[100%] mt-15",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex flex-col gap-5 justify-evenly w-[20%] h-[200px] bg-white rounded-3xl shadow-2xl p-8 dark:bg-gray-800",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "font-medium text-xl text-red-700",
              children: " 3,00,000"
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[40px] h-[40px] bg-red-300 dark:bg-red-700/25  rounded-sm flex items-center justify-center",
              children: /* @__PURE__ */ jsx(SquareChartGanttIcon, {
                className: "text-white dark:text-red-300",
                size: 25
              })
            }), /* @__PURE__ */ jsx("p", {
              className: "dark:text-gray-400",
              children: "Total Project Amount"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col gap-5 justify-evenly w-[20%] h-[200px] bg-white rounded-3xl shadow-2xl p-8 dark:bg-gray-800",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "font-medium text-xl text-red-700",
              children: " 3,00,000"
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[40px] h-[40px] bg-red-300 dark:bg-red-700/25  rounded-sm flex items-center justify-center",
              children: /* @__PURE__ */ jsx(SquareChartGanttIcon, {
                className: "text-white dark:text-red-300",
                size: 25
              })
            }), /* @__PURE__ */ jsx("p", {
              className: "dark:text-gray-400",
              children: "Total Project Amount"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col gap-5 justify-evenly w-[20%] h-[200px] bg-white rounded-3xl shadow-2xl p-8 dark:bg-gray-800",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "font-medium text-xl text-red-700",
              children: " 3,00,000"
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[40px] h-[40px] bg-red-300 dark:bg-red-700/25  rounded-sm flex items-center justify-center",
              children: /* @__PURE__ */ jsx(SquareChartGanttIcon, {
                className: "text-white dark:text-red-300",
                size: 25
              })
            }), /* @__PURE__ */ jsx("p", {
              className: "dark:text-gray-400",
              children: "Total Project Amount"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col gap-5 justify-evenly w-[20%] h-[200px] bg-white rounded-3xl shadow-2xl p-8 dark:bg-gray-800",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "font-medium text-xl text-red-700",
              children: " 3,00,000"
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[40px] h-[40px] bg-red-300 dark:bg-red-700/25  rounded-sm flex items-center justify-center",
              children: /* @__PURE__ */ jsx(SquareChartGanttIcon, {
                className: "text-white dark:text-red-300",
                size: 25
              })
            }), /* @__PURE__ */ jsx("p", {
              className: "dark:text-gray-400",
              children: "Total Project Amount"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col items-center gap-8 mt-20",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex flex-col  bg-red-200 dark:bg-red-700/25  text-red-800 w-[70%] h-[200px] rounded-lg border-2 border-red-700 shadow-xl",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex justify-between p-5",
              children: [/* @__PURE__ */ jsx("h1", {
                className: "text-xl font-bold text-gray-600 dark:text-gray-400",
                children: "Pyament History"
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex gap-5",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "font-extrabold text-sm",
                  children: "40%"
                }), /* @__PURE__ */ jsx("div", {
                  className: "w-[280px] rounded-full h-2.5 dark:bg-dark-600 bg-gray-200",
                  children: /* @__PURE__ */ jsx("div", {
                    className: `bg-red-700 h-2.5 rounded-full transition-all duration-500`,
                    style: {
                      width: `40%`
                    }
                  })
                })]
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "items-center flex justify-end mr-[30px]",
              children: /* @__PURE__ */ jsxs("table", {
                className: "text-gray-700 dark:text-gray-400",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: "Month"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: "Paid Amount"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: " Status"
                    })]
                  })
                }), /* @__PURE__ */ jsxs("tbody", {
                  children: [/* @__PURE__ */ jsxs("tr", {
                    className: " border-b-1 border-gray-500",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Apr 23"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "1,80,000"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Paid"
                    })]
                  }), /* @__PURE__ */ jsxs("tr", {
                    className: " border-b-1 border-gray-500",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Apr 23"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "1,80,000"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Paid"
                    })]
                  })]
                })]
              })
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col  bg-red-100/50 dark:bg-red-700/25 text-red-800 w-[70%] h-[200px] rounded-lg border-none shadow-xl",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex justify-between p-5",
              children: [/* @__PURE__ */ jsx("h1", {
                className: "text-xl font-bold text-gray-600 dark:text-gray-400",
                children: "Pyament History"
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex gap-5",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "font-extrabold text-sm",
                  children: "70%"
                }), /* @__PURE__ */ jsx("div", {
                  className: "w-[280px] rounded-full h-2.5 dark:bg-dark-600 bg-gray-200",
                  children: /* @__PURE__ */ jsx("div", {
                    className: `bg-red-700 h-2.5 rounded-full transition-all duration-500`,
                    style: {
                      width: `70%`
                    }
                  })
                })]
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "items-center flex justify-end mr-[30px]",
              children: /* @__PURE__ */ jsxs("table", {
                className: "text-gray-700 dark:text-gray-400",
                children: [/* @__PURE__ */ jsx("thead", {
                  className: "",
                  children: /* @__PURE__ */ jsxs("tr", {
                    children: [/* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: "Month"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: "Paid Amount"
                    }), /* @__PURE__ */ jsx("th", {
                      className: "px-8 py-1 text-left",
                      children: " Status"
                    })]
                  })
                }), /* @__PURE__ */ jsxs("tbody", {
                  children: [/* @__PURE__ */ jsxs("tr", {
                    className: " border-b-1 border-gray-500",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Apr 23"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "1,80,000"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Paid"
                    })]
                  }), /* @__PURE__ */ jsxs("tr", {
                    className: " border-b-1 border-gray-500",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Apr 23"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "1,80,000"
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-8 py-1 text-left",
                      children: "Paid"
                    })]
                  })]
                })]
              })
            })]
          })]
        }), " "]
      }), activeTab === "mom" && /* @__PURE__ */ jsx(ClientMom, {}), activeTab === "feedback" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(ClientFeedbacks, {})
      })]
    })]
  });
}
const ClientPage = withComponentProps(Clients);
const route23 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ClientPage
}, Symbol.toStringTag, { value: "Module" }));
const AddNewCampaignForm = ({ onCancel, onSuccess }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const permissions = useAuthStore((state) => state.permissions);
  console.log("permisssing accesss", permissions[0].role);
  const userRole = permissions[0].role;
  const token = useAuthStore((state) => state.accessToken);
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOption = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [formData, setFormData] = useState({
    branchcode: "",
    campaignname: "",
    campaigntype: "",
    startdate: "",
    enddate: "",
    status: "active",
    goallead: "",
    summary: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const campaignData = {
      data: [formData]
    };
    console.log("formdataa", campaignData);
    try {
      const response = await axios.post(
        `${BASE_URL}/campaign/overview/create`,
        campaignData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create Campaign");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create Camapign`, {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Megaphone, { className: "inline mr-2" }),
        " Campaign Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Type, { className: "inline mr-1", size: 14 }),
            " Campaign Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "campaignname",
              value: formData.campaignname,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter campaign name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Campaign Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "campaigntype",
              value: formData.campaigntype,
              onChange: handleChange,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select campaign type" }),
                /* @__PURE__ */ jsx("option", { value: "digital", children: "Digital Marketing" }),
                /* @__PURE__ */ jsx("option", { value: "print", children: "Print Media" }),
                /* @__PURE__ */ jsx("option", { value: "tv", children: "TV/Radio" }),
                /* @__PURE__ */ jsx("option", { value: "event", children: "Event" }),
                /* @__PURE__ */ jsx("option", { value: "social", children: "Social Media" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Medal, { className: "inline mr-1", size: 14 }),
            " Goal Lead"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "goallead",
              value: formData.goallead,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter campaign code",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "startdate",
              value: formData.startdate,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "enddate",
              value: formData.enddate,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Description"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "summary",
          value: formData.summary,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter campaign description, goals, and key messages..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : " Create Campaign "
        }
      )
    ] })
  ] });
};
const EditCampaignForm = ({ campaign, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const [formData, setFormData] = useState({
    branchcode: "",
    campaign_code: "",
    campaignname: "",
    campaigntype: "",
    startdate: "",
    enddate: "",
    status: "active",
    goallead: "",
    summary: ""
  });
  useEffect(() => {
    if (campaign) {
      setFormData({
        branchcode: campaign.branchcode || "",
        campaign_code: campaign.campaign_code || "",
        campaignname: campaign.campaignname || "",
        campaigntype: campaign.campaigntype || "",
        startdate: campaign.startdate || "",
        enddate: campaign.enddate || "",
        status: campaign.status || "active",
        goallead: campaign.goallead || "",
        summary: campaign.summary || ""
      });
    }
  }, [campaign]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const editData = {
      data: {
        branchcode: formData.branchcode,
        campaign_code: formData.campaign_code,
        campaignname: formData.campaignname,
        campaigntype: formData.campaigntype,
        startdate: formData.startdate,
        enddate: formData.enddate,
        goallead: formData.goallead,
        status: formData.status,
        summary: formData.summary
      }
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/campaign/overview/edit`,
        editData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
        toast$1.success("Campaign updated successfully");
      } else {
        setError(response.data.message || "Failed to update Campaign");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error updating Campaign`, {
        style: {
          border: "1px solid rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: "rgb(185 28 28)"
        },
        iconTheme: {
          primary: "rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Megaphone, { className: "inline mr-2" }),
        " Campaign Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branchcode",
              value: formData.branchcode,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Campaign Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "campaign_code",
              value: formData.campaign_code,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Type, { className: "inline mr-1", size: 14 }),
            " Campaign Name"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "campaignname",
              value: formData.campaignname,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter campaign name",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Campaign Type"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "campaigntype",
              value: formData.campaigntype,
              onChange: handleChange,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select campaign type" }),
                /* @__PURE__ */ jsx("option", { value: "digital", children: "Digital Marketing" }),
                /* @__PURE__ */ jsx("option", { value: "print", children: "Print Media" }),
                /* @__PURE__ */ jsx("option", { value: "tv", children: "TV/Radio" }),
                /* @__PURE__ */ jsx("option", { value: "event", children: "Event" }),
                /* @__PURE__ */ jsx("option", { value: "social", children: "Social Media" }),
                /* @__PURE__ */ jsx("option", { value: "interiors", children: "Interiors" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Medal, { className: "inline mr-1", size: 14 }),
            " Goal Lead"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "goallead",
              value: formData.goallead,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter goal leads"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Flag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              name: "status",
              value: formData.status,
              onChange: handleChange,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inactive", children: "Inactive" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Start Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "startdate",
              value: formData.startdate,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " End Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "enddate",
              value: formData.enddate,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Description"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "summary",
          value: formData.summary,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter campaign description, goals, and key messages..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Campaign"
        }
      )
    ] })
  ] });
};
const Campaign = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteData, setDeleteData] = useState();
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [formData, setFormData] = useState({
    status: "active"
  });
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getCampaign = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/campaign/overview/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("campaigndataaa", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.length) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getCampaign();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Camapign added successfully!");
    fetchBranches(token);
    getCampaign();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (campaign) => {
    setSelectedBranch(campaign);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (branch2) => {
    setShowDeleteModal(true);
    setDeleteData(branch2);
  };
  const handleDeleteSubmit = async () => {
    const deleteDatas = {
      data: {
        branchcode: deleteData.branchcode,
        campaign_code: deleteData.campaign_code,
        status: formData.status
      }
    };
    console.log("delteddataforcvampaign", deleteDatas);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/campaign/overview/delete`, {
        data: deleteDatas,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responsefordeelte", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Campaign deleted successfully!");
        fetchBranches(token);
        getCampaign();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Campaign Code"
  }, {
    data: "Branch Code"
  }, {
    data: "Campaign Name"
  }, {
    data: "Camapign Type"
  }, {
    data: "Started Date"
  }, {
    data: "End Date"
  }, {
    data: "Lead"
  }, {
    data: "Goal Lead"
  }, {
    data: "Conversion Rate"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2, index) => ({
      id: branch2.id,
      data: [{
        data: index + 1
      }, {
        data: branch2.campaign_code
      }, {
        data: branch2.branchcode
      }, {
        data: branch2.campaignname
      }, {
        data: branch2.campaigntype
      }, {
        data: branch2.startdate
      }, {
        data: branch2.enddate
      }, {
        data: branch2.lead
      }, {
        data: branch2.goallead
      }, {
        data: branch2.conversationrate
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-2",
          children: [/* @__PURE__ */ jsx(Link$1, {
            to: `/campaignview/${encodeURIComponent(branch2.campaign_code)}`,
            children: /* @__PURE__ */ jsx("button", {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              children: /* @__PURE__ */ jsx(Eye, {
                size: 18
              })
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(branch2),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(branch2),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getCampaign();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "CampaignList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Campaign Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Camapign", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Select Campaign Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Select Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Campaign",
      children: /* @__PURE__ */ jsx(AddNewCampaignForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Campaign",
      children: /* @__PURE__ */ jsx(EditCampaignForm, {
        campaign: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Campaign",
      children: /* @__PURE__ */ jsx(Modal, {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "Inactive Campaign",
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "space-y-4",
            children: [/* @__PURE__ */ jsxs("h3", {
              className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
              children: [/* @__PURE__ */ jsx(AlertTriangle, {
                className: "inline mr-2"
              }), " Inactive Campaign"]
            }), /* @__PURE__ */ jsxs("p", {
              className: "text-gray-500 text-sm font-medium text-center",
              children: ["Are you sure you want to inactivate this", " ", "Campaign?"]
            }), /* @__PURE__ */ jsx("div", {
              className: "grid grid-cols-1 md:grid-cols-1 gap-4",
              children: /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                  children: [/* @__PURE__ */ jsx(UserX, {
                    className: "inline mr-1",
                    size: 14
                  }), " Status"]
                }), /* @__PURE__ */ jsxs("select", {
                  name: "status",
                  value: formData.status,
                  onChange: handleChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: [/* @__PURE__ */ jsx("option", {
                    value: "",
                    children: "Select Status"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "active",
                    children: "Active"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "inactive",
                    children: "Inactive"
                  })]
                })]
              })
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx("button", {
              type: "button",
              className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
              onClick: () => setShowDeleteModal(false),
              disabled: loading,
              children: "Cancel"
            }), /* @__PURE__ */ jsx("button", {
              type: "button",
              className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
              onClick: handleDeleteSubmit,
              disabled: loading,
              children: loading ? "Processing..." : "Confirm"
            })]
          })]
        })
      })
    })]
  });
};
const Campaign$1 = withComponentProps(Campaign);
const route24 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Campaign$1
}, Symbol.toStringTag, { value: "Module" }));
const AccountProfile = () => {
  const {
    id
  } = useParams$1();
  const navigate = useNavigate$1();
  const [activeTab, setActiveTab] = useState("personal");
  const employee = {
    name: "Bharathi",
    email: "bharathi@gmail.com",
    position: "Team Lead",
    phone: "+91 98765 43210",
    address: "123 Main Street, Chennai, Tamil Nadu",
    department: "Development Team",
    staffId: "ASC 01",
    license: "----",
    dateOfJoining: "15-05-2018",
    bloodGroup: "A1-ve",
    fathersName: "Ganesan",
    dateOfBirth: "10-06-1990",
    alternateContact: "+91 98765 43211",
    profileImage: "https://plus.unsplash.com/premium_photo-1689568126014-06fea9d5d341?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D"
  };
  const handleBack = () => {
    navigate(-1);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: " min-h-screen",
    children: [/* @__PURE__ */ jsx("div", {
      className: "",
      children: /* @__PURE__ */ jsx("div", {
        className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",
        children: /* @__PURE__ */ jsx("div", {
          className: "py-6 flex items-center justify-between",
          children: /* @__PURE__ */ jsxs("button", {
            onClick: handleBack,
            className: "flex items-center text-gray-600 dark:text-gray-300 hover:text-red-700 dark:hover:text-red-700",
            children: [/* @__PURE__ */ jsx(ArrowBigLeft, {
              className: "mr-2",
              size: 20
            }), "Back to Employees"]
          })
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",
      children: [/* @__PURE__ */ jsx("div", {
        className: "bg-red-700 dark:bg-red-700/25 rounded-lg shadow overflow-hidden",
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col md:flex-row",
          children: [/* @__PURE__ */ jsx("div", {
            className: "md:w-1/4 bg-red-700 dark:bg-red-700/15 p-6 flex items-center justify-center",
            children: /* @__PURE__ */ jsxs("div", {
              className: "relative",
              children: [/* @__PURE__ */ jsx("img", {
                className: "h-48 w-48 rounded-full object-cover border-4 border-white dark:border-gray-600",
                src: employee.profileImage,
                alt: employee.name
              }), /* @__PURE__ */ jsx("div", {
                className: "absolute bottom-0 right-0 bg-blue-500 rounded-full p-2",
                children: /* @__PURE__ */ jsx(Edit, {
                  className: "text-white",
                  size: 16
                })
              })]
            })
          }), /* @__PURE__ */ jsxs("div", {
            className: "md:w-3/4 p-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex flex-col md:flex-row md:items-center md:justify-between",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h1", {
                  className: "text-2xl font-bold text-gray-100 dark:text-gray-100",
                  children: employee.name
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-lg text-gray-300 dark:text-gray-300",
                  children: [employee.position, " | since 2021"]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-4 md:mt-0 flex space-x-3 text-gray-100",
                children: [/* @__PURE__ */ jsxs("button", {
                  children: [/* @__PURE__ */ jsx(MailCheck, {
                    size: 16,
                    className: "inline"
                  }), "  Message"]
                }), /* @__PURE__ */ jsxs("button", {
                  children: [/* @__PURE__ */ jsx(PhoneCall, {
                    size: 16,
                    className: "inline"
                  }), " Call"]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "mt-6 flex flex-col gap-2",
              children: [/* @__PURE__ */ jsxs("div", {
                className: " flex",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500  dark:text-gray-400",
                  children: "Staff ID :"
                }), /* @__PURE__ */ jsxs("p", {
                  className: "font-medium text-sm text-gray-300 dark:text-white",
                  children: [" ", employee.staffId]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Department :"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-300 dark:text-white",
                  children: employee.department
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: " flex",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Date of Joining :"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-300 dark:text-white",
                  children: employee.dateOfJoining
                })]
              }), /* @__PURE__ */ jsx("div", {
                children: /* @__PURE__ */ jsxs("span", {
                  className: "px-3 py-1 rounded-full text-sm font-medium  bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",
                  children: [/* @__PURE__ */ jsx(DotIcon, {
                    className: "font-extrabold inline"
                  }), " Active"]
                })
              })]
            })]
          })]
        })
      }), /* @__PURE__ */ jsx("div", {
        className: "border-b border-gray-200 dark:border-gray-700",
        children: /* @__PURE__ */ jsxs("nav", {
          className: "-mb-px flex space-x-8 px-6",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("personal"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "personal" ? "border-red-700 text-red-900 dark:text-red-900" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Personal Details"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("professional"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "professional" ? "border-red-700 text-red-900 dark:text-red-900" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Professional Details"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("documents"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "documents" ? "border-red-700 text-red-900 dark:text-red-900" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Documents"
          })]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "mt-6 bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",
        children: [activeTab === "personal" && /* @__PURE__ */ jsxs("div", {
          className: "p-6",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-gray-900 dark:text-white mb-6",
            children: "Personal Information"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-4",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Name"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.name
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Phone"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.phone
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Email"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.email
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Date of Birth"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.dateOfBirth
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-4",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Father's Name"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.fathersName
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Blood Group"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.bloodGroup
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Alternate Contact"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.alternateContact
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Address"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.address
                })]
              })]
            })]
          })]
        }), activeTab === "professional" && /* @__PURE__ */ jsxs("div", {
          className: "p-6",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-gray-900 dark:text-white mb-6",
            children: "Professional Information"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-4",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Staff ID"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.staffId
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Department"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.department
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Position"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.position
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-4",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Date of Joining"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.dateOfJoining
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "License"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-medium text-gray-900 dark:text-white",
                  children: employee.license
                })]
              })]
            })]
          })]
        }), activeTab === "documents" && /* @__PURE__ */ jsxs("div", {
          className: "p-6",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-gray-900 dark:text-white mb-6",
            children: "Documents"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 dark:text-gray-400",
            children: "No documents uploaded yet."
          })]
        })]
      })]
    })]
  });
};
const AccountProfile$1 = withComponentProps(AccountProfile);
const route25 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: AccountProfile$1
}, Symbol.toStringTag, { value: "Module" }));
const CreateTeamForm = ({ onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useBranchStore$1((state) => state.branchCodeOptions);
  useEmployeeStore(
    (state) => state.branchEmployeeOptions
  );
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOptions = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  const [formData, setFormData] = useState({
    team_name: "",
    team_lead: "",
    branchcode: ""
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const teamData = {
      userDatas: [formData]
    };
    try {
      const response = await axios.post(`${BASE_URL}/teams/create`, teamData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create Team");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in create Team`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Team Information" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
              " Branch Code"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "branchcode",
                value: formData.branchcode,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                  branchCodeOptions == null ? void 0 : branchCodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
              " Team Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "team_name",
                value: formData.team_name,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "text",
                placeholder: "Team Name",
                required: true
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
              " Department"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                value: selectedDepartment,
                onChange: (e) => {
                  handleDepartmentChange(e.target.value);
                  setFormData((prev) => ({
                    ...prev,
                    handler_by: "",
                    handler_to: ""
                  }));
                },
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                  departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Select Team Lead"
            ] }),
            isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
              "select",
              {
                name: "team_lead",
                value: formData.team_lead,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                disabled: !selectedDepartment || staffOptions.length === 0,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                  staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            ),
            selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Team"
          }
        )
      ] })
    ] })
  ] });
};
function EditTeamForm({ branch: branch2, onSuccess, onCancel }) {
  const [formData, setFormData] = useState({
    team_id: "",
    team_name: "",
    team_lead: "",
    branchcode: ""
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useBranchStore$1((state) => state.branchCodeOptions);
  useEmployeeStore((state) => state.branchEmployeeOptions);
  const permissions = useAuthStore((state) => state.permissions);
  const userRole = permissions[0].role;
  const branchCode = useBranchStore$1((state) => state.branchCodeOptions);
  const branchcodeForNor = useAuthStore((state) => state.branchcode);
  const branchCodeOptions = userRole === "superadmin" ? branchCode : [{ value: branchcodeForNor, label: branchcodeForNor }];
  useEffect(() => {
    if (branch2) {
      setFormData({
        team_id: branch2.team_id || "",
        team_name: branch2.team_name || "",
        team_lead: branch2.team_lead || "",
        branchcode: branch2.branchcode || ""
      });
    }
  }, [branch2]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(formData.branchcode);
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const teamData = {
      userData: {
        team_id: formData.team_id,
        team_name: formData.team_name,
        team_lead: formData.team_lead,
        branchcode: formData.branchcode
      }
    };
    try {
      const response = await axios.put(`${BASE_URL}/teams/edit`, teamData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update team");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in update team`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Edit Team Information" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
              " Branch Code"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "branchcode",
                value: formData.branchcode,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                  branchCodeOptions == null ? void 0 : branchCodeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
              " Team Name"
            ] }),
            /* @__PURE__ */ jsx(
              "input",
              {
                name: "team_name",
                value: formData.team_name,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                type: "text",
                placeholder: "Team Name",
                required: true
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
              " Department"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                value: selectedDepartment,
                onChange: (e) => {
                  handleDepartmentChange(e.target.value);
                  setFormData((prev) => ({
                    ...prev,
                    handler_by: "",
                    handler_to: ""
                  }));
                },
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                  departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              " Select Team Lead"
            ] }),
            isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
              "select",
              {
                name: "team_lead",
                value: formData.team_lead,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                disabled: !selectedDepartment || staffOptions.length === 0,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                  staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            ),
            selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Team"
          }
        )
      ] })
    ] })
  ] });
}
const TeamList = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteTeamId, setDeleteTeamId] = useState("");
  const [deleteBranchcode, setDeleteBranchcode] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const navigate = useNavigate();
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const statusOptions = [{
    value: "",
    label: "All Branches"
  }, {
    value: "active",
    label: "Active Branches"
  }, {
    value: "inactive",
    label: "Inactive Branches"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/teams/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseeeforteam>>>>>>", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Team added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (team) => {
    setSelectedBranch(team);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (team) => {
    setShowDeleteModal(true);
    setDeleteTeamId(team.team_id);
    setDeleteBranchcode(team.branchcode);
  };
  const handleDeleteSubmit = async () => {
    const deleteTeamData = {
      userData: {
        team_id: deleteTeamId,
        branchcode: deleteBranchcode
      }
    };
    console.log("deletedcodeformdata", deleteTeamData);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/teams/delete`, {
        data: deleteTeamData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Team deleted successfully!");
        fetchBranches(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting team", error2);
      toast$1.error("Failed to delete team");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleView = (id) => {
    console.log("editprofileidd", id);
    alert("navigateactive");
    navigate(`/teamview/${encodeURIComponent(id)}`);
  };
  const thead = () => [{
    data: "Team Id"
  }, {
    data: "Team Name"
  }, {
    data: "Team Lead Id"
  }, {
    data: "Branch Code"
  }, {
    data: "Created Date"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((team) => ({
      id: team.id,
      data: [
        {
          data: team.team_id
        },
        {
          data: team.team_name
        },
        {
          data: team.team_lead
        },
        {
          data: team.branchcode
        },
        {
          data: new Date(team.created_on).toISOString().split("T")[0]
        },
        // {
        //   data: (
        //     <div
        //       className={`px-3 py-1 rounded-full text-sm inline-flex items-center ${team.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`}
        //     >
        //       <span
        //         className={`w-2 h-2 rounded-full mr-2 ${team.status === "active" ? "bg-green-800" : "bg-red-700"}`}
        //       ></span>
        //       {team.status.charAt(0).toUpperCase() + team.status.slice(1)}
        //     </div>
        //   ),employee
        // },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: "flex flex-wrap justify-center gap-2",
            children: [/* @__PURE__ */ jsx("button", {
              className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
              title: "View",
              onClick: () => handleView(team.team_id),
              children: /* @__PURE__ */ jsx(Eye, {
                size: 18
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditBranch(team),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, {
                size: 18
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleDeleteBranch2(team),
              title: "Delete",
              children: /* @__PURE__ */ jsx(Trash2, {
                size: 18
              })
            })]
          }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Team updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Team Management"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            }), /* @__PURE__ */ jsxs("button", {
              onClick: () => setShowCreateModal(true),
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              children: [!isMobile && "New Team", " +"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: statusOptions,
              selectedValue: selectStatus,
              onSelect: handleStatusChange,
              placeholder: "Branch Status",
              className: "w-full md:w-[200px]"
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: managerOptions,
              selectedValue: selectedManager,
              onSelect: handleManagerChange,
              placeholder: "Manager",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search branches...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Team",
      children: /* @__PURE__ */ jsx(CreateTeamForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Team",
      children: /* @__PURE__ */ jsx(EditTeamForm, {
        branch: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Team",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this team? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Team"
          })]
        })]
      })
    })]
  });
};
const TeamList$1 = withComponentProps(TeamList);
const route26 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: TeamList$1
}, Symbol.toStringTag, { value: "Module" }));
const userImage = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxESEBAQDhAPDxAQDxASDxINDxAPDw8PFBEWFhURExYYHSggGBolHRUVIjIhJSkrLi4uFx8zODMsNygtLisBCgoKBgwNDg0PGisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAOEA4QMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABAUBAwYCB//EAD8QAAIBAgIGBwQIAwkAAAAAAAABAgMRBCEFEjFBUXEiMmGBkaGxBmJy0RMjM0JSksHwU4LhFBU0Q3OissLx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/APqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAETF6QhTyfSl+GO7m9w0niXCF49aTsuziznQJ9bS1R9W0F2K78WaHjqr/zJdzt6EcAbv7XU/iT/ADSCxdT+JP8AMzSAJMcfVX35d9n6knD6XkvtEpLispfJlaAOpoVozWtF3Xmuxmw5fD4iUJa0XzW5rgzocJiY1I60e9b0wN4AAAAAAAAAAAAAAAAAAAAAAAB4r1VGLk9iV/6Hsgaaf1XOUbgU+JxMqjvJ8luXI0macHJqMVdyaSXFvYdho/QtKnFa0Y1J75SV1f3U9gHGmTu54Ci9tKm/5I39DT/c+H/hR8ZW8LgcSLneQwFFbKVNfyRublTitkYrkkgPntzJ9AnSi9sYvnFMrsdoOlNPUiqc9zhlG/bHYByBM0TiNSok9k+i+e5/viRatNxk4yycW0+admeQOtB4oyvGL4xT8UewAAAAAAAAAAAAAAAAAAAAAAQtLr6mXY4+pNIulF9TPkv+SArvZ2nrYiHuqUvBWXm0dicz7J0unUn+GCj+Z3/6nTAAAAAAAAAcRpn/ABFX436EInabVsRV+K/ikyHCN2lxaXiB1NBdGK4Rj6HsAAAAAAAAAAAAAAAAAAAAAAAEfHq9Kp8D8syQbKeG+kUk3bK3imBp9lqdqLlvlUfgkl8y4K/QNJxoRjLJqVRPmptfoWAAAAAAAAAHJe09HVr626cU+9ZNeS8SBgY3q0176fhn+h2ekMJGrTlGSTdnqN7Yytk0c17O4Nzqa9rQhe74trqrtAuASMXSUbWyvcjgAAAAAAAAAAAAAAAAAAAAAAk4F5tdhGN2EfTXf6AT4xts4t97d2ZAAAAAAAAAAGrDYeNOKhBWSv3t7WzaGwIWOlmlwXqRjM5XbfFmAAAAAAAAAAAAAAAAAAAAAAAe6MrSTfE8AC1Tvsz5GSDgZdJrivNE4AAAAAAAAAaMVVSTW9+SMY2bSSTtd7uBBAAAAAAAAAAAAAAAAAAAAAAAAAAAD1TlZp8GWhUk7B1bqz2rzQEgAAAAAANGIxFso7fQCPjJ3lb8KS79vyNAUHm+3PmAAAAAAAAAAAAAAAAAAAAAAAAAAAAHqDs1Y8mVx4K77gJ8K3HI2qa4oj6o1QJF1xXieXVXPkadUzqgYqVW9mS8zTqG/VCiB5hDotcSFGSd7NOzadtzW1MsTlsRjYxxM5wfQbSnbY8rNrvAuQYT4GQAAAAAAAAAAAAAAAAAAAAAAAABma6D9527lmaK+IUWo7ZyaUYra29nJE3ExyiuAEihnGPwo92PGF6i7/U2gebCx6PLYGGYBC0rjlRhfbN5QXbxfYgIen9I6q+ig+lJdNr7sXu5s5o9Tm23KTbbd23tb4mALXRGOtanN5fcb3e6XByROw2lJxyl0173W8QL8EbC42FTquz/AAyyf9SSAAAAAAAAAAAAAAAAABpxGKhDryS7Nr8CrxOl5PKmtVcXnL5IC1r4iMFeckvV8kVOK0tJ5U1qri+s/kV05Nu7bbe1t3ZgC09nqOvW13nqJybed5PJfr4HS143XIpNBvUozmleU52j/Ktr8WWWDlJK025X3vb/AOATaCtFfvebDXrpLIjVKst1l3AS3I8kOlimsp7OKXqS08r7uO4DxiK8YRc5Oyis/ku043HYuVWbnLklujHckS9NaR+llqxf1cXl7z/EVoAAAAAALHCaVlHKp048fvL5lcAOpoV4zV4NP1XNGw5OnNxd4tprenZlnhtMNZVFf3o5PvQFyDXQrxmrwkn6rmjYAAAAAAAABC0hpBU7JLWk1fgku0qq2kqsvvaq9xW89prx9XWqTe69lyWRoANgAAAYA6jRdL6mn8N/zNv9SfGJ4wsLQguEIryRtAGGjIA0zplPpfGOCdKD6y6fYnu7y3x2JVODm92xcZbkchUm5Nyk7tu7faB5AAAAAAAAAAAAAZhJp3TafFOzLHDaXksqi1lxWUvkytAHU0K0Zx1ou680+DNhRaFr2nqPZNf7l+/QvQAAAGjG1tSnKW+2XN5I3lRp2t1YL4n6L9QKgyAAAAAwZMw2rmvUDt0gZZgAZMFdpvG/Rw1Y9ed0uyO9gVGmsb9JO0X0IXS7XvkV5gyAAAAAAAAAAAAAAAAB6pz1WpLammu46qMrpNbGk1yZyZ0Wi6mtSh2Xj4PLysBLAAAoNM/av4YgAQQAAAAA9U+sua9TAA7hmAABzftF9sv9NerAAqwAAAAAAAAAAAAAAAAAAL3Qf2b+N+iAAsAAB//Z";
const CreateTeamMembersForm = ({ onSuccess, onCancel, team }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useEmployeeStore((state) => state.branchEmployeeOptions);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(team.branchcode);
  const [formData, setFormData] = useState({
    team_id: team.team_id,
    branchcode: team.branchcode,
    staff_id: "",
    role: "member",
    status: "active"
  });
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const teamMemberData = {
      userDatas: [formData]
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/members/create`,
        teamMemberData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to Add Member");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error In Add Team Member`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, {}),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Add Team Member" }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
              " Department"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                value: selectedDepartment,
                onChange: (e) => {
                  handleDepartmentChange(e.target.value);
                  setFormData((prev) => ({
                    ...prev,
                    handler_by: "",
                    handler_to: ""
                  }));
                },
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
                  departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
                ]
              }
            )
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
              "Select Member"
            ] }),
            isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
              "select",
              {
                name: "staff_id",
                value: formData.staff_id,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                disabled: !selectedDepartment || staffOptions.length === 0,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
                  staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                ]
              }
            ),
            selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
              /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
              " Status"
            ] }),
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "status",
                value: formData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [
                  /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                  /* @__PURE__ */ jsx("option", { value: "inActive", children: "Inactive" })
                ]
              }
            )
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Add Member"
          }
        )
      ] })
    ] })
  ] });
};
function EditTeamMemberForm({ member, onSuccess, onCancel }) {
  console.log("teammember in editt", member);
  const id = member.id;
  const [formData, setFormData] = useState({
    team_id: "",
    branchcode: "",
    staff_id: "",
    role: "member",
    status: "active"
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    if (member) {
      setFormData({
        team_id: member.team_id,
        branchcode: member.branchcode,
        staff_id: member.staff_id,
        role: member.role,
        status: member.status
      });
    }
  }, [member]);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const teamData = {
      userData: {
        team_id: formData.team_id,
        branchcode: formData.branchcode,
        staff_id: formData.staff_id,
        role: formData.role,
        status: formData.status
      }
    };
    try {
      const response = await axios.put(`${BASE_URL}/members/edit/${id}`, teamData, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.status === 201) {
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update team");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(`${error}, Error in update team`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setError(null);
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 mb-4", children: error }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("form", { onSubmit: handleSubmit, children: [
      /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Edit Team Member" }),
        /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-1 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "inactive", children: "Inactive" })
              ]
            }
          )
        ] }) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Member"
          }
        )
      ] })
    ] })
  ] });
}
const LeedFeedbackManagement = ({ leed }) => {
  console.log("leedddddddd", leed);
  const { id } = useParams$1();
  const team_id = decodeURIComponent(id);
  const token = useAuthStore((state) => state.accessToken);
  const [feedbacks, setFeedbacks] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [currentPage, setCurrentPage] = useState(1);
  const [totalItems, setTotalItems] = useState(0);
  const [pageSize, setPageSize] = useState(10);
  const [showViewModal, setShowViewModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedFeedback, setSelectedFeedback] = useState(null);
  const [editFormData, setEditFormData] = useState({
    lead_tasks_completed: "",
    lead_tasks_rating: "",
    lead_errors_count: "",
    lead_errors_rating: "",
    lead_timeliness_percent: "",
    lead_timeliness_rating: "",
    lead_communication_rating: "",
    lead_client_feedback_rating: "",
    lead_attendance_rating: "",
    development_initiative: false,
    development_initiative_remarks: "",
    lead_technical_rating: "",
    lead_technical_remarks: "",
    lead_attitude_rating: "",
    lead_attitude_remarks: "",
    lead_learning_rating: "",
    lead_learning_remarks: "",
    lead_team_rating: "",
    lead_team_remarks: "",
    training_required: false,
    training_details: "",
    lead_comments: ""
  });
  const [expandedSections, setExpandedSections] = useState({
    performance: false,
    skills: false,
    behavior: false,
    development: false
  });
  useEffect(() => {
    const fetchFeedbacks = async () => {
      try {
        setLoading(true);
        const response = await axios.get(
          `${BASE_URL}/users/self_rating/read?team_id=${team_id}&page=${currentPage}&limit=${pageSize}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        setFeedbacks(response.data.data);
        setTotalItems(response.data.totalDocuments);
      } catch (err) {
        setError(err.message);
        toast$1.error("Failed to fetch feedback data");
      } finally {
        setLoading(false);
      }
    };
    fetchFeedbacks();
  }, [team_id, token, currentPage, pageSize]);
  const handleViewFeedback = (feedback) => {
    setSelectedFeedback(feedback);
    setShowViewModal(true);
  };
  const handleEditFeedback = (feedback) => {
    setSelectedFeedback(feedback);
    setEditFormData({
      lead_tasks_completed: feedback.lead_tasks_completed || "",
      lead_tasks_rating: feedback.lead_tasks_rating || "",
      lead_errors_count: feedback.lead_errors_count || "",
      lead_errors_rating: feedback.lead_errors_rating || "",
      lead_timeliness_percent: feedback.lead_timeliness_percent || "",
      lead_timeliness_rating: feedback.lead_timeliness_rating || "",
      lead_communication_rating: feedback.lead_communication_rating || "",
      lead_client_feedback_rating: feedback.lead_client_feedback_rating || "",
      lead_attendance_rating: feedback.lead_attendance_rating || "",
      development_initiative: feedback.development_initiative || false,
      development_initiative_remarks: feedback.development_initiative_remarks || "",
      lead_technical_rating: feedback.lead_technical_rating || "",
      lead_technical_remarks: feedback.lead_technical_remarks || "",
      lead_attitude_rating: feedback.lead_attitude_rating || "",
      lead_attitude_remarks: feedback.lead_attitude_remarks || "",
      lead_learning_rating: feedback.lead_learning_rating || "",
      lead_learning_remarks: feedback.lead_learning_remarks || "",
      lead_team_rating: feedback.lead_team_rating || "",
      lead_team_remarks: feedback.lead_team_remarks || "",
      training_required: feedback.training_required || false,
      training_details: feedback.training_details || "",
      lead_comments: feedback.lead_comments || ""
    });
    setShowEditModal(true);
  };
  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setEditFormData({
      ...editFormData,
      [name]: type === "checkbox" ? checked : value
    });
  };
  const handleSubmitFeedback = async () => {
    try {
      setLoading(true);
      const payload = {
        reviewData: {
          ...editFormData,
          lead_id: leed.team_lead,
          performance_id: selectedFeedback.performance_id,
          status: "teamlead_reviewed"
        }
      };
      const response = await axios.put(
        `${BASE_URL}/users/lead_rating/edit`,
        payload,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 200) {
        toast$1.success("Feedback updated successfully!");
        setShowEditModal(false);
        const updatedResponse = await axios.get(
          `${BASE_URL}/users/self_rating/read?team_id=${team_id}&page=${currentPage}&limit=${pageSize}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        setFeedbacks(updatedResponse.data.data);
      }
    } catch (error2) {
      console.error("Error updating feedback:", error2);
      toast$1.error("Failed to update feedback");
    } finally {
      setLoading(false);
    }
  };
  const toggleSection = (section) => {
    setExpandedSections({
      ...expandedSections,
      [section]: !expandedSections[section]
    });
  };
  const renderStars = (rating) => {
    const stars = [];
    for (let i = 1; i <= 5; i++) {
      stars.push(
        /* @__PURE__ */ jsx(
          Star,
          {
            size: 18,
            className: i <= rating ? "text-yellow-500 fill-yellow-500" : "text-gray-300 dark:text-gray-500"
          },
          i
        )
      );
    }
    return /* @__PURE__ */ jsx("div", { className: "flex", children: stars });
  };
  const thead = () => [
    { data: "ID" },
    { data: "Employee" },
    { data: "Designation" },
    { data: "Review Period" },
    { data: "Self Rating" },
    { data: "Status" },
    { data: "Actions", className: "text-center" }
  ];
  const tbody = () => {
    return feedbacks.map((feedback, index) => ({
      id: index + 1,
      data: [
        { data: feedback.performance_id },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex items-center", children: [
            /* @__PURE__ */ jsx(User, { className: "mr-2", size: 16 }),
            feedback.name
          ] })
        },
        { data: feedback.designation },
        { data: feedback.review_year },
        { data: renderStars(feedback.self_rating_overall) },
        {
          data: /* @__PURE__ */ jsx(
            "span",
            {
              className: `px-2 py-1 rounded-full text-xs ${feedback.status === "submitted" ? "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200" : feedback.status === "teamlead_reviewed" ? "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" : "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,
              children: feedback.status.replace("_", " ")
            }
          )
        },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex justify-center gap-2", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                onClick: () => handleViewFeedback(feedback),
                className: "p-1 text-blue-600 hover:text-blue-800 dark:hover:text-blue-400",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                onClick: () => handleEditFeedback(feedback),
                className: "p-1 text-green-600 hover:text-green-800 dark:hover:text-green-400",
                title: "Edit",
                disabled: feedback.status === "teamlead_reviewed",
                children: /* @__PURE__ */ jsx(Edit2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  return /* @__PURE__ */ jsxs("div", { className: "container mx-auto px-4 py-8", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-md p-6", children: [
      /* @__PURE__ */ jsx("h1", { className: "text-2xl font-bold text-gray-800 dark:text-white mb-6", children: "Employee Feedback Management" }),
      loading && !feedbacks.length ? /* @__PURE__ */ jsxs("div", { className: "text-center py-8", children: [
        /* @__PURE__ */ jsx(ButtonLoader$1, {}),
        /* @__PURE__ */ jsx("p", { className: "mt-2 text-gray-600 dark:text-gray-400", children: "Loading feedback data..." })
      ] }) : error ? /* @__PURE__ */ jsxs("div", { className: "text-center py-8 text-red-600 dark:text-red-400", children: [
        "Error: ",
        error
      ] }) : /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) }),
        /* @__PURE__ */ jsx("div", { className: "mt-4", children: /* @__PURE__ */ jsx(
          CustomPagination,
          {
            total: totalItems,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "feedbacks"
          }
        ) })
      ] })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showViewModal,
        className: "w-full max-w-6xl mx-auto",
        onClose: () => setShowViewModal(false),
        title: "Employee Feedback Details",
        children: selectedFeedback && /* @__PURE__ */ jsxs("div", { className: "space-y-6 px-4", children: [
          /* @__PURE__ */ jsx("div", { className: "rounded-xl overflow-hidden shadow-lg bg-white dark:bg-gray-800 p-6", children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-gray-800 dark:text-white flex items-center mb-4", children: [
                /* @__PURE__ */ jsx(User, { className: "mr-2 text-red-700 dark:text-red-500", size: 18 }),
                "Employee Information"
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-sm", children: [
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Name:" }),
                  /* @__PURE__ */ jsx("span", { className: "font-medium text-gray-800 dark:text-white", children: selectedFeedback.name })
                ] }),
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Designation:" }),
                  /* @__PURE__ */ jsx("span", { className: "font-medium text-gray-800 dark:text-white", children: selectedFeedback.designation })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-gray-800 dark:text-white flex items-center mb-4", children: [
                /* @__PURE__ */ jsx(Award, { className: "mr-2 text-red-700 dark:text-red-500", size: 18 }),
                "Performance Summary"
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-sm", children: [
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Review Period:" }),
                  /* @__PURE__ */ jsx("span", { className: "font-medium text-gray-800 dark:text-white", children: selectedFeedback.review_year })
                ] }),
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Self Rating:" }),
                  /* @__PURE__ */ jsx("span", { className: "font-medium", children: renderStars(selectedFeedback.self_rating_overall) })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-gray-800 dark:text-white flex items-center mb-4", children: [
                /* @__PURE__ */ jsx(CheckCircle, { className: "mr-2 text-red-700 dark:text-red-500", size: 18 }),
                "Attendance"
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-sm", children: [
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Present Days:" }),
                  /* @__PURE__ */ jsxs("span", { className: "font-medium text-gray-800 dark:text-white", children: [
                    selectedFeedback.total_dayspresent,
                    "/",
                    selectedFeedback.total_workingdays
                  ] })
                ] }),
                /* @__PURE__ */ jsxs("p", { className: "flex justify-between", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "Attendance %:" }),
                  /* @__PURE__ */ jsxs("span", { className: "font-medium text-gray-800 dark:text-white", children: [
                    selectedFeedback.overall_attendance_percentage,
                    "%"
                  ] })
                ] })
              ] })
            ] })
          ] }) }),
          /* @__PURE__ */ jsxs("div", { className: "rounded-xl overflow-hidden shadow-lg bg-white dark:bg-gray-800", children: [
            /* @__PURE__ */ jsxs(
              "button",
              {
                className: "w-full flex justify-between items-center p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",
                onClick: () => toggleSection("performance"),
                children: [
                  /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-gray-800 dark:text-white flex items-center", children: [
                    /* @__PURE__ */ jsx(TrendingUp, { className: "mr-2 text-red-700 dark:text-red-500", size: 18 }),
                    "Performance Metrics"
                  ] }),
                  expandedSections.performance ? /* @__PURE__ */ jsx(ChevronUp, { className: "text-red-700 dark:text-red-500", size: 20 }) : /* @__PURE__ */ jsx(ChevronDown, { className: "text-red-700 dark:text-red-500", size: 20 })
                ]
              }
            ),
            expandedSections.performance && /* @__PURE__ */ jsx("div", { className: "p-6 grid grid-cols-1 md:grid-cols-2 gap-6 border-t border-gray-200 dark:border-gray-700", children: [
              {
                icon: /* @__PURE__ */ jsx(Clock, { className: "text-red-700 dark:text-red-500", size: 16 }),
                title: "Timeliness",
                comment: selectedFeedback.self_timeliness_comments,
                rating: selectedFeedback.self_timeliness_rating
              },
              {
                icon: /* @__PURE__ */ jsx(CheckCircle, { className: "text-red-700 dark:text-red-500", size: 16 }),
                title: "Quality of Work",
                comment: selectedFeedback.self_quality_comments,
                rating: selectedFeedback.self_quality_rating
              },
              {
                icon: /* @__PURE__ */ jsx(MessageSquare, { className: "text-red-700 dark:text-red-500", size: 16 }),
                title: "Communication",
                comment: selectedFeedback.self_communication_comments,
                rating: selectedFeedback.self_communication_rating
              },
              {
                icon: /* @__PURE__ */ jsx(BookOpen, { className: "text-red-700 dark:text-red-500", size: 16 }),
                title: "Initiative",
                comment: selectedFeedback.self_initiative_comments,
                rating: selectedFeedback.self_initiative_rating
              }
            ].map((item, index) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",
                children: [
                  /* @__PURE__ */ jsxs("h4", { className: "font-bold text-gray-700 dark:text-gray-300 mb-2 flex items-center", children: [
                    item.icon,
                    /* @__PURE__ */ jsx("span", { className: "ml-2", children: item.title })
                  ] }),
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 mb-3", children: item.comment }),
                  /* @__PURE__ */ jsx("div", { className: "mt-2", children: renderStars(item.rating) })
                ]
              },
              index
            )) })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "rounded-xl overflow-hidden shadow-lg bg-white dark:bg-gray-800", children: [
            /* @__PURE__ */ jsxs(
              "button",
              {
                className: "w-full flex justify-between items-center p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",
                onClick: () => toggleSection("skills"),
                children: [
                  /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-gray-800 dark:text-white flex items-center", children: [
                    /* @__PURE__ */ jsx(Smile, { className: "mr-2 text-red-700 dark:text-red-500", size: 18 }),
                    "Self Assessment"
                  ] }),
                  expandedSections.skills ? /* @__PURE__ */ jsx(ChevronUp, { className: "text-red-700 dark:text-red-500", size: 20 }) : /* @__PURE__ */ jsx(ChevronDown, { className: "text-red-700 dark:text-red-500", size: 20 })
                ]
              }
            ),
            expandedSections.skills && /* @__PURE__ */ jsxs("div", { className: "p-6 space-y-6 border-t border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
                {
                  title: "What Went Well",
                  content: selectedFeedback.what_went_well
                },
                {
                  title: "Challenges Faced",
                  content: selectedFeedback.challenges_faced
                },
                {
                  title: "New Skills Learned",
                  content: selectedFeedback.new_skills_learned
                },
                {
                  title: "Areas to Improve",
                  content: selectedFeedback.areas_to_improve
                }
              ].map((item, index) => /* @__PURE__ */ jsxs(
                "div",
                {
                  className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",
                  children: [
                    /* @__PURE__ */ jsx("h4", { className: "font-bold text-gray-700 dark:text-gray-300 mb-2", children: item.title }),
                    /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: item.content })
                  ]
                },
                index
              )) }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsx("h4", { className: "font-bold text-gray-700 dark:text-gray-300 mb-2", children: "Overall Feedback" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: selectedFeedback.self_overall_feedback })
              ] })
            ] })
          ] }),
          selectedFeedback.status === "teamlead_reviewed" && /* @__PURE__ */ jsxs("div", { className: "rounded-xl overflow-hidden shadow-lg bg-purple-50 dark:bg-purple-900/30", children: [
            /* @__PURE__ */ jsxs(
              "button",
              {
                className: "w-full flex justify-between items-center p-6 hover:bg-purple-100 dark:hover:bg-purple-800/50 transition-colors",
                onClick: () => toggleSection("behavior"),
                children: [
                  /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-purple-800 dark:text-purple-200 flex items-center", children: [
                    /* @__PURE__ */ jsx(User, { className: "mr-2 text-purple-700 dark:text-purple-400", size: 18 }),
                    "Team Lead Feedback"
                  ] }),
                  expandedSections.behavior ? /* @__PURE__ */ jsx(ChevronUp, { className: "text-purple-700 dark:text-purple-400", size: 20 }) : /* @__PURE__ */ jsx(ChevronDown, { className: "text-purple-700 dark:text-purple-400", size: 20 })
                ]
              }
            ),
            expandedSections.behavior && /* @__PURE__ */ jsxs("div", { className: "p-6 space-y-6 border-t border-purple-200 dark:border-purple-800", children: [
              /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
                /* @__PURE__ */ jsxs("div", { className: "bg-purple-100 dark:bg-purple-800/50 p-4 rounded-lg", children: [
                  /* @__PURE__ */ jsx("h4", { className: "font-bold text-purple-700 dark:text-purple-300 mb-2", children: "Tasks Completed" }),
                  /* @__PURE__ */ jsxs("p", { className: "text-sm text-purple-600 dark:text-purple-400", children: [
                    selectedFeedback.lead_tasks_completed,
                    " tasks with rating:",
                    " ",
                    renderStars(selectedFeedback.lead_tasks_rating)
                  ] })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "bg-purple-100 dark:bg-purple-800/50 p-4 rounded-lg", children: [
                  /* @__PURE__ */ jsx("h4", { className: "font-bold text-purple-700 dark:text-purple-300 mb-2", children: "Errors Count" }),
                  /* @__PURE__ */ jsxs("p", { className: "text-sm text-purple-600 dark:text-purple-400", children: [
                    selectedFeedback.lead_errors_count,
                    " errors with rating:",
                    " ",
                    renderStars(selectedFeedback.lead_errors_rating)
                  ] })
                ] })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
                /* @__PURE__ */ jsxs("div", { className: "bg-purple-100 dark:bg-purple-800/50 p-4 rounded-lg", children: [
                  /* @__PURE__ */ jsx("h4", { className: "font-bold text-purple-700 dark:text-purple-300 mb-2", children: "Technical Skills" }),
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-purple-600 dark:text-purple-400 mb-3", children: selectedFeedback.lead_technical_remarks }),
                  /* @__PURE__ */ jsx("div", { className: "mt-2", children: renderStars(selectedFeedback.lead_technical_rating) })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "bg-purple-100 dark:bg-purple-800/50 p-4 rounded-lg", children: [
                  /* @__PURE__ */ jsx("h4", { className: "font-bold text-purple-700 dark:text-purple-300 mb-2", children: "Team Collaboration" }),
                  /* @__PURE__ */ jsx("p", { className: "text-sm text-purple-600 dark:text-purple-400 mb-3", children: selectedFeedback.lead_team_remarks }),
                  /* @__PURE__ */ jsx("div", { className: "mt-2", children: renderStars(selectedFeedback.lead_team_rating) })
                ] })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-purple-100 dark:bg-purple-800/50 p-4 rounded-lg", children: [
                /* @__PURE__ */ jsx("h4", { className: "font-bold text-purple-700 dark:text-purple-300 mb-2", children: "Lead Comments" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm text-purple-600 dark:text-purple-400", children: selectedFeedback.lead_comments })
              ] })
            ] })
          ] })
        ] })
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-3/4 lg:w-2/3",
        onClose: () => setShowEditModal(false),
        title: "Update Employee Feedback",
        children: selectedFeedback && /* @__PURE__ */ jsxs("div", { className: "space-y-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(User, { className: "inline mr-2" }),
              " Employee Information"
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                  " Employee Name"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    value: selectedFeedback.name,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    readOnly: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Award, { className: "inline mr-1", size: 14 }),
                  " Designation"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    value: selectedFeedback.designation,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    readOnly: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
                  " Review Period"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    value: selectedFeedback.review_year,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    readOnly: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Star, { className: "inline mr-1", size: 14 }),
                  " Self Rating"
                ] }),
                /* @__PURE__ */ jsx("div", { className: "mt-1", children: renderStars(selectedFeedback.self_rating_overall) })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-2" }),
              " Performance Metrics"
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1", size: 14 }),
                  " Tasks Completed"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "number",
                    name: "lead_tasks_completed",
                    value: editFormData.lead_tasks_completed,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    min: "0",
                    placeholder: "Enter number of tasks completed"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Star, { className: "inline mr-1", size: 14 }),
                  " Tasks Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_tasks_rating",
                    value: editFormData.lead_tasks_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Poor" : num === 5 ? "Excellent" : "Average"
                      ] }, num))
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(AlertCircle, { className: "inline mr-1", size: 14 }),
                  " Errors Count"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "number",
                    name: "lead_errors_count",
                    value: editFormData.lead_errors_count,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    min: "0",
                    placeholder: "Enter number of errors"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Star, { className: "inline mr-1", size: 14 }),
                  " Errors Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_errors_rating",
                    value: editFormData.lead_errors_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Many Errors" : num === 5 ? "No Errors" : "Some Errors"
                      ] }, num))
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
                  " Timeliness %"
                ] }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "number",
                    name: "lead_timeliness_percent",
                    value: editFormData.lead_timeliness_percent,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    min: "0",
                    max: "100",
                    placeholder: "Enter timeliness percentage"
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Star, { className: "inline mr-1", size: 14 }),
                  " Timeliness Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_timeliness_rating",
                    value: editFormData.lead_timeliness_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Often Late" : num === 5 ? "Always On Time" : "Sometimes Late"
                      ] }, num))
                    ]
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-2" }),
              " Communication & Client Feedback"
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-1", size: 14 }),
                  " Communication Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_communication_rating",
                    value: editFormData.lead_communication_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Poor" : num === 5 ? "Excellent" : "Average"
                      ] }, num))
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                  " Client Feedback Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_client_feedback_rating",
                    value: editFormData.lead_client_feedback_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Negative" : num === 5 ? "Very Positive" : "Neutral"
                      ] }, num))
                    ]
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
                  " Attendance Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_attendance_rating",
                    value: editFormData.lead_attendance_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Poor" : num === 5 ? "Excellent" : "Average"
                      ] }, num))
                    ]
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(Award, { className: "inline mr-2" }),
              " Skills & Development"
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-1", size: 14 }),
                  " Technical Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_technical_rating",
                    value: editFormData.lead_technical_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Basic" : num === 5 ? "Expert" : "Intermediate"
                      ] }, num))
                    ]
                  }
                ),
                /* @__PURE__ */ jsx(
                  "textarea",
                  {
                    name: "lead_technical_remarks",
                    value: editFormData.lead_technical_remarks,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                    placeholder: "Technical remarks",
                    rows: 2
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(BookOpen, { className: "inline mr-1", size: 14 }),
                  " Learning Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_learning_rating",
                    value: editFormData.lead_learning_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Resistant" : num === 5 ? "Eager" : "Willing"
                      ] }, num))
                    ]
                  }
                ),
                /* @__PURE__ */ jsx(
                  "textarea",
                  {
                    name: "lead_learning_remarks",
                    value: editFormData.lead_learning_remarks,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                    placeholder: "Learning remarks",
                    rows: 2
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
                  " Team Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_team_rating",
                    value: editFormData.lead_team_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Poor" : num === 5 ? "Excellent" : "Average"
                      ] }, num))
                    ]
                  }
                ),
                /* @__PURE__ */ jsx(
                  "textarea",
                  {
                    name: "lead_team_remarks",
                    value: editFormData.lead_team_remarks,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                    placeholder: "Team collaboration remarks",
                    rows: 2
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                  /* @__PURE__ */ jsx(Smile, { className: "inline mr-1", size: 14 }),
                  " Attitude Rating"
                ] }),
                /* @__PURE__ */ jsxs(
                  "select",
                  {
                    name: "lead_attitude_rating",
                    value: editFormData.lead_attitude_rating,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    children: [
                      /* @__PURE__ */ jsx("option", { value: "", children: "Select Rating (1-5)" }),
                      [1, 2, 3, 4, 5].map((num) => /* @__PURE__ */ jsxs("option", { value: num, children: [
                        num,
                        " - ",
                        num === 1 ? "Negative" : num === 5 ? "Very Positive" : "Neutral"
                      ] }, num))
                    ]
                  }
                ),
                /* @__PURE__ */ jsx(
                  "textarea",
                  {
                    name: "lead_attitude_remarks",
                    value: editFormData.lead_attitude_remarks,
                    onChange: handleInputChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                    placeholder: "Attitude remarks",
                    rows: 2
                  }
                )
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-2" }),
              " Development Initiative"
            ] }),
            /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("label", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "checkbox",
                    name: "development_initiative",
                    checked: editFormData.development_initiative,
                    onChange: handleInputChange,
                    className: "mr-2"
                  }
                ),
                /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Development Initiative Shown" })
              ] }),
              /* @__PURE__ */ jsx(
                "textarea",
                {
                  name: "development_initiative_remarks",
                  value: editFormData.development_initiative_remarks,
                  onChange: handleInputChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                  placeholder: "Describe development initiatives taken",
                  rows: 3
                }
              )
            ] }) })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(BookOpen, { className: "inline mr-2" }),
              " Training Requirements"
            ] }),
            /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 gap-4", children: /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("label", { className: "flex items-center", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "checkbox",
                    name: "training_required",
                    checked: editFormData.training_required,
                    onChange: handleInputChange,
                    className: "mr-2"
                  }
                ),
                /* @__PURE__ */ jsx("span", { className: "text-sm font-medium text-gray-700 dark:text-gray-300", children: "Training Required" })
              ] }),
              /* @__PURE__ */ jsx(
                "textarea",
                {
                  name: "training_details",
                  value: editFormData.training_details,
                  onChange: handleInputChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
                  placeholder: "Describe training requirements",
                  rows: 3
                }
              )
            ] }) })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-2" }),
              " Overall Comments"
            ] }),
            /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 gap-4", children: /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
              "textarea",
              {
                name: "lead_comments",
                value: editFormData.lead_comments,
                onChange: handleInputChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                placeholder: "Provide your overall feedback",
                rows: 4
              }
            ) }) })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowEditModal(false),
                disabled: loading,
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                onClick: handleSubmitFeedback,
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                disabled: loading,
                children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Submit Feedback"
              }
            )
          ] })
        ] })
      }
    )
  ] });
};
function Team() {
  const {
    id
  } = useParams();
  const team_id = decodeURIComponent(id);
  const token = useAuthStore((state) => state.accessToken);
  const [teamData, setTeamData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const navigate = useNavigate();
  const [selectedMember, setSelectedMember] = useState(false);
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const getTeamProfile = async () => {
    try {
      setLoading(true);
      const response = await axios.get(`${BASE_URL}/teams/read/profile?team_id=${team_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setTeamData(response.data.data);
      console.log("Team data:", response.data.data);
    } catch (err) {
      setError(err.message);
      console.error("Error fetching team data:", err);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getTeamProfile();
  }, []);
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-red-600 text-xl",
        children: "Loading team data..."
      })
    });
  }
  if (error) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsxs("div", {
        className: "text-red-600 text-xl",
        children: ["Error: ", error]
      })
    });
  }
  if (!teamData) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-red-600 text-xl",
        children: "No team data found"
      })
    });
  }
  const handleDelete = (member) => {
    console.log("memberselecteddis", member);
    setSelectedMember(member);
    setShowDeleteModal(true);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Branch added successfully!");
    getTeamProfile();
  };
  const handleEditBranch = (member) => {
    console.log("memberselecteddis", member);
    setSelectedMember(member);
    setShowEditModal(true);
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    getTeamProfile();
  };
  const handleDeleteSubmit = async () => {
    const deleteId = selectedMember.id;
    console.log("seeelectdeletedid", deleteId);
    const deleted = {
      userData: {
        team_id: selectedMember.team_id,
        branchcode: selectedMember.branchcode,
        staff_id: selectedMember.staff_id
      }
    };
    console.log("seelctdattaaa", deleted);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/members/delete/${deleteId}`, {
        data: deleted,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Team Member deleted successfully!");
        getTeamProfile();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete Team Member");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "min-h-screen dark:bg-gray-900 transition-colors duration-300",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "container mx-auto px-4 py-12 ",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "mb-10",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between w-full",
          children: [/* @__PURE__ */ jsx("div", {
            className: "text-red-600 text-2xl font-bold mb-6",
            children: "Team Overview"
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex gap-5",
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsx("button", {
                onClick: () => setShowCreateModal(true),
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-3 py-2.5",
                children: "+ Add New Member"
              })
            }), /* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsxs("button", {
                className: "text-gray-500 bg-gray-200 px-3 py-1.5 rounded-lg",
                onClick: () => navigate(-1),
                children: [/* @__PURE__ */ jsx(LogOut, {
                  className: "inline rotate-180 text-gray-500 mr-3"
                }), "Go Back"]
              })
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center",
          children: [/* @__PURE__ */ jsx(Toaster, {
            position: toastposition
          }), /* @__PURE__ */ jsx("div", {
            className: "bg-white dark:bg-gray-800 rounded-xl w-[100%] shadow-lg p-6",
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col md:flex-row items-start md:items-center gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex-2",
                children: [/* @__PURE__ */ jsxs("h1", {
                  className: "text-2xl font-bold text-gray-800 dark:text-white",
                  children: [/* @__PURE__ */ jsxs("span", {
                    className: "bg-red-100 dark:bg-gray-700 p-2 rounded-full mr-3 md:w-auto text-red-700 dark:text-red-400",
                    children: [" ", /* @__PURE__ */ jsx(FaProjectDiagram, {
                      className: "text-red-700 dark:text-red-400 inline",
                      size: 22
                    })]
                  }), teamData.team_name]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: [/* @__PURE__ */ jsx(AiOutlineNumber, {
                        className: "inline"
                      }), " Branch Code"]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: teamData.branchcode
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: [/* @__PURE__ */ jsx(ShieldUser, {
                        className: "inline"
                      }), " Team Lead"]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: teamData.team_lead
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: [/* @__PURE__ */ jsx(FaUsers, {
                        className: "inline"
                      }), " Team ID"]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: teamData.team_id
                    })]
                  })]
                })]
              }), /* @__PURE__ */ jsx("div", {
                className: "bg-red-100 dark:bg-gray-700 p-4 rounded-lg w-full md:w-auto",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "grid grid-cols-2 gap-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "text-center",
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: [/* @__PURE__ */ jsx(SquareKanban, {
                        className: "inline",
                        size: 15
                      }), " Assigned"]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "text-xl font-bold text-red-700 dark:text-red-400",
                      children: "3 Projects"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "text-center",
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-600 dark:text-gray-300",
                      children: [/* @__PURE__ */ jsx(LayoutList, {
                        className: "inline",
                        size: 15
                      }), " Tasks"]
                    }), /* @__PURE__ */ jsx("p", {
                      className: "text-xl font-bold text-red-700 dark:text-red-400",
                      children: "18 Tasks"
                    })]
                  })]
                })
              })]
            })
          })]
        })]
      }), teamData.members.length > 0 ? (
        // <div>
        //   <div className="text-red-600 text-2xl font-bold mb-10 text-center ">
        //     Team Members
        //   </div>
        //   <div className=" md:w-[1200px] lg:w-[1500px]">
        //     <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-8 justify-center">
        //       {teamData.members.map((member, index) => (
        //         <div
        //           key={index}
        //           className="rounded-xl overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105 bg-white dark:bg-gray-800"
        //         >
        //           <div className="p-8">
        //             <div className="flex flex-col mb-6">
        //               <div className="flex justify-between">
        //                 <button
        //                   onClick={() => handleDelete(member)}
        //                   disabled={member.role === "lead"}
        //                   title={
        //                     member.role === "lead"
        //                       ? "Lead cannot be deleted"
        //                       : "Delete member"
        //                   }
        //                 >
        //                   <Trash2Icon
        //                     className={`text-gray-500 ${member.role !== "lead" ? "hover:text-red-800 cursor-pointer" : "cursor-not-allowed opacity-50"}`}
        //                   />
        //                 </button>
        //                 <button onClick={() => handleEditBranch(member)}>
        //                   <SquarePen className="text-gray-500 hover:text-red-800" />
        //                 </button>
        //               </div>
        //               {/* Member Image Placeholder */}
        //               <div className="w-30 h-30 rounded-full bg-gray-200 ml-15 dark:bg-gray-700 flex items-center justify-center border-4  border-red-700 dark:border-red-800">
        //                 {/* <svg
        //             className="w-12 h-12 text-gray-400 dark:text-gray-500"
        //             fill="none"
        //             stroke="currentColor"
        //             viewBox="0 0 24 24"
        //             xmlns="http://www.w3.org/2000/svg"
        //           >
        //             <path
        //               strokeLinecap="round"
        //               strokeLinejoin="round"
        //               strokeWidth={2}
        //               d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
        //             />
        //           </svg> */}
        //                 <img
        //                   src={userImage}
        //                   className="w-30 h-28 rounded-full "
        //                 />
        //               </div>
        //               <div className="text-center mt-4">
        //                 <h3 className="text-xl font-bold text-gray-800 dark:text-white">
        //                   {member.staff_name}
        //                 </h3>
        //                 <p className="text-sm text-red-700 dark:text-red-500 flex justify-center mr-6 mt-3 gap-3">
        //                   <FaCriticalRole />{" "}
        //                   {member.role.charAt(0).toUpperCase() +
        //                     member.role.slice(1)}
        //                 </p>
        //               </div>
        //             </div>
        //             <div className="mb-4 p-3 rounded-lg bg-gray-100 dark:bg-gray-700">
        //               <div className="flex justify-between mb-2">
        //                 <span className="text-sm text-gray-600 dark:text-gray-300">
        //                   Department:
        //                 </span>
        //                 <span className="font-medium text-gray-800 dark:text-white ml-3">
        //                   {member.department.charAt(0).toUpperCase() +
        //                     member.department.slice(1)}
        //                 </span>
        //               </div>
        //               <div className="flex justify-between mb-2">
        //                 <span className="text-sm text-gray-600 dark:text-gray-300">
        //                   Designation:
        //                 </span>
        //                 <span className="font-medium text-gray-800 dark:text-white text-wrap ml-3">
        //                   {member.designation !== null
        //                     ? member.designation.charAt(0).toUpperCase() +
        //                       member.designation.slice(1)
        //                     : "No Designation"}
        //                 </span>
        //               </div>
        //               <div className="flex justify-between">
        //                 <span className="text-sm text-gray-600 dark:text-gray-300">
        //                   Status:
        //                 </span>
        //                 <span
        //                   className={`font-medium  px-1 rounded-3xl ${
        //                     member.status === "active"
        //                       ? "text-green-800 bg-green-100 dark:text-green-400"
        //                       : "text-red-600 dark:text-red-400 bg-red-100"
        //                   }`}
        //                 >
        //                   <Dot className="inline" />
        //                   {member.status}
        //                 </span>
        //               </div>
        //             </div>
        //             <div className="mt-4">
        //               <p className="text-sm mb-1 text-gray-600 dark:text-gray-300">
        //                 <span className="font-medium">Email:</span>{" "}
        //                 {member.staff_name_email}
        //               </p>
        //               <p className="text-sm text-gray-600 dark:text-gray-300">
        //                 <span className="font-medium">Joined:</span>{" "}
        //                 {new Date(member.joined_on).toLocaleDateString()}
        //               </p>
        //             </div>
        //           </div>
        //         </div>
        //       ))}
        //     </div>
        //   </div>
        // </div>
        /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("div", {
            className: "text-red-600 text-2xl font-bold mb-10 text-center",
            children: "Team Members"
          }), /* @__PURE__ */ jsx("div", {
            className: "w-full max-w-6xl mx-auto",
            children: /* @__PURE__ */ jsx("div", {
              className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-4",
              children: teamData.members.map((member, index) => /* @__PURE__ */ jsx("div", {
                className: "rounded-xl overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105 bg-white dark:bg-gray-800 w-full max-w-sm mx-auto",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "p-6",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex flex-col items-center mb-4",
                    children: [/* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between w-full mb-4",
                      children: [/* @__PURE__ */ jsx("button", {
                        onClick: () => handleDelete(member),
                        disabled: member.role === "lead",
                        title: member.role === "lead" ? "Lead cannot be deleted" : "Delete member",
                        children: /* @__PURE__ */ jsx(Trash2Icon, {
                          className: `text-gray-500 ${member.role !== "lead" ? "hover:text-red-800 cursor-pointer" : "cursor-not-allowed opacity-50"}`
                        })
                      }), /* @__PURE__ */ jsx("button", {
                        onClick: () => handleEditBranch(member),
                        children: /* @__PURE__ */ jsx(SquarePen, {
                          className: "text-gray-500 hover:text-red-800"
                        })
                      })]
                    }), /* @__PURE__ */ jsx("div", {
                      className: "w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center border-4 border-red-700 dark:border-red-800 mb-3",
                      children: /* @__PURE__ */ jsx("img", {
                        src: userImage,
                        className: "w-full h-full rounded-full object-cover",
                        alt: "Member"
                      })
                    }), /* @__PURE__ */ jsxs("div", {
                      className: "text-center",
                      children: [/* @__PURE__ */ jsx("h3", {
                        className: "text-lg font-bold text-gray-800 dark:text-white",
                        children: member.staff_name
                      }), /* @__PURE__ */ jsxs("p", {
                        className: "text-sm text-red-700 dark:text-red-500 flex items-center justify-center gap-1 mt-1",
                        children: [/* @__PURE__ */ jsx(FaCriticalRole, {}), member.role.charAt(0).toUpperCase() + member.role.slice(1)]
                      })]
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "mb-4 p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-sm",
                    children: [/* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between mb-2",
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "text-gray-600 dark:text-gray-300",
                        children: "Department:"
                      }), /* @__PURE__ */ jsx("span", {
                        className: "font-medium text-gray-800 dark:text-white",
                        children: member.department.charAt(0).toUpperCase() + member.department.slice(1)
                      })]
                    }), /* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between mb-2",
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "text-gray-600 dark:text-gray-300",
                        children: "Designation:"
                      }), /* @__PURE__ */ jsx("span", {
                        className: "font-medium text-gray-800 dark:text-white",
                        children: member.designation !== null ? member.designation.charAt(0).toUpperCase() + member.designation.slice(1) : "No Designation"
                      })]
                    }), /* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between",
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "text-gray-600 dark:text-gray-300",
                        children: "Status:"
                      }), /* @__PURE__ */ jsxs("span", {
                        className: `font-medium px-2 py-0.5 rounded-full text-xs ${member.status === "active" ? "text-green-800 bg-green-100 dark:text-green-400 dark:bg-green-900/50" : "text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/50"}`,
                        children: [/* @__PURE__ */ jsx(Dot, {
                          className: "inline"
                        }), member.status]
                      })]
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                    children: [/* @__PURE__ */ jsxs("p", {
                      className: "truncate",
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "font-medium",
                        children: "Email:"
                      }), " ", member.staff_name_email]
                    }), /* @__PURE__ */ jsxs("p", {
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "font-medium",
                        children: "Joined:"
                      }), " ", new Date(member.joined_on).toLocaleDateString()]
                    })]
                  })]
                })
              }, index))
            })
          }), /* @__PURE__ */ jsx(LeedFeedbackManagement, {
            leed: teamData
          })]
        })
      ) : /* @__PURE__ */ jsxs("div", {
        className: "flex gap-5 justify-center mt-40",
        children: [/* @__PURE__ */ jsx("span", {
          className: "text-gray-500",
          children: /* @__PURE__ */ jsx(FaUsersSlash, {
            size: 35
          })
        }), " ", /* @__PURE__ */ jsx("h1", {
          className: "text-lg text-gray-500",
          children: "No team members assigned for this team"
        })]
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Add New Member",
      children: /* @__PURE__ */ jsx(CreateTeamMembersForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false),
        team: teamData
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Team Member",
      children: /* @__PURE__ */ jsx(EditTeamMemberForm, {
        member: selectedMember,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Team Member",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this member? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Team"
          })]
        })]
      })
    })]
  });
}
const Team$1 = withComponentProps(Team);
const route27 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Team$1
}, Symbol.toStringTag, { value: "Module" }));
const EditFollowupForm = ({ leadId, followupId, onSuccess, onCancel }) => {
  console.log("leadidddddddfolowup", leadId, followupId);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const campaignCodeOption = useLeadsStore(
    (state) => state.campaigncodeOptions
  );
  const [followData, setFollowData] = useState(null);
  const [formData, setFormData] = useState({
    branchcode: "",
    campaign_code: "",
    lead_id: leadId,
    next_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
    status: "active",
    notes: ""
  });
  useEffect(() => {
    const fetchFollowup = async () => {
      try {
        setLoading(true);
        const response = await axios.get(
          `${BASE_URL}/campaign/followup/read/${followupId}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        setFollowData(response.data.data);
        setLoading(false);
      } catch (err) {
        setError(err.message);
        setLoading(false);
      }
    };
    fetchFollowup();
  }, [followupId, token]);
  console.log("setfollowdataaa", followData);
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const apiData = {
      data: formData
    };
    try {
      const response = await axios.put(
        `${BASE_URL}/campaign/followup/edit/${followupId}`,
        apiData,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        toast$1.success("Followup updated successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to update followup");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error updating followup");
    } finally {
      setLoading(false);
    }
  };
  const handleDelete = async () => {
    var _a, _b;
    if (!window.confirm("Are you sure you want to delete this followup?"))
      return;
    setLoading(true);
    try {
      const response = await axios.delete(
        `${BASE_URL}/campaign/followup/delete/${followupId}`,
        {
          headers: { Authorization: `Bearer ${token}` },
          data: {
            data: {
              branchcode: formData.branchcode,
              campaign_code: formData.campaign_code,
              lead_id: leadId
            }
          }
        }
      );
      if (response.status === 201) {
        toast$1.success("Followup deleted successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to delete followup");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error deleting followup");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Edit Followup" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Branch" }),
                branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Camapign Code"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "campaign_code",
              value: formData.campaign_code,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Camapign" }),
                campaignCodeOption == null ? void 0 : campaignCodeOption.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarClock, { className: "inline mr-1", size: 14 }),
            " Next Follow-up Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "next_date",
              value: formData.next_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "cancelled", children: "Cancelled" })
              ]
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-2" }),
        " Notes"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "notes",
          value: formData.notes,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
          placeholder: "Enter followup notes..."
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          onClick: handleDelete,
          className: "px-5 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm flex items-center gap-2",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : /* @__PURE__ */ jsxs(Fragment, { children: [
            /* @__PURE__ */ jsx(Trash2, { size: 16 }),
            " Delete"
          ] })
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 ml-auto", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: onCancel,
            disabled: loading,
            children: "Cancel"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            onClick: handleSubmit,
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Update Followup"
          }
        )
      ] })
    ] })
  ] });
};
const DotSpinner = () => {
  const dotStyle = (delay) => ({
    animation: `spin 2s infinite`,
    animationDelay: `${delay}ms`
  });
  return /* @__PURE__ */ jsxs("div", { className: "relative w-[60px] h-[60px]", children: [
    [...Array(5)].map((_, i) => /* @__PURE__ */ jsx(
      "div",
      {
        className: "absolute inset-0 flex justify-center",
        style: dotStyle(i * 100),
        children: /* @__PURE__ */ jsx("div", { className: "w-[7px] h-[7px] rounded-full bg-red-700" })
      },
      i
    )),
    /* @__PURE__ */ jsx("style", { jsx: true, children: `
        @keyframes spin {
          to {
            transform: rotate(360deg);
          }
        }
      ` })
  ] });
};
const LeadsPage = () => {
  var _a;
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [activeTab, setActiveTab] = useState("salaryList");
  const [leadData, setLeadData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedFollowup, setSelectedFollowup] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const filterOptions = [{
    value: "client",
    label: "Client"
  }, {
    value: "Project",
    label: "Project"
  }, {
    value: "Leads",
    label: "Leads"
  }, {
    value: "Employee",
    label: "Employee"
  }];
  const statusOptions = [{
    value: "Pending",
    label: "Pending"
  }, {
    value: "Paid",
    label: "Paid"
  }, {
    value: "Un Paid",
    label: "Un-Paid"
  }];
  const getLead = async () => {
    try {
      setLoading(true);
      const response = await axios.get(`${BASE_URL}/campaign/leads/read/profile?lead_id=${id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setLeadData(response.data.data);
      setSheetData(response.data.data.followup || []);
      setLoading(false);
    } catch (err) {
      setError(err.message);
      setLoading(false);
    }
  };
  const handleDeleteData = (followup) => {
    console.log("forlloowwdata", followup);
    setSelectedFollowup(followup);
    setShowDeleteModal(true);
  };
  const handleDelete = async () => {
    var _a2, _b;
    const followid = selectedFollowup.id;
    console.log("floowdeletedata", selectedFollowup);
    setLoading(true);
    try {
      const response = await axios.delete(`${BASE_URL}/campaign/followup/delete/${followid}`, {
        headers: {
          Authorization: `Bearer ${token}`
        },
        data: {
          data: {
            branchcode: selectedFollowup.branchcode,
            campaign_code: selectedFollowup.campaign_code,
            lead_id: id
          }
        }
      });
      if (response.status === 201) {
        toast$1.success("Followup deleted successfully!");
      } else {
        setError(response.data.message || "Failed to delete followup");
      }
    } catch (err) {
      setError(((_b = (_a2 = err.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error deleting followup");
    } finally {
      setLoading(false);
    }
  };
  const thead = () => [{
    data: "ID"
  }, {
    data: "Next Follow Date"
  }, {
    data: "Status"
  }, {
    data: "Notes"
  }, {
    data: "Last Updated"
  }, {
    data: "Action"
  }];
  const tbody = () => {
    if (!(leadData == null ? void 0 : leadData.followup)) return [];
    return leadData.followup.map((followup) => ({
      id: followup.id,
      data: [{
        data: followup.id
      }, {
        data: followup.next_date
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${followup.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-yellow-100 text-yellow-800 dark:bg-yellow-800/25 dark:text-yellow-400"}`,
          children: [/* @__PURE__ */ jsx(AlarmClockCheck, {
            size: 20,
            className: "mr-2"
          }), followup.status.charAt(0).toUpperCase() + followup.status.slice(1)]
        })
      }, {
        data: followup.notes || "N/A"
      }, {
        data: new Date(followup.lastupdate).toLocaleString()
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => {
              setSelectedFollowup(followup);
              setShowEditModal(true);
            },
            className: "text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",
            children: /* @__PURE__ */ jsx(PenBox, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => handleDeleteData(followup),
            className: "text-red-800 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        })
      }]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "LeadFollowups");
    XLSX.writeFile(wb, "LeadFollowups.xlsx");
  };
  const navigate = useNavigate();
  const handleGoBack = () => {
    navigate(-1);
  };
  useEffect(() => {
    getLead();
  }, [id]);
  if (loading) return /* @__PURE__ */ jsx("div", {
    className: "p-4 flex items-center",
    children: /* @__PURE__ */ jsx(DotSpinner, {})
  });
  if (!leadData) return /* @__PURE__ */ jsx("div", {
    className: "p-4",
    children: "No data found"
  });
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx("div", {
          className: "p-4 text-red-700 mb-5",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex gap-5",
            children: [/* @__PURE__ */ jsx("h1", {
              className: "text-2xl font-bold",
              children: "Leads View Page"
            }), /* @__PURE__ */ jsxs("div", {
              className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 ${leadData.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-yellow-100 text-yellow-800 dark:bg-yellow-800/25 dark:text-yellow-400"}`,
              children: [/* @__PURE__ */ jsx(Dot, {}), leadData.status]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          children: /* @__PURE__ */ jsxs("button", {
            className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
            onClick: handleGoBack,
            children: [/* @__PURE__ */ jsx(LogOut, {
              className: "inline rotate-180 text-gray-500 mr-3"
            }), "Go Back"]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "w-full max-w-full mx-auto p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-6",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-xl font-bold text-gray-600 dark:text-white",
          children: "Lead Details"
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-2 gap-6",
          children: [/* @__PURE__ */ jsx("div", {
            className: "space-y-4",
            children: /* @__PURE__ */ jsxs("div", {
              className: "p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",
                children: "Lead Information"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-3 text-sm",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Lead Name:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: leadData.lead_name
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Phone Number:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: leadData.phone
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Email ID:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-blue-600 dark:text-blue-400",
                    children: leadData.email || "N/A"
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Status:"
                  }), /* @__PURE__ */ jsxs("div", {
                    className: `inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${leadData.status === "active" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : "bg-yellow-100 text-yellow-800 dark:bg-yellow-800/25 dark:text-yellow-400"}`,
                    children: [/* @__PURE__ */ jsx(Dot, {}), leadData.status]
                  })]
                })]
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "space-y-4",
            children: /* @__PURE__ */ jsxs("div", {
              className: "p-4 bg-red-800/5 dark:bg-gray-700 rounded-lg",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "font-semibold text-gray-700 dark:text-gray-200 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",
                children: "Project Details"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-3 text-sm",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Assigned To:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: leadData.assignee_name
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Project Type:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: leadData.proj_type
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Lead Date:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-gray-700 dark:text-gray-200",
                    children: new Date(leadData.lead_date).toLocaleDateString()
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-gray-500 dark:text-gray-400",
                    children: "Communication Type:"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "font-medium text-purple-600 dark:text-purple-400",
                    children: leadData.comm_type
                  })]
                })]
              })]
            })
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "flex flex-col",
          children: /* @__PURE__ */ jsxs("div", {
            className: "p-4 flex-grow",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-end justify-end",
              children: [/* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "text-gray-400 bg-white focus:outline-non font-medium text-xs rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-1 text-center mr-5 mb-5 flex items-center",
                children: [/* @__PURE__ */ jsx(FileDown, {}), "Export Excel"]
              }), /* @__PURE__ */ jsx("button", {
                onClick: () => setShowModal(true),
                className: "text-white text-xs bg-red-700 focus:outline-non font-medium rounded px-3 py-2.5 text-center mr-5 mb-5 flex items-center",
                children: "+ Add Followup"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex justify-between",
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: filterOptions,
                selectedValue: selectedFilter,
                onSelect: setSelectedFilter,
                placeholder: "Filter By",
                className: "w-[150px]"
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: statusOptions,
                selectedValue: selectStatus,
                onSelect: setSelectStatus,
                placeholder: "Payment Status",
                className: "w-[150px]"
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: filterOptions,
                selectedValue: selectedFilter,
                onSelect: setSelectedFilter,
                placeholder: "Sort by",
                className: "w-[150px]"
              }), /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: setSearchTerm,
                placeholder: "Search followups..."
              })]
            }), /* @__PURE__ */ jsx(DataTable, {
              thead,
              tbody
            }), /* @__PURE__ */ jsx("div", {
              className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4 mt-10",
              children: /* @__PURE__ */ jsx(CustomPagination, {
                total: ((_a = leadData.followup) == null ? void 0 : _a.length) || 0,
                currentPage,
                defaultPageSize: 10,
                onChange: setCurrentPage,
                paginationLabel: "followups",
                isScroll: true
              })
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full max-w-2xl",
      onClose: () => setShowCreateModal(false),
      title: "Add New Followup",
      children: /* @__PURE__ */ jsx(CreateFollowupForm, {
        leadId: id,
        leadData,
        onSuccess: () => {
          getLead();
          setShowCreateModal(false);
        },
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full max-w-2xl",
      onClose: () => {
        setShowEditModal(false);
        setSelectedFollowup(null);
      },
      title: "Edit Followup",
      children: /* @__PURE__ */ jsx(EditFollowupForm, {
        leadId: id,
        followupId: selectedFollowup == null ? void 0 : selectedFollowup.id,
        onSuccess: () => {
          getLead();
          setShowEditModal(false);
          setSelectedFollowup(null);
        },
        onCancel: () => {
          setShowEditModal(false);
          setSelectedFollowup(null);
        }
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showModal,
      className: "w-[200px]",
      onClose: () => setShowModal(false),
      title: "Add New Followup",
      children: /* @__PURE__ */ jsx(CreateFollowupForm, {
        leadData,
        onCancel: () => setShowCreateModal(false),
        leadId: id,
        onSuccess: getLead
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this Followup? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDelete,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Branhch"
          })]
        })]
      })
    })]
  });
};
const LeadsPage$1 = withComponentProps(LeadsPage);
const route28 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: LeadsPage$1
}, Symbol.toStringTag, { value: "Module" }));
const PayRequestList = () => {
  useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [sheetData, setSheetData] = useState([]);
  const [showViewModal, setShowViewModal] = useState(false);
  const [showPaymentModal, setShowPaymentModal] = useState(false);
  const [paymentHistory, setPaymentHistory] = useState([]);
  const [selectedRequestId, setSelectedRequestId] = useState("");
  const [invoiceDetails, setInvoiceDetails] = useState(null);
  const navigate = useNavigate();
  const {
    id
  } = useParams();
  const inv_id = decodeURIComponent(id);
  const [paymentForm, setPaymentForm] = useState({
    project_code: "",
    invoice_no: "",
    request_id: "",
    paid_amount: "",
    payment_mode: "upi",
    notes: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  useAuthStore((state) => state.role);
  const paymentModeOptions = [{
    value: "upi",
    label: "UPI"
  }, {
    value: "bank_transfer",
    label: "Bank Transfer"
  }, {
    value: "cash",
    label: "Cash"
  }, {
    value: "cheque",
    label: "Cheque"
  }];
  const getPayRequests = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${BASE_URL}/project/invoice/read?invoice_id=${inv_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data.data && response.data.data.length > 0) {
        const invoiceData = response.data.data[0];
        setInvoiceDetails(invoiceData.invoice);
        setData(invoiceData.milestone_requests);
        setSheetData(invoiceData.milestone_requests);
        setTotalItem(invoiceData.milestone_requests.length);
      }
    } catch (error2) {
      console.error("Error fetching invoice details", error2);
      setError("Failed to fetch invoice details");
    } finally {
      setLoading(false);
    }
  };
  const fetchPaymentHistory = async (requestId) => {
    var _a;
    try {
      const response = await axios.get(`${BASE_URL}/project/pay/read?request_id=${requestId}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setPaymentHistory(((_a = response.data) == null ? void 0 : _a.data) || []);
    } catch (error2) {
      console.error("Error fetching payment history", error2);
      toast$1.error("Failed to fetch payment history");
    }
  };
  const handleViewPayment = (requestId) => {
    setSelectedRequestId(requestId);
    fetchPaymentHistory(requestId);
    setShowViewModal(true);
  };
  const handlePaymentUpdate = (request) => {
    setPaymentForm({
      project_code: request.project_code,
      invoice_no: invoiceDetails.invoice_no,
      request_id: request.request_id,
      paid_amount: request.balance_amount,
      payment_mode: "upi",
      notes: ""
    });
    setShowPaymentModal(true);
  };
  const handlePaymentSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    try {
      const response = await axios.post(`${BASE_URL}/project/pay/create`, paymentForm, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.status === 201) {
        toast$1.success("Payment recorded successfully!");
        setShowPaymentModal(false);
        getPayRequests();
      }
    } catch (error2) {
      console.error("Error recording payment", error2);
      toast$1.error(((_b = (_a = error2.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "Failed to record payment");
    }
  };
  const handlePaymentFormChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setPaymentForm((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  useEffect(() => {
    getPayRequests();
  }, [inv_id]);
  const formatCurrency = (amount) => {
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR"
    }).format(parseFloat(amount || "0"));
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const thead = () => [{
    data: "Request ID"
  }, {
    data: "Milestone"
  }, {
    data: "Amount"
  }, {
    data: "Balance"
  }, {
    data: "Status"
  }, {
    data: "Due Date"
  }, {
    data: "Actions"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((request) => ({
      id: request.request_id,
      data: [{
        data: request.request_id
      }, {
        data: request.miles_title
      }, {
        data: formatCurrency(request.milestone_amount)
      }, {
        data: formatCurrency(request.balance_amount)
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${request.status === "approved" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : request.status === "rejected" ? "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-300" : "bg-blue-100 text-blue-800 dark:bg-blue-800/25 dark:text-blue-300"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${request.status === "approved" ? "bg-green-800 dark:bg-green-400" : request.status === "rejected" ? "bg-red-800 dark:bg-red-400" : "bg-blue-800 dark:bg-blue-400"}`
          }), request.status.charAt(0).toUpperCase() + request.status.slice(1)]
        })
      }, {
        data: formatDate2(request.due_date)
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => handleViewPayment(request.request_id),
            className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
            title: "View Payment",
            children: /* @__PURE__ */ jsx(Eye, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => handlePaymentUpdate(request),
            className: "p-1 text-red-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
            title: "Update Payment",
            children: /* @__PURE__ */ jsx(DollarSign, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx("div", {
      className: "flex flex-col min-h-screen",
      children: /* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "Invoice & Payment Management"
          }), /* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsxs("button", {
              className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
              onClick: () => navigate(-1),
              children: [/* @__PURE__ */ jsx(LogOut, {
                className: "inline rotate-180 text-gray-500 mr-3"
              }), "Go Back"]
            })
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), invoiceDetails && /* @__PURE__ */ jsx("div", {
          className: "bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",
          children: /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-lg font-semibold mb-2",
                children: "Invoice Information"
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Invoice No:"
                }), " ", invoiceDetails.invoice_no]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Date:"
                }), " ", formatDate2(invoiceDetails.invoice_date)]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Due Date:"
                }), " ", formatDate2(invoiceDetails.due_date)]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Status:"
                }), " ", invoiceDetails.status]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-lg font-semibold mb-2",
                children: "Client Information"
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Client:"
                }), " ", invoiceDetails.client_name]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Company:"
                }), " ", invoiceDetails.company_name]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Project:"
                }), " ", invoiceDetails.project_title]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-lg font-semibold mb-2",
                children: "Financial Information"
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Total Amount:"
                }), " ", formatCurrency(invoiceDetails.total_amount)]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Paid Amount:"
                }), " ", formatCurrency(invoiceDetails.paid_amount)]
              }), /* @__PURE__ */ jsxs("p", {
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-medium",
                  children: "Balance:"
                }), " ", formatCurrency(invoiceDetails.balance_amount)]
              })]
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold mb-4",
            children: "Milestone Payment Requests"
          }), loading && /* @__PURE__ */ jsx("div", {
            className: "text-center py-4",
            children: "Loading..."
          }), error && /* @__PURE__ */ jsx("div", {
            className: "text-red-500 text-center py-4",
            children: error
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead,
              tbody,
              responsive: true,
              className: "min-w-full"
            })
          })]
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showViewModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowViewModal(false),
      title: `Payment History for ${selectedRequestId}`,
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [paymentHistory.length > 0 ? /* @__PURE__ */ jsx("div", {
          className: "space-y-4",
          children: /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-gray-50 dark:bg-gray-700",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Payment ID"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Amount"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Payment Mode"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Date"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Status"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
                    children: "Notes"
                  })]
                })
              }), /* @__PURE__ */ jsx("tbody", {
                className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
                children: paymentHistory.map((payment) => /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: payment.pay_id
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: formatCurrency(payment.paid_amount)
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: payment.payment_mode
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: formatDate2(payment.paid_on)
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: /* @__PURE__ */ jsx("span", {
                      className: "px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400",
                      children: payment.payment_status
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",
                    children: payment.notes
                  })]
                }, payment.pay_id))
              })]
            })
          })
        }) : /* @__PURE__ */ jsx("div", {
          className: "text-center py-10 text-gray-500 dark:text-gray-400",
          children: "No payment history found for this request"
        }), /* @__PURE__ */ jsx("div", {
          className: "flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",
          children: /* @__PURE__ */ jsx("button", {
            onClick: () => setShowViewModal(false),
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            children: "Close"
          })
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showPaymentModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowPaymentModal(false),
      title: `Record Payment for Request ${paymentForm.request_id}`,
      children: /* @__PURE__ */ jsx("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: /* @__PURE__ */ jsxs("form", {
          onSubmit: handlePaymentSubmit,
          children: [/* @__PURE__ */ jsxs("div", {
            className: "space-y-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                  children: "Project Code"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1",
                  children: paymentForm.project_code
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                  children: "Invoice No"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1",
                  children: paymentForm.invoice_no
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                  children: "Paid Amount"
                }), /* @__PURE__ */ jsx("input", {
                  name: "paid_amount",
                  value: paymentForm.paid_amount,
                  onChange: handlePaymentFormChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  type: "number",
                  placeholder: "Amount",
                  required: true
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                  children: "Payment Mode"
                }), /* @__PURE__ */ jsx("select", {
                  name: "payment_mode",
                  value: paymentForm.payment_mode,
                  onChange: handlePaymentFormChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  required: true,
                  children: paymentModeOptions.map((option) => /* @__PURE__ */ jsx("option", {
                    value: option.value,
                    children: option.label
                  }, option.value))
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsx("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",
                children: "Notes"
              }), /* @__PURE__ */ jsx("textarea", {
                name: "notes",
                value: paymentForm.notes,
                onChange: handlePaymentFormChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",
                placeholder: "Payment notes"
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx("button", {
              type: "button",
              className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
              onClick: () => setShowPaymentModal(false),
              children: "Cancel"
            }), /* @__PURE__ */ jsx("button", {
              type: "submit",
              className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
              children: "Record Payment"
            })]
          })]
        })
      })
    })]
  });
};
const PayRequestList$1 = withComponentProps(PayRequestList);
const route38 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: PayRequestList$1
}, Symbol.toStringTag, { value: "Module" }));
const AddPayRequest = ({ project: project2, onSuccess, onCancel }) => {
  var _a;
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [milestones, setMilestones] = useState([]);
  const token = useAuthStore((state) => state.accessToken);
  const {
    departmentOptions: departmentOptions2,
    selectedDepartment,
    staffOptions,
    isFetchingStaff,
    handleDepartmentChange
  } = useStaffFilter(project2.branchcode);
  const [formData, setFormData] = useState({
    project_code: project2.project_code,
    project_amount: project2.budget || 0,
    invoice_no: "",
    invoice_date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
    due_date: "",
    cgst_percentage: 0,
    sgst_percentage: 0,
    discount: 0,
    roundoff: 0,
    paid_amount: 0,
    balance_amount: project2.budget || 0,
    notes: "",
    created_by: ((_a = useAuthStore.getState().user) == null ? void 0 : _a.staff_id) || "",
    approved_staff_id: "",
    data: []
  });
  useEffect(() => {
    const fetchMilestones = async () => {
      try {
        const response = await axios.get(
          `${BASE_URL}/project/milestone/dropdown?project_code=${project2.project_code}`,
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );
        if (response.data && response.data.data) {
          setMilestones(response.data.data);
          const initialMilestoneData = response.data.data.map((milestone) => ({
            milestone_code: milestone.milestone_code,
            milestone_amount: milestone.base_amount || 0,
            notes: "",
            due_date: milestone.end_date || "",
            permission: false,
            isrevised: false
          }));
          setFormData((prev) => ({
            ...prev,
            data: initialMilestoneData,
            due_date: response.data.data.length > 0 ? response.data.data[response.data.data.length - 1].end_date || "" : ""
          }));
        }
      } catch (err) {
        console.error("Error fetching milestones:", err);
        toast$1.error("Failed to load milestones");
      }
    };
    if (project2.project_code) {
      fetchMilestones();
    }
  }, [project2.project_code, token]);
  const handleMilestoneChange = (index, e) => {
    const { name, value, type, checked } = e.target;
    const updatedData = [...formData.data];
    updatedData[index] = {
      ...updatedData[index],
      [name]: type === "checkbox" ? checked : value
    };
    setFormData((prev) => ({
      ...prev,
      data: updatedData
    }));
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    if (name === "paid_amount") {
      const paid = parseFloat(value) || 0;
      const balance = (parseFloat(formData.project_amount) || 0) - paid;
      setFormData((prev) => ({
        ...prev,
        [name]: value,
        balance_amount: balance.toFixed(2)
      }));
    } else {
      setFormData((prev) => ({
        ...prev,
        [name]: value
      }));
    }
  };
  const validateForm = () => {
    if (!formData.approved_staff_id) {
      setError("Approved staff is required");
      return false;
    }
    if (!formData.invoice_no) {
      setError("Invoice number is required");
      return false;
    }
    if (!formData.invoice_date) {
      setError("Invoice date is required");
      return false;
    }
    if (!formData.due_date) {
      setError("Due date is required");
      return false;
    }
    if (formData.data.length === 0) {
      setError("At least one milestone is required");
      return false;
    }
    for (const milestone of formData.data) {
      if (!milestone.due_date) {
        setError("Due date is required for all milestones");
        return false;
      }
      if (!milestone.milestone_amount || isNaN(milestone.milestone_amount) || milestone.milestone_amount <= 0) {
        setError("Valid amount is required for all milestones");
        return false;
      }
    }
    return true;
  };
  const handleSubmit = async (e) => {
    var _a2, _b, _c, _d;
    e.preventDefault();
    setLoading(true);
    setError(null);
    if (!validateForm()) {
      setLoading(false);
      return;
    }
    try {
      const response = await axios.post(
        `${BASE_URL}/project/req/create`,
        formData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Payment request created successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to create payment request");
      }
    } catch (err) {
      setError(((_b = (_a2 = err.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(((_d = (_c = err.response) == null ? void 0 : _c.data) == null ? void 0 : _d.message) || "Error creating payment request");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    error && /* @__PURE__ */ jsx("div", { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Project Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Project Code" }),
          /* @__PURE__ */ jsx(
            "input",
            {
              value: formData.project_code,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Project Amount" }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "project_amount",
              value: formData.project_amount,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Project Duration" }),
        /* @__PURE__ */ jsxs("div", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: [
          formatDate(project2.start_date),
          " - ",
          formatDate(project2.end_date)
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Invoice Information" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Invoice Number"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "invoice_no",
              value: formData.invoice_no,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter invoice number",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Invoice Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "invoice_date",
              value: formData.invoice_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Due Date"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "due_date",
              value: formData.due_date,
              onChange: handleChange,
              type: "date",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " CGST (%)"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "cgst_percentage",
              value: formData.cgst_percentage,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "CGST percentage"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Percent, { className: "inline mr-1", size: 14 }),
            " SGST (%)"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "sgst_percentage",
              value: formData.sgst_percentage,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "SGST percentage"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Discount"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "discount",
              value: formData.discount,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Discount amount"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Tag, { className: "inline mr-1", size: 14 }),
            " Round Off"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "roundoff",
              value: formData.roundoff,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Round off amount"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Banknote, { className: "inline mr-1", size: 14 }),
            " Paid Amount"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "paid_amount",
              value: formData.paid_amount,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Amount already paid"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Banknote, { className: "inline mr-1", size: 14 }),
            " Balance Amount"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "balance_amount",
              value: formData.balance_amount,
              readOnly: true,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none cursor-not-allowed"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            placeholder: "Additional notes",
            rows: 3
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Approval Information" }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(Building, { className: "inline mr-1", size: 14 }),
          " Department"
        ] }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            value: selectedDepartment,
            onChange: (e) => {
              handleDepartmentChange(e.target.value);
              setFormData((prev) => ({
                ...prev,
                approved_staff_id: ""
              }));
            },
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Department" }),
              departmentOptions2.map((dept) => /* @__PURE__ */ jsx("option", { value: dept, children: dept }, dept))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Created By"
        ] }),
        isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
          "select",
          {
            name: "created_by",
            value: formData.created_by,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            disabled: !selectedDepartment || staffOptions.length === 0,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
              staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        ),
        selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
          /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
          " Approved Staff"
        ] }),
        isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
          "select",
          {
            name: "approved_staff_id",
            value: formData.approved_staff_id,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
            required: true,
            disabled: !selectedDepartment || staffOptions.length === 0,
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Select Staff" }),
              staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
            ]
          }
        ),
        selectedDepartment && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found in this department" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: "Milestone Payments" }),
      milestones.length === 0 ? /* @__PURE__ */ jsx("div", { className: "text-center py-4 text-gray-500", children: "No milestones found for this project" }) : formData.data.map((milestone, index) => {
        var _a2;
        return /* @__PURE__ */ jsxs("div", { className: "border rounded-lg p-4 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("h4", { className: "font-medium mb-3 flex items-center gap-2", children: [
            /* @__PURE__ */ jsx(ClipboardList, { size: 16 }),
            ((_a2 = milestones[index]) == null ? void 0 : _a2.miles_title) || `Milestone ${index + 1}`,
            /* @__PURE__ */ jsx("span", { className: "text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded ml-2", children: milestone.milestone_code })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-3 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(Banknote, { className: "inline mr-1", size: 14 }),
                " Amount"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "milestone_amount",
                  value: milestone.milestone_amount,
                  onChange: (e) => handleMilestoneChange(index, e),
                  type: "number",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  placeholder: "Enter amount"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-3 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
                " Due Date"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "due_date",
                  value: milestone.due_date,
                  onChange: (e) => handleMilestoneChange(index, e),
                  type: "date",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-3 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
                /* @__PURE__ */ jsx(ListChecks, { className: "inline mr-1", size: 14 }),
                " Notes"
              ] }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  name: "notes",
                  value: milestone.notes,
                  onChange: (e) => handleMilestoneChange(index, e),
                  type: "text",
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                  placeholder: "Payment notes"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-4 p-3", children: [
              /* @__PURE__ */ jsxs("label", { className: "flex items-center gap-2 text-sm", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "checkbox",
                    name: "permission",
                    checked: milestone.permission,
                    onChange: (e) => handleMilestoneChange(index, e),
                    className: "rounded border-gray-300 text-red-600 focus:ring-red-500"
                  }
                ),
                "Permission"
              ] }),
              /* @__PURE__ */ jsxs("label", { className: "flex items-center gap-2 text-sm", children: [
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    type: "checkbox",
                    name: "isrevised",
                    checked: milestone.isrevised,
                    onChange: (e) => handleMilestoneChange(index, e),
                    className: "rounded border-gray-300 text-red-600 focus:ring-red-500"
                  }
                ),
                "Is Revised"
              ] })
            ] })
          ] })
        ] }, index);
      })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          disabled: loading || milestones.length === 0,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm disabled:opacity-70",
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Payment Request"
        }
      )
    ] })
  ] });
};
const InvoiceList = () => {
  var _a;
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const [sheetData, setSheetData] = useState([]);
  const [showPaymentModal, setShowPaymentModal] = useState(false);
  const [selectedInvoice, setSelectedInvoice] = useState(null);
  const [showPayList, setShowPayList] = useState(false);
  const [paymentForm, setPaymentForm] = useState({
    invoice_id: "",
    paid_amount: "",
    payment_mode: "upi",
    notes: ""
  });
  const token = useAuthStore((state) => state.accessToken);
  const userRole = useAuthStore((state) => state.role);
  const staticBranchCode = "BRANCH-03";
  const navigate = useNavigate();
  const statusOptions = [
    { value: "", label: "All Status" },
    { value: "raised", label: "Raised" },
    { value: "partially_paid", label: "Partially Paid" },
    { value: "paid", label: "Paid" },
    { value: "cancelled", label: "Cancelled" }
  ];
  const paymentModeOptions = [
    { value: "upi", label: "UPI" },
    { value: "bank_transfer", label: "Bank Transfer" },
    { value: "cash", label: "Cash" },
    { value: "cheque", label: "Cheque" }
  ];
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  const getPayments = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, branchcode = selectedBranchCode) => {
    var _a2, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/invoice/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      const branchFilter = userRole === "superadmin" ? branchcode : staticBranchCode;
      if (branchFilter) url += `&branchcode=${branchFilter}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      setSheetData(((_a2 = response == null ? void 0 : response.data) == null ? void 0 : _a2.data) || []);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching payments", error2);
      setError("Failed to fetch payments");
    } finally {
      setLoading(false);
    }
  };
  const handlePaymentUpdate = (invoice) => {
    setSelectedInvoice(invoice);
    console.log("invoiceehabndleee", invoice);
    const id = invoice.invoice.invoice_id;
    navigate(`/payreq_view/${encodeURIComponent(id)}`);
  };
  const handleViewNavigate = (invoice) => {
    console.log("invoiceehabndleee", invoice);
    const id = invoice.invoice.invoice_id;
    navigate(`/invoice_view/${encodeURIComponent(id)}`);
  };
  const handlePaymentSubmit = async (e) => {
    var _a2, _b;
    e.preventDefault();
    try {
      const response = await axios.post(
        `${BASE_URL}/project/invoice/payment`,
        paymentForm,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.status === 201) {
        toast$1.success("Payment recorded successfully!");
        setShowPaymentModal(false);
        getPayments();
      }
    } catch (error2) {
      console.error("Error recording payment", error2);
      toast$1.error(((_b = (_a2 = error2.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.message) || "Failed to record payment");
    }
  };
  const handlePaymentFormChange = (e) => {
    const { name, value } = e.target;
    setPaymentForm((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  useEffect(() => {
    getPayments();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedBranchCode,
    pageSize,
    userRole
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Payments");
    XLSX.writeFile(wb, "PaymentList.xlsx");
  };
  const formatCurrency = (amount) => {
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR"
    }).format(parseFloat(amount || "0"));
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric"
    });
  };
  const thead = () => [
    { data: "Invoice No" },
    { data: "Client" },
    { data: "Project" },
    { data: "Total Amount" },
    { data: "Paid Amount" },
    { data: "Balance" },
    { data: "Status" },
    { data: "Due Date" },
    { data: "Actions" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((item) => {
      const invoice = item.invoice;
      item.milestone_requests[0];
      return {
        id: invoice.invoice_id,
        data: [
          { data: invoice.invoice_no },
          { data: invoice.client_name },
          { data: invoice.project_title },
          { data: formatCurrency(invoice.total_amount) },
          { data: formatCurrency(invoice.paid_amount) },
          { data: formatCurrency(invoice.balance_amount) },
          {
            data: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${invoice.status === "paid" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : invoice.status === "cancelled" ? "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-300" : "bg-blue-100 text-blue-800 dark:bg-blue-800/25 dark:text-blue-300"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    "span",
                    {
                      className: `w-2 h-2 rounded-full mr-2 ${invoice.status === "paid" ? "bg-green-800 dark:bg-green-400" : invoice.status === "cancelled" ? "bg-red-800 dark:bg-red-400" : "bg-blue-800 dark:bg-blue-400"}`
                    }
                  ),
                  invoice.status.charAt(0).toUpperCase() + invoice.status.slice(1)
                ]
              }
            )
          },
          { data: formatDate2(invoice.due_date) },
          {
            data: /* @__PURE__ */ jsxs("div", { className: "flex justify-center gap-2", children: [
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: () => handlePaymentUpdate(item),
                  className: "p-1 text-red-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                  title: "Record Payment",
                  children: /* @__PURE__ */ jsx(DollarSign, { size: 18 })
                }
              ),
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: () => handleViewNavigate(item),
                  className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                  title: "View Invoice",
                  children: /* @__PURE__ */ jsx(Eye, { size: 18 })
                }
              )
            ] }),
            className: "action-cell"
          }
        ]
      };
    });
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Payment Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", { className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`, children: [
              /* @__PURE__ */ jsx(
                Dropdown,
                {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [
                    /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                    !isMobile && "Export Excel"
                  ]
                }
              )
            ] })
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: statusOptions,
                      selectedValue: selectStatus,
                      onSelect: handleStatusChange,
                      placeholder: "Payment Status",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  userRole === "superadmin" && /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: [
                        { value: "", label: "All Branches" },
                        { value: "BRANCH-03", label: "BRANCH-03" },
                        { value: "BRCH_02", label: "BRCH_02" }
                      ],
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]"
                    }
                  ),
                  /* @__PURE__ */ jsx("div", { className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`, children: /* @__PURE__ */ jsx(
                    SearchInput,
                    {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search payments...",
                      className: "w-full"
                    }
                  ) })
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "payments",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showPaymentModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowPaymentModal(false),
        title: `Record Payment for ${((_a = selectedInvoice == null ? void 0 : selectedInvoice.invoice) == null ? void 0 : _a.invoice_no) || ""}`,
        children: /* @__PURE__ */ jsx("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: /* @__PURE__ */ jsxs("form", { onSubmit: handlePaymentSubmit, children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
            selectedInvoice && /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Total Amount" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: formatCurrency(selectedInvoice.invoice.total_amount) })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Balance Amount" }),
                /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 mt-1", children: formatCurrency(selectedInvoice.invoice.balance_amount) })
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Paid Amount" }),
                /* @__PURE__ */ jsx(
                  "input",
                  {
                    name: "paid_amount",
                    value: paymentForm.paid_amount,
                    onChange: handlePaymentFormChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    type: "number",
                    placeholder: "Amount",
                    required: true
                  }
                )
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
                /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Payment Mode" }),
                /* @__PURE__ */ jsx(
                  "select",
                  {
                    name: "payment_mode",
                    value: paymentForm.payment_mode,
                    onChange: handlePaymentFormChange,
                    className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                    required: true,
                    children: paymentModeOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
                  }
                )
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
              /* @__PURE__ */ jsx("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: "Notes" }),
              /* @__PURE__ */ jsx(
                "textarea",
                {
                  name: "notes",
                  value: paymentForm.notes,
                  onChange: handlePaymentFormChange,
                  className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[80px]",
                  placeholder: "Payment notes"
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
                onClick: () => setShowPaymentModal(false),
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "submit",
                className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
                children: "Record Payment"
              }
            )
          ] })
        ] }) })
      }
    )
  ] });
};
const AccountsProject = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteData, setDeleteData] = useState(null);
  const [sortOrder, setSortOrder] = useState("");
  const [selectedPriority, setSelectedPriority] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const [activeTab, setActiveTab] = useState("projectlist");
  const [inActiveData, setInActiveData] = useState({
    delete_type: "",
    status: ""
  });
  const {
    fetchProject
  } = useProjectStore();
  const branchcode = useAuthStore((state) => state.branchcode);
  const tabs = [{
    id: "projectlist",
    label: "Project List"
  }, {
    id: "payrequest",
    label: "Invoice List"
  }];
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const managerOptions = [{
    value: "",
    label: "All Priority"
  }, {
    value: "minor",
    label: "Minor Projects"
  }, {
    value: "major",
    label: "Major Project"
  }, {
    value: "critical",
    label: "Critical Project"
  }, {
    value: "blocker",
    label: "Blocker Project"
  }];
  const statusOptions = [{
    value: "",
    label: "All Projects"
  }, {
    value: "active",
    label: "Active Projects"
  }, {
    value: "draft",
    label: "Draft Project"
  }, {
    value: "planning",
    label: "planning Project"
  }, {
    value: "paused",
    label: "paused Project"
  }, {
    value: "completed",
    label: "completed Project"
  }, {
    value: "revised",
    label: "revised Project"
  }, {
    value: "client_review",
    label: "client_review Project"
  }, {
    value: "drop",
    label: "drop Project"
  }];
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchProject(token, branchcode);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, priority = selectedPriority, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/project/overview/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (priority) url += `&priority=${priority}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching t list", error2);
      setError("Failed to fetch project");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedPriority, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Project added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (branch2) => {
    setSelectedBranch(branch2);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (project2) => {
    setShowDeleteModal(true);
    setDeleteData(project2);
  };
  const handleDeleteSubmit = async () => {
    const deletedData = {
      data: {
        branchcode: deleteData.branchcode,
        project_code: deleteData.project_code,
        delete_type: inActiveData.delete_type,
        status: inActiveData.status
      }
    };
    console.log("projectdeleteddataa", deletedData);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/project/overview/delete`, {
        data: deletedData,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("deleteemployeeresponse", response);
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Project Deleted Successfully!");
        getBranch();
        setLoading(false);
        setInActiveData({
          delete_type: "",
          status: ""
        });
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
      setLoading(false);
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleStatusChange = (value) => {
    setSelectStatus(value);
    setCurrentPage(1);
  };
  const handleManagerChange = (value) => {
    setSelectedPriority(value);
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setInActiveData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Project_Code"
  }, {
    data: "Project Name"
  }, {
    data: "Client_Code"
  }, {
    data: "Payment Status"
  }, {
    data: "Duration_Days"
  }, {
    data: "Project Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((project2, index) => ({
      id: project2.id,
      data: [{
        data: index + 1
      }, {
        data: project2.branchcode
      }, {
        data: project2.project_code
      }, {
        data: project2.title
      }, {
        data: project2.client_code
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.paystatus === "request" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${project2.paystatus === "request" ? "bg-green-800" : "bg-red-700"}`
          }), project2.paystatus]
        })
      }, {
        data: project2.duration_days
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${project2.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), project2.status.charAt(0).toUpperCase() + project2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex  justify-center gap-2",
          children: [/* @__PURE__ */ jsx(Link$1, {
            to: `/project/${project2.project_code}`,
            children: /* @__PURE__ */ jsx("button", {
              className: " px-4 py-2 dark:text-blue-600 text-blue-700 rounded-sm",
              children: /* @__PURE__ */ jsx(Eye, {
                className: "inline",
                size: 20
              })
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleEditBranch(project2),
            title: "Pay Request",
            children: /* @__PURE__ */ jsx(FaMoneyBill, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(project2),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "ProjectList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsx("div", {
        className: "border-b border-gray-200 dark:border-gray-700",
        children: /* @__PURE__ */ jsx("nav", {
          className: "flex -mb-px",
          children: tabs.map((tab) => /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
            children: tab.label
          }, tab.id))
        })
      }), activeTab === "projectlist" && /* @__PURE__ */ jsxs("div", {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "p-4 flex-grow",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [/* @__PURE__ */ jsx("h2", {
              className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
              children: "Project List"
            }), isMobile && /* @__PURE__ */ jsx("button", {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            })]
          }), /* @__PURE__ */ jsx(Toaster, {
            position: toastposition,
            reverseOrder: false
          }), /* @__PURE__ */ jsx("div", {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs("div", {
              className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: pageSizeOptions,
                selectedValue: pageSize,
                onSelect: handlePageSizeChange,
                placeholder: "Items per page",
                className: "w-full md:w-[150px]"
              }), /* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                children: [/* @__PURE__ */ jsx(FileDown, {
                  className: "mr-1"
                }), !isMobile && "Export Excel"]
              }), /* @__PURE__ */ jsxs("button", {
                onClick: () => setShowCreateModal(true),
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                children: [!isMobile && "New Project", " +"]
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs("div", {
              className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
              children: [/* @__PURE__ */ jsx(Dropdown, {
                options: statusOptions,
                selectedValue: selectStatus,
                onSelect: handleStatusChange,
                placeholder: "Branch Status",
                className: "w-full md:w-[200px]"
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: branchCodeOptions,
                selectedValue: selectedBranchCode,
                onSelect: handleBranchCodeChange,
                placeholder: "Branch Code",
                className: "w-full md:w-[200px]",
                isLoading: isStoreLoading
              }), /* @__PURE__ */ jsx(Dropdown, {
                options: managerOptions,
                selectedValue: selectedPriority,
                onSelect: handleManagerChange,
                placeholder: "Priority",
                className: "w-full md:w-[200px]",
                isLoading: isStoreLoading
              }), /* @__PURE__ */ jsxs("button", {
                onClick: toggleSortOrder,
                className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                children: ["Sort ", sortOrder === "desc" ? "" : ""]
              }), /* @__PURE__ */ jsx("div", {
                className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
                children: /* @__PURE__ */ jsx(SearchInput, {
                  value: searchTerm,
                  onChange: handleSearch,
                  placeholder: "Search branches...",
                  className: "w-full"
                })
              })]
            })
          }), loading && /* @__PURE__ */ jsx("div", {
            className: "text-center py-4",
            children: "Loading..."
          }), error && /* @__PURE__ */ jsx("div", {
            className: "text-red-500 text-center py-4",
            children: error
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead,
              tbody,
              responsive: true,
              className: "min-w-full"
            })
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
          children: /* @__PURE__ */ jsx(CustomPagination, {
            total: totalItem,
            currentPage,
            defaultPageSize: pageSize,
            onChange: handlePageChange,
            paginationLabel: "branches",
            isScroll: true
          })
        })]
      }), activeTab === "payrequest" && /* @__PURE__ */ jsx(InvoiceList, {})]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Project",
      children: /* @__PURE__ */ jsx(AddNewProject, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Project",
      children: /* @__PURE__ */ jsx(AddPayRequest, {
        project: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Branch Meeting",
      children: /* @__PURE__ */ jsx(ProjectMeetingForm, {
        project: selectedBranch,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Project",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx(Network, {
              className: "inline mr-2"
            }), " Delete Project"]
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-500 text-sm font-medium text-center",
            children: "Are you sure you want to delete this Project?"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(ClipboardType, {
                  className: "inline mr-1",
                  size: 14
                }), " Type"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "delete_type",
                value: inActiveData.delete_type,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "Select Type"
                }), /* @__PURE__ */ jsx("option", {
                  value: "temp",
                  children: "Temporary"
                }), /* @__PURE__ */ jsx("option", {
                  value: "permanent",
                  children: "Permanent"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
              children: [/* @__PURE__ */ jsxs("p", {
                className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
                children: [/* @__PURE__ */ jsx(Tag, {
                  className: "inline mr-1",
                  size: 14
                }), " Status"]
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                value: inActiveData.status,
                onChange: handleChange,
                className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
                required: true,
                children: [/* @__PURE__ */ jsx("option", {
                  value: "draft",
                  children: "Draft"
                }), /* @__PURE__ */ jsx("option", {
                  value: "planning",
                  children: "Planning"
                }), /* @__PURE__ */ jsx("option", {
                  value: "active",
                  children: "Active"
                }), /* @__PURE__ */ jsx("option", {
                  value: "paused",
                  children: "Paused"
                }), /* @__PURE__ */ jsx("option", {
                  value: "completed",
                  children: "Completed"
                }), /* @__PURE__ */ jsx("option", {
                  value: "revised",
                  children: "Revised"
                }), /* @__PURE__ */ jsx("option", {
                  value: "client_review",
                  children: "Client_review"
                }), /* @__PURE__ */ jsx("option", {
                  value: "drop",
                  children: "Drop"
                })]
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? "Processing..." : "Confirm"
          })]
        })]
      })
    })]
  });
};
const AccountsProject$1 = withComponentProps(AccountsProject);
const route29 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: AccountsProject$1
}, Symbol.toStringTag, { value: "Module" }));
const useBranchStore = create(
  persist(
    (set, get) => ({
      branchAllData: [],
      dropdownBranch: [],
      // Action to set branch data
      setBranchData: (data) => {
        console.log("dattaaa", data);
        set({
          branchAllData: data,
          dropdownBranch: data.map(({ id, name }) => ({ id, name }))
        });
      },
      getBranchAllData: () => get().branchAllData,
      getDropdownBranch: () => get().dropdownBranch,
      getBranchById: (id) => {
        return get().branchAllData.find((branch2) => branch2.id === id);
      },
      // Clear all branch data
      clearBranchData: () => {
        set({
          branchAllData: [],
          dropdownBranch: [],
          branchListData: []
        });
      }
    }),
    {
      name: "branch-storage",
      getStorage: () => localStorage
      // unique name for localStorage key
      // Optional: You can whitelist or blacklist specific keys
      // partialize: (state) => ({ branchAllData: state.branchAllData }),
    }
  )
);
const ReportAnalysis = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const [activeTab, setActiveTab] = useState("leavereq");
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore();
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a;
    setLoading(true);
    try {
      let url = `${BASE_URL}/branch/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setSheetData(response == null ? void 0 : response.data);
      setTotalItem(((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.length) || 0);
      setData((response == null ? void 0 : response.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleDeleteBranch2 = (id) => {
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleManagerChange = (value) => {
    setSelectedManager(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const LeaveData = [{
    id: "1",
    branch: "Sick Leave",
    name: "Bharathi",
    position: "Team Lead",
    LeaveDays: 3,
    FromDate: "23-05-2025",
    ToDate: "26-05-2025",
    status: "apporved",
    date: "23-05-2025"
  }];
  const thead = () => [{
    data: "id"
  }, {
    data: "Employee Name"
  }, {
    data: "Leave Type"
  }, {
    data: "Leave Days"
  }, {
    data: "From Date"
  }, {
    data: "To Date"
  }, {
    data: "Status"
  }, {
    data: "Actions",
    className: "text-center"
  }];
  const tbody = () => {
    if (!LeaveData) return [];
    return LeaveData.map((branch2) => ({
      id: branch2.id,
      data: [{
        data: branch2.id
      }, {
        data: branch2.name
      }, {
        data: branch2.branch
      }, {
        data: branch2.LeaveDays
      }, {
        data: branch2.FromDate
      }, {
        data: branch2.ToDate
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${branch2.status === "apporved" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${branch2.status === "apporved" ? "bg-green-800" : "bg-red-700"}`
          }), branch2.status.charAt(0).toUpperCase() + branch2.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-wrap justify-center gap-2",
          children: [/* @__PURE__ */ jsx("button", {
            className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => setShowEditModal(true),
            title: "Edit",
            children: /* @__PURE__ */ jsx(SquarePen, {
              size: 18
            })
          }), /* @__PURE__ */ jsx("button", {
            className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
            onClick: () => handleDeleteBranch2(branch2.id),
            title: "Delete",
            children: /* @__PURE__ */ jsx(Trash2, {
              size: 18
            })
          })]
        }),
        className: "action-cell"
      }]
    }));
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [activeTab === "leavereq" && /* @__PURE__ */ jsx(Fragment, {
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col min-h-screen ",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "p-4 flex-grow",
            children: [/* @__PURE__ */ jsx("div", {
              className: "flex justify-between items-center mt-4",
              children: /* @__PURE__ */ jsx("h2", {
                className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
                children: "Leave Request"
              })
            }), /* @__PURE__ */ jsx(Toaster, {
              position: "top-center",
              reverseOrder: false
            }), /* @__PURE__ */ jsx("div", {
              className: `flex items-end justify-end gap-4 mt-[-30px]`,
              children: /* @__PURE__ */ jsxs("div", {
                className: `flex  flex-row gap-4`,
                children: [/* @__PURE__ */ jsx(Dropdown, {
                  options: pageSizeOptions,
                  selectedValue: pageSize,
                  onSelect: handlePageSizeChange,
                  placeholder: "Items per page",
                  className: "w-full md:w-[150px]"
                }), /* @__PURE__ */ jsxs("button", {
                  onClick: handleOnExport,
                  className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                  children: [/* @__PURE__ */ jsx(FileDown, {
                    className: "mr-1"
                  }), "Export Excel"]
                })]
              })
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
              children: /* @__PURE__ */ jsxs("div", {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [/* @__PURE__ */ jsx(Dropdown, {
                  options: managerOptions,
                  selectedValue: selectedManager,
                  onSelect: handleManagerChange,
                  placeholder: "Manager",
                  className: "w-full md:w-[200px]",
                  isLoading: isStoreLoading
                }), /* @__PURE__ */ jsx("div", {
                  className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
                  children: /* @__PURE__ */ jsx(SearchInput, {
                    value: searchTerm,
                    onChange: handleSearch,
                    placeholder: "Search branches...",
                    className: "w-full"
                  })
                })]
              })
            }), loading && /* @__PURE__ */ jsx("div", {
              className: "text-center py-4",
              children: "Loading..."
            }), error && /* @__PURE__ */ jsx("div", {
              className: "text-red-500 text-center py-4",
              children: error
            }), /* @__PURE__ */ jsx("div", {
              className: "overflow-x-auto",
              children: /* @__PURE__ */ jsx(DataTable, {
                thead,
                tbody,
                responsive: true,
                className: "min-w-full"
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
            children: /* @__PURE__ */ jsx(CustomPagination, {
              total: totalItem,
              currentPage,
              defaultPageSize: pageSize,
              onChange: handlePageChange,
              paginationLabel: "branches",
              isScroll: true
            })
          })]
        })
      }), activeTab === "leavetype" && /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsx(LeaveTypes, {})
      }), activeTab === "report" && /* @__PURE__ */ jsx("div", {
        children: "termination Content Goes Here"
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Update Leave Request",
      children: /* @__PURE__ */ jsx(EditLeaveRequestForm, {
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 justify-center items-center",
        children: [/* @__PURE__ */ jsx("p", {
          className: "text-gray-500 text-lg font-bold text-center",
          children: "Are you sure you want to delete this Leave Details?"
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex gap-4 flex-wrap justify-center",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
            disabled: loading,
            onClick: () => setShowDeleteModal(false),
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "submit",
            className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
          })]
        })]
      })
    })]
  });
};
const ReportAnalysis$1 = withComponentProps(ReportAnalysis);
const route30 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ReportAnalysis$1
}, Symbol.toStringTag, { value: "Module" }));
function MilestoneRemindar() {
  const [overdueMilestones, setOverdueMilestones] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [selectedDate, setSelectedDate] = useState(/* @__PURE__ */ new Date());
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    fetchOverdueMilestones();
  }, [selectedDate]);
  const fetchOverdueMilestones = async () => {
    setLoading(true);
    setError("");
    try {
      const formattedDate = selectedDate.toISOString().split("T")[0];
      const response = await axios.get(
        `${BASE_URL}/project/milestone/read?overdue=${formattedDate}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data.message === "View Project Milestone Info Success") {
        setOverdueMilestones(response.data.data);
      } else {
        setError("Failed to fetch overdue milestones");
      }
    } catch (err) {
      setError("Error fetching overdue milestones");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const getStatusColor = (status, milestoneType) => {
    if (status === "verified") {
      return "amber";
    } else if (milestoneType === "initial") {
      return "blue";
    } else {
      return "red";
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "p-10", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-10", children: [
      /* @__PURE__ */ jsx("div", { className: "text-gray-500 text-xl font-bold", children: "Milestone Reminder" }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Calendar, { className: "text-gray-500", size: 20 }),
        /* @__PURE__ */ jsx(
          DatePicker,
          {
            selected: selectedDate,
            onChange: (date) => setSelectedDate(date),
            dateFormat: "yyyy-MM-dd",
            className: "border rounded p-2"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading overdue milestones..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "w-full flex flex-col justify-evenly gap-8", children: [
      overdueMilestones.length === 0 && !loading && /* @__PURE__ */ jsxs("div", { className: "text-center py-4 text-gray-500", children: [
        "No overdue milestones found for ",
        selectedDate.toDateString()
      ] }),
      overdueMilestones.map((milestone) => {
        const statusColor = getStatusColor(milestone.status, milestone.milestone_type);
        const bgColor = statusColor === "amber" ? "bg-amber-500" : statusColor === "blue" ? "bg-blue-700" : "bg-red-700";
        const textColor = statusColor === "amber" ? "text-amber-500" : statusColor === "blue" ? "text-blue-700" : "text-red-700";
        const hoverBgColor = statusColor === "amber" ? "hover:bg-amber-500/50" : statusColor === "blue" ? "hover:bg-blue-700/50" : "hover:bg-red-700/50";
        const hoverTextColor = statusColor === "amber" ? "hover:text-amber-800" : statusColor === "blue" ? "hover:text-blue-800" : "hover:text-red-800";
        return /* @__PURE__ */ jsxs("div", { className: "bg-white w-full h-[100%] flex rounded-sm shadow-lg", children: [
          /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("div", { className: `${bgColor} rounded-r-lg w-4 h-[195px]` }) }),
          /* @__PURE__ */ jsxs("div", { className: "ms-4 w-full p-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "md:flex gap-5", children: [
              /* @__PURE__ */ jsx(User2, { className: "font-light text-gray-600", size: 25 }),
              /* @__PURE__ */ jsxs("h1", { className: "text-xl font-medium text-gray-600", children: [
                milestone.milestone_code,
                " - ",
                milestone.miles_title
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "md:flex md:w-full justify-between mt-2", children: [
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                  "Type: ",
                  milestone.milestone_type,
                  " | Status: ",
                  milestone.status
                ] }),
                /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                  "Start: ",
                  formatDate2(milestone.start_date),
                  " | Due: ",
                  formatDate2(milestone.end_date),
                  " | Payment: ",
                  milestone.paystatus
                ] }),
                /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                  "Handler: ",
                  milestone.handler_by
                ] })
              ] }),
              /* @__PURE__ */ jsx("div", { className: "md:flex flex-col", children: /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsxs("p", { className: `w-[120px] h-[30px] ${bgColor}/25 ${textColor} rounded-3xl`, children: [
                /* @__PURE__ */ jsx(Dot, { className: "inline" }),
                " Overdue"
              ] }) }) })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "md:flex justify-between mt-4", children: [
              /* @__PURE__ */ jsx("div", { className: "flex gap-8", children: /* @__PURE__ */ jsx(Link, { to: `/milestone/${milestone.milestone_code}`, children: /* @__PURE__ */ jsxs("button", { className: `${bgColor}/25 px-3 py-2 rounded-sm ${textColor} ${hoverBgColor} ${hoverTextColor} flex gap-1`, children: [
                /* @__PURE__ */ jsx(Eye, { size: 15, className: "mt-1" }),
                "View Detail"
              ] }) }) }),
              /* @__PURE__ */ jsx("div", {})
            ] })
          ] })
        ] }, milestone.milestone_code);
      })
    ] })
  ] });
}
function TaskRemindar() {
  const [overdueTasks, setOverdueTasks] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [selectedDate, setSelectedDate] = useState(/* @__PURE__ */ new Date());
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    fetchOverdueTasks();
  }, [selectedDate]);
  const fetchOverdueTasks = async () => {
    setLoading(true);
    setError("");
    try {
      const formattedDate = selectedDate.toISOString().split("T")[0];
      const response = await axios.get(
        `${BASE_URL}/project/task/read?overdue=${formattedDate}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data.message === "View Project Task Info Success") {
        setOverdueTasks(response.data.data);
      } else {
        setError("Failed to fetch overdue tasks");
      }
    } catch (err) {
      setError("Error fetching overdue tasks");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const getStatusColor = (status) => {
    switch (status) {
      case "verified-closed":
      case "archived":
        return "green";
      case "inprocess":
        return "blue";
      case "rework":
      case "drop":
        return "red";
      case "draft":
      default:
        return "gray";
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "p-10", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-10", children: [
      /* @__PURE__ */ jsx("div", { className: "text-gray-500 text-xl font-bold", children: "Task Reminder" }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Calendar, { className: "text-gray-500", size: 20 }),
        /* @__PURE__ */ jsx(
          DatePicker,
          {
            selected: selectedDate,
            onChange: (date) => setSelectedDate(date),
            dateFormat: "yyyy-MM-dd",
            className: "border rounded p-2"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading overdue tasks..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "w-full flex flex-col justify-evenly gap-8", children: [
      overdueTasks.length === 0 && !loading && /* @__PURE__ */ jsxs("div", { className: "text-center py-4 text-gray-500", children: [
        "No overdue tasks found for ",
        selectedDate.toDateString()
      ] }),
      overdueTasks.map((task) => {
        const statusColor = getStatusColor(task.status);
        const bgColor = statusColor === "green" ? "bg-green-500" : statusColor === "blue" ? "bg-blue-700" : statusColor === "red" ? "bg-red-700" : "bg-gray-500";
        const textColor = statusColor === "green" ? "text-green-500" : statusColor === "blue" ? "text-blue-700" : statusColor === "red" ? "text-red-700" : "text-gray-500";
        const hoverBgColor = statusColor === "green" ? "hover:bg-green-500/50" : statusColor === "blue" ? "hover:bg-blue-700/50" : statusColor === "red" ? "hover:bg-red-700/50" : "hover:bg-gray-500/50";
        const hoverTextColor = statusColor === "green" ? "hover:text-green-800" : statusColor === "blue" ? "hover:text-blue-800" : statusColor === "red" ? "hover:text-red-800" : "hover:text-gray-800";
        return /* @__PURE__ */ jsxs(
          "div",
          {
            className: "bg-white w-full h-[100%] flex rounded-sm shadow-lg",
            children: [
              /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("div", { className: `${bgColor} rounded-r-lg w-4 h-[220px]` }) }),
              /* @__PURE__ */ jsxs("div", { className: "ms-4 w-full p-4", children: [
                /* @__PURE__ */ jsxs("div", { className: "md:flex gap-5", children: [
                  /* @__PURE__ */ jsx(User2, { className: "font-light text-gray-600", size: 25 }),
                  /* @__PURE__ */ jsxs("h1", { className: "text-xl font-medium text-gray-600", children: [
                    "Task ID: ",
                    task.id,
                    " - ",
                    task.task_title
                  ] })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "md:flex md:w-full justify-between mt-2", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                      "Priority: ",
                      task.task_priority,
                      " | Status: ",
                      task.status
                    ] }),
                    /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                      "Start: ",
                      formatDate2(task.start_date),
                      " | Due:",
                      " ",
                      formatDate2(task.end_date)
                    ] }),
                    /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                      "Project: ",
                      task.projecttitle,
                      " | Milestone:",
                      " ",
                      task.milestonetitle
                    ] }),
                    /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                      "Handler: ",
                      task.handlername,
                      " | Participants:",
                      " ",
                      task.participantdetails.map((p) => p.name).join(", ")
                    ] })
                  ] }),
                  /* @__PURE__ */ jsx("div", { className: "md:flex flex-col", children: /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsxs(
                    "p",
                    {
                      className: `w-[120px] h-[30px] ${bgColor}/25 ${textColor} rounded-3xl`,
                      children: [
                        /* @__PURE__ */ jsx(Dot, { className: "inline" }),
                        " Overdue"
                      ]
                    }
                  ) }) })
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "md:flex justify-between mt-4", children: [
                  /* @__PURE__ */ jsx("div", { className: "flex gap-8", children: /* @__PURE__ */ jsx(Link, { to: `/task_view/${task.id}`, children: /* @__PURE__ */ jsxs(
                    "button",
                    {
                      className: `${bgColor}/25 px-3 py-2 rounded-sm ${textColor} ${hoverBgColor} ${hoverTextColor} flex gap-1`,
                      children: [
                        /* @__PURE__ */ jsx(Eye, { size: 15, className: "mt-1" }),
                        "View Detail"
                      ]
                    }
                  ) }) }),
                  /* @__PURE__ */ jsx("div", {})
                ] })
              ] })
            ]
          },
          task.id
        );
      })
    ] })
  ] });
}
function PaymentRemaindar() {
  const [overduePayments, setOverduePayments] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [selectedDate, setSelectedDate] = useState(/* @__PURE__ */ new Date());
  const token = useAuthStore((state) => state.accessToken);
  useEffect(() => {
    fetchOverduePayments();
  }, [selectedDate]);
  const fetchOverduePayments = async () => {
    setLoading(true);
    setError("");
    try {
      const formattedDate = selectedDate.toISOString().split("T")[0];
      const response = await axios.get(
        `${BASE_URL}/project/invoice/read?overdue=${formattedDate}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.data.message === "Get Invoices with Milestones Success") {
        setOverduePayments(response.data.data);
      } else {
        setError("Failed to fetch overdue payments");
      }
    } catch (err) {
      setError("Error fetching overdue payments");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const formatCurrency = (amount) => {
    return new Intl.NumberFormat("en-IN", {
      style: "currency",
      currency: "INR"
    }).format(parseFloat(amount));
  };
  return /* @__PURE__ */ jsxs("div", { className: "p-10", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-10", children: [
      /* @__PURE__ */ jsx("div", { className: "text-gray-500 text-xl font-bold", children: "Payment Reminder" }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Calendar, { className: "text-gray-500", size: 20 }),
        /* @__PURE__ */ jsx(
          DatePicker,
          {
            selected: selectedDate,
            onChange: (date) => setSelectedDate(date),
            dateFormat: "yyyy-MM-dd",
            className: "border rounded p-2"
          }
        )
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading overdue payments..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    /* @__PURE__ */ jsxs("div", { className: "w-full flex flex-col justify-evenly gap-8", children: [
      overduePayments.length === 0 && !loading && /* @__PURE__ */ jsxs("div", { className: "text-center py-4 text-gray-500", children: [
        "No overdue payments found for ",
        selectedDate.toDateString()
      ] }),
      overduePayments.map((payment, index) => /* @__PURE__ */ jsxs("div", { className: "bg-white w-full h-[100%] flex rounded-sm shadow-lg", children: [
        /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("div", { className: "bg-red-700 rounded-r-lg w-4 h-[240px]" }) }),
        /* @__PURE__ */ jsxs("div", { className: "ms-4 w-full p-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "md:flex gap-5", children: [
            /* @__PURE__ */ jsx(CreditCard, { className: "font-light text-gray-600", size: 25 }),
            /* @__PURE__ */ jsxs("h1", { className: "text-xl font-medium text-gray-600", children: [
              "Invoice: ",
              payment.invoice.invoice_no,
              " - ",
              payment.invoice.client_name
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "md:flex md:w-full justify-between mt-2", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                "Project: ",
                payment.invoice.project_title,
                " | Status: ",
                payment.invoice.status
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                "Issued: ",
                formatDate2(payment.invoice.invoice_date),
                " | Due: ",
                formatDate2(payment.invoice.due_date)
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                "Total: ",
                formatCurrency(payment.invoice.total_amount),
                " | Paid: ",
                formatCurrency(payment.invoice.paid_amount),
                " | Balance: ",
                formatCurrency(payment.invoice.balance_amount)
              ] }),
              /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                "Company: ",
                payment.invoice.company_name
              ] }),
              payment.milestone_requests.map((milestone, mIndex) => /* @__PURE__ */ jsxs("p", { className: "text-gray-600", children: [
                "Milestone: ",
                milestone.miles_title,
                " - ",
                formatCurrency(milestone.milestone_amount)
              ] }, mIndex))
            ] }),
            /* @__PURE__ */ jsx("div", { className: "md:flex flex-col", children: /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsxs("p", { className: "w-[120px] h-[30px] bg-red-700/25 text-red-700 rounded-3xl", children: [
              /* @__PURE__ */ jsx(Dot, { className: "inline" }),
              " Overdue"
            ] }) }) })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "md:flex justify-between mt-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex gap-8", children: [
              /* @__PURE__ */ jsx(Link, { to: `/invoice/${payment.invoice.invoice_id}`, children: /* @__PURE__ */ jsxs("button", { className: "bg-red-700/25 px-3 py-2 rounded-sm text-red-700 hover:bg-red-700/50 hover:text-red-800 flex gap-1", children: [
                /* @__PURE__ */ jsx(Eye, { size: 15, className: "mt-1" }),
                "View Detail"
              ] }) }),
              /* @__PURE__ */ jsxs("button", { className: "bg-red-700 px-3 py-2 text-gray-100 hover:bg-red-800 flex gap-1 rounded-sm", children: [
                /* @__PURE__ */ jsx(DollarSign, { size: 15, className: "mt-1" }),
                "Record Payment"
              ] })
            ] }),
            /* @__PURE__ */ jsx("div", {})
          ] })
        ] })
      ] }, `${payment.invoice.invoice_id}-${index}`))
    ] })
  ] });
}
function Notification() {
  const [activeTab, setActiveTab] = useState("projectover");
  const [overdueProjects, setOverdueProjects] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");
  const [selectedDate, setSelectedDate] = useState(/* @__PURE__ */ new Date());
  const token = useAuthStore((state) => state.accessToken);
  const tabs = [{
    id: "projectover",
    label: "Project"
  }, {
    id: "milestone",
    label: "Milestone"
  }, {
    id: "task",
    label: "Task"
  }, {
    id: "payment",
    label: "Payment"
  }];
  useEffect(() => {
    fetchOverdueProjects();
  }, [selectedDate]);
  const fetchOverdueProjects = async () => {
    setLoading(true);
    setError("");
    try {
      const formattedDate = selectedDate.toISOString().split("T")[0];
      const response = await axios.get(`${BASE_URL}/project/overview/read?overdue=${formattedDate}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data.message === "View Project Overview Info Success") {
        setOverdueProjects(response.data.data);
      } else {
        setError("Failed to fetch overdue projects");
      }
    } catch (err) {
      setError("Error fetching overdue projects");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  };
  const getTypeColor = (priority) => {
    return priority === "minor" ? "blue" : "red";
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx("div", {
      className: "dark:border-gray-700 mt-10 mb-10",
      children: /* @__PURE__ */ jsx("nav", {
        className: "flex justify-evenly -mb-px",
        children: tabs.map((tab, index) => /* @__PURE__ */ jsxs(Fragment, {
          children: [index > 0 && /* @__PURE__ */ jsx("span", {
            className: "bg-gray-300 dark:bg-red-700 w-[50px] h-[2px] mt-5 items-center"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `font-medium text-sm ${activeTab === tab.id ? "text-gray-200 dark:bg-gray-800 dark:text-red-800 hover:border-gray-300 bg-red-700 w-[120px] h-[40px] rounded-sm" : "border-transparent text-gray-700 hover:text-red-700 dark:bg-gray-600 dark:text-gray-100 hover:border-gray-300 bg-gray-200 w-[120px] h-[40px] rounded-sm"}`,
            children: tab.label
          }, tab.id)]
        }))
      })
    }), activeTab === "projectover" && /* @__PURE__ */ jsxs("div", {
      className: "p-10",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between items-center mb-10",
        children: [/* @__PURE__ */ jsx("div", {
          className: "text-gray-500 text-xl font-bold",
          children: "Project Reminder"
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex items-center gap-2",
          children: [/* @__PURE__ */ jsx(Calendar, {
            className: "text-gray-500",
            size: 20
          }), /* @__PURE__ */ jsx(DatePicker, {
            selected: selectedDate,
            onChange: (date) => setSelectedDate(date),
            dateFormat: "yyyy-MM-dd",
            className: "border rounded p-2"
          })]
        })]
      }), loading && /* @__PURE__ */ jsx("div", {
        className: "text-center py-4",
        children: "Loading overdue projects..."
      }), error && /* @__PURE__ */ jsx("div", {
        className: "text-red-500 text-center py-4",
        children: error
      }), /* @__PURE__ */ jsxs("div", {
        className: "w-full flex flex-col justify-evenly gap-8",
        children: [overdueProjects.length === 0 && !loading && /* @__PURE__ */ jsxs("div", {
          className: "text-center py-4 text-gray-500",
          children: ["No overdue projects found for ", selectedDate.toDateString()]
        }), overdueProjects.map((project2) => {
          const typeColor = getTypeColor(project2.type);
          const bgColor = typeColor === "blue" ? "bg-blue-700" : "bg-red-700";
          const textColor = typeColor === "blue" ? "text-blue-700" : "text-red-700";
          const hoverBgColor = typeColor === "blue" ? "hover:bg-blue-700/50" : "hover:bg-red-700/50";
          const hoverTextColor = typeColor === "blue" ? "hover:text-blue-800" : "hover:text-red-800";
          return /* @__PURE__ */ jsxs("div", {
            className: "bg-white w-full h-[100%] flex rounded-sm shadow-lg",
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsx("div", {
                className: `${bgColor} rounded-r-lg w-4 h-[195px]`
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "ms-4 w-full p-4",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "md:flex gap-5",
                children: [/* @__PURE__ */ jsx(User2, {
                  className: "font-light text-gray-600",
                  size: 25
                }), /* @__PURE__ */ jsxs("h1", {
                  className: "text-xl font-medium text-gray-600",
                  children: [project2.project_code, " - ", project2.title]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "md:flex md:w-full justify-between mt-2",
                children: [/* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsxs("p", {
                    className: "text-gray-600",
                    children: ["Type: ", project2.type, " | Priority: ", project2.priority]
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-gray-600",
                    children: ["Start: ", formatDate2(project2.start_date), " | Due: ", formatDate2(project2.end_date), " | Status: ", project2.status]
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-gray-600",
                    children: ["Handler: ", project2.handler_by]
                  })]
                }), /* @__PURE__ */ jsx("div", {
                  className: "md:flex flex-col",
                  children: /* @__PURE__ */ jsx("div", {
                    children: /* @__PURE__ */ jsxs("p", {
                      className: `w-[120px] h-[30px] ${bgColor}/25 ${textColor} rounded-3xl`,
                      children: [/* @__PURE__ */ jsx(Dot, {
                        className: "inline"
                      }), " Overdue"]
                    })
                  })
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "md:flex justify-between mt-4",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "flex gap-8",
                  children: /* @__PURE__ */ jsx(Link$1, {
                    to: `/project/${project2.project_code}`,
                    children: /* @__PURE__ */ jsxs("button", {
                      className: `${bgColor}/25 px-3 py-2 rounded-sm ${textColor} ${hoverBgColor} ${hoverTextColor} flex gap-1`,
                      children: [/* @__PURE__ */ jsx(Eye, {
                        size: 15,
                        className: "mt-1"
                      }), "View Detail"]
                    })
                  })
                }), /* @__PURE__ */ jsx("div", {})]
              })]
            })]
          }, project2.project_code);
        })]
      })]
    }), activeTab === "milestone" && /* @__PURE__ */ jsx(MilestoneRemindar, {}), activeTab === "task" && /* @__PURE__ */ jsx(TaskRemindar, {}), activeTab === "payment" && /* @__PURE__ */ jsx(PaymentRemaindar, {})]
  });
}
const Notification$1 = withComponentProps(Notification);
const route31 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Notification$1
}, Symbol.toStringTag, { value: "Module" }));
const localizer = momentLocalizer(moment);
const MyCalendar = () => {
  const token = useAuthStore((state) => state.accessToken);
  const [events, setEvents] = useState([]);
  const [loading, setLoading] = useState(true);
  const [currentDate, setCurrentDate] = useState(/* @__PURE__ */ new Date());
  useEffect(() => {
    const fetchData = async () => {
      var _a, _b;
      try {
        setLoading(true);
        const [meetingsRes, followupsRes] = await Promise.all([fetch("http://localhost:3000/api/doc_meet/read?comm_type=meeting", {
          headers: {
            Authorization: `Bearer ${token}`
          }
        }), fetch("http://localhost:3000/api/campaign/followup/read", {
          headers: {
            Authorization: `Bearer ${token}`
          }
        })]);
        const meetingsData = await meetingsRes.json();
        const followupsData = await followupsRes.json();
        const formattedMeetings = ((_a = meetingsData == null ? void 0 : meetingsData.data) == null ? void 0 : _a.map((item) => ({
          id: item.meet_id,
          title: item.title,
          start: new Date(item.start_date_time),
          end: new Date(item.end_date_time),
          type: "meeting",
          priority: item.category === "custom" ? "High" : "Normal",
          notes: item.notes,
          link: item.meet_link
        }))) || [];
        const formattedFollowups = ((_b = followupsData == null ? void 0 : followupsData.data) == null ? void 0 : _b.map((item) => ({
          id: item.id,
          title: `Follow-up: Lead #${item.lead_id}`,
          start: new Date(item.next_date),
          end: new Date(item.next_date),
          allDay: true,
          type: "followup",
          priority: "Normal",
          notes: item.notes || "Lead follow-up",
          campaign: item.campaign_code
        }))) || [];
        setEvents([...formattedMeetings, ...formattedFollowups]);
      } catch (err) {
        console.error("Failed to fetch data:", err);
      } finally {
        setLoading(false);
      }
    };
    if (token) fetchData();
  }, [token]);
  return /* @__PURE__ */ jsx("div", {
    style: {
      height: "100vh",
      padding: "20px",
      backgroundColor: "#f5f5f5"
    },
    children: /* @__PURE__ */ jsx("div", {
      style: {
        background: "white",
        height: "calc(100% - 40px)",
        borderRadius: "8px",
        boxShadow: "0 2px 10px rgba(0,0,0,0.1)",
        padding: "20px"
      },
      children: loading ? /* @__PURE__ */ jsx("p", {
        children: "Loading calendar..."
      }) : /* @__PURE__ */ jsx(Calendar$1, {
        localizer,
        events,
        date: currentDate,
        onNavigate: setCurrentDate,
        startAccessor: "start",
        endAccessor: "end",
        defaultView: "month",
        views: ["month", "week", "day", "agenda"],
        style: {
          height: "100%"
        },
        eventPropGetter: (event) => ({
          style: {
            backgroundColor: event.priority === "High" ? "#ff6b6b" : "#51cf66",
            borderRadius: "4px",
            color: "white",
            border: "none"
          }
        }),
        onSelectEvent: (event) => alert(` ${event.title}
 ${moment(event.start).format("HH:mm")} - ${moment(event.end).format("HH:mm")}
 Link: ${event.link || "None"}
 Notes: ${event.notes || "No notes"}`)
      })
    })
  });
};
const EventCalandar = withComponentProps(MyCalendar);
const route32 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: EventCalandar
}, Symbol.toStringTag, { value: "Module" }));
const MomReport = () => {
  var _a;
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [currentPage, setCurrentPage] = useState(1);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [selectedStaffId, setSelectedStaffId] = useState("");
  const [selectedProjectCode, setSelectedProjectCode] = useState("");
  const [pageSize, setPageSize] = useState(10);
  const [meetingData, setMeetingData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const [staffOptions, setStaffOptions] = useState([]);
  const [projectOptions, setProjectOptions] = useState([]);
  const [sortOrder, setSortOrder] = useState("");
  const [showModal, setShowModal] = useState(false);
  const [selectedMeeting, setSelectedMeeting] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const permission = useAuthStore((state) => state.permissions);
  const staff_id = useAuthStore((state) => state.staff_id);
  const userBranchCode = useAuthStore((state) => state.branchcode);
  const role = ((_a = permission[0]) == null ? void 0 : _a.role) || "employee";
  const {
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const filteredBranchOptions = () => {
    if (role === "superadmin") {
      return branchCodeOptions;
    }
    return [];
  };
  useEffect(() => {
    if (role === "superadmin") {
      fetchBranches(token);
    }
  }, [token, role]);
  useEffect(() => {
    if (role !== "superadmin") {
      setSelectedStaffId(staff_id);
      fetchMeetingData();
    }
  }, [role, staff_id]);
  useEffect(() => {
    const getStaffOptions = async () => {
      if (role !== "superadmin" || !selectedBranchCode) {
        setStaffOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/users/read?branchcode=${selectedBranchCode}`;
        const response = await axios.get(url, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((staff) => ({
            value: staff.staff_id,
            label: `${staff.firstname} ${staff.lastname} (${staff.staff_id})`
          }));
          setStaffOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching staff list", error2);
        toast$1.error("Failed to fetch staff");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin") {
      getStaffOptions();
    }
  }, [selectedBranchCode, token, role]);
  useEffect(() => {
    const getProjectOptions = async () => {
      const branchToUse = role === "superadmin" ? selectedBranchCode : userBranchCode;
      if (!branchToUse) {
        setProjectOptions([]);
        return;
      }
      setLoading(true);
      try {
        const url = `${BASE_URL}/project/overview/dropdown?branchcode=${branchToUse}`;
        const response = await axios.get(url, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (response.data && response.data.data) {
          const options = response.data.data.map((project2) => ({
            value: project2.project_code,
            label: `${project2.title} (${project2.project_code})`
          }));
          setProjectOptions(options);
        }
      } catch (error2) {
        console.error("Error fetching project list", error2);
        toast$1.error("Failed to fetch projects");
      } finally {
        setLoading(false);
      }
    };
    if (role === "superadmin" ? selectedBranchCode : userBranchCode) {
      getProjectOptions();
    }
  }, [selectedBranchCode, token, role, userBranchCode]);
  const fetchMeetingData = async () => {
    var _a2;
    const staffIdToUse = role !== "superadmin" ? staff_id : selectedStaffId;
    if (!staffIdToUse && role !== "superadmin") {
      return;
    }
    setLoading(true);
    try {
      let url = `${BASE_URL}/doc_meet/read?person_id=${encodeURIComponent(staffIdToUse)}&role=staff&comm_type=meeting`;
      if (selectedProjectCode) {
        url += `&project_code=${selectedProjectCode}`;
      }
      if (startDate && endDate) {
        const formattedStartDate = formatDate2(startDate);
        const formattedEndDate = formatDate2(endDate);
        url += `&start_date=${formattedStartDate}&end_date=${formattedEndDate}`;
      }
      if (sortOrder) {
        url += `&dec=${sortOrder}`;
      }
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data) {
        setMeetingData(response.data);
        setTotalItem(((_a2 = response.data.data) == null ? void 0 : _a2.length) || 0);
      }
    } catch (error2) {
      console.error("Error fetching meeting data", error2);
      toast$1.error("Failed to fetch meeting data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setSelectedStaffId("");
    setSelectedProjectCode("");
    setCurrentPage(1);
  };
  const handleStaffChange = (value) => {
    setSelectedStaffId(value);
    setCurrentPage(1);
  };
  const handleProjectChange = (value) => {
    setSelectedProjectCode(value);
    setCurrentPage(1);
    fetchMeetingData();
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
    fetchMeetingData();
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    fetchMeetingData();
  };
  const handleOnExport = () => {
    if (!(meetingData == null ? void 0 : meetingData.data) || meetingData.data.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = meetingData.data.map((meeting) => ({
      "Meeting ID": meeting.meet_id,
      "Title": meeting.title,
      "Branch Code": meeting.branchcode,
      "Project Code": meeting.project_code || "N/A",
      "Start Date": new Date(meeting.start_date_time).toLocaleString(),
      "End Date": new Date(meeting.end_date_time).toLocaleString(),
      "Status": meeting.status,
      "Created By": meeting.createdby
    }));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "MeetingReport");
    XLSX.writeFile(wb, "MeetingReport.xlsx");
  };
  const formatDateTime = (dateTimeString) => {
    if (!dateTimeString) return "N/A";
    const date = new Date(dateTimeString);
    return date.toLocaleString();
  };
  const meetingThead = () => [{
    data: "Meeting ID"
  }, {
    data: "Title"
  }, {
    data: "Branch"
  }, {
    data: "Project"
  }, {
    data: "Start Time"
  }, {
    data: "End Time"
  }, {
    data: "Status"
  }, {
    data: "Actions"
  }];
  const meetingTbody = () => {
    if (!(meetingData == null ? void 0 : meetingData.data)) return [];
    return meetingData.data.map((meeting) => ({
      id: meeting.meet_id,
      data: [{
        data: meeting.meet_id
      }, {
        data: meeting.title
      }, {
        data: meeting.branchcode
      }, {
        data: meeting.project_code || "N/A"
      }, {
        data: formatDateTime(meeting.start_date_time)
      }, {
        data: formatDateTime(meeting.end_date_time)
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${meeting.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${meeting.status === "active" ? "bg-green-800" : "bg-red-700"}`
          }), meeting.status.charAt(0).toUpperCase() + meeting.status.slice(1)]
        })
      }, {
        data: /* @__PURE__ */ jsx("button", {
          className: "bg-blue-400/25 text-xs dark:bg-blue-700/15 px-2 py-1 dark:text-blue-200 text-blue-700 rounded-2xl",
          onClick: () => {
            setSelectedMeeting(meeting);
            setShowModal(true);
          },
          children: /* @__PURE__ */ jsx(Eye, {
            size: 16
          })
        })
      }]
    }));
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx("div", {
      className: "flex flex-col min-h-screen",
      children: /* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsx("div", {
          className: "flex justify-between items-center mb-4",
          children: /* @__PURE__ */ jsx("h2", {
            className: "text-2xl font-bold text-red-600 mb-5",
            children: "MOM Report"
          })
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-4 mb-5",
          children: [/* @__PURE__ */ jsxs("div", {
            className: `grid grid-cols-1 ${role !== "superadmin" ? "md:grid-cols-2 lg:grid-cols-2 gap-3" : "md:grid-cols-4 lg:grid-cols-4 gap-20"}`,
            children: [role === "superadmin" && /* @__PURE__ */ jsx(Dropdown, {
              options: filteredBranchOptions(),
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Select Branch",
              className: "w-[245px]",
              isLoading: isStoreLoading
            }), role === "superadmin" && /* @__PURE__ */ jsx(Dropdown, {
              options: staffOptions,
              selectedValue: selectedStaffId,
              onSelect: handleStaffChange,
              placeholder: "Select Staff",
              className: "w-[245px]",
              disabled: !selectedBranchCode,
              isLoading: loading
            }), /* @__PURE__ */ jsx(Dropdown, {
              options: projectOptions,
              selectedValue: selectedProjectCode,
              onSelect: handleProjectChange,
              placeholder: "Select Project",
              className: "w-[245px]",
              disabled: role === "superadmin" ? !selectedBranchCode : !userBranchCode,
              isLoading: loading
            }), /* @__PURE__ */ jsx("div", {
              className: "w-[245px]",
              children: /* @__PURE__ */ jsx(DatePicker, {
                selectsRange: true,
                startDate,
                endDate,
                onChange: handleDateChange,
                placeholderText: "Select date range",
                className: "w-full p-2 border rounded h-[40px]",
                isClearable: true
              })
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-wrap justify-between items-center",
            children: [/* @__PURE__ */ jsxs("div", {
              className: `flex ${role !== "superadmin" ? "gap-91" : "gap-19"}`,
              children: [/* @__PURE__ */ jsxs("button", {
                onClick: toggleSortOrder,
                className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect px-18 h-[40px] rounded-sm",
                children: [sortOrder === "desc" ? /* @__PURE__ */ jsx(SortDesc, {
                  className: "mr-1"
                }) : /* @__PURE__ */ jsx(SortAsc, {
                  className: "mr-1"
                }), "Sort ", sortOrder === "desc" ? "Desc" : "Asc"]
              }), /* @__PURE__ */ jsxs("button", {
                onClick: handleOnExport,
                className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2 w-[245px]",
                disabled: !(meetingData == null ? void 0 : meetingData.data),
                children: [/* @__PURE__ */ jsx(FileDown, {
                  className: "mr-1"
                }), !isMobile && "Export Excel"]
              })]
            }), role === "superadmin" && /* @__PURE__ */ jsx("button", {
              onClick: fetchMeetingData,
              className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
              disabled: !selectedStaffId || loading,
              children: loading ? "Loading..." : "Generate Report"
            })]
          })]
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), (meetingData == null ? void 0 : meetingData.data) && /* @__PURE__ */ jsxs(Fragment, {
          children: [/* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead: meetingThead,
              tbody: meetingTbody,
              responsive: true,
              className: "min-w-full"
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
            children: /* @__PURE__ */ jsx(CustomPagination, {
              total: totalItem,
              currentPage,
              defaultPageSize: pageSize,
              onChange: handlePageChange,
              paginationLabel: "meetings",
              isScroll: true
            })
          })]
        }), !loading && !meetingData && /* @__PURE__ */ jsx("div", {
          className: "text-center py-10 text-gray-500",
          children: role !== "superadmin" ? "Loading your meeting data..." : !selectedBranchCode ? "Please select Branch to view available options" : !selectedStaffId ? "Please select Staff" : "Click 'Generate Report' to view data"
        })]
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowModal(false),
      title: "Meeting Details",
      children: /* @__PURE__ */ jsx(MomViewPage, {
        meeting: selectedMeeting
      })
    })]
  });
};
const MomReport$1 = withComponentProps(MomReport);
const route33 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: MomReport$1
}, Symbol.toStringTag, { value: "Module" }));
const ActiveLog = () => {
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [selectedFilter, setSelectedFilter] = useState("");
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getBranch = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c;
    setLoading(true);
    try {
      let url = `${BASE_URL}/users/login/read?page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode) url += `&branchcode=${branchCode}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.totalDocuments) || 0);
      setData(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getBranch();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Branch added successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    const payload = {
      userId: "GK123"
    };
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/branch/delete/${id}`, {
        data: payload,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Branch deleted successfully!");
        fetchBranches(token);
        getBranch();
      }
    } catch (error2) {
      console.error("Error deleting branch", error2);
      toast$1.error("Failed to delete branch");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "name"
  }, {
    data: "Location"
  }, {
    data: "Mobile"
  }, {
    data: "Manager ID"
  }, {
    data: "Status"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((branch2) => ({
      id: branch2.id,
      data: [{
        data: branch2.id
      }, {
        data: branch2.branchcode
      }, {
        data: branch2.staff_id
      }, {
        data: branch2.date
      }, {
        data: branch2.time
      }, {
        data: branch2.ip
      }, {
        data: branch2.device
      }]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!");
    fetchBranches(token);
    getBranch();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Branches");
    XLSX.writeFile(wb, "BranchList.xlsx");
  };
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
            children: "User Login Logs"
          }), isMobile && /* @__PURE__ */ jsx("button", {
            onClick: () => setShowFilters2(!showFilters2),
            className: "p-2 bg-gray-200 rounded-md",
            children: showFilters2 ? "Hide Filters" : "Show Filters"
          })]
        }), /* @__PURE__ */ jsx(Toaster, {
          position: toastposition,
          reverseOrder: false
        }), /* @__PURE__ */ jsx("div", {
          className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: pageSizeOptions,
              selectedValue: pageSize,
              onSelect: handlePageSizeChange,
              placeholder: "Items per page",
              className: "w-full md:w-[150px]"
            }), /* @__PURE__ */ jsxs("button", {
              onClick: handleOnExport,
              className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
              children: [/* @__PURE__ */ jsx(FileDown, {
                className: "mr-1"
              }), !isMobile && "Export Excel"]
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
          children: /* @__PURE__ */ jsxs("div", {
            className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
            children: [/* @__PURE__ */ jsx(Dropdown, {
              options: branchCodeOptions,
              selectedValue: selectedBranchCode,
              onSelect: handleBranchCodeChange,
              placeholder: "Branch Code",
              className: "w-full md:w-[200px]",
              isLoading: isStoreLoading
            }), /* @__PURE__ */ jsxs("button", {
              onClick: toggleSortOrder,
              className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
              children: ["Sort ", sortOrder === "desc" ? "" : ""]
            }), /* @__PURE__ */ jsx("div", {
              className: `${isMobile ? "w-full" : "w-[200px] mt-3"}`,
              children: /* @__PURE__ */ jsx(SearchInput, {
                value: searchTerm,
                onChange: handleSearch,
                placeholder: "Search Logs...",
                className: "w-full"
              })
            })]
          })
        }), loading && /* @__PURE__ */ jsx("div", {
          className: "text-center py-4",
          children: "Loading..."
        }), error && /* @__PURE__ */ jsx("div", {
          className: "text-red-500 text-center py-4",
          children: error
        }), /* @__PURE__ */ jsx("div", {
          className: "overflow-x-auto",
          children: /* @__PURE__ */ jsx(DataTable, {
            thead,
            tbody,
            responsive: true,
            className: "min-w-full"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
        children: /* @__PURE__ */ jsx(CustomPagination, {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        })
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New Branch",
      children: /* @__PURE__ */ jsx(CreateBranchForm, {
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showEditModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowEditModal(false),
      title: "Edit Branch",
      children: /* @__PURE__ */ jsx(EditBranchForm, {
        branch: selectedBranch,
        onSuccess: handleEditSuccess,
        onCancel: () => setShowEditModal(false)
      })
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showDeleteModal,
      className: "w-full md:w-[600px]",
      onClose: () => setShowDeleteModal(false),
      title: "Delete Branch",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "text-center",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-semibold text-gray-800 dark:text-gray-100",
            children: "Confirm Deletion"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-400 mt-2",
            children: "Are you sure you want to delete this branch? This action cannot be undone."
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: [/* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
            onClick: () => setShowDeleteModal(false),
            disabled: loading,
            children: "Cancel"
          }), /* @__PURE__ */ jsx("button", {
            type: "button",
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            onClick: handleDeleteSubmit,
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Branhch"
          })]
        })]
      })
    })]
  });
};
const ActiveLog$1 = withComponentProps(ActiveLog);
const route34 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ActiveLog$1
}, Symbol.toStringTag, { value: "Module" }));
const EmployeeSummary = ({ staff, staff_id }) => {
  var _a, _b;
  console.log("staffidddd>>>>d", staff);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [userSummaryData, setUserSummaryData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const fetchUserSummaryData = async () => {
    if (!staff_id || !startDate || !endDate) {
      setUserSummaryData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      const url = `${BASE_URL}/report/usersummary/read?staff_id=${encodeURIComponent(staff_id)}&start_date=${formattedStartDate}&end_date=${formattedEndDate}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      if (response.data) {
        setUserSummaryData(response.data);
      }
    } catch (error2) {
      console.error("Error fetching user summary data", error2);
      toast$1.error("Failed to fetch user summary data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleOnExport = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary) || userSummaryData.data.projectsummary.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = userSummaryData.data.projectsummary.flatMap(
      (project2) => project2.milestones_summary.flatMap(
        (milestone) => milestone.taskparticipantsummary.map((participant) => ({
          project_code: project2.project_code,
          milestone_code: milestone.milestone_code,
          staff_id: participant.staff_id,
          staff_name: `${participant.firstname} ${participant.lastname}`,
          total_tasks: participant.total_tasks,
          total_duration_minutes: participant.total_duration_minutes,
          total_working_hours: (participant.total_duration_minutes / 60).toFixed(2),
          status: project2.status
        }))
      )
    );
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "EmployeeSummaryReport");
    XLSX.writeFile(wb, "EmployeeSummaryReport.xlsx");
  };
  const generateReport = () => {
    fetchUserSummaryData();
  };
  const formatDuration = (minutes) => {
    if (isNaN(minutes)) return "0 minutes";
    const hours = Math.floor(minutes / 60);
    const remainingMinutes = Math.round(minutes % 60);
    if (hours > 0 && remainingMinutes > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""} ${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    }
  };
  const projectSummaryThead = () => [
    { data: "Project Code" },
    { data: "Status" },
    { data: "Total Tasks" },
    { data: "Total Duration" }
  ];
  const projectSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    return userSummaryData.data.projectsummary.map((project2, index) => ({
      id: project2.project_code || index,
      data: [
        { data: project2.project_code },
        {
          data: /* @__PURE__ */ jsxs(
            "div",
            {
              className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
              children: [
                /* @__PURE__ */ jsx(
                  "span",
                  {
                    className: `w-2 h-2 rounded-full mr-2 ${project2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
                  }
                ),
                project2.status.charAt(0).toUpperCase() + project2.status.slice(1)
              ]
            }
          )
        },
        { data: project2.total_tasks },
        { data: formatDuration(project2.total_duration_minutes) }
      ]
    }));
  };
  const milestoneSummaryThead = () => [
    { data: "Milestone Code" },
    { data: "Total Tasks" },
    { data: "In Progress" },
    { data: "Completed" },
    { data: "Total Duration" }
  ];
  const milestoneSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    const allMilestones = userSummaryData.data.projectsummary.flatMap(
      (project2) => project2.milestones_summary.map((milestone) => ({
        ...milestone,
        project_code: project2.project_code
      }))
    );
    return allMilestones.map((milestone, index) => ({
      id: milestone.milestone_code || index,
      data: [
        { data: milestone.milestone_code },
        { data: milestone.total_tasks },
        { data: milestone.total_inprogress },
        { data: milestone.total_verified_closed },
        { data: formatDuration(milestone.overall_task_duration) }
      ]
    }));
  };
  return /* @__PURE__ */ jsx("div", { className: "flex flex-col min-h-screen", children: /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
    /* @__PURE__ */ jsx("div", { className: "flex justify-between items-center mb-4", children: /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5", children: "Employee Work Summary" }) }),
    /* @__PURE__ */ jsx(Toaster, { position: toastposition, reverseOrder: false }),
    /* @__PURE__ */ jsx("div", { className: "flex flex-col gap-4 mb-5", children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-39", children: [
      /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
        DatePicker,
        {
          selectsRange: true,
          startDate,
          endDate,
          onChange: handleDateChange,
          placeholderText: "Select date range",
          className: "w-full p-2 border rounded h-[40px]",
          isClearable: true
        }
      ) }),
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: handleOnExport,
          className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2",
          disabled: !((_a = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a.projectsummary),
          children: [
            /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
            "Export Excel"
          ]
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: generateReport,
          className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
          disabled: !startDate || !endDate || loading,
          children: loading ? "Loading..." : "Generate Report"
        }
      )
    ] }) }),
    userSummaryData && /* @__PURE__ */ jsxs("div", { className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg text-red-700 font-semibold mb-2", children: "Employee Summary" }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Clock, { className: "mr-1", size: 16 }),
            " Date Range"
          ] }),
          /* @__PURE__ */ jsxs("p", { className: "font-medium", children: [
            new Date(userSummaryData.data.start_date).toLocaleDateString(),
            " - ",
            new Date(userSummaryData.data.end_date).toLocaleDateString()
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Hourglass, { className: "mr-1", size: 16 }),
            " Total Working Hours"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: formatDuration(userSummaryData.data.total_duration_minutes) })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(Bookmark, { className: "mr-1", size: 16 }),
            " Projects Worked"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: userSummaryData.data.total_projects_worked })
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-500 mb-3 flex items-center", children: [
            /* @__PURE__ */ jsx(List, { className: "mr-1", size: 16 }),
            " Total Tasks"
          ] }),
          /* @__PURE__ */ jsx("p", { className: "font-medium", children: userSummaryData.data.total_tasks })
        ] })
      ] })
    ] }),
    loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
    error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
    ((_b = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _b.projectsummary) && /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(Bookmark, { className: "mr-2", size: 20 }),
          " Project Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: projectSummaryThead,
            tbody: projectSummaryTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-8", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold mb-4 flex items-center", children: [
          /* @__PURE__ */ jsx(List, { className: "mr-2", size: 20 }),
          " Milestone Summary"
        ] }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead: milestoneSummaryThead,
            tbody: milestoneSummaryTbody,
            responsive: true,
            className: "min-w-full"
          }
        ) })
      ] })
    ] }),
    !loading && !userSummaryData && /* @__PURE__ */ jsx("div", { className: "text-center py-10 text-gray-500", children: !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view your work summary" })
  ] }) });
};
const FeedbackForm = ({ employee, onSuccess, onCancel }) => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const [staffOptions, setStaffOptions] = useState([]);
  const [teamOptions, setTeamOptions] = useState([]);
  const [isFetchingStaff, setIsFetchingStaff] = useState(false);
  const [isFetchingTeams, setIsFetchingTeams] = useState(false);
  const [formData, setFormData] = useState({
    branchcode: employee.basic.branchcode,
    staff_id: employee.basic.staff_id,
    reporting_to: "",
    team_id: "",
    year_of_experience: "",
    review_year: "",
    total_workingdays: "",
    total_dayspresent: "",
    total_daysabsent: "",
    total_daysleave: "",
    overall_attendance_percentage: "",
    total_project_worked: "",
    overallprojectrating: "",
    overall_milestone_rating: "",
    total_task: "",
    total_task_participantavgrating: "",
    total_duration_minutes: "",
    total_tasks_handled: "",
    tasks_completed_ontime: "",
    reworks_revisions: "",
    major_projects: "",
    self_timeliness_rating: "",
    self_timeliness_comments: "",
    self_quality_rating: "",
    self_quality_comments: "",
    self_communication_rating: "",
    self_communication_comments: "",
    self_initiative_rating: "",
    self_initiative_comments: "",
    self_interaction_rating: "",
    self_interaction_comments: "",
    self_attendance_rating: "",
    self_attendance_comments: "",
    what_went_well: "",
    challenges_faced: "",
    support_needed: "",
    improvement_suggestions: "",
    new_skills_learned: "",
    areas_to_improve: "",
    self_training_required: "",
    self_rating_overall: "",
    self_overall_feedback: "",
    self_trainings_attended: "",
    status: "draft"
  });
  useEffect(() => {
    if (formData.branchcode) {
      fetchStaffOptions(formData.branchcode);
      fetchTeamOptions(formData.branchcode);
    } else {
      setStaffOptions([]);
      setTeamOptions([]);
    }
  }, [formData.branchcode]);
  const fetchStaffOptions = async (branchcode) => {
    setIsFetchingStaff(true);
    try {
      const response = await axios.get(
        `${BASE_URL}/users/dropdown?branchcode=${branchcode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((staff) => ({
          value: staff.staff_id,
          label: `${staff.firstname} ${staff.lastname} (${staff.designation})`
        }));
        setStaffOptions(options);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      toast$1.error("Failed to fetch staff options");
      setStaffOptions([]);
    } finally {
      setIsFetchingStaff(false);
    }
  };
  const fetchTeamOptions = async (branchcode) => {
    setIsFetchingTeams(true);
    try {
      const response = await axios.get(
        `${BASE_URL}/teams/read?branchcode=${branchcode}`,
        { headers: { Authorization: `Bearer ${token}` } }
      );
      if (response.data && response.data.data) {
        const options = response.data.data.map((team) => ({
          value: team.team_id,
          label: team.team_name
        }));
        setTeamOptions(options);
      } else {
        setTeamOptions([]);
      }
    } catch (err) {
      toast$1.error("Failed to fetch team options");
      setTeamOptions([]);
    } finally {
      setIsFetchingTeams(false);
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleRatingChange = (name, value) => {
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    const feedbackData = {
      reviewData: {
        ...formData,
        review_year: formData.review_year ? `${formData.review_year}-01-01|${formData.review_year}-12-31` : ""
      }
    };
    try {
      const response = await axios.post(
        `${BASE_URL}/users/self_rating/create`,
        feedbackData,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if (response.status === 201) {
        toast$1.success("Feedback submitted successfully!");
        onSuccess();
      } else {
        setError(response.data.message || "Failed to submit feedback");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(error || "Error submitting feedback");
    } finally {
      setLoading(false);
    }
  };
  const RatingScale = ({ name, value, label }) => /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mt-1", children: [
    /* @__PURE__ */ jsx("span", { className: "text-xs text-gray-500 dark:text-gray-400", children: label }),
    [1, 2, 3, 4, 5].map((rating) => /* @__PURE__ */ jsx(
      "button",
      {
        type: "button",
        onClick: () => handleRatingChange(name, rating),
        className: `w-6 h-6 rounded-full flex items-center justify-center text-xs 
            ${value >= rating ? "bg-red-700 text-white" : "bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,
        children: rating
      },
      rating
    )),
    /* @__PURE__ */ jsx("span", { className: "ml-2 text-xs text-gray-500 dark:text-gray-400", children: value ? value <= 2 ? /* @__PURE__ */ jsxs("span", { className: "text-red-500 flex items-center", children: [
      /* @__PURE__ */ jsx(ChevronsDown, { size: 14, className: "mr-1" }),
      " Needs Improvement"
    ] }) : value <= 4 ? /* @__PURE__ */ jsxs("span", { className: "text-yellow-500 flex items-center", children: [
      /* @__PURE__ */ jsx(TrendingUp, { size: 14, className: "mr-1" }),
      " Good"
    ] }) : /* @__PURE__ */ jsxs("span", { className: "text-green-500 flex items-center", children: [
      /* @__PURE__ */ jsx(Award, { size: 14, className: "mr-1" }),
      " Excellent"
    ] }) : null })
  ] });
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(User, { className: "inline mr-2" }),
        " Basic Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Hash, { className: "inline mr-1", size: 14 }),
            " Branch Code"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "branchcode",
              value: formData.branchcode,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Staff ID"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "staff_id",
              value: formData.staff_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              readOnly: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Reporting To"
          ] }),
          isFetchingStaff ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading staff..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "reporting_to",
              value: formData.reporting_to,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode || staffOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Reporting Manager" }),
                staffOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          formData.branchcode && staffOptions.length === 0 && !isFetchingStaff && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No staff found for this branch" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Team ID"
          ] }),
          isFetchingTeams ? /* @__PURE__ */ jsx("div", { className: "text-sm text-gray-500 mt-1", children: "Loading teams..." }) : /* @__PURE__ */ jsxs(
            "select",
            {
              name: "team_id",
              value: formData.team_id,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              disabled: !formData.branchcode || teamOptions.length === 0,
              children: [
                /* @__PURE__ */ jsx("option", { value: "", children: "Select Team" }),
                teamOptions.map((option) => /* @__PURE__ */ jsx("option", { value: option.value, children: option.label }, option.value))
              ]
            }
          ),
          formData.branchcode && teamOptions.length === 0 && !isFetchingTeams && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 mt-1", children: "No teams found for this branch" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-1", size: 14 }),
            " Years of Experience"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "year_of_experience",
              value: formData.year_of_experience,
              onChange: handleChange,
              type: "number",
              step: "0.1",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter years of experience",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Review Year"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "review_year",
              value: formData.review_year,
              onChange: handleChange,
              type: "number",
              min: "2000",
              max: "2099",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter review year (e.g., 2023)",
              required: true
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Clock, { className: "inline mr-2" }),
        " Attendance Metrics"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Total Working Days"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_workingdays",
              value: formData.total_workingdays,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter total working days"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1", size: 14 }),
            " Days Present"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_dayspresent",
              value: formData.total_dayspresent,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter days present"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(AlertCircle, { className: "inline mr-1", size: 14 }),
            " Days Absent"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_daysabsent",
              value: formData.total_daysabsent,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter days absent"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Days Leave"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_daysleave",
              value: formData.total_daysleave,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter days leave"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BarChart2, { className: "inline mr-1", size: 14 }),
            " Attendance Percentage"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "overall_attendance_percentage",
              value: formData.overall_attendance_percentage,
              onChange: handleChange,
              type: "number",
              step: "0.01",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter attendance percentage"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BookUser, { className: "inline mr-2" }),
        " Project Metrics"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BookUser, { className: "inline mr-1", size: 14 }),
            " Total Projects Worked"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_project_worked",
              value: formData.total_project_worked,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter total projects worked"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Award, { className: "inline mr-1", size: 14 }),
            " Overall Project Rating"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "overallprojectrating",
              value: formData.overallprojectrating,
              label: "Rate your project performance (1-5)"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BarChart2, { className: "inline mr-1", size: 14 }),
            " Milestone Rating"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "overall_milestone_rating",
              value: formData.overall_milestone_rating,
              label: "Rate your milestone achievement (1-5)"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1", size: 14 }),
            " Total Tasks"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_task",
              value: formData.total_task,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter total tasks"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Task Participant Rating"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "total_task_participantavgrating",
              value: formData.total_task_participantavgrating,
              label: "Average participant rating (1-5)"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " Total Duration (minutes)"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_duration_minutes",
              value: formData.total_duration_minutes,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter total duration in minutes"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700 col-span-2", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BookUser, { className: "inline mr-1", size: 14 }),
            " Major Projects"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "major_projects",
              value: formData.major_projects,
              onChange: handleChange,
              type: "text",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "List major projects worked on"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-2" }),
        " Task Metrics"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CheckCircle, { className: "inline mr-1", size: 14 }),
            " Total Tasks Handled"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "total_tasks_handled",
              value: formData.total_tasks_handled,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter total tasks handled"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " Tasks Completed On Time"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "tasks_completed_ontime",
              value: formData.tasks_completed_ontime,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter tasks completed on time"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(AlertCircle, { className: "inline mr-1", size: 14 }),
            " ",
            "Reworks/Revisions"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "reworks_revisions",
              value: formData.reworks_revisions,
              onChange: handleChange,
              type: "number",
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Enter number of reworks/revisions"
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BarChart2, { className: "inline mr-2" }),
        " Self-Ratings"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " Timeliness"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_timeliness_rating",
              value: formData.self_timeliness_rating,
              label: "Rate your timeliness (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_timeliness_comments",
              value: formData.self_timeliness_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on timeliness",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Award, { className: "inline mr-1", size: 14 }),
            " Quality"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_quality_rating",
              value: formData.self_quality_rating,
              label: "Rate your work quality (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_quality_comments",
              value: formData.self_quality_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on quality",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-1", size: 14 }),
            " Communication"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_communication_rating",
              value: formData.self_communication_rating,
              label: "Rate your communication (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_communication_comments",
              value: formData.self_communication_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on communication",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-1", size: 14 }),
            " Initiative"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_initiative_rating",
              value: formData.self_initiative_rating,
              label: "Rate your initiative (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_initiative_comments",
              value: formData.self_initiative_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on initiative",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(User, { className: "inline mr-1", size: 14 }),
            " Team Interaction"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_interaction_rating",
              value: formData.self_interaction_rating,
              label: "Rate your team interaction (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_interaction_comments",
              value: formData.self_interaction_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on team interaction",
              rows: 2
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(CalendarCheck, { className: "inline mr-1", size: 14 }),
            " Attendance"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_attendance_rating",
              value: formData.self_attendance_rating,
              label: "Rate your attendance (1-5)"
            }
          ),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_attendance_comments",
              value: formData.self_attendance_comments,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 focus:outline-none border-t border-gray-200 dark:border-gray-600 pt-2",
              placeholder: "Comments on attendance",
              rows: 2
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-2" }),
        " Feedback"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center", children: [
            /* @__PURE__ */ jsx(ThumbsUp, { className: "inline mr-1", size: 14 }),
            " What Went Well"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "what_went_well",
              value: formData.what_went_well,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Describe what went well this year",
              rows: 3
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center", children: [
            /* @__PURE__ */ jsx(AlertCircle, { className: "inline mr-1", size: 14 }),
            " Challenges Faced"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "challenges_faced",
              value: formData.challenges_faced,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Describe challenges you faced this year",
              rows: 3
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center", children: [
            /* @__PURE__ */ jsx(HelpCircle, { className: "inline mr-1", size: 14 }),
            " Support Needed"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "support_needed",
              value: formData.support_needed,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Describe what support you need",
              rows: 3
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center", children: [
            /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-1", size: 14 }),
            " Improvement Suggestions"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "improvement_suggestions",
              value: formData.improvement_suggestions,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Suggest improvements for next year",
              rows: 3
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(TrendingUp, { className: "inline mr-2" }),
        " Development"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Award, { className: "inline mr-1", size: 14 }),
            " New Skills Learned"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "new_skills_learned",
              value: formData.new_skills_learned,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "List new skills you've learned this year",
              rows: 3
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ThumbsDown, { className: "inline mr-1", size: 14 }),
            " Areas to Improve"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "areas_to_improve",
              value: formData.areas_to_improve,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Identify areas you want to improve",
              rows: 3
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-1", size: 14 }),
            " Self-Training Required"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_training_required",
              value: formData.self_training_required,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "List training you think would help you improve",
              rows: 3
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(BarChart2, { className: "inline mr-2" }),
        " Self-Evaluation"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Award, { className: "inline mr-1", size: 14 }),
            " Overall Rating"
          ] }),
          /* @__PURE__ */ jsx(
            RatingScale,
            {
              name: "self_rating_overall",
              value: formData.self_rating_overall,
              label: "Rate your overall performance (1-5)"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(MessageSquare, { className: "inline mr-1", size: 14 }),
            " Overall Feedback"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_overall_feedback",
              value: formData.self_overall_feedback,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "Provide your overall feedback for the year",
              rows: 4
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(BookOpenText, { className: "inline mr-1", size: 14 }),
            " Trainings Attended"
          ] }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "self_trainings_attended",
              value: formData.self_trainings_attended,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              placeholder: "List trainings you attended this year",
              rows: 3
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        /* @__PURE__ */ jsx(Tag, { className: "inline mr-2" }),
        " Status"
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: /* @__PURE__ */ jsxs(
        "select",
        {
          name: "status",
          value: formData.status,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
          required: true,
          children: [
            /* @__PURE__ */ jsx("option", { value: "draft", children: "Draft" }),
            /* @__PURE__ */ jsx("option", { value: "submitted", children: "Submit for Review" })
          ]
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          onClick: handleSubmit,
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Submit Feedback"
        }
      )
    ] })
  ] });
};
const EmployeeProfile = () => {
  const {
    id
  } = useParams$1();
  const staff_id = decodeURIComponent(id);
  const navigate = useNavigate$1();
  const [activeTab, setActiveTab] = useState("personal");
  const [employee, setEmployee] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [employeeBasic, setEmployeeBasic] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  useEffect(() => {
    const fetchEmployeeData = async () => {
      try {
        const response = await fetch(`${BASE_URL}/users/profile`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            staff_id
          })
        });
        if (!response.ok) {
          throw new Error("Failed to fetch employee data");
        }
        const data = await response.json();
        setEmployee(data.data);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };
    fetchEmployeeData();
  }, [id]);
  const handleBack = () => {
    navigate(-1);
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-xl font-medium text-gray-800 dark:text-white",
        children: "Loading employee data..."
      })
    });
  }
  if (error) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsxs("div", {
        className: "text-xl font-medium text-red-600 dark:text-red-400",
        children: ["Error: ", error]
      })
    });
  }
  if (!employee) {
    return /* @__PURE__ */ jsx("div", {
      className: "min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-xl font-medium text-gray-800 dark:text-white",
        children: "No employee data found"
      })
    });
  }
  const handleCreate = (employee2) => {
    setEmployeeBasic(employee2.basic);
    setShowCreateModal(true);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Branch added successfully!");
  };
  const renderDocumentsTab = () => /* @__PURE__ */ jsxs("div", {
    className: "p-6",
    children: [/* @__PURE__ */ jsxs("h2", {
      className: "text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center",
      children: [/* @__PURE__ */ jsx(File, {
        className: "mr-2 text-red-600",
        size: 20
      }), "Employee Documents"]
    }), /* @__PURE__ */ jsx(Toaster, {
      position: toastposition,
      reverseOrder: false
    }), /* @__PURE__ */ jsx("div", {
      className: "overflow-x-auto",
      children: /* @__PURE__ */ jsxs("table", {
        className: "min-w-full divide-y divide-gray-200 dark:divide-gray-700",
        children: [/* @__PURE__ */ jsx("thead", {
          className: "bg-gray-50 dark:bg-gray-700",
          children: /* @__PURE__ */ jsxs("tr", {
            children: [/* @__PURE__ */ jsx("th", {
              className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
              children: "Document Name"
            }), /* @__PURE__ */ jsx("th", {
              className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
              children: "Type"
            }), /* @__PURE__ */ jsx("th", {
              className: "px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",
              children: "Actions"
            })]
          })
        }), /* @__PURE__ */ jsx("tbody", {
          className: "bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",
          children: /* @__PURE__ */ jsxs("tr", {
            children: [/* @__PURE__ */ jsx("td", {
              className: "px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-white",
              children: "Joining Letter"
            }), /* @__PURE__ */ jsx("td", {
              className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
              children: "Official Document"
            }), /* @__PURE__ */ jsx("td", {
              className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",
              children: /* @__PURE__ */ jsx("button", {
                onClick: () => navigate(`/employee/${encodeURIComponent(employee.basic.staff_id)}/joining-letter`),
                className: "text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-600",
                children: "View"
              })
            })]
          })
        })]
      })
    })]
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "min-h-screen bg-gray-50 dark:bg-gray-900",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex items-center justify-between mb-6",
        children: [/* @__PURE__ */ jsxs("button", {
          onClick: handleBack,
          className: "flex items-center text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors",
          children: [/* @__PURE__ */ jsx(ArrowBigLeft, {
            className: "mr-2",
            size: 20
          }), "Back to Employees"]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex space-x-4",
          children: [/* @__PURE__ */ jsxs("button", {
            className: "flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",
            children: [/* @__PURE__ */ jsx(FileText, {
              className: "mr-2",
              size: 16
            }), "Print Profile"]
          }), /* @__PURE__ */ jsx("button", {
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            onClick: () => handleCreate(employee),
            children: loading ? "Loading..." : "Feedback"
          })]
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden mb-6",
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col md:flex-row",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "md:w-1/4 bg-gradient-to-b from-red-600 to-red-700 dark:from-red-700 dark:to-red-800 p-8 flex flex-col items-center justify-center",
            children: [/* @__PURE__ */ jsx("div", {
              className: "relative mb-4",
              children: /* @__PURE__ */ jsx("img", {
                className: "h-40 w-40 rounded-full object-cover border-4 border-white dark:border-gray-200",
                src: employee.basic.profileurl || "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",
                alt: `${employee.basic.firstname} ${employee.basic.lastname}`
              })
            }), /* @__PURE__ */ jsxs("h2", {
              className: "text-xl font-bold text-white text-center",
              children: [employee.basic.firstname, " ", employee.basic.lastname]
            }), /* @__PURE__ */ jsx("p", {
              className: "text-gray-200 text-center",
              children: employee.basic.designation || "No designation"
            }), /* @__PURE__ */ jsx("div", {
              className: "mt-2 px-3 py-1 rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 text-xs font-medium",
              children: employee.basic.status
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "md:w-3/4 p-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex flex-col md:flex-row md:items-center md:justify-between mb-6",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsxs("h1", {
                  className: "text-2xl font-bold text-gray-800 dark:text-white",
                  children: [employee.basic.firstname, " ", employee.basic.lastname]
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-lg text-gray-600 dark:text-gray-300",
                  children: [employee.basic.designation || "No designation", " |", " ", employee.basic.department]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-4 md:mt-0 flex space-x-3",
                children: [/* @__PURE__ */ jsxs("button", {
                  className: "flex items-center px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",
                  children: [/* @__PURE__ */ jsx(Mail, {
                    className: "mr-2",
                    size: 16
                  }), "Message"]
                }), /* @__PURE__ */ jsxs("button", {
                  className: "flex items-center px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-md hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",
                  children: [/* @__PURE__ */ jsx(Phone, {
                    className: "mr-2",
                    size: 16
                  }), "Call"]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Staff ID"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.staff_id
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Date of Joining"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.dateofjoining ? new Date(employee.basic.dateofjoining).toLocaleDateString() : "Not available"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Phone"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.phonenumber
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Email"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.email
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "Blood Group"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.bloodgroup || "Not available"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-sm text-gray-500 dark:text-gray-400",
                  children: "PAN Number"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-medium text-gray-800 dark:text-white",
                  children: employee.basic.pannumber || "Not available"
                })]
              })]
            })]
          })]
        })
      }), /* @__PURE__ */ jsx("div", {
        className: "border-b border-gray-200 dark:border-gray-700 mb-6",
        children: /* @__PURE__ */ jsxs("nav", {
          className: "-mb-px flex space-x-8",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("personal"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "personal" ? "border-red-600 text-red-600 dark:text-red-400 dark:border-red-400" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Personal Details"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("professional"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "professional" ? "border-red-600 text-red-600 dark:text-red-400 dark:border-red-400" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Professional Details"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("documents"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "documents" ? "border-red-600 text-red-600 dark:text-red-400 dark:border-red-400" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Documents"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("report"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "report" ? "border-red-600 text-red-600 dark:text-red-400 dark:border-red-400" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`,
            children: "Employee Report"
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab("report"),
            className: `py-4 px-1 border-b-2 font-medium text-sm ${activeTab === "report" ? "border-red-600 text-red-600 dark:text-red-400 dark:border-red-400" : "border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"}`
          })]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",
        children: [activeTab === "personal" && /* @__PURE__ */ jsxs("div", {
          className: "p-6",
          children: [/* @__PURE__ */ jsxs("h2", {
            className: "text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center",
            children: [/* @__PURE__ */ jsx(User, {
              className: "mr-2 text-red-600",
              size: 20
            }), "Personal Information"]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsx("div", {
              className: "space-y-6",
              children: /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Basic Details"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Full Name"
                    }), /* @__PURE__ */ jsxs("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: [employee.basic.firstname, " ", employee.basic.lastname]
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Date of Birth"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.dob ? new Date(employee.basic.dob).toLocaleDateString() : "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Gender"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.gender
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Marital Status"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.marital
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Blood Group"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.bloodgroup || "Not available"
                    })]
                  })]
                })]
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Contact Information"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Phone Number"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.phonenumber
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Alternate Contact"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.alternumber || "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Email"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.email
                    })]
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Address"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Present Address"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.presentaddress || "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Permanent Address"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.permanentaddress || "Not available"
                    })]
                  })]
                })]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "mt-8",
            children: [/* @__PURE__ */ jsx("div", {
              className: "flex justify-between items-center mb-4",
              children: /* @__PURE__ */ jsxs("h3", {
                className: "text-lg font-medium text-gray-800 dark:text-gray-200 flex items-center",
                children: [/* @__PURE__ */ jsx(Shield, {
                  className: "mr-2 text-red-600",
                  size: 20
                }), "Emergency Contacts"]
              })
            }), /* @__PURE__ */ jsx("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-4",
              children: employee.emergency && employee.emergency.length > 0 ? employee.emergency.map((contact, index) => /* @__PURE__ */ jsx("div", {
                className: "bg-gray-50 dark:bg-gray-700/30 p-4 rounded-lg",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between items-start",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: contact.name
                    }), /* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: contact.relation
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: contact.contactno
                    }), contact.landline && /* @__PURE__ */ jsxs("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: ["Landline: ", contact.landline]
                    })]
                  })]
                })
              }, index)) : /* @__PURE__ */ jsx("div", {
                className: "col-span-2 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",
                children: /* @__PURE__ */ jsx("p", {
                  className: "text-gray-600 dark:text-gray-300",
                  children: "No emergency contacts available"
                })
              })
            })]
          })]
        }), activeTab === "professional" && /* @__PURE__ */ jsxs("div", {
          className: "p-6",
          children: [/* @__PURE__ */ jsxs("h2", {
            className: "text-xl font-semibold text-gray-800 dark:text-white mb-6 flex items-center",
            children: [/* @__PURE__ */ jsx(Briefcase, {
              className: "mr-2 text-red-600",
              size: 20
            }), "Professional Information"]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-6",
              children: [/* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Employment Details"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-4",
                  children: [/* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Staff ID"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.staff_id
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Department"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.department
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Designation"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.designation || "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Date of Joining"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.dateofjoining ? new Date(employee.basic.dateofjoining).toLocaleDateString() : "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "PAN Number"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.pannumber || "Not available"
                    })]
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "text-sm text-gray-500 dark:text-gray-400",
                      children: "Aadhar Number"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: employee.basic.aadharnumber || "Not available"
                    })]
                  })]
                })]
              }), employee.software && employee.software.length > 0 && /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Software Skills"
                }), /* @__PURE__ */ jsx("div", {
                  className: "space-y-3",
                  children: employee.software.map((skill, index) => /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between items-center mb-1",
                      children: [/* @__PURE__ */ jsx("span", {
                        className: "text-sm font-medium text-gray-800 dark:text-white",
                        children: skill.software_id === 1 ? "AutoCAD" : skill.software_id === 2 ? "Revit" : `Software ${skill.software_id}`
                      }), /* @__PURE__ */ jsx("span", {
                        className: "text-xs text-gray-500 dark:text-gray-400",
                        children: skill.proficiency
                      })]
                    }), /* @__PURE__ */ jsx("div", {
                      className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",
                      children: /* @__PURE__ */ jsx("div", {
                        className: `h-2 rounded-full ${skill.proficiency === "Advanced" ? "bg-green-500" : skill.proficiency === "Intermediate" ? "bg-blue-500" : "bg-yellow-500"}`,
                        style: {
                          width: skill.proficiency === "Advanced" ? "90%" : skill.proficiency === "Intermediate" ? "60%" : "30%"
                        }
                      })
                    }), skill.remark && /* @__PURE__ */ jsxs("p", {
                      className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                      children: ["Remark: ", skill.remark]
                    })]
                  }, index))
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-6",
              children: [employee.education && employee.education.length > 0 && /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsxs("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4 flex items-center",
                  children: [/* @__PURE__ */ jsx(GraduationCap, {
                    className: "mr-2 text-red-600",
                    size: 20
                  }), "Education"]
                }), /* @__PURE__ */ jsx("div", {
                  className: "space-y-4",
                  children: employee.education.map((edu, index) => /* @__PURE__ */ jsx("div", {
                    className: "bg-gray-50 dark:bg-gray-700/30 p-4 rounded-lg",
                    children: /* @__PURE__ */ jsxs("div", {
                      className: "flex justify-between items-start",
                      children: [/* @__PURE__ */ jsxs("div", {
                        children: [/* @__PURE__ */ jsx("p", {
                          className: "font-medium text-gray-800 dark:text-white",
                          children: edu.degree
                        }), /* @__PURE__ */ jsx("p", {
                          className: "text-sm text-gray-500 dark:text-gray-400",
                          children: edu.institute
                        })]
                      }), /* @__PURE__ */ jsxs("div", {
                        className: "text-right",
                        children: [/* @__PURE__ */ jsx("p", {
                          className: "text-sm text-gray-800 dark:text-white",
                          children: edu.passing
                        }), /* @__PURE__ */ jsxs("p", {
                          className: "text-sm text-gray-500 dark:text-gray-400",
                          children: [edu.percentage, "%"]
                        })]
                      })]
                    })
                  }, index))
                })]
              }), employee.languages && employee.languages.length > 0 && /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",
                  children: "Languages"
                }), /* @__PURE__ */ jsx("div", {
                  className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                  children: employee.languages.map((lang, index) => /* @__PURE__ */ jsxs("div", {
                    className: "bg-gray-50 dark:bg-gray-700/30 p-4 rounded-lg",
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "font-medium text-gray-800 dark:text-white",
                      children: lang.language_id === 1 ? "Tamil" : lang.language_id === 2 ? "English" : `Language ${lang.language_id}`
                    }), /* @__PURE__ */ jsxs("div", {
                      className: "mt-2 flex flex-wrap gap-2",
                      children: [lang.can_read && /* @__PURE__ */ jsx("span", {
                        className: "px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",
                        children: "Read"
                      }), lang.can_write && /* @__PURE__ */ jsx("span", {
                        className: "px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",
                        children: "Write"
                      }), lang.can_speak && /* @__PURE__ */ jsx("span", {
                        className: "px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",
                        children: "Speak"
                      })]
                    }), lang.proficiency && /* @__PURE__ */ jsxs("p", {
                      className: "mt-2 text-sm text-gray-600 dark:text-gray-300",
                      children: ["Proficiency: ", lang.proficiency]
                    }), lang.remark && /* @__PURE__ */ jsxs("p", {
                      className: "mt-1 text-xs text-gray-500 dark:text-gray-400",
                      children: ["Remark: ", lang.remark]
                    })]
                  }, index))
                })]
              })]
            })]
          })]
        }), activeTab === "documents" && renderDocumentsTab(), activeTab === "report" && /* @__PURE__ */ jsx(EmployeeSummary, {
          staff_id: employee.basic.staff_id,
          staff: employee.basic
        })]
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showCreateModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowCreateModal(false),
      title: "Create New FeedBack",
      children: /* @__PURE__ */ jsx(FeedbackForm, {
        employee,
        onSuccess: handleCreateSuccess,
        onCancel: () => setShowCreateModal(false)
      })
    })]
  });
};
const EmployeeProfile$1 = withComponentProps(EmployeeProfile);
const route35 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: EmployeeProfile$1
}, Symbol.toStringTag, { value: "Module" }));
const TaskMemberMeetingForm = ({ memberData, onSuccess, onCancel }) => {
  console.log("projectcodeee", memberData);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [participants, setParticipants] = useState([]);
  const [customTargets, setCustomTargets] = useState([]);
  const [branches, setBranches] = useState([]);
  const [teams, setTeams] = useState([]);
  const [staffOptions, setStaffOptions] = useState([]);
  const [showParticipants, setShowParticipants] = useState(false);
  const [showCustomTargets, setShowCustomTargets] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const permissions = useAuthStore((state) => state.permissions);
  permissions[0].role;
  useBranchStore$1((state) => state.branchCodeOptions);
  useAuthStore((state) => state.branchcode);
  const [filterTargets, setFilterTargets] = useState([
    {
      type: "",
      branchcode: "",
      teamId: "",
      staffType: "staff"
    }
  ]);
  const [formData, setFormData] = useState({
    branchcode: memberData.branchcode,
    task_participants: memberData.participants_id,
    title: "",
    notes: "",
    comm_type: "meeting",
    status: "active",
    doc_status: "none",
    meet_link: "",
    start_date_time: "2025-02-01T00:00:00Z,",
    end_date_time: "2025-02-01T23:59:59Z",
    category: "branch",
    field: "custom",
    doc: [],
    custom: [],
    communication_participants: []
  });
  useEffect(() => {
    const fetchInitialData = async () => {
      try {
        const branchesRes = await axios.get(`${BASE_URL}/branch/dropdown`, {
          headers: { Authorization: `Bearer ${token}` }
        });
        setBranches(branchesRes.data.result);
      } catch (err) {
        console.error("Error fetching initial data:", err);
        toast$1.error("Failed to load initial data");
      }
    };
    fetchInitialData();
  }, [token]);
  useEffect(() => {
    const branchcodes = [
      ...new Set(
        filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode)
      )
    ];
    const fetchTeamsForBranches = async () => {
      try {
        const teamsPromises = branchcodes.map(async (branchcode) => {
          const teamsRes = await axios.get(
            `${BASE_URL}/teams/read?branchcode=${branchcode}`,
            { headers: { Authorization: `Bearer ${token}` } }
          );
          return teamsRes.data.data;
        });
        const teamsResults = await Promise.all(teamsPromises);
        setTeams(teamsResults.flat());
      } catch (err) {
        console.error("Error fetching teams:", err);
        toast$1.error("Failed to load teams");
      }
    };
    if (branchcodes.length > 0) {
      fetchTeamsForBranches();
    }
  }, [filterTargets, token]);
  useEffect(() => {
    if (formData.category === "custom") {
      fetchCustomParticipants();
    } else if (formData.category === "branch" && formData.branchcode) {
      fetchBranchParticipants();
    } else if (formData.category === "team") {
      fetchTeamParticipants();
    }
  }, [formData.category, formData.branchcode, filterTargets]);
  const fetchBranchParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchTeamParticipants = async () => {
    try {
      const response = await axios.post(
        `${BASE_URL}/users/filter`,
        {
          branch: [formData.branchcode],
          team: [],
          type: ["staff", "client"]
        },
        { headers: { Authorization: `Bearer ${token}` } }
      );
      setStaffOptions([...response.data.staff, ...response.data.client]);
    } catch (err) {
      console.error("Error fetching branch participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const fetchCustomParticipants = async () => {
    try {
      const branchFilters = filterTargets.filter((target) => target.type === "branch" && target.branchcode).map((target) => target.branchcode);
      const teamFilters = filterTargets.filter(
        (target) => target.type === "team" && target.teamId && target.branchcode
      ).map((target) => {
        const teamIdParts = target.teamId.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        return `${target.branchcode}/TEAM/${teamId}`;
      });
      const teamBranchFilters = filterTargets.filter((target) => target.type === "team" && target.branchcode).map((target) => target.branchcode);
      const allBranchFilters = [
        .../* @__PURE__ */ new Set([...branchFilters, ...teamBranchFilters])
      ];
      const staffTypeFilters = [];
      filterTargets.forEach((target) => {
        if (target.type === "branch" || target.type === "team") {
          if (target.staffType === "staff") staffTypeFilters.push("staff");
          if (target.staffType === "client") staffTypeFilters.push("client");
          if (target.staffType === "both") {
            staffTypeFilters.push("staff");
            staffTypeFilters.push("client");
          }
        }
      });
      const uniqueStaffTypes = [...new Set(staffTypeFilters)];
      console.log("Sending filter request with:", {
        branch: allBranchFilters,
        team: teamFilters,
        type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
      });
      if (allBranchFilters.length > 0 || teamFilters.length > 0) {
        const response = await axios.post(
          `${BASE_URL}/users/filter`,
          {
            branch: allBranchFilters,
            team: teamFilters,
            type: uniqueStaffTypes.length > 0 ? uniqueStaffTypes : ["staff", "client"]
          },
          { headers: { Authorization: `Bearer ${token}` } }
        );
        setStaffOptions([...response.data.staff, ...response.data.client]);
      } else {
        setStaffOptions([]);
      }
    } catch (err) {
      console.error("Error fetching custom participants:", err);
      toast$1.error("Failed to fetch participants");
    }
  };
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
    if (name === "category") {
      setCustomTargets([]);
      setFilterTargets([
        { type: "", branchcode: "", teamId: "", staffType: "staff" }
      ]);
    }
  };
  const handleFileUpload = (e) => {
    const files = Array.from(e.target.files);
    if (files.length === 0) return;
    const uploadedFiles = files.map((file) => ({
      file,
      // Store the actual File object
      name: file.name,
      type: file.type.split("/")[1] || "file"
    }));
    setFormData((prev) => ({
      ...prev,
      doc: [...prev.doc, ...uploadedFiles]
    }));
  };
  const removeFile = (index) => {
    setFormData((prev) => {
      const updatedFiles = [...prev.doc];
      updatedFiles.splice(index, 1);
      return { ...prev, doc: updatedFiles };
    });
  };
  const addParticipant = (person) => {
    if (!participants.some((p) => p.person_id === person.person_id)) {
      setParticipants([
        ...participants,
        {
          person_id: person.person_id,
          role: person.role,
          isdocvisible: formData.comm_type === "doc"
        }
      ]);
    }
  };
  const removeParticipant = (personId) => {
    setParticipants(participants.filter((p) => p.person_id !== personId));
  };
  const toggleDocVisibility = (personId) => {
    setParticipants(
      participants.map(
        (p) => p.person_id === personId ? { ...p, isdocvisible: !p.isdocvisible } : p
      )
    );
  };
  const addCustomTarget = (type, id) => {
    if (type === "team") {
      const target = filterTargets.find(
        (t) => t.type === "team" && t.teamId === id
      );
      if (target && target.branchcode) {
        const teamIdParts = id.split("/");
        const teamId = teamIdParts[teamIdParts.length - 1];
        const formattedId = `${target.branchcode}/TEAM/${teamId}`;
        if (!customTargets.some(
          (t) => t.target_id === formattedId && t.type === type
        )) {
          setCustomTargets([
            ...customTargets,
            { target_id: formattedId, type }
          ]);
        }
        return;
      }
    }
    if (!customTargets.some((t) => t.target_id === id && t.type === type)) {
      setCustomTargets([...customTargets, { target_id: id, type }]);
    }
  };
  const handleFilterTargetChange = (index, field, value) => {
    const updatedTargets = [...filterTargets];
    updatedTargets[index][field] = value;
    if (field === "type") {
      updatedTargets[index].branchcode = "";
      updatedTargets[index].teamId = "";
    } else if (field === "branchcode" && updatedTargets[index].type === "team") {
      updatedTargets[index].teamId = "";
    }
    setFilterTargets(updatedTargets);
  };
  const addFilterTarget = () => {
    setFilterTargets([
      ...filterTargets,
      { type: "", branchcode: "", teamId: "", staffType: "staff" }
    ]);
  };
  const removeFilterTarget = (index) => {
    var _a, _b, _c, _d;
    if (filterTargets.length > 1) {
      const updatedTargets = [...filterTargets];
      updatedTargets.splice(index, 1);
      setFilterTargets(updatedTargets);
      if (((_a = updatedTargets[index]) == null ? void 0 : _a.type) === "branch" && ((_b = updatedTargets[index]) == null ? void 0 : _b.branchcode)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "branch" && t.target_id === updatedTargets[index].branchcode)
          )
        );
      } else if (((_c = updatedTargets[index]) == null ? void 0 : _c.type) === "team" && ((_d = updatedTargets[index]) == null ? void 0 : _d.teamId)) {
        setCustomTargets(
          customTargets.filter(
            (t) => !(t.type === "team" && t.target_id === updatedTargets[index].teamId)
          )
        );
      }
    }
  };
  const handleSubmit = async (e) => {
    var _a, _b;
    e.preventDefault();
    setLoading(true);
    try {
      const meetingData = {
        branchcode: taskData.branchcode,
        task_id: taskData.id,
        title: formData.title,
        notes: formData.notes,
        comm_type: formData.comm_type,
        status: formData.status,
        meet_link: formData.meet_link,
        start_date_time: formData.start_date_time,
        end_date_time: formData.end_date_time,
        doc_status: formData.doc_status,
        category: formData.category,
        field: formData.field,
        custom: customTargets,
        communication_participants: participants
      };
      const formDataToSend = new FormData();
      formDataToSend.append("data", JSON.stringify([meetingData]));
      formData.doc.forEach((fileObj) => {
        formDataToSend.append("URL", fileObj.file);
      });
      console.log("formataaaanew form", formDataToSend);
      const response = await axios.post(
        `${BASE_URL}/doc_meet/create`,
        formDataToSend,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "multipart/form-data"
          }
        }
      );
      if (response.status === 201) {
        onSuccess();
        setFormData({
          branchcode: project.branchcode,
          client_code: project.client_code,
          project_code: project.project_code,
          title: "",
          notes: "",
          comm_type: "meeting",
          status: "active",
          doc_status: "none",
          meet_link: "",
          start_date_time: "2025-02-01T00:00:00Z,",
          end_date_time: "2025-02-01T23:59:59Z",
          category: "branch",
          field: "custom",
          doc: [],
          custom: [],
          communication_participants: []
        });
      } else {
        setError(response.data.message || "Failed to create communication");
      }
    } catch (err) {
      setError(((_b = (_a = err.response) == null ? void 0 : _a.data) == null ? void 0 : _b.message) || "An error occurred");
      toast$1.error(
        `Error creating ${formData.comm_type === "meeting" ? "meeting" : "document"}`
      );
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 dark:bg-gray-800 bg-white p-6 rounded-lg", children: [
    /* @__PURE__ */ jsx(Toaster, { position: toastposition }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700", children: [
        formData.comm_type === "meeting" ? /* @__PURE__ */ jsx(Video, { className: "inline mr-2" }) : /* @__PURE__ */ jsx(FileUp, { className: "inline mr-2" }),
        formData.comm_type === "meeting" ? "Meeting Information" : "Document Information"
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
            " Title",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "title",
              value: formData.title,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "text",
              placeholder: "Title",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Type",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "comm_type",
              value: formData.comm_type,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "meeting", children: "Meeting" }),
                /* @__PURE__ */ jsx("option", { value: "doc", children: "Document" }),
                /* @__PURE__ */ jsx("option", { value: "followup", children: "Follow-up" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "status",
              value: formData.status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "active", children: "Active" }),
                /* @__PURE__ */ jsx("option", { value: "completed", children: "Completed" }),
                /* @__PURE__ */ jsx("option", { value: "declined", children: "Declined" })
              ]
            }
          )
        ] }),
        formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(File, { className: "inline mr-1", size: 14 }),
            " Document Status"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "doc_status",
              value: formData.doc_status,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "none", children: "None" }),
                /* @__PURE__ */ jsx("option", { value: "archived", children: "Archived" }),
                /* @__PURE__ */ jsx("option", { value: "verified-closed", children: "Verified & Closed" }),
                /* @__PURE__ */ jsx("option", { value: "rework", children: "Rework" })
              ]
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Link$2, { className: "inline mr-1", size: 14 }),
            " Meeting Link",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "meet_link",
              value: formData.meet_link,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "url",
              placeholder: "https://meet.google.com/example",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Calendar, { className: "inline mr-1", size: 14 }),
            " Start Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "start_date_time",
              value: formData.start_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        formData.comm_type === "meeting" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Clock, { className: "inline mr-1", size: 14 }),
            " End Date/Time",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              name: "end_date_time",
              value: formData.end_date_time,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              type: "datetime-local",
              required: true
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(Users, { className: "inline mr-1", size: 14 }),
            " Category",
            /* @__PURE__ */ jsx("span", { className: "text-red-700 text-lg m-2", children: "*" })
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "category",
              value: formData.category,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              required: true,
              children: [
                /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                /* @__PURE__ */ jsx("option", { value: "team", children: "Team" }),
                /* @__PURE__ */ jsx("option", { value: "all", children: "All" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
          /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: [
            /* @__PURE__ */ jsx(ClipboardList, { className: "inline mr-1", size: 14 }),
            " Field"
          ] }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              name: "field",
              value: formData.field,
              onChange: handleChange,
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "project", children: "Project" }),
                /* @__PURE__ */ jsx("option", { value: "task", children: "Task" }),
                /* @__PURE__ */ jsx("option", { value: "lead", children: "Lead" }),
                /* @__PURE__ */ jsx("option", { value: "custom", children: "Custom" })
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileText, { className: "inline mr-1", size: 14 }),
          " Notes"
        ] }),
        /* @__PURE__ */ jsx(
          "textarea",
          {
            name: "notes",
            value: formData.notes,
            onChange: handleChange,
            className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 focus:outline-none min-h-[100px]",
            placeholder: "Notes...",
            required: true
          }
        )
      ] }),
      formData.comm_type === "doc" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs("p", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2", children: [
          /* @__PURE__ */ jsx(FileUp, { className: "inline mr-1", size: 14 }),
          " Documents"
        ] }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "file",
            id: "file-upload",
            multiple: true,
            onChange: handleFileUpload,
            className: "w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[var(--color-primary)] file:text-white hover:file:bg-[var(--color-hover)]"
          }
        ),
        formData.doc.length > 0 && /* @__PURE__ */ jsx("div", { className: "mt-4 space-y-2", children: formData.doc.map((file, index) => /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
            children: [
              /* @__PURE__ */ jsx("span", { className: "text-sm", children: file.name }),
              /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => removeFile(index),
                  className: "text-red-500 hover:text-red-700",
                  children: /* @__PURE__ */ jsx(X, { size: 16 })
                }
              )
            ]
          },
          index
        )) })
      ] }),
      formData.category === "custom" && /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowCustomTargets(!showCustomTargets),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Custom Filters (",
                customTargets.length,
                ")"
              ] }),
              showCustomTargets ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showCustomTargets && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          filterTargets.map((target, index) => /* @__PURE__ */ jsxs(
            "div",
            {
              className: "space-y-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",
              children: [
                /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center", children: [
                  /* @__PURE__ */ jsxs("h5", { className: "text-sm font-medium", children: [
                    "Filter ",
                    index + 1
                  ] }),
                  filterTargets.length > 1 && /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeFilterTarget(index),
                      className: "text-red-500 hover:text-red-700 p-1",
                      children: /* @__PURE__ */ jsx(Minus, { size: 16 })
                    }
                  )
                ] }),
                /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
                  /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Filter Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.type,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "type",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select filter type" }),
                          /* @__PURE__ */ jsx("option", { value: "branch", children: "Branch" }),
                          /* @__PURE__ */ jsx("option", { value: "team", children: "Team" })
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Branch" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.branchcode,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "branchcode",
                            e.target.value
                          );
                          handleFilterTargetChange(index, "teamId", "");
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select branch" }),
                          branches.map((branch2) => /* @__PURE__ */ jsxs(
                            "option",
                            {
                              value: branch2.branchcode,
                              children: [
                                branch2.branchcode,
                                " - ",
                                branch2.name
                              ]
                            },
                            branch2.branchcode
                          ))
                        ]
                      }
                    )
                  ] }),
                  target.type === "team" && target.branchcode && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Team" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.teamId,
                        onChange: (e) => {
                          handleFilterTargetChange(
                            index,
                            "teamId",
                            e.target.value
                          );
                          if (e.target.value) {
                            addCustomTarget("team", e.target.value);
                          }
                        },
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "", children: "Select team" }),
                          teams.filter(
                            (team) => team.branchcode === target.branchcode
                          ).map((team) => /* @__PURE__ */ jsx("option", { value: team.team_id, children: team.team_name }, team.team_id))
                        ]
                      }
                    )
                  ] }),
                  (target.type === "branch" || target.type === "team") && /* @__PURE__ */ jsxs("div", { children: [
                    /* @__PURE__ */ jsx("label", { className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider", children: "Staff Type" }),
                    /* @__PURE__ */ jsxs(
                      "select",
                      {
                        value: target.staffType,
                        onChange: (e) => handleFilterTargetChange(
                          index,
                          "staffType",
                          e.target.value
                        ),
                        className: "w-full bg-white dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 p-2 rounded border border-gray-300 dark:border-gray-600 focus:outline-none",
                        children: [
                          /* @__PURE__ */ jsx("option", { value: "staff", children: "Staff" }),
                          /* @__PURE__ */ jsx("option", { value: "client", children: "Client" }),
                          /* @__PURE__ */ jsx("option", { value: "both", children: "Both" })
                        ]
                      }
                    )
                  ] })
                ] }),
                target.type === "branch" && target.branchcode && /* @__PURE__ */ jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ jsx(
                  "button",
                  {
                    type: "button",
                    onClick: () => addCustomTarget("branch", target.branchcode),
                    className: "text-xs bg-red-700 hover:bg-red-700 text-white px-2 py-1 rounded",
                    children: "Add Branch Filter"
                  }
                ) })
              ]
            },
            index
          )),
          /* @__PURE__ */ jsxs(
            "button",
            {
              type: "button",
              onClick: addFilterTarget,
              className: "flex items-center text-sm text-blue-500 hover:text-blue-700",
              children: [
                /* @__PURE__ */ jsx(Plus, { size: 16, className: "mr-1" }),
                "Add Another Filter"
              ]
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700", children: [
        /* @__PURE__ */ jsxs(
          "div",
          {
            className: "flex justify-between items-center cursor-pointer",
            onClick: () => setShowParticipants(!showParticipants),
            children: [
              /* @__PURE__ */ jsxs("h4", { className: "text-sm font-semibold", children: [
                /* @__PURE__ */ jsx(Users, { className: "inline mr-2", size: 16 }),
                "Participants (",
                participants.length,
                ")"
              ] }),
              showParticipants ? /* @__PURE__ */ jsx(ChevronUp, { size: 16 }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16 })
            ]
          }
        ),
        showParticipants && /* @__PURE__ */ jsxs("div", { className: "mt-4 space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: formData.category === "custom" ? "Select participants from filtered results" : `Select participants from ${formData.category}` }),
            staffOptions.length > 0 ? /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: staffOptions.map((person) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    person.person_id,
                    " (",
                    person.role,
                    ")"
                  ] }),
                  participants.some(
                    (p) => p.person_id === person.person_id
                  ) ? /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => removeParticipant(person.person_id),
                      className: "text-red-500 hover:text-red-700",
                      children: /* @__PURE__ */ jsx(X, { size: 16 })
                    }
                  ) : /* @__PURE__ */ jsx(
                    "button",
                    {
                      type: "button",
                      onClick: () => addParticipant(person),
                      className: "text-green-500 hover:text-green-700",
                      children: /* @__PURE__ */ jsx(Check, { size: 16 })
                    }
                  )
                ]
              },
              person.person_id
            )) }) : /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-500", children: "No participants available based on current filters" })
          ] }),
          participants.length > 0 && /* @__PURE__ */ jsxs("div", { className: "mt-4", children: [
            /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-500 mb-2", children: "Selected Participants" }),
            /* @__PURE__ */ jsx("div", { className: "space-y-2", children: participants.map((participant) => /* @__PURE__ */ jsxs(
              "div",
              {
                className: "flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-700 rounded",
                children: [
                  /* @__PURE__ */ jsxs("span", { children: [
                    participant.person_id,
                    " (",
                    participant.role,
                    ")"
                  ] }),
                  /* @__PURE__ */ jsxs("div", { className: "flex items-center space-x-2", children: [
                    formData.comm_type === "doc" && /* @__PURE__ */ jsxs("label", { className: "flex items-center space-x-1", children: [
                      /* @__PURE__ */ jsx(
                        "input",
                        {
                          type: "checkbox",
                          checked: participant.isdocvisible,
                          onChange: () => toggleDocVisibility(participant.person_id),
                          className: "rounded"
                        }
                      ),
                      /* @__PURE__ */ jsx("span", { className: "text-xs", children: "View Doc" })
                    ] }),
                    /* @__PURE__ */ jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => removeParticipant(participant.person_id),
                        className: "text-red-500 hover:text-red-700",
                        children: /* @__PURE__ */ jsx(X, { size: 16 })
                      }
                    )
                  ] })
                ]
              },
              participant.person_id
            )) })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "button",
          className: "px-5 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 font-medium text-sm",
          onClick: onCancel,
          disabled: loading,
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          type: "submit",
          className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
          onClick: handleSubmit,
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : formData.comm_type === "meeting" ? "Create Meeting" : "Upload Document"
        }
      )
    ] })
  ] });
};
const TaskMemberViewPage = () => {
  const [memberData, setMemberData] = useState(null);
  const [timeEntries, setTimeEntries] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isCheckedIn, setIsCheckedIn] = useState(false);
  const [showCompleteForm, setShowCompleteForm] = useState(false);
  const [delayReason, setDelayReason] = useState("");
  const [delayBy, setDelayBy] = useState("member");
  const [currentPage, setCurrentPage] = useState(1);
  const [totalItem, setTotalItem] = useState(0);
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const navigate = useNavigate();
  const [showMeetingModal, setShowMeetingModal] = useState(false);
  const fetchMemberData = async () => {
    var _a;
    try {
      setLoading(true);
      const response = await axios.get(`${BASE_URL}/project/task/members/read?participants_id=${id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setMemberData(response.data.data[0]);
      setTotalItem((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.totalDocuments);
      fetchTimeEntries();
    } catch (err) {
      setError(err.message);
      setLoading(false);
    }
  };
  const fetchTimeEntries = async () => {
    try {
      const response = await axios.get(`${BASE_URL}/project/task/checkinout/read?participants_id=${id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      setTimeEntries(response.data.data);
      if (response.data.data.length > 0 && !response.data.data[0].check_out) {
        setIsCheckedIn(true);
      }
      setLoading(false);
    } catch (err) {
      setError(err.message);
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchMemberData();
  }, [id]);
  const handleCheckInOut = async (isCheckIn) => {
    try {
      await axios.post(`${BASE_URL}/project/task/checkinout/create`, {
        data: {
          participants_id: parseInt(id)
        }
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      toast$1.success(isCheckIn ? "Checked in successfully!" : "Checked out successfully!");
      fetchTimeEntries();
      setIsCheckedIn(isCheckIn);
    } catch (err) {
      toast$1.error(`Failed to ${isCheckIn ? "check in" : "check out"}`);
      console.error(err);
    }
  };
  const handleTaskComplete = async () => {
    try {
      const data = {
        participants_id: parseInt(id),
        status: "archived"
      };
      if (showCompleteForm) {
        data.delay_by = delayBy;
        data.delay_reason = delayReason;
      }
      await axios.post(`${BASE_URL}/project/task/checkinout/create`, {
        data
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (isCheckedIn) {
        await handleCheckInOut(false);
      }
      toast$1.success("Task marked as completed!");
      fetchMemberData();
      setShowCompleteForm(false);
    } catch (err) {
      toast$1.error("Failed to complete task");
      console.error(err);
    }
  };
  const formatDuration = (minutes) => {
    const hours = Math.floor(minutes / 60);
    const mins = minutes % 60;
    return `${hours.toString().padStart(2, "0")}:${mins.toString().padStart(2, "0")}`;
  };
  const timeEntriesThead = () => [{
    data: "Date"
  }, {
    data: "Check In"
  }, {
    data: "Check Out"
  }, {
    data: "Duration"
  }];
  const timeEntriesTbody = () => {
    return timeEntries.map((entry2) => ({
      id: entry2.id,
      data: [{
        data: new Date(entry2.check_in).toLocaleDateString()
      }, {
        data: new Date(entry2.check_in).toLocaleTimeString()
      }, {
        data: entry2.check_out ? new Date(entry2.check_out).toLocaleTimeString() : "-"
      }, {
        data: formatDuration(entry2.duration)
      }]
    }));
  };
  const handleMeetingSuccess = () => {
    setShowMeetingModal(false);
    toast$1.success("Meeting and Document Created successfully!");
  };
  if (loading) return /* @__PURE__ */ jsx("div", {
    className: "p-4",
    children: "Loading..."
  });
  if (error) return /* @__PURE__ */ jsxs("div", {
    className: "p-4 text-red-500",
    children: ["Error: ", error]
  });
  if (!memberData) return /* @__PURE__ */ jsx("div", {
    className: "p-4",
    children: "No member data found"
  });
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx(Toaster, {
        position: toastposition
      }), /* @__PURE__ */ jsx("div", {
        className: "p-4 text-red-700 mb-10",
        children: /* @__PURE__ */ jsxs("div", {
          className: "flex gap-5",
          children: [/* @__PURE__ */ jsx("h1", {
            className: "text-2xl font-bold",
            children: "Task Member Overview"
          }), /* @__PURE__ */ jsxs("div", {
            className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-3 mt-2 ${memberData.status === "archived" ? "bg-green-100 text-green-800 dark:bg-green-800/25 dark:text-green-400" : memberData.status === "drop" ? "bg-red-100 text-red-800 dark:bg-red-800/25 dark:text-red-400" : "bg-yellow-100 text-yellow-800 dark:bg-yellow-800/25 dark:text-yellow-400"}`,
            children: [/* @__PURE__ */ jsx(Dot, {}), memberData.status]
          })]
        })
      }), /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsxs("button", {
          className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
          onClick: () => navigate(-1),
          children: [/* @__PURE__ */ jsx(LogOut, {
            className: "inline rotate-180 text-gray-500 mr-3"
          }), "Go Back"]
        })
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "w-full max-w-full mx-auto p-10 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-4",
      children: [/* @__PURE__ */ jsx("h2", {
        className: "text-xl font-bold text-gray-600 dark:text-white",
        children: memberData.staff_name
      }), /* @__PURE__ */ jsx("div", {
        className: "flex justify-end",
        children: /* @__PURE__ */ jsxs("button", {
          onClick: () => setShowMeetingModal(true),
          className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
          children: ["New Meeting", " ", /* @__PURE__ */ jsx(MessageSquareText, {
            className: "ml-2",
            size: 15
          })]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-300",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: [/* @__PURE__ */ jsx(User, {
              className: "inline mr-2",
              size: 16
            }), " Staff ID:"]
          }), " ", memberData.staff_id]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Project:"
          }), " ", memberData.projecttitle]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Milestone:"
          }), " ", memberData.milestonetitle]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Task:"
          }), " ", memberData.task_title]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Sub Task:"
          }), " ", memberData.subtask_title]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Status:"
          }), " ", memberData.status]
        }), memberData.start_date && /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("span", {
            className: "font-medium text-green-700 dark:text-gray-100",
            children: [/* @__PURE__ */ jsx(CalendarCheck2, {
              className: "inline mr-2",
              size: 16
            }), " Start Date:"]
          }), " ", new Date(memberData.start_date).toLocaleDateString()]
        }), memberData.end_date && /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("span", {
            className: "font-medium text-red-700 dark:text-gray-100",
            children: [/* @__PURE__ */ jsx(CalendarClock, {
              className: "inline mr-2",
              size: 16
            }), " End Date:"]
          }), " ", new Date(memberData.end_date).toLocaleDateString()]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-gray-700 dark:text-gray-100",
              children: "Priority:"
            }), " ", memberData.task_priority]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("span", {
              className: "font-medium text-gray-700 dark:text-gray-100",
              children: "Assigned By:"
            }), " ", memberData.handlername]
          }), /* @__PURE__ */ jsx("span", {
            className: "font-medium text-gray-700 dark:text-gray-100",
            children: "Duration:"
          }), " ", memberData.task_duration ? formatDuration(memberData.task_duration) : "N/A"]
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "text-sm text-gray-700 dark:text-gray-200 mt-4",
        children: /* @__PURE__ */ jsxs("p", {
          children: [/* @__PURE__ */ jsx("span", {
            className: "font-semibold",
            children: "Task Description:"
          }), /* @__PURE__ */ jsx("br", {}), memberData.notes]
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex flex-wrap justify-end gap-4 mt-6",
        children: [!isCheckedIn ? /* @__PURE__ */ jsxs("button", {
          onClick: () => handleCheckInOut(true),
          className: "bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded flex items-center gap-2",
          children: [/* @__PURE__ */ jsx(AlarmClockCheck, {
            size: 18
          }), " Check In"]
        }) : /* @__PURE__ */ jsxs("button", {
          onClick: () => handleCheckInOut(false),
          className: "bg-red-100 hover:bg-red-200 text-red-700 px-6 py-2 rounded flex items-center gap-2",
          children: [/* @__PURE__ */ jsx(TimerOff, {
            size: 18
          }), " Check Out"]
        }), /* @__PURE__ */ jsxs("button", {
          onClick: () => setShowCompleteForm(!showCompleteForm),
          className: `px-3 py-2 rounded flex items-center gap-2 ${showCompleteForm ? "bg-gray-200 hover:bg-gray-300 text-gray-600" : "bg-blue-100 hover:bg-blue-200 text-blue-800"}`,
          children: [/* @__PURE__ */ jsx(CircleCheckBig, {
            size: 18
          }), showCompleteForm ? "Cancel Complete" : "Mark as Completion"]
        })]
      }), showCompleteForm && /* @__PURE__ */ jsxs("div", {
        className: "space-y-4 mt-6",
        children: [/* @__PURE__ */ jsx("h3", {
          className: "text-lg font-semibold border-b pb-2 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700",
          children: "Task Completion Details"
        }), memberData.end_date && /* @__PURE__ */ new Date() > new Date(memberData.end_date) ? /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "bg-blue-100 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
            children: [/* @__PURE__ */ jsx("p", {
              className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
              children: "Delay Reason"
            }), /* @__PURE__ */ jsxs("select", {
              value: delayBy,
              required: true,
              onChange: (e) => setDelayBy(e.target.value),
              className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
              children: [/* @__PURE__ */ jsx("option", {
                value: "member",
                children: "Member"
              }), /* @__PURE__ */ jsx("option", {
                value: "client",
                children: "Client"
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "bg-blue-100 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700 ",
            children: [/* @__PURE__ */ jsx("p", {
              className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
              children: "Reason for Delay"
            }), /* @__PURE__ */ jsx("textarea", {
              value: delayReason,
              onChange: (e) => setDelayReason(e.target.value),
              placeholder: "Explain the reason for delay",
              required: true,
              className: "w-[50%] bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none min-h-[50px]"
            })]
          })]
        }) : /* @__PURE__ */ jsx("div", {
          className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
          children: /* @__PURE__ */ jsx("p", {
            className: "text-green-600 dark:text-green-400 text-sm font-medium",
            children: "Task is being completed on time."
          })
        }), /* @__PURE__ */ jsx("div", {
          className: "flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",
          children: /* @__PURE__ */ jsx("button", {
            onClick: handleTaskComplete,
            className: "px-5 py-2 bg-red-700 hover:bg-red-800 dark:bg-red-800 dark:hover:bg-red-900 text-white rounded-md transition-colors duration-200 font-medium text-sm shadow-sm",
            children: "Confirm Completion"
          })
        })]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "w-[70%] max-w-[70%] mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg mt-6",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-xl font-semibold text-gray-600 dark:text-white mb-4",
          children: "Time Entries"
        }), /* @__PURE__ */ jsx(DataTable, {
          thead: timeEntriesThead,
          tbody: timeEntriesTbody
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-4",
          children: /* @__PURE__ */ jsx(CustomPagination, {
            total: timeEntries.length,
            currentPage,
            defaultPageSize: 10,
            onChange: setCurrentPage,
            paginationLabel: "time entries"
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "w-[25%] max-w-[25%] mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg space-y-4 mt-6",
        children: [/* @__PURE__ */ jsx("h1", {
          className: "text-xl font-semibold text-gray-600 dark:text-white",
          children: "Project Activity"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-gray-500",
          children: "Task progress and comments"
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsxs("select", {
              className: "w-full p-2 rounded-md border border-gray-300 bg-blue-200/25 dark:bg-gray-700 text-gray-600 dark:text-white focus:outline-none focus:border-gray-300",
              children: [/* @__PURE__ */ jsx("option", {
                children: "In Progress"
              }), /* @__PURE__ */ jsx("option", {
                children: "Completed"
              }), /* @__PURE__ */ jsx("option", {
                children: "To Do"
              })]
            })
          }), /* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsxs("select", {
              className: "w-full p-2 rounded-md bg-blue-200/25 dark:bg-gray-700 border border-gray-300 text-gray-800 dark:text-white focus:outline-none focus:border-gray-300",
              children: [/* @__PURE__ */ jsx("option", {
                children: "10%"
              }), /* @__PURE__ */ jsx("option", {
                children: "25%"
              }), /* @__PURE__ */ jsx("option", {
                children: "50%"
              }), /* @__PURE__ */ jsx("option", {
                children: "75%"
              }), /* @__PURE__ */ jsx("option", {
                children: "100%"
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "rounded-lg p-2 dark:bg-gray-700 space-y-4 h-auto",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-gray-500 dark:text-gray-200",
              children: "Comments"
            }), /* @__PURE__ */ jsx("textarea", {
              placeholder: "Post your comment",
              className: "w-full p-2 h-40 border mt-2 border-gray-200 rounded-md bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-white focus:outline-none focus:border-gray-200"
            })]
          }), /* @__PURE__ */ jsx("button", {
            className: "w-full bg-red-700 hover:bg-red-800 text-white p-2 rounded-md focus:outline-none",
            children: "Submit"
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx(Modal, {
      isVisible: showMeetingModal,
      className: "w-full md:w-[800px]",
      onClose: () => setShowMeetingModal(false),
      title: "Create Meeting",
      children: /* @__PURE__ */ jsx(TaskMemberMeetingForm, {
        memberData,
        onSuccess: handleMeetingSuccess,
        onCancel: () => setShowMeetingModal(false)
      })
    })]
  });
};
const TaskMemberCheckInOutView = withComponentProps(TaskMemberViewPage);
const route36 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: TaskMemberCheckInOutView
}, Symbol.toStringTag, { value: "Module" }));
const EmployeeReport = () => {
  var _a, _b;
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [userSummaryData, setUserSummaryData] = useState(null);
  const [startDate, setStartDate] = useState(null);
  const [endDate, setEndDate] = useState(null);
  const token = useAuthStore((state) => state.accessToken);
  const staff_id = useAuthStore((state) => state.staff_id);
  const fetchUserSummaryData = async () => {
    if (!staff_id || !startDate || !endDate) {
      setUserSummaryData(null);
      return;
    }
    setLoading(true);
    try {
      const formattedStartDate = formatDate2(startDate);
      const formattedEndDate = formatDate2(endDate);
      const url = `${BASE_URL}/report/usersummary/read?staff_id=${encodeURIComponent(staff_id)}&start_date=${formattedStartDate}&end_date=${formattedEndDate}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data) {
        setUserSummaryData(response.data);
      }
    } catch (error2) {
      console.error("Error fetching user summary data", error2);
      toast$1.error("Failed to fetch user summary data");
      setError("Failed to fetch data");
    } finally {
      setLoading(false);
    }
  };
  const formatDate2 = (date) => {
    if (!date) return "";
    const d = new Date(date);
    const year = d.getFullYear();
    const month = (d.getMonth() + 1).toString().padStart(2, "0");
    const day = d.getDate().toString().padStart(2, "0");
    return `${year}-${month}-${day}`;
  };
  const handleDateChange = (dates) => {
    const [start, end] = dates;
    setStartDate(start);
    setEndDate(end);
  };
  const handleOnExport = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary) || userSummaryData.data.projectsummary.length === 0) {
      toast$1.error("No data to export");
      return;
    }
    const dataToExport = userSummaryData.data.projectsummary.flatMap((project2) => project2.milestones_summary.flatMap((milestone) => milestone.taskparticipantsummary.map((participant) => ({
      project_code: project2.project_code,
      milestone_code: milestone.milestone_code,
      staff_id: participant.staff_id,
      staff_name: `${participant.firstname} ${participant.lastname}`,
      total_tasks: participant.total_tasks,
      total_duration_minutes: participant.total_duration_minutes,
      total_working_hours: (participant.total_duration_minutes / 60).toFixed(2),
      status: project2.status
    }))));
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(dataToExport);
    XLSX.utils.book_append_sheet(wb, ws, "EmployeeSummaryReport");
    XLSX.writeFile(wb, "EmployeeSummaryReport.xlsx");
  };
  const generateReport = () => {
    fetchUserSummaryData();
  };
  const formatDuration = (minutes) => {
    if (isNaN(minutes)) return "0 minutes";
    const hours = Math.floor(minutes / 60);
    const remainingMinutes = Math.round(minutes % 60);
    if (hours > 0 && remainingMinutes > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""} ${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${remainingMinutes} minute${remainingMinutes !== 1 ? "s" : ""}`;
    }
  };
  const projectSummaryThead = () => [{
    data: "Project Code"
  }, {
    data: "Status"
  }, {
    data: "Total Tasks"
  }, {
    data: "Total Duration"
  }];
  const projectSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    return userSummaryData.data.projectsummary.map((project2, index) => ({
      id: project2.project_code || index,
      data: [{
        data: project2.project_code
      }, {
        data: /* @__PURE__ */ jsxs("div", {
          className: `px-3 py-1 rounded-full text-sm inline-flex items-center ${project2.status === "completed" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`,
          children: [/* @__PURE__ */ jsx("span", {
            className: `w-2 h-2 rounded-full mr-2 ${project2.status === "completed" ? "bg-green-800" : "bg-red-700"}`
          }), project2.status.charAt(0).toUpperCase() + project2.status.slice(1)]
        })
      }, {
        data: project2.total_tasks
      }, {
        data: formatDuration(project2.total_duration_minutes)
      }]
    }));
  };
  const milestoneSummaryThead = () => [{
    data: "Milestone Code"
  }, {
    data: "Total Tasks"
  }, {
    data: "In Progress"
  }, {
    data: "Completed"
  }, {
    data: "Total Duration"
  }];
  const milestoneSummaryTbody = () => {
    var _a2;
    if (!((_a2 = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a2.projectsummary)) return [];
    const allMilestones = userSummaryData.data.projectsummary.flatMap((project2) => project2.milestones_summary.map((milestone) => ({
      ...milestone,
      project_code: project2.project_code
    })));
    return allMilestones.map((milestone, index) => ({
      id: milestone.milestone_code || index,
      data: [{
        data: milestone.milestone_code
      }, {
        data: milestone.total_tasks
      }, {
        data: milestone.total_inprogress
      }, {
        data: milestone.total_verified_closed
      }, {
        data: formatDuration(milestone.overall_task_duration)
      }]
    }));
  };
  return /* @__PURE__ */ jsx("div", {
    className: "flex flex-col min-h-screen",
    children: /* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [/* @__PURE__ */ jsx("div", {
        className: "flex justify-between items-center mb-4",
        children: /* @__PURE__ */ jsx("h2", {
          className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)] mb-5",
          children: "Employee Work Summary"
        })
      }), /* @__PURE__ */ jsx(Toaster, {
        position: toastposition,
        reverseOrder: false
      }), /* @__PURE__ */ jsx("div", {
        className: "flex flex-col gap-4 mb-5",
        children: /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-39",
          children: [/* @__PURE__ */ jsx("div", {
            className: "w-full",
            children: /* @__PURE__ */ jsx(DatePicker, {
              selectsRange: true,
              startDate,
              endDate,
              onChange: handleDateChange,
              placeholderText: "Select date range",
              className: "w-full p-2 border rounded h-[40px]",
              isClearable: true
            })
          }), /* @__PURE__ */ jsxs("button", {
            onClick: handleOnExport,
            className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-2 dark:bg-gray-800 dark:text-gray-300 py-2",
            disabled: !((_a = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _a.projectsummary),
            children: [/* @__PURE__ */ jsx(FileDown, {
              className: "mr-1"
            }), "Export Excel"]
          }), /* @__PURE__ */ jsx("button", {
            onClick: generateReport,
            className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
            disabled: !startDate || !endDate || loading,
            children: loading ? "Loading..." : "Generate Report"
          })]
        })
      }), userSummaryData && /* @__PURE__ */ jsxs("div", {
        className: "mb-6 p-4 bg-gray-200 dark:bg-gray-800 rounded-lg",
        children: [/* @__PURE__ */ jsx("h3", {
          className: "text-lg text-red-700 font-semibold mb-2",
          children: "Employee Summary"
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-3 gap-4",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsxs("p", {
              className: "text-sm text-gray-500 mb-3 flex items-center",
              children: [/* @__PURE__ */ jsx(Clock, {
                className: "mr-1",
                size: 16
              }), " Date Range"]
            }), /* @__PURE__ */ jsxs("p", {
              className: "font-medium",
              children: [new Date(userSummaryData.data.start_date).toLocaleDateString(), " - ", new Date(userSummaryData.data.end_date).toLocaleDateString()]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsxs("p", {
              className: "text-sm text-gray-500 mb-3 flex items-center",
              children: [/* @__PURE__ */ jsx(Hourglass, {
                className: "mr-1",
                size: 16
              }), " Total Working Hours"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-medium",
              children: formatDuration(userSummaryData.data.total_duration_minutes)
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsxs("p", {
              className: "text-sm text-gray-500 mb-3 flex items-center",
              children: [/* @__PURE__ */ jsx(Bookmark, {
                className: "mr-1",
                size: 16
              }), " Projects Worked"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-medium",
              children: userSummaryData.data.total_projects_worked
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsxs("p", {
              className: "text-sm text-gray-500 mb-3 flex items-center",
              children: [/* @__PURE__ */ jsx(List, {
                className: "mr-1",
                size: 16
              }), " Total Tasks"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-medium",
              children: userSummaryData.data.total_tasks
            })]
          })]
        })]
      }), loading && /* @__PURE__ */ jsx("div", {
        className: "text-center py-4",
        children: "Loading..."
      }), error && /* @__PURE__ */ jsx("div", {
        className: "text-red-500 text-center py-4",
        children: error
      }), ((_b = userSummaryData == null ? void 0 : userSummaryData.data) == null ? void 0 : _b.projectsummary) && /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsxs("div", {
          className: "mb-8",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold mb-4 flex items-center",
            children: [/* @__PURE__ */ jsx(Bookmark, {
              className: "mr-2",
              size: 20
            }), " Project Summary"]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead: projectSummaryThead,
              tbody: projectSummaryTbody,
              responsive: true,
              className: "min-w-full"
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mb-8",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-lg font-semibold mb-4 flex items-center",
            children: [/* @__PURE__ */ jsx(List, {
              className: "mr-2",
              size: 20
            }), " Milestone Summary"]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsx(DataTable, {
              thead: milestoneSummaryThead,
              tbody: milestoneSummaryTbody,
              responsive: true,
              className: "min-w-full"
            })
          })]
        })]
      }), !loading && !userSummaryData && /* @__PURE__ */ jsx("div", {
        className: "text-center py-10 text-gray-500",
        children: !startDate || !endDate ? "Please select date range to generate report" : "Click 'Generate Report' to view your work summary"
      })]
    })
  });
};
const EmployeeReport$1 = withComponentProps(EmployeeReport);
const route37 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: EmployeeReport$1
}, Symbol.toStringTag, { value: "Module" }));
const alminoSeal = "/assets/almino%20seal-iUl20hnK.png";
const ViewInvoice = () => {
  const navigate = useNavigate();
  const {
    invoice_id
  } = useParams();
  const [invoiceData, setInvoiceData] = useState(null);
  const [loading, setLoading] = useState(true);
  const token = useAuthStore((state) => state.accessToken);
  const {
    id
  } = useParams();
  const inv_id = decodeURIComponent(id);
  useEffect(() => {
    const fetchInvoiceData = async () => {
      try {
        const response = await axios.get(`${BASE_URL}/project/invoice/read?invoice_id=${inv_id}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        console.log("RESPONSEEE", Response);
        if (response.data.data && response.data.data.length > 0) {
          setInvoiceData(response.data.data[0]);
        }
        setLoading(false);
      } catch (error) {
        console.error("Error fetching invoice data:", error);
        setLoading(false);
      }
    };
    fetchInvoiceData();
  }, [invoice_id]);
  const handleGoBack = () => {
    navigate(-1);
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "p-4",
      children: "Loading invoice data..."
    });
  }
  if (!invoiceData) {
    return /* @__PURE__ */ jsx("div", {
      className: "p-4",
      children: "Invoice not found"
    });
  }
  const numberToWords = (num) => {
    const ones = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"];
    const tens = ["", "Ten", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];
    if (num === 0) return "Zero";
    let words = "";
    if (num >= 1e3) {
      words += ones[Math.floor(num / 1e3)] + " Thousand ";
      num %= 1e3;
    }
    if (num >= 100) {
      words += ones[Math.floor(num / 100)] + " Hundred ";
      num %= 100;
    }
    if (num >= 20) {
      words += tens[Math.floor(num / 10)] + " ";
      num %= 10;
    }
    if (num > 0) {
      words += ones[num] + " ";
    }
    return words.trim() + " Only";
  };
  const formatDate2 = (dateString) => {
    if (!dateString) return "";
    const date = new Date(dateString);
    return `${date.getDate().toString().padStart(2, "0")}/${(date.getMonth() + 1).toString().padStart(2, "0")}/${date.getFullYear()}`;
  };
  return /* @__PURE__ */ jsxs("div", {
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx("div", {
        className: "p-4 text-red-700 mb-10",
        children: /* @__PURE__ */ jsx("h1", {
          className: "text-2xl font-bold",
          children: "View Invoice Page"
        })
      }), /* @__PURE__ */ jsx("div", {
        children: /* @__PURE__ */ jsxs("button", {
          className: "text-gray-500 bg-gray-200 px-3 py-1 rounded-lg mt-6",
          onClick: handleGoBack,
          children: [/* @__PURE__ */ jsx(LogOut, {
            className: "inline rotate-180 text-gray-500 mr-3"
          }), "Go Back"]
        })
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "p-8 w-[794px] mx-auto border border-gray-400 text-[12px] font-sans bg-white ",
      children: /* @__PURE__ */ jsxs("div", {
        className: "border border-gray-600 m-5 p-1",
        children: [/* @__PURE__ */ jsx("div", {
          className: "flex justify-between items-center mb-4 border-b-2 border-gray-400",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex mt-[3px] h-[60%] ",
            children: [/* @__PURE__ */ jsx("div", {
              className: "flex items-center mr-15 w-[30%]",
              children: /* @__PURE__ */ jsx("img", {
                src: alminoLogo,
                alt: "Company Logo",
                className: "h-30 mb-2"
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col w-[50%]",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "font-bold uppercase",
                children: ["Almino Structural ", /* @__PURE__ */ jsx("br", {}), "Consultancy Pvt Ltd"]
              }), /* @__PURE__ */ jsxs("div", {
                className: "text-xs",
                children: ["No: 10/387-d6 Meenakshi Nagar 1st Street, Near King's Palace Old Check Post,", /* @__PURE__ */ jsx("br", {}), "Pannaiyarkulam, Ramanathapuram", /* @__PURE__ */ jsx("br", {}), "Mobile: 9786815307, Tamil Nadu - 623503", /* @__PURE__ */ jsx("br", {}), "GSTIN: 33AADCA5362R1Z2"]
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "flex items-end justify-end w-[40%]",
              children: /* @__PURE__ */ jsx("h1", {
                className: "text-xl font-medium uppercase text-gray-800 items-end",
                children: "TAX INVOICE"
              })
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex mt-[-18px]",
          children: [/* @__PURE__ */ jsx("div", {
            className: "text-right w-[50%] border-r border-gray-600",
            children: /* @__PURE__ */ jsx("table", {
              className: "text-xs mt-2",
              children: /* @__PURE__ */ jsxs("tbody", {
                children: [/* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: "Invoice"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left font-bold",
                    children: [":", invoiceData.invoice.invoice_no]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: "Invoice Date"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left font-bold",
                    children: [":", formatDate2(invoiceData.invoice.invoice_date)]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: "Terms"
                  }), /* @__PURE__ */ jsx("td", {
                    className: "text-left font-bold",
                    children: ": Due on Receipt"
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: "Due Date"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left font-bold",
                    children: [":", formatDate2(invoiceData.invoice.due_date)]
                  })]
                })]
              })
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "text-right w-[50%]",
            children: /* @__PURE__ */ jsx("table", {
              className: "text-xs mt-2 ml-1",
              children: /* @__PURE__ */ jsx("tbody", {
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: "Place of Supply"
                  }), /* @__PURE__ */ jsx("td", {
                    className: "font-bold",
                    children: ": Tamil Nadu (33)"
                  })]
                })
              })
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mb-1 pt-2",
          children: [/* @__PURE__ */ jsx("div", {
            className: "bg-gray-200 border-b border-gray-400 border-t -m-1 -mt-2",
            children: /* @__PURE__ */ jsx("p", {
              className: "ml-1 font-bold text-gray-800",
              children: "Bill To:"
            })
          }), /* @__PURE__ */ jsxs("div", {
            className: "pt-3 pb-2",
            children: [/* @__PURE__ */ jsx("p", {
              className: "font-extrabold",
              children: invoiceData.invoice.client_name
            }), /* @__PURE__ */ jsx("p", {
              children: invoiceData.invoice.company_name
            }), /* @__PURE__ */ jsx("p", {
              children: invoiceData.invoice.office_address
            })]
          })]
        }), /* @__PURE__ */ jsxs("table", {
          className: "w-[100%] border-2 border-collapse  border-gray-400  text-end text-sm ",
          children: [/* @__PURE__ */ jsxs("thead", {
            className: "bg-gray-200 text-gray-900 ",
            children: [/* @__PURE__ */ jsxs("tr", {
              children: [/* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "px-2 py-1 ",
                children: "#"
              }), /* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1 text-left",
                children: "Item & Description"
              }), /* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1",
                children: "HSN/SAC"
              }), /* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1",
                children: "Qty"
              }), /* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1",
                children: "Rate"
              }), /* @__PURE__ */ jsx("th", {
                colSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1",
                children: "CGST"
              }), /* @__PURE__ */ jsxs("th", {
                colSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1",
                children: ["SGST", " "]
              }), /* @__PURE__ */ jsx("th", {
                rowSpan: 2,
                className: "border-2 border-gray-400 px-2 py-1 border-r-0",
                children: "Total"
              })]
            }), /* @__PURE__ */ jsxs("tr", {
              children: [/* @__PURE__ */ jsx("th", {
                className: " px-2 py-1 border border-gray-400 ",
                children: "%"
              }), /* @__PURE__ */ jsx("th", {
                className: "border-2 border-gray-400  px-2 py-1",
                children: "Amt"
              }), /* @__PURE__ */ jsx("th", {
                className: "border-2 border-gray-400  px-2 py-1",
                children: "%"
              }), /* @__PURE__ */ jsx("th", {
                className: "border-2 border-gray-400 px-2 py-1",
                children: "Amt"
              })]
            })]
          }), /* @__PURE__ */ jsx("tbody", {
            children: invoiceData.milestone_requests.map((milestone, index) => /* @__PURE__ */ jsxs("tr", {
              children: [/* @__PURE__ */ jsx("td", {
                className: "border px-2",
                children: index + 1
              }), /* @__PURE__ */ jsxs("td", {
                className: "border px-2 text-left",
                children: [milestone.miles_title, /* @__PURE__ */ jsx("br", {}), invoiceData.invoice.project_title]
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: invoiceData.invoice.hsn_sac || "998332"
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: "1.00 set"
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: milestone.milestone_amount
              }), /* @__PURE__ */ jsxs("td", {
                className: "border-2 border-gray-400 px-2",
                children: [invoiceData.invoice.cgst_percentage, "%"]
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: invoiceData.invoice.cgst_amount
              }), /* @__PURE__ */ jsxs("td", {
                className: "border-2 border-gray-400 px-2",
                children: [invoiceData.invoice.sgst_percentage, "%"]
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: invoiceData.invoice.sgst_amount
              }), /* @__PURE__ */ jsx("td", {
                className: "border-2 border-gray-400 px-2",
                children: milestone.milestone_amount
              })]
            }, index))
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-between",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "text-sm w-[50%] ",
            children: [/* @__PURE__ */ jsx("p", {
              children: "Total in Words"
            }), /* @__PURE__ */ jsx("p", {
              className: "font-bold italic",
              children: numberToWords(parseFloat(invoiceData.invoice.final_amount))
            }), /* @__PURE__ */ jsxs("p", {
              className: "mt-5",
              children: ["Notes:", /* @__PURE__ */ jsx("br", {}), invoiceData.invoice.notes || "Thanks for your business."]
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "text-sm border-l-2 border-b-2 border-gray-400 w-[50%] ",
            children: /* @__PURE__ */ jsx("table", {
              className: "ml-15",
              children: /* @__PURE__ */ jsxs("tbody", {
                children: [/* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "pr-4 text-right",
                    children: "Sub Total:"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left",
                    children: ["", invoiceData.invoice.total_amount]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsxs("td", {
                    className: "pr-4 text-right",
                    children: ["CGST (", invoiceData.invoice.cgst_percentage, "%):"]
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left",
                    children: ["", invoiceData.invoice.cgst_amount]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsxs("td", {
                    className: "pr-4 text-right",
                    children: ["SGST (", invoiceData.invoice.sgst_percentage, "%):"]
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left",
                    children: ["", invoiceData.invoice.sgst_amount]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "pr-4 text-right",
                    children: "Rounding:"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left",
                    children: ["", invoiceData.invoice.roundoff]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  className: "font-bold",
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "pr-4 text-right",
                    children: "Total:"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left text-red-700",
                    children: ["", invoiceData.invoice.final_amount]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "pr-4 text-right",
                    children: "Payment Mode:"
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "text-left",
                    children: ["", invoiceData.invoice.paid_amount]
                  })]
                }), /* @__PURE__ */ jsxs("tr", {
                  className: "",
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "pr-4 text-right",
                    children: /* @__PURE__ */ jsx("strong", {
                      children: "Balance Due:"
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "text-left",
                    children: /* @__PURE__ */ jsxs("strong", {
                      children: [" ", "  ", invoiceData.invoice.balance_amount]
                    })
                  })]
                })]
              })
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex ",
          children: [/* @__PURE__ */ jsx("div", {
            className: "w-[50%]"
          }), /* @__PURE__ */ jsxs("div", {
            className: "text-center w-[50%] border-l-2 border-gray-400",
            children: [/* @__PURE__ */ jsx("p", {
              children: "Almino Structural Consultancy Pvt Ltd"
            }), /* @__PURE__ */ jsx("img", {
              src: alminoSeal,
              alt: "Signature",
              className: "h-30 mx-auto mb-2"
            }), /* @__PURE__ */ jsx("p", {
              children: "Authorized Signature"
            })]
          })]
        })]
      })
    })]
  });
};
const ViewInvoice$1 = withComponentProps(ViewInvoice);
const route39 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ViewInvoice$1
}, Symbol.toStringTag, { value: "Module" }));
const OfferLetterView = () => {
  const {
    id
  } = useParams$1();
  const navigate = useNavigate$1();
  const componentRef = useRef();
  const [offerLetter, setOfferLetter] = useState(null);
  useEffect(() => {
    const savedLetters = localStorage.getItem("offerLetters");
    if (savedLetters) {
      const letters = JSON.parse(savedLetters);
      const foundLetter = letters.find((letter) => letter.id === id);
      if (foundLetter) {
        setOfferLetter(foundLetter);
      }
    }
  }, [id]);
  const handlePrint = () => {
    const printContent = document.getElementById("print").innerHTML;
    const originalContent = document.body.innerHTML;
    const style = `
      <style>
        @media print {
          @page {
            margin-bottom: 0;
          }
          body { 
            margin: 1cm;
          }
          header, footer, .no-print { 
            display: none !important; 
          }
          a[href]:after {
            content: none !important;
          }
          #print {
            position: relative;
            width: 100%;
            height: 100%;
          }
        }
      </style>
    `;
    document.body.innerHTML = style + printContent;
    window.print();
    window.onafterprint = () => {
      document.body.innerHTML = originalContent;
      window.location.reload();
    };
  };
  const handleGoBack = () => {
    navigate(-1);
  };
  if (!offerLetter) {
    return /* @__PURE__ */ jsx("div", {
      className: "p-4",
      children: "Loading..."
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "p-6 print:p-0",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx("button", {
        onClick: handlePrint,
        className: "mb-4 px-4 py-2 bg-red-700 text-white rounded shadow print:hidden",
        children: "Print Offer Letter"
      }), /* @__PURE__ */ jsxs("button", {
        className: "text-gray-500 bg-gray-200 px-4 py-2 rounded-lg mt-3",
        onClick: handleGoBack,
        children: [/* @__PURE__ */ jsx(LogOut, {
          className: "inline rotate-180 text-gray-500 mr-3"
        }), "Go Back"]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      ref: componentRef,
      className: "relative bg-white text-black p-10 w-[794px] mx-auto text-[14px] font-serif",
      id: "print",
      children: [/* @__PURE__ */ jsx("img", {
        src: alminoLogo,
        alt: "Watermark",
        className: "absolute opacity-10 z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[400px] pointer-events-none"
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative z-10",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4 border-b border-gray-400 pb-4",
          children: [/* @__PURE__ */ jsx("img", {
            src: alminoLogo,
            alt: "Almino Logo",
            className: "h-20"
          }), /* @__PURE__ */ jsxs("div", {
            className: "text-right text-sm",
            children: [/* @__PURE__ */ jsx("p", {
              className: "font-bold text-lg",
              children: "ALMINO STRUCTURAL CONSULTANCY PVT LTD"
            }), /* @__PURE__ */ jsx("p", {
              className: "text-red-500 font-semibold",
              children: "GST NO : 33AASCA3262R1Z2"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "text-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-bold underline",
            children: "JOB OFFER LETTER"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-sm mt-1",
            children: "GET NO: 330A562A0508172"
          })]
        }), /* @__PURE__ */ jsx("p", {
          children: "To,"
        }), /* @__PURE__ */ jsx("p", {
          className: "font-semibold",
          children: offerLetter.name
        }), /* @__PURE__ */ jsx("p", {
          children: offerLetter.location
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-6 font-semibold",
          children: ["Subject: Job Offer for the Position of ", offerLetter.position]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4",
          children: ["Dear ", offerLetter.name, ","]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-2 text-justify",
          children: ["We are pleased to offer you the position of", " ", /* @__PURE__ */ jsx("strong", {
            children: offerLetter.position
          }), " at Almino Structural Consultancy Pvt Ltd, based on your qualifications and the interview process. We believe your skills and experience will be a valuable asset to our team."]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mt-4",
          children: [/* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Position:"
            }), " ", offerLetter.position]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Department:"
            }), " ", offerLetter.department]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Location:"
            }), " ", offerLetter.location]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Start Date:"
            }), " ", offerLetter.startDate]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mt-4",
          children: [/* @__PURE__ */ jsx("p", {
            className: "underline font-semibold",
            children: "Salary Details:"
          }), /* @__PURE__ */ jsxs("ul", {
            className: "list-disc list-inside ml-4",
            children: [/* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "Monthly Gross Salary:"
              }), " ", offerLetter.monthlySalary]
            }), /* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "Other Allowances:"
              }), " ", offerLetter.otherAllowances]
            })]
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-4 text-justify",
          children: "In addition to the salary, you will be entitled to benefits as per the company's HR policies, which will be detailed in your appointment letter upon joining."
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4 text-justify",
          children: ["Please confirm your acceptance of this offer by signing and returning a copy of this letter on or before", " ", /* @__PURE__ */ jsx("strong", {
            children: "15-04-25"
          }), ". We are excited to welcome you to our team and look forward to a mutually beneficial relationship. If you have any questions or require further clarification, feel free to contact us at ", /* @__PURE__ */ jsx("strong", {
            children: offerLetter.contactPhone
          }), " or", " ", /* @__PURE__ */ jsx("strong", {
            children: offerLetter.contactEmail
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-6",
          children: "Sincerely,"
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-2 font-semibold",
          children: "Shaik Anas S"
        }), /* @__PURE__ */ jsx("p", {
          children: "Site Engineer"
        }), /* @__PURE__ */ jsx("p", {
          children: "Almino Structural Consultancy Pvt Ltd"
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-10 text-right",
          children: /* @__PURE__ */ jsx("img", {
            src: alminoSeal,
            alt: "Company Seal",
            className: "h-20 inline"
          })
        }), /* @__PURE__ */ jsx("footer", {
          className: "text-sm mt-10 border-t-5 border-red-500 pt-3",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex justify-between",
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsxs("div", {
                className: "text-red-600 flex flex-col ",
                children: [/* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "p-1 bg-gray-300 rounded-full mr-2 ",
                    children: ""
                  }), " +91 95977 46657"]
                }), /* @__PURE__ */ jsx("br", {}), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "p-1 bg-gray-300 rounded-full mr-2",
                    children: "  "
                  }), " +91 97865 81307"]
                })]
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "text-right flex flex-col gap-2",
              children: [/* @__PURE__ */ jsx("p", {
                children: " Near King's Palace, Old Check Post,"
              }), /* @__PURE__ */ jsx("p", {
                children: "Pattinamkathan, Ramanathapuram - 623503"
              }), /* @__PURE__ */ jsx("p", {
                children: " alminostructure@gmail.com"
              })]
            })]
          })
        })]
      })]
    })]
  });
};
const ViewOfferLetter = withComponentProps(OfferLetterView);
const route40 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ViewOfferLetter
}, Symbol.toStringTag, { value: "Module" }));
const ViewJoiningLetter = () => {
  const navigate = useNavigate$1();
  const [employee, setEmployee] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const componentRef = useRef();
  const {
    id
  } = useParams$1();
  const staff_id = decodeURIComponent(id);
  const fetchEmployee = async () => {
    try {
      setLoading(true);
      const response = await axios.post(`${BASE_URL}/users/profile`, {
        staff_id
      }, {
        headers: {
          "Content-Type": "application/json"
        }
      });
      if (response.data && response.data.data) {
        setEmployee(response.data.data);
      } else {
        throw new Error("No employee data found");
      }
    } catch (error2) {
      console.error("Error in get staff details", error2);
      setError(error2.message);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchEmployee();
  }, [staff_id]);
  const handlePrint = () => {
    const printContent = document.getElementById("print").innerHTML;
    const originalContent = document.body.innerHTML;
    const style = `
      <style>
        @media print {
          @page {
            margin-bottom: 0;
          }
          body { 
            margin: 1cm;
          }
          header, footer, .no-print { 
            display: none !important; 
          }
          a[href]:after {
            content: none !important;
          }
          #print {
            position: relative;
            width: 100%;
            height: 100%;
          }
        }
      </style>
    `;
    document.body.innerHTML = style + printContent;
    window.print();
    window.onafterprint = () => {
      document.body.innerHTML = originalContent;
      window.location.reload();
    };
  };
  const handleGoBack = () => {
    navigate(-1);
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx(Loader2, {
        className: "animate-spin h-12 w-12 text-red-600"
      })
    });
  }
  if (error) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-red-600 text-lg",
        children: error
      })
    });
  }
  if (!employee) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-gray-800 text-lg",
        children: "No employee data available"
      })
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "p-6 print:p-0",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx("button", {
        onClick: handlePrint,
        className: "mb-4 px-4 py-2 bg-red-700 text-white rounded shadow print:hidden",
        children: "Print Joining Letter"
      }), /* @__PURE__ */ jsxs("button", {
        className: "text-gray-500 bg-gray-200 px-4 py-2 rounded-lg mt-3",
        onClick: handleGoBack,
        children: [/* @__PURE__ */ jsx(LogOut, {
          className: "inline rotate-180 text-gray-500 mr-3"
        }), "Go Back"]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      ref: componentRef,
      className: "relative bg-white text-black p-10 w-[794px] mx-auto  text-[14px] font-serif",
      id: "print",
      children: [/* @__PURE__ */ jsx("img", {
        src: alminoLogo,
        alt: "Watermark",
        className: "absolute opacity-10 z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[400px] pointer-events-none"
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative z-10",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4 border-b border-gray-400 pb-4",
          children: [/* @__PURE__ */ jsx("img", {
            src: alminoLogo,
            alt: "Almino Logo",
            className: "h-20"
          }), /* @__PURE__ */ jsxs("div", {
            className: "text-right text-sm",
            children: [/* @__PURE__ */ jsx("p", {
              className: "font-bold text-lg",
              children: "ALMINO STRUCTURAL CONSULTANCY PVT LTD"
            }), /* @__PURE__ */ jsx("p", {
              className: "text-red-500 font-semibold",
              children: "GST NO : 33AASCA3262R1Z2"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "text-center mb-4",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-bold underline",
            children: "JOINING LETTER"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-sm mt-1",
            children: "GET NO: 330A562A0508172"
          })]
        }), /* @__PURE__ */ jsx("p", {
          children: "To,"
        }), /* @__PURE__ */ jsxs("p", {
          className: "font-semibold",
          children: [employee.basic.firstname, " ", employee.basic.lastname]
        }), /* @__PURE__ */ jsx("p", {
          children: employee.basic.presentaddress || employee.basic.permanentaddress || "Address not specified"
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-6 font-semibold",
          children: ["Subject: Joining Letter for the Position of", " ", employee.basic.designation]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4",
          children: ["Dear ", employee.basic.firstname, ","]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-2 text-justify",
          children: ["We are pleased to confirm your appointment as", " ", /* @__PURE__ */ jsx("strong", {
            children: employee.basic.designation
          }), " at Almino Structural Consultancy Pvt Ltd, effective from", " ", /* @__PURE__ */ jsx("strong", {
            children: employee.basic.dateofjoining ? new Date(employee.basic.dateofjoining).toLocaleDateString() : "your joining date"
          }), "."]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mt-4",
          children: [/* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Employee ID:"
            }), " ", employee.basic.staff_id]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Department:"
            }), " ", employee.basic.department]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Designation:"
            }), " ", employee.basic.designation]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Reporting To:"
            }), " Team Lead / Manager"]
          }), /* @__PURE__ */ jsxs("p", {
            children: [/* @__PURE__ */ jsx("strong", {
              children: "Location:"
            }), " Company Branch"]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mt-4",
          children: [/* @__PURE__ */ jsx("p", {
            className: "underline font-semibold",
            children: "Compensation Details:"
          }), employee.salary && employee.salary.length > 0 ? /* @__PURE__ */ jsxs("ul", {
            className: "list-disc list-inside ml-4",
            children: [/* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "Basic Salary:"
              }), " ", employee.salary[0].basicsalary]
            }), /* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "HRA:"
              }), " ", employee.salary[0].hra]
            }), /* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "Other Allowances:"
              }), " ", employee.salary[0].other_allowance]
            }), /* @__PURE__ */ jsxs("li", {
              children: [/* @__PURE__ */ jsx("strong", {
                children: "Gross Salary:"
              }), " ", employee.salary[0].gross_salary]
            })]
          }) : /* @__PURE__ */ jsx("p", {
            children: "Salary details not available"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-4 text-justify",
          children: "Your employment will be subject to the terms and conditions outlined in the company's HR policies. Please review the employee handbook for detailed information about your benefits, leave policies, and other employment terms."
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-4 text-justify",
          children: "We are excited to have you on board and look forward to a successful and productive association. If you have any questions, please feel free to contact the HR department."
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-6",
          children: "Sincerely,"
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-2 font-semibold",
          children: "HR Manager"
        }), /* @__PURE__ */ jsx("p", {
          children: "Almino Structural Consultancy Pvt Ltd"
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-10 text-right",
          children: /* @__PURE__ */ jsx("img", {
            src: alminoSeal,
            alt: "Company Seal",
            className: "h-20 inline"
          })
        }), /* @__PURE__ */ jsx("footer", {
          className: "text-sm mt-10 border-t border-gray-300 pt-3",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex justify-between",
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsxs("p", {
                className: "text-red-600",
                children: [" +91 95977 46657", /* @__PURE__ */ jsx("br", {}), " +91 97865 81307"]
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "text-right",
              children: [/* @__PURE__ */ jsx("p", {
                children: " Near King's Palace, Old Check Post,"
              }), /* @__PURE__ */ jsx("p", {
                children: "Pattinamkathan, Ramanathapuram - 623503"
              }), /* @__PURE__ */ jsx("p", {
                children: " alminostructure@gmail.com"
              })]
            })]
          })
        })]
      })]
    })]
  });
};
const ViewJoiningLetter$1 = withComponentProps(ViewJoiningLetter);
const route41 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ViewJoiningLetter$1
}, Symbol.toStringTag, { value: "Module" }));
const ExperienceCertificate = () => {
  const navigate = useNavigate$1();
  const componentRef = useRef();
  const {
    id,
    resign_id
  } = useParams$1();
  const token = useAuthStore((state) => state.accessToken);
  const req_id = decodeURIComponent(resign_id);
  const [employee, setEmployee] = useState(null);
  const [terminationData, setTerminationData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchEmployeeData = async () => {
    try {
      const response = await axios.post(`${BASE_URL}/users/profile`, {
        staff_id: decodeURIComponent(id)
      }, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data && response.data.data) {
        setEmployee(response.data.data);
      } else {
        throw new Error("No employee data found");
      }
    } catch (err) {
      console.error("Error fetching employee data:", err);
      setError(err.message);
    }
  };
  const fetchTerminationData = async () => {
    try {
      const response = await axios.get(`${BASE_URL}/user_resign_form/read?resign_id=${req_id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.data && response.data.data) {
        setTerminationData(response.data.data);
      } else {
        throw new Error("No termination data found");
      }
    } catch (err) {
      console.error("Error fetching termination data:", err);
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchEmployeeData();
    fetchTerminationData();
  }, [id, resign_id]);
  const handlePrint = () => {
    const printContent = document.getElementById("print").innerHTML;
    const originalContent = document.body.innerHTML;
    const style = `
      <style>
        @media print {
          @page {
            margin-bottom: 0;
          }
          body { 
            margin: 1cm;
          }
          header, footer, .no-print { 
            display: none !important; 
          }
          a[href]:after {
            content: none !important;
          }
          #print {
            position: relative;
            width: 100%;
            height: 100%;
          }
        }
      </style>
    `;
    document.body.innerHTML = style + printContent;
    window.print();
    window.onafterprint = () => {
      document.body.innerHTML = originalContent;
      window.location.reload();
    };
  };
  const handleGoBack = () => {
    navigate(-1);
  };
  const calculateExperience = () => {
    var _a, _b;
    if (!employee && !terminationData) return "3 years";
    const joiningDate = (terminationData == null ? void 0 : terminationData.dateofjoining) ? new Date(terminationData.dateofjoining) : ((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.dateofjoining) ? new Date(employee.basic.dateofjoining) : /* @__PURE__ */ new Date("2022-01-01");
    const leavingDate = (terminationData == null ? void 0 : terminationData.reliving_date) ? new Date(terminationData.reliving_date) : ((_b = employee == null ? void 0 : employee.basic) == null ? void 0 : _b.relivingdate) ? new Date(employee.basic.relivingdate) : /* @__PURE__ */ new Date();
    const diffTime = Math.abs(leavingDate - joiningDate);
    const diffYears = Math.floor(diffTime / (1e3 * 60 * 60 * 24 * 365));
    return `${diffYears} year${diffYears !== 1 ? "s" : ""}`;
  };
  const formatDate2 = (dateString) => {
    if (!dateString) return "01-01-2022";
    const date = new Date(dateString);
    return date.toLocaleDateString("en-GB", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric"
    }).replace(/\//g, "-");
  };
  const getEmployeeName = () => {
    var _a, _b;
    if (terminationData == null ? void 0 : terminationData.staff_name) return terminationData.staff_name;
    if (((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.firstname) && ((_b = employee == null ? void 0 : employee.basic) == null ? void 0 : _b.lastname)) return `${employee.basic.firstname} ${employee.basic.lastname}`;
    return "Employee";
  };
  const getDesignation = () => {
    var _a;
    if (terminationData == null ? void 0 : terminationData.designation) return terminationData.designation;
    if ((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.designation) return employee.basic.designation;
    return "Employee";
  };
  const getGender = () => {
    var _a;
    if ((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.gender) return employee.basic.gender;
    return "Female";
  };
  const getJoiningDate = () => {
    var _a;
    if (terminationData == null ? void 0 : terminationData.dateofjoining) return terminationData.dateofjoining;
    if ((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.dateofjoining) return employee.basic.dateofjoining;
    return "2022-01-01";
  };
  const getLeavingDate = () => {
    var _a;
    if (terminationData == null ? void 0 : terminationData.reliving_date) return terminationData.reliving_date;
    if ((_a = employee == null ? void 0 : employee.basic) == null ? void 0 : _a.relivingdate) return employee.basic.relivingdate;
    return (/* @__PURE__ */ new Date()).toISOString();
  };
  if (loading) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx("div", {
        className: "animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"
      })
    });
  }
  if (error) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-red-600 text-lg",
        children: error
      })
    });
  }
  if (!employee && !terminationData) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-screen",
      children: /* @__PURE__ */ jsx("div", {
        className: "text-gray-800 text-lg",
        children: "No employee data available"
      })
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "p-6 print:p-0",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between",
      children: [/* @__PURE__ */ jsx("button", {
        onClick: handlePrint,
        className: "mb-4 px-4 py-2 bg-red-700 text-white rounded shadow print:hidden",
        children: "Print Experience Certificate"
      }), /* @__PURE__ */ jsxs("button", {
        className: "text-gray-500 bg-gray-200 px-4 py-2 rounded-lg mt-3",
        onClick: handleGoBack,
        children: [/* @__PURE__ */ jsx(LogOut, {
          className: "inline rotate-180 text-gray-500 mr-3"
        }), "Go Back"]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      ref: componentRef,
      className: "relative bg-white text-black p-10 w-[794px] mx-auto text-[14px] font-serif",
      id: "print",
      children: [/* @__PURE__ */ jsx("img", {
        src: alminoLogo,
        alt: "Watermark",
        className: "absolute opacity-10 z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[400px] pointer-events-none"
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative z-10",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center mb-4 border-b border-gray-400 pb-4",
          children: [/* @__PURE__ */ jsx("img", {
            src: alminoLogo,
            alt: "Almino Logo",
            className: "h-20"
          }), /* @__PURE__ */ jsxs("div", {
            className: "text-right text-sm",
            children: [/* @__PURE__ */ jsx("p", {
              className: "font-bold text-lg",
              children: "ALMINO STRUCTURAL CONSULTANCY PVT LTD"
            }), /* @__PURE__ */ jsx("p", {
              className: "text-red-500 font-semibold",
              children: "GST NO : 33AASCA3262R1Z2"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "text-right mb-4",
          children: [/* @__PURE__ */ jsxs("p", {
            children: ["Ref. No: ", resign_id || "25/E26"]
          }), /* @__PURE__ */ jsxs("p", {
            children: ["Date:", " ", (/* @__PURE__ */ new Date()).toLocaleDateString("en-GB", {
              day: "2-digit",
              month: "2-digit",
              year: "numeric"
            }).replace(/\//g, "-")]
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "text-center mb-4",
          children: /* @__PURE__ */ jsx("h2", {
            className: "text-xl font-bold underline",
            children: "EXPERIENCE CERTIFICATE"
          })
        }), /* @__PURE__ */ jsx("p", {
          className: "text-center font-semibold mb-6",
          children: "To Whom It May Concern,"
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-2 text-justify",
          children: ["This is to certify that ", /* @__PURE__ */ jsxs("strong", {
            children: ["Ms. ", getEmployeeName()]
          }), " has been employed with Almino Structural Consultancy Pvt Ltd from", " ", /* @__PURE__ */ jsx("strong", {
            children: formatDate2(getJoiningDate())
          }), " to", " ", /* @__PURE__ */ jsx("strong", {
            children: formatDate2(getLeavingDate())
          }), " as a", " ", /* @__PURE__ */ jsx("strong", {
            children: getDesignation()
          }), ". During their tenure with the company, ", getGender() === "Male" ? "he" : "she", " has demonstrated excellent skills in their role."]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4 text-justify",
          children: ["As a ", getDesignation(), ", ", getGender() === "Male" ? "he" : "she", " was responsible for the following key duties:"]
        }), /* @__PURE__ */ jsxs("ul", {
          className: "list-disc list-inside ml-4 mt-2",
          children: [/* @__PURE__ */ jsx("li", {
            children: "Performing duties as assigned by the management"
          }), /* @__PURE__ */ jsx("li", {
            children: "Collaborating with team members to achieve company objectives"
          }), /* @__PURE__ */ jsx("li", {
            children: "Maintaining high standards of professionalism and work ethics"
          }), /* @__PURE__ */ jsx("li", {
            children: "Ensuring quality in all assigned tasks"
          }), /* @__PURE__ */ jsx("li", {
            children: "Adhering to company policies and procedures"
          })]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4 text-justify",
          children: [getGender() === "Male" ? "He" : "She", " has exhibited professionalism, dedication, and strong problem-solving abilities in fulfilling their responsibilities.", " ", getGender() === "Male" ? "He" : "She", " has contributed significantly to the company's success during", " ", calculateExperience(), " of service with us."]
        }), /* @__PURE__ */ jsxs("p", {
          className: "mt-4 text-justify",
          children: ["We wish ", getGender() === "Male" ? "him" : "her", " all the best in", " ", getGender() === "Male" ? "his" : "her", " future endeavors."]
        }), /* @__PURE__ */ jsxs("div", {
          className: "mt-12",
          children: [/* @__PURE__ */ jsx("p", {
            className: "font-semibold",
            children: "Managing Director"
          }), /* @__PURE__ */ jsx("p", {
            children: "Almino Structural Consultancy Pvt Ltd"
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-10 text-right",
          children: /* @__PURE__ */ jsx("img", {
            src: alminoSeal,
            alt: "Company Seal",
            className: "h-20 inline"
          })
        }), /* @__PURE__ */ jsx("footer", {
          className: "text-sm mt-10 border-t border-gray-300 pt-3",
          children: /* @__PURE__ */ jsxs("div", {
            className: "flex justify-between",
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsxs("p", {
                className: "text-red-600",
                children: [" +91 95977 46657", /* @__PURE__ */ jsx("br", {}), " +91 97865 81307"]
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "text-right",
              children: [/* @__PURE__ */ jsx("p", {
                children: " Near King's Palace, Old Check Post,"
              }), /* @__PURE__ */ jsx("p", {
                children: "Pattinamkathan, Ramanathapuram - 623503"
              }), /* @__PURE__ */ jsx("p", {
                children: " alminostructure@gmail.com"
              })]
            })]
          })
        })]
      })]
    })]
  });
};
const ExperienceCertification = withComponentProps(ExperienceCertificate);
const route42 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: ExperienceCertification
}, Symbol.toStringTag, { value: "Module" }));
const SettingsSidebar = () => {
  const location = useLocation$1();
  const isSettingsRoute = location.pathname.startsWith("/settings");
  const [openDropdowns, setOpenDropdowns] = useState({
    accessPermission: isSettingsRoute,
    invoice: location.pathname.startsWith("/settings/invoice")
  });
  const toggleDropdown = (dropdown) => {
    setOpenDropdowns((prev) => ({
      ...prev,
      [dropdown]: !prev[dropdown]
    }));
  };
  return /* @__PURE__ */ jsxs("div", { className: "w-64 min-w-55 h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 ", children: [
    /* @__PURE__ */ jsx("div", { className: "p-4 border-b border-gray-200 dark:border-gray-700", children: /* @__PURE__ */ jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "Settings" }) }),
    /* @__PURE__ */ jsxs("nav", { className: "p-2", children: [
      /* @__PURE__ */ jsxs("div", { className: "mb-1", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => toggleDropdown("accessPermission"),
            className: `w-full flex items-center justify-between p-2 rounded-md ${openDropdowns.accessPermission ? "bg-gray-100 dark:bg-gray-700" : "hover:bg-gray-50 dark:hover:bg-gray-700"}`,
            children: [
              /* @__PURE__ */ jsxs("span", { className: "font-sm text-gray-700 dark:text-gray-300", children: [
                /* @__PURE__ */ jsx(SquareCheckBig, { size: 20, className: "inline mr-2" }),
                "Access Permission"
              ] }),
              openDropdowns.accessPermission ? /* @__PURE__ */ jsx(ChevronDown, { size: 18, className: "text-gray-500 dark:text-gray-400" }) : /* @__PURE__ */ jsx(ChevronRight, { size: 18, className: "text-gray-500 dark:text-gray-400" })
            ]
          }
        ),
        openDropdowns.accessPermission && /* @__PURE__ */ jsxs("div", { className: "ml-4 mt-1 space-y-1", children: [
          /* @__PURE__ */ jsx(
            NavLink,
            {
              to: "/settings/access-permission/roles",
              className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700 dark:bg-gray-500/30 dark:text-red-500" : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
              children: "Roles"
            }
          ),
          /* @__PURE__ */ jsx(
            NavLink,
            {
              to: "/settings/access-permission/user",
              className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700  dark:bg-gray-500/30 dark:text-red-500" : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
              children: "User Roles"
            }
          ),
          /* @__PURE__ */ jsx(
            NavLink,
            {
              to: "/settings/access-permission/teams",
              className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700  dark:bg-gray-500/30 dark:text-red-500" : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
              children: "Teams"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-1", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => toggleDropdown("invoice"),
            className: `w-full flex items-center justify-between p-2 rounded-md ${openDropdowns.invoice ? "bg-gray-100 dark:bg-gray-700" : "hover:bg-gray-50 dark:hover:bg-gray-700"}`,
            children: [
              /* @__PURE__ */ jsxs("span", { className: "font-sm text-gray-700 dark:text-gray-300", children: [
                /* @__PURE__ */ jsx(DollarSign, { size: 20, className: "inline mr-2" }),
                "Invoice"
              ] }),
              openDropdowns.invoice ? /* @__PURE__ */ jsx(ChevronDown, { size: 18, className: "text-gray-500 dark:text-gray-400" }) : /* @__PURE__ */ jsx(ChevronRight, { size: 18, className: "text-gray-500 dark:text-gray-400" })
            ]
          }
        ),
        openDropdowns.invoice && /* @__PURE__ */ jsxs("div", { className: "ml-4 mt-1 space-y-1", children: [
          /* @__PURE__ */ jsx(
            NavLink,
            {
              to: "/settings/invoice/tax",
              className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700  dark:bg-gray-500/30 dark:text-red-500" : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
              children: "Tax"
            }
          ),
          /* @__PURE__ */ jsx(
            NavLink,
            {
              to: "/settings/invoice/payment-methods",
              className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700  dark:bg-gray-500/30 dark:text-red-500 " : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
              children: "Payment Methods"
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "mb-1", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => toggleDropdown("system"),
            className: `w-full flex items-center justify-between p-2 rounded-md ${openDropdowns.system ? "bg-gray-100 dark:bg-gray-700" : "hover:bg-gray-50 dark:hover:bg-gray-700"}`,
            children: [
              /* @__PURE__ */ jsxs("span", { className: "font-sm text-gray-700 dark:text-gray-300", children: [
                /* @__PURE__ */ jsx(Computer, { size: 20, className: "inline mr-2" }),
                "System Setting"
              ] }),
              openDropdowns.system ? /* @__PURE__ */ jsx(ChevronDown, { size: 18, className: "text-gray-500 dark:text-gray-400" }) : /* @__PURE__ */ jsx(ChevronRight, { size: 18, className: "text-gray-500 dark:text-gray-400" })
            ]
          }
        ),
        openDropdowns.system && /* @__PURE__ */ jsx("div", { className: "ml-4 mt-1 space-y-1", children: /* @__PURE__ */ jsx(
          NavLink,
          {
            to: "/settings/access-permission/systemsetting",
            className: ({ isActive }) => `block px-3 py-2 text-sm rounded-sm ${isActive ? "bg-gray-200 text-red-700  dark:bg-gray-500/30 dark:text-red-500" : "text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-700"}`,
            children: "System Settings"
          }
        ) })
      ] })
    ] })
  ] });
};
const SettingsLayout = withComponentProps(function SettingsLayout2() {
  const {
    isOpen
  } = useSideBar();
  const sidebarRef = useRef(null);
  return /* @__PURE__ */ jsxs("div", {
    className: "flex h-full",
    children: [/* @__PURE__ */ jsx(SettingsSidebar, {
      ref: sidebarRef
    }), /* @__PURE__ */ jsx("div", {
      className: cn("flex-1 transition-[margin] duration-300", isOpen ? "md:ml-[70px]" : "md:ml-[50px]"),
      children: /* @__PURE__ */ jsx("div", {
        className: "h-full overflow-y-auto overflow-x-hidden",
        children: /* @__PURE__ */ jsx(Outlet, {})
      })
    })]
  });
});
const route43 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: SettingsLayout
}, Symbol.toStringTag, { value: "Module" }));
const Settings = withComponentProps(function Settings2() {
  return /* @__PURE__ */ jsxs("div", {
    className: "p-6",
    children: [/* @__PURE__ */ jsx("h1", {
      className: "text-2xl font-bold text-gray-900 dark:text-white mb-6",
      children: "Settings Dashboard"
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
      children: [/* @__PURE__ */ jsxs(Link, {
        to: "/settings/access-permission/roles",
        className: "bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-md transition-shadow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center space-x-4",
          children: [/* @__PURE__ */ jsx("div", {
            className: "p-3 rounded-full bg-blue-100 dark:bg-blue-900/30",
            children: /* @__PURE__ */ jsx(SquareCheckBig, {
              className: "text-blue-600 dark:text-blue-400",
              size: 24
            })
          }), /* @__PURE__ */ jsx("h2", {
            className: "text-lg font-semibold text-gray-900 dark:text-white",
            children: "Access Permission"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-3 text-gray-600 dark:text-gray-400",
          children: "Manage roles, user permissions, and team access controls"
        })]
      }), /* @__PURE__ */ jsxs(Link, {
        to: "/settings/invoice/tax",
        className: "bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-md transition-shadow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center space-x-4",
          children: [/* @__PURE__ */ jsx("div", {
            className: "p-3 rounded-full bg-green-100 dark:bg-green-900/30",
            children: /* @__PURE__ */ jsx(DollarSign, {
              className: "text-green-600 dark:text-green-400",
              size: 24
            })
          }), /* @__PURE__ */ jsx("h2", {
            className: "text-lg font-semibold text-gray-900 dark:text-white",
            children: "Invoice Settings"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-3 text-gray-600 dark:text-gray-400",
          children: "Configure tax rates, payment methods, and invoice templates"
        })]
      }), /* @__PURE__ */ jsxs(Link, {
        to: "/settings/access-permission/systemsetting",
        className: "bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-md transition-shadow",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center space-x-4",
          children: [/* @__PURE__ */ jsx("div", {
            className: "p-3 rounded-full bg-blue-100 dark:bg-blue-900/30",
            children: /* @__PURE__ */ jsx(TicketCheck, {
              className: "text-purple-600 dark:text-purple-400",
              size: 24
            })
          }), /* @__PURE__ */ jsx("h2", {
            className: "text-lg font-semibold text-gray-900 dark:text-white",
            children: "System Settings"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-3 text-gray-600 dark:text-gray-400",
          children: "Configure system preferences and global settings Like Software Language and Holidays Settings"
        })]
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6",
      children: [/* @__PURE__ */ jsx("h2", {
        className: "text-xl font-semibold text-gray-900 dark:text-white mb-4",
        children: "Recent Activity"
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-4",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded",
          children: [/* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-300",
            children: "Updated tax rates"
          }), /* @__PURE__ */ jsx("span", {
            className: "text-sm text-gray-500 dark:text-gray-400",
            children: "2 hours ago"
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded",
          children: [/* @__PURE__ */ jsx("p", {
            className: "text-gray-600 dark:text-gray-300",
            children: "Created new user role"
          }), /* @__PURE__ */ jsx("span", {
            className: "text-sm text-gray-500 dark:text-gray-400",
            children: "1 day ago"
          })]
        })]
      })]
    })]
  });
});
const route44 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Settings
}, Symbol.toStringTag, { value: "Module" }));
const AccessRole = withComponentProps(function AccessRole2() {
  const [showAddModal, setShowAddModal] = useState(false);
  const [branch2, setBranch] = useState([]);
  const [errors, setErrors] = useState(null);
  const [role, setRole] = useState([]);
  const [currentRole, setCurrentRole] = useState(null);
  const [permissions, setPermissions] = useState(null);
  const [roleToDelete, setRoleToDelete] = useState(null);
  const [formData, setFormData] = useState({
    branchcode: "",
    role: ""
  });
  const [deleteData, setDeleteData] = useState({
    branchid: "",
    roleid: "",
    notes: "",
    userId: "GK123"
  });
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [loading, setLoading] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  const branchCodeOption = useBranchStore$1((state) => state.branchCodeOptions);
  const [branchCode, setBranchCode] = useState([]);
  const [roleOptions, setRoleOptions] = useState([]);
  const getRole = async () => {
    try {
      const response = await axios.get(`${BASE_URL}/setting/read`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("userole responsee", response == null ? void 0 : response.data);
      setRole(response == null ? void 0 : response.data);
    } catch (error) {
      console.log("error in fetch user role", error);
    }
  };
  useEffect(() => {
    getRole();
  }, []);
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleBranchChange = async (e) => {
    const selectedBranch = e.target.value;
    setFormData((prev) => ({
      ...prev,
      branchcode: selectedBranch,
      role: ""
    }));
    if (selectedBranch) {
      try {
        setLoading(true);
        const response = await fetch(`${BASE_URL}/branch/dropdown?branchcode=${selectedBranch}`, {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        const data = await response.json();
        const roles = data.result.map((item) => ({
          value: item.role,
          label: item.role
        }));
        setRoleOptions(roles);
      } catch (error) {
        console.error("Error fetching roles:", error);
        setRoleOptions([]);
      } finally {
        setLoading(false);
      }
    } else {
      setRoleOptions([]);
    }
  };
  const handleDeleteChange = (e) => {
    const {
      name,
      value
    } = e.target;
    setDeleteData((prev) => ({
      ...prev,
      [name]: value
    }));
  };
  const handleAddRoleSubmit = async (e) => {
    var _a, _b, _c, _d;
    setErrors(null);
    e.preventDefault();
    try {
      setLoading(true);
      console.log("addroledata", formData);
      const url = `${BASE_URL}/setting/create`;
      const response = await axios.post(url, formData, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.status == 201) {
        setShowAddModal(false);
        toast$1.success("Add Role Successfully!", {
          style: {
            border: "1px solid #2b6cb0",
            padding: "14px",
            width: "900px",
            color: "#2b6cb0"
          },
          iconTheme: {
            primary: "#2b6cb0",
            secondary: "#FFFAEE"
          }
        });
      }
      setLoading(false);
      getRole();
      setFormData({
        branchId: "",
        role: "",
        userId: ""
      });
    } catch (error) {
      console.log("error in Add role", (_b = (_a = error == null ? void 0 : error.response) == null ? void 0 : _a.data) == null ? void 0 : _b.error);
      setErrors((_d = (_c = error == null ? void 0 : error.response) == null ? void 0 : _c.data) == null ? void 0 : _d.error);
      setShowAddModal(true);
      toast$1.error(`${errors} Error in add role`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
      setErrors(null);
      setLoading(false);
    }
  };
  const handleRoleSelect = (roleItem) => {
    setCurrentRole(roleItem);
    const {
      id,
      branch_id,
      role: role2,
      create_datetime,
      last_update_datetime,
      ...perms
    } = roleItem;
    console.log("errorrsetdeletee", id, branch_id);
    setPermissions(perms);
  };
  const handlePermissionChange = (category, field, value) => {
    setPermissions((prev) => ({
      ...prev,
      [category]: {
        ...prev[category],
        [field]: value
      }
    }));
  };
  const handleUpdatePermissions = async () => {
    var _a, _b;
    if (!currentRole) {
      toast$1.error("Please select a role and enter User ID");
      return;
    }
    try {
      setLoading(true);
      const url = `${BASE_URL}/setting/edit/${currentRole.id}`;
      const payload = {
        branchcode: currentRole.branchcode.toString(),
        data: permissions,
        userId: formData.userId
      };
      console.log("Sending payload:", payload);
      const response = await axios.put(url, payload, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.status === 200) {
        toast$1.success("Access permission updated Successfully!", {
          style: {
            border: "1px solid #2b6cb0",
            padding: "14px",
            width: "900px",
            color: "#2b6cb0"
          },
          iconTheme: {
            primary: "#2b6cb0",
            secondary: "#FFFAEE"
          }
        });
        getRole();
      }
    } catch (error) {
      console.log("Error updating permissions:", error);
      toast$1.error(((_b = (_a = error == null ? void 0 : error.response) == null ? void 0 : _a.data) == null ? void 0 : _b.error) || "Error in add role", {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
    }
  };
  const renderPermissionCheckboxes = (category) => {
    if (!permissions || !permissions[category]) return null;
    return /* @__PURE__ */ jsx("div", {
      className: "flex flex-col gap-4 pl-9",
      children: Object.entries(permissions[category]).map(([key, value]) => /* @__PURE__ */ jsxs("label", {
        className: "flex items-center gap-3 cursor-pointer",
        children: [/* @__PURE__ */ jsx("input", {
          type: "checkbox",
          checked: value,
          onChange: (e) => handlePermissionChange(category, key, e.target.checked),
          className: "h-4 w-4 rounded border-gray-300 dark:border-gray-600 \r\n                bg-white dark:bg-gray-700\r\n                checked:bg-red-700 dark:checked:bg-red-600\r\n                focus:ring-red-700 dark:focus:ring-red-600\r\n                text-red-700 dark:text-red-600\r\n                transition-colors"
        }), /* @__PURE__ */ jsx("span", {
          className: "text-sm text-gray-600 dark:text-gray-300",
          children: key === "all" ? `All ${category.replace(/([A-Z])/g, " $1").toLowerCase()}` : `${key.charAt(0).toUpperCase() + key.slice(1)} ${category.replace(/([A-Z])/g, " $1").toLowerCase()}`
        })]
      }, key))
    });
  };
  const renderPermissionSections = () => {
    if (!permissions) return null;
    const permissionCategories = Object.keys(permissions).filter((key) => !["id", "branchcode", "role", "create_datetime", "last_update_datetime"].includes(key));
    return permissionCategories.map((category) => /* @__PURE__ */ jsxs("div", {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex gap-3 items-center",
        children: [/* @__PURE__ */ jsx(Key, {
          className: "text-gray-600 dark:text-gray-400",
          size: 20
        }), /* @__PURE__ */ jsxs("p", {
          className: "text-gray-600 dark:text-gray-300",
          children: [category.replace(/([A-Z])/g, " $1"), " Permissions:"]
        })]
      }), renderPermissionCheckboxes(category)]
    }, category));
  };
  const handleDeleteClick = (roleItem) => {
    console.log("deleterolited", roleItem);
    setRoleToDelete(roleItem);
    setShowDeleteModal(true);
  };
  const handleDeleteRole = async () => {
    var _a, _b;
    if (!roleToDelete) return;
    const payload = {
      branchcode: roleToDelete.branchcode.toString(),
      notes: deleteData.notes
    };
    console.log("deletepayload", payload);
    try {
      setLoading(true);
      const url = `${BASE_URL}/setting/delete/${roleToDelete.id}`;
      console.log("deleteurlll", url);
      const response = await axios.delete(url, {
        data: payload,
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if (response.status === 200) {
        toast$1.success("User Role Deleted Successfully!", {
          style: {
            border: "1px solid #2b6cb0",
            padding: "14px",
            width: "900px",
            color: "#2b6cb0"
          },
          iconTheme: {
            primary: "#2b6cb0",
            secondary: "#FFFAEE"
          }
        });
        getRole();
        setRoleToDelete(null);
        setDeleteData([]);
        if ((currentRole == null ? void 0 : currentRole.id) === roleToDelete.id) {
          setCurrentRole(null);
          setPermissions(null);
        }
      }
    } catch (error) {
      console.log("Error deleting role:", error);
      toast$1.error(((_b = (_a = error == null ? void 0 : error.response) == null ? void 0 : _a.data) == null ? void 0 : _b.error) || `Error in deleting role`, {
        style: {
          border: "1px solid  rgb(185 28 28)",
          padding: "14px",
          width: "900px",
          color: " rgb(185 28 28)"
        },
        iconTheme: {
          primary: " rgb(185 28 28)",
          secondary: "#FFFAEE"
        }
      });
    } finally {
      setLoading(false);
      setShowDeleteModal(false);
      setRoleToDelete(null);
    }
  };
  const renderDeleteModal = () => /* @__PURE__ */ jsx(Modal, {
    isVisible: showDeleteModal,
    onClose: () => setShowDeleteModal(false),
    title: "Confirm Delete",
    children: /* @__PURE__ */ jsxs("div", {
      className: "p-4",
      children: [/* @__PURE__ */ jsxs("p", {
        className: "text-gray-700 dark:text-gray-300",
        children: ['Are you sure you want to delete the role "', roleToDelete == null ? void 0 : roleToDelete.role, '"?']
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col py-2 text-left mt-4",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-sm text-gray-700 dark:text-gray-300 mb-1",
          children: "Notes (required for deletion)"
        }), /* @__PURE__ */ jsx("input", {
          name: "notes",
          value: deleteData.notes,
          onChange: handleDeleteChange,
          className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-3 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
          type: "text",
          placeholder: "Enter Your Notes Here",
          required: true
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-end gap-3 mt-6",
        children: [/* @__PURE__ */ jsx("button", {
          type: "button",
          onClick: () => setShowDeleteModal(false),
          className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
          disabled: loading,
          children: "Cancel"
        }), /* @__PURE__ */ jsx("button", {
          type: "button",
          onClick: handleDeleteRole,
          className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover:bg-gradient-to-b hover-effect transition",
          disabled: loading,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Delete Role"
        })]
      })]
    })
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "p-4",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col lg:flex-row gap-4 lg:gap-8",
      children: [/* @__PURE__ */ jsx(Toaster, {
        position: "top-center",
        reverseOrder: false
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 w-full lg:w-[50%]",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center",
          children: [/* @__PURE__ */ jsx("h1", {
            className: "text-lg font-bold text-gray-600 dark:text-gray-300",
            children: "Role"
          }), /* @__PURE__ */ jsxs("button", {
            className: "text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-600 flex items-center gap-1",
            onClick: () => setShowAddModal(true),
            children: [/* @__PURE__ */ jsx(Plus, {
              className: "inline",
              size: 20
            }), /* @__PURE__ */ jsx("span", {
              children: "Add Role"
            })]
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "flex flex-col gap-1 mt-4",
          children: /* @__PURE__ */ jsx("ul", {
            children: role.map((rol) => /* @__PURE__ */ jsxs("li", {
              className: "flex justify-between items-center hover:bg-gray-200 dark:hover:bg-gray-700 py-3 px-3 transition-colors",
              children: [/* @__PURE__ */ jsx("span", {
                className: "text-gray-600 dark:text-gray-300",
                children: rol.role.charAt(0).toUpperCase() + rol.role.slice(1).toLowerCase()
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex space-x-4 text-gray-600 dark:text-gray-400",
                children: [/* @__PURE__ */ jsx("button", {
                  onClick: () => handleRoleSelect(rol),
                  children: /* @__PURE__ */ jsx(Edit, {
                    className: "inline hover:text-red-600 dark:hover:text-red-400 cursor-pointer",
                    size: 20
                  })
                }), /* @__PURE__ */ jsx(Trash2, {
                  className: "inline hover:text-red-600 dark:hover:text-red-400 cursor-pointer",
                  onClick: () => handleDeleteClick(rol),
                  size: 20
                })]
              })]
            }, rol.id))
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 w-full lg:w-[50%]",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex justify-between items-center",
          children: [/* @__PURE__ */ jsxs("h1", {
            className: "text-lg font-bold text-gray-600 dark:text-gray-300",
            children: ["Permissions: ", (currentRole == null ? void 0 : currentRole.role) || "Select a role"]
          }), currentRole && /* @__PURE__ */ jsx("button", {
            onClick: handleUpdatePermissions,
            className: "px-3 py-1 bg-[var(--color-primary)] text-sm hover:bg-[var(--color-hover)] text-white rounded hover:bg-gradient-to-b hover-effect transition",
            disabled: loading,
            children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Save Permissions"
          })]
        }), currentRole ? /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-6 mt-4",
          children: [renderPermissionSections(), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col py-2 text-left",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-sm text-gray-700 dark:text-gray-300 mb-1",
              children: "User ID (required for update)"
            }), /* @__PURE__ */ jsx("input", {
              name: "userId",
              value: formData.userId,
              onChange: handleChange,
              className: "w-full bg-blue-200/25 dark:bg-gray-700 text-sm px-3 py-2 border border-gray-400 dark:border-gray-600 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-600 focus:border-gray-400 dark:focus:border-gray-500 rounded",
              type: "text",
              placeholder: "Enter user ID",
              required: true
            })]
          })]
        }) : /* @__PURE__ */ jsx("div", {
          className: "mt-4 text-gray-500 dark:text-gray-400",
          children: "Please select a role to view and edit permissions"
        })]
      })]
    }), /* @__PURE__ */ jsxs(Modal, {
      isVisible: showAddModal,
      onClose: () => setShowAddModal(false),
      title: "Add Role Form",
      children: [/* @__PURE__ */ jsx(Toaster, {
        position: "top-center",
        reverseOrder: false
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
        children: [/* @__PURE__ */ jsxs("p", {
          className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
          children: [/* @__PURE__ */ jsx(Hash, {
            className: "inline mr-1",
            size: 14
          }), " Branch Code"]
        }), /* @__PURE__ */ jsxs("select", {
          name: "branchcode",
          value: formData.branchcode,
          onChange: handleBranchChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
          required: true,
          disabled: loading,
          children: [/* @__PURE__ */ jsx("option", {
            value: "",
            children: "Select Branch"
          }), branchCodeOption == null ? void 0 : branchCodeOption.map((option) => /* @__PURE__ */ jsx("option", {
            value: option.value,
            children: option.label
          }, option.value))]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "bg-gray-50 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100 dark:border-gray-700",
        children: [/* @__PURE__ */ jsxs("p", {
          className: "text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",
          children: [/* @__PURE__ */ jsx(UserCheck, {
            className: "inline mr-1",
            size: 14
          }), " User Role"]
        }), /* @__PURE__ */ jsxs("select", {
          name: "role",
          value: formData.role,
          onChange: handleChange,
          className: "w-full bg-transparent text-sm font-medium text-gray-900 dark:text-gray-100 mt-1 focus:outline-none",
          required: true,
          disabled: !formData.branchcode || loading,
          children: [/* @__PURE__ */ jsx("option", {
            value: "",
            children: "Select Role"
          }), roleOptions == null ? void 0 : roleOptions.map((option) => /* @__PURE__ */ jsx("option", {
            value: option.value,
            children: option.label
          }, option.value))]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-end gap-3 mt-6",
        children: [/* @__PURE__ */ jsx("button", {
          type: "button",
          onClick: () => setShowAddModal(false),
          className: "px-4 py-2 bg-[var(--color-secondary)] hover:[var(--color-hover-secondary)] hover-effect text-gray-800 dark:text-gray-700 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition",
          disabled: loading,
          children: "Cancel"
        }), /* @__PURE__ */ jsx("button", {
          type: "submit",
          className: "px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-hover)] text-white rounded hover:bg-gradient-to-b hover-effect transition",
          disabled: loading || !formData.branchcode || !formData.role,
          onClick: handleAddRoleSubmit,
          children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Create Role"
        })]
      })]
    }), renderDeleteModal()]
  });
});
const route45 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: AccessRole
}, Symbol.toStringTag, { value: "Module" }));
const Language = () => {
  const isMobile = useMediaQuery({ query: "(max-width: 768px)" });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  useAuthStore((state) => state.branchcode);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [
    { value: 20, label: "20 per page" },
    { value: 40, label: "30 per page" },
    { value: 50, label: "40 per page" },
    { value: 80, label: "50 per page" },
    { value: 100, label: "100 per page" },
    { value: 200, label: "100 per page" }
  ];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getSoftware = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode2 = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/master/language/read?branchcode=${branchCode2}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode2) url += `&branchcode=${branchCode2}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: { Authorization: `Bearer ${token}` }
      });
      console.log("responseeee", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getSoftware();
  }, [
    currentPage,
    searchTerm,
    selectStatus,
    selectedManager,
    selectedBranchCode,
    sortOrder,
    pageSize
  ]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Language added successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (software) => {
    setSelectedBranch(software);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (id) => {
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    try {
      setLoading(true);
      const response = await axios.delete(
        `${BASE_URL}/master/language/delete/${id}`,
        {
          headers: { Authorization: `Bearer ${token}` }
        }
      );
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Language deleted successfully!", toastStyle);
        fetchBranches(token);
        getSoftware();
      }
    } catch (error2) {
      console.error("Error deleting software", error2);
      toast$1.error("Failed to delete software");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [
    { data: "id" },
    { data: "Branch Code" },
    { data: "Software Name" },
    { data: "Actions" }
  ];
  const tbody = () => {
    if (!data) return [];
    return data.map((software) => ({
      id: software.id,
      data: [
        { data: software.id },
        { data: software.branchcode },
        { data: software.name },
        // {
        //   data: (
        //     <div
        //       className={`px-3 py-1 rounded-full text-sm inline-flex items-center ${software.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`}
        //     >
        //       <span
        //         className={`w-2 h-2 rounded-full mr-2 ${software.status === "active" ? "bg-green-800" : "bg-red-700"}`}
        //       ></span>
        //       {software.status.charAt(0).toUpperCase() + software.status.slice(1)}
        //     </div>
        //   ),
        // },
        {
          data: /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-center gap-5 -ml-15", children: [
            /* @__PURE__ */ jsx(Link$1, { to: `/branch/${software.id}`, children: /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, { size: 18 })
              }
            ) }),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleEditBranch(software),
                title: "Edit",
                children: /* @__PURE__ */ jsx(SquarePen, { size: 18 })
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
                onClick: () => handleDeleteBranch2(software.id),
                title: "Delete",
                children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
              }
            )
          ] }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Language updated successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Software");
    XLSX.writeFile(wb, "SoftWareList.xlsx");
  };
  return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col min-h-screen w-[850px]", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
      /* @__PURE__ */ jsxs("div", { className: "p-4 flex-grow", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center mb-4", children: [
          /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]", children: "Global Language Management" }),
          isMobile && /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => setShowFilters2(!showFilters2),
              className: "p-2 bg-gray-200 rounded-md",
              children: showFilters2 ? "Hide Filters" : "Show Filters"
            }
          )
        ] }),
        /* @__PURE__ */ jsx(Toaster, { position: "top-center", reverseOrder: false }),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: pageSizeOptions,
                      selectedValue: pageSize,
                      onSelect: handlePageSizeChange,
                      placeholder: "Items per page",
                      className: "w-full md:w-[150px]"
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: handleOnExport,
                      className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                      children: [
                        /* @__PURE__ */ jsx(FileDown, { className: "mr-1" }),
                        !isMobile && "Export Excel"
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: () => setShowCreateModal(true),
                      className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                      children: [
                        !isMobile && "New Language",
                        " +"
                      ]
                    }
                  )
                ]
              }
            )
          }
        ),
        /* @__PURE__ */ jsx(
          "div",
          {
            className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
            children: /* @__PURE__ */ jsxs(
              "div",
              {
                className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                children: [
                  /* @__PURE__ */ jsx(
                    Dropdown,
                    {
                      options: branchCodeOptions,
                      selectedValue: selectedBranchCode,
                      onSelect: handleBranchCodeChange,
                      placeholder: "Branch Code",
                      className: "w-full md:w-[200px]",
                      isLoading: isStoreLoading
                    }
                  ),
                  /* @__PURE__ */ jsxs(
                    "button",
                    {
                      onClick: toggleSortOrder,
                      className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                      children: [
                        "Sort ",
                        sortOrder === "desc" ? "" : ""
                      ]
                    }
                  ),
                  /* @__PURE__ */ jsx(
                    "div",
                    {
                      className: `${isMobile ? "w-full" : "w-[180px] mt-3"}`,
                      children: /* @__PURE__ */ jsx(
                        SearchInput,
                        {
                          value: searchTerm,
                          onChange: handleSearch,
                          placeholder: "Search branches...",
                          className: "w-full"
                        }
                      )
                    }
                  )
                ]
              }
            )
          }
        ),
        loading && /* @__PURE__ */ jsx("div", { className: "text-center py-4", children: "Loading..." }),
        error && /* @__PURE__ */ jsx("div", { className: "text-red-500 text-center py-4", children: error }),
        /* @__PURE__ */ jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsx(
          DataTable,
          {
            thead,
            tbody,
            responsive: true,
            className: "min-w-[50%]"
          }
        ) })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4", children: /* @__PURE__ */ jsx(
        CustomPagination,
        {
          total: totalItem,
          currentPage,
          defaultPageSize: pageSize,
          onChange: handlePageChange,
          paginationLabel: "branches",
          isScroll: true
        }
      ) })
    ] }),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showCreateModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowCreateModal(false),
        title: "CREATE NEW LANGUAGE",
        children: /* @__PURE__ */ jsx(
          CreateLanguageForm,
          {
            onSuccess: handleCreateSuccess,
            onCancel: () => setShowCreateModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showEditModal,
        className: "w-full md:w-[800px]",
        onClose: () => setShowEditModal(false),
        title: "EDIT SOFTWARE",
        children: /* @__PURE__ */ jsx(
          EditLanguageForm,
          {
            branch: selectedBranch,
            onSuccess: handleEditSuccess,
            onCancel: () => setShowEditModal(false)
          }
        )
      }
    ),
    /* @__PURE__ */ jsx(
      Modal,
      {
        isVisible: showDeleteModal,
        className: "w-full md:w-[600px]",
        onClose: () => setShowDeleteModal(false),
        title: "DELETE LANGUAGE",
        children: /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-6 justify-center items-center", children: [
          /* @__PURE__ */ jsx("p", { className: "text-gray-500 text-lg font-bold text-center", children: "Are you sure you want to delete this Language?" }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-4 flex-wrap justify-center", children: [
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "button",
                className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
                disabled: loading,
                onClick: () => setShowDeleteModal(false),
                children: "Cancel"
              }
            ),
            /* @__PURE__ */ jsx(
              "button",
              {
                type: "submit",
                className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
                disabled: loading,
                onClick: handleDeleteSubmit,
                children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
              }
            )
          ] })
        ] })
      }
    )
  ] }) });
};
const SystemSetting = () => {
  const [activeTab, setActiveTab] = useState("software");
  const tabs = [{
    id: "software",
    label: "Softwares"
  }, {
    id: "languages",
    label: "Languages"
  }, {
    id: "leaves",
    label: "Leaves"
  }];
  const isMobile = useMediaQuery({
    query: "(max-width: 768px)"
  });
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [totalItem, setTotalItem] = useState(0);
  const [error, setError] = useState(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedBranch, setSelectedBranch] = useState();
  const [showDeleteModal, setShowDeleteModal] = useState(false);
  const [deleteId, setDeleteId] = useState("");
  const [sortOrder, setSortOrder] = useState("");
  const [selectedManager, setSelectedManager] = useState("");
  const [selectedBranchCode, setSelectedBranchCode] = useState("");
  const [pageSize, setPageSize] = useState(8);
  const [showFilters2, setShowFilters2] = useState(false);
  const token = useAuthStore((state) => state.accessToken);
  useAuthStore((state) => state.branchcode);
  const {
    branches,
    managerOptions,
    branchCodeOptions,
    fetchBranches,
    isLoading: isStoreLoading
  } = useBranchStore$1();
  const pageSizeOptions = [{
    value: 20,
    label: "20 per page"
  }, {
    value: 40,
    label: "30 per page"
  }, {
    value: 50,
    label: "40 per page"
  }, {
    value: 80,
    label: "50 per page"
  }, {
    value: 100,
    label: "100 per page"
  }, {
    value: 200,
    label: "100 per page"
  }];
  useEffect(() => {
    fetchBranches(token);
  }, [token]);
  const getSoftware = async (page = currentPage, limit = pageSize, search = searchTerm, status = selectStatus, manager = selectedManager, branchCode2 = selectedBranchCode, sort = sortOrder) => {
    var _a, _b, _c, _d;
    setLoading(true);
    try {
      let url = `${BASE_URL}/master/software/read?branchcode=${branchCode2}&page=${page}&limit=${limit}`;
      if (search) url += `&search=${search}`;
      if (status) url += `&status=${status}`;
      if (manager) url += `&manager_id=${manager}`;
      if (branchCode2) url += `&branchcode=${branchCode2}`;
      if (sort) url += `&dec=${sort}`;
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      console.log("responseeee", response);
      setSheetData((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.data);
      setTotalItem(((_c = (_b = response == null ? void 0 : response.data) == null ? void 0 : _b.data) == null ? void 0 : _c.totalDocuments) || 0);
      setData(((_d = response == null ? void 0 : response.data) == null ? void 0 : _d.data) || []);
    } catch (error2) {
      console.error("Error fetching branch list", error2);
      setError("Failed to fetch branches");
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    getSoftware();
  }, [currentPage, searchTerm, selectStatus, selectedManager, selectedBranchCode, sortOrder, pageSize]);
  const handlePageChange = (page) => {
    setCurrentPage(page);
  };
  const handleCreateSuccess = () => {
    setShowCreateModal(false);
    toast$1.success("Software added successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleSearch = (value) => {
    setSearchTerm(value);
    setCurrentPage(1);
  };
  const handleEditBranch = (software) => {
    setSelectedBranch(software);
    setShowEditModal(true);
  };
  const handleDeleteBranch2 = (id) => {
    setShowDeleteModal(true);
    setDeleteId(id);
  };
  const handleDeleteSubmit = async () => {
    const id = Number(deleteId);
    try {
      setLoading(true);
      const response = await axios.delete(`${BASE_URL}/master/software/delete/${id}`, {
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      if ((response == null ? void 0 : response.status) === 201) {
        setShowDeleteModal(false);
        toast$1.success("Software deleted successfully!", toastStyle);
        fetchBranches(token);
        getSoftware();
      }
    } catch (error2) {
      console.error("Error deleting software", error2);
      toast$1.error("Failed to delete software");
    } finally {
      setLoading(false);
    }
  };
  const toggleSortOrder = () => {
    setSortOrder((prev) => prev === "desc" ? "" : "desc");
    setCurrentPage(1);
  };
  const handleBranchCodeChange = (value) => {
    setSelectedBranchCode(value);
    setCurrentPage(1);
  };
  const handlePageSizeChange = (value) => {
    setPageSize(value);
    setCurrentPage(1);
  };
  const thead = () => [{
    data: "id"
  }, {
    data: "Branch Code"
  }, {
    data: "Software Name"
  }, {
    data: "Actions"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((software) => ({
      id: software.id,
      data: [
        {
          data: software.id
        },
        {
          data: software.branchcode
        },
        {
          data: software.name
        },
        // {
        //   data: (
        //     <div
        //       className={`px-3 py-1 rounded-full text-sm inline-flex items-center ${software.status === "active" ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800"}`}
        //     >
        //       <span
        //         className={`w-2 h-2 rounded-full mr-2 ${software.status === "active" ? "bg-green-800" : "bg-red-700"}`}
        //       ></span>
        //       {software.status.charAt(0).toUpperCase() + software.status.slice(1)}
        //     </div>
        //   ),
        // },
        {
          data: /* @__PURE__ */ jsxs("div", {
            className: "flex flex-wrap justify-center gap-5 -ml-15",
            children: [/* @__PURE__ */ jsx(Link$1, {
              to: `/branch/${software.id}`,
              children: /* @__PURE__ */ jsx("button", {
                className: "p-1 text-blue-700 rounded hover:text-gray-500 dark:hover:text-gray-300",
                title: "View",
                children: /* @__PURE__ */ jsx(Eye, {
                  size: 18
                })
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-[var(--color-primary)] rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleEditBranch(software),
              title: "Edit",
              children: /* @__PURE__ */ jsx(SquarePen, {
                size: 18
              })
            }), /* @__PURE__ */ jsx("button", {
              className: "p-1 text-red-600 rounded hover:text-gray-500 dark:hover:text-gray-300",
              onClick: () => handleDeleteBranch2(software.id),
              title: "Delete",
              children: /* @__PURE__ */ jsx(Trash2, {
                size: 18
              })
            })]
          }),
          className: "action-cell"
        }
      ]
    }));
  };
  const handleEditSuccess = () => {
    setShowEditModal(false);
    toast$1.success("Branch updated successfully!", toastStyle);
    fetchBranches(token);
    getSoftware();
  };
  const handleOnExport = () => {
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.json_to_sheet(sheetData);
    XLSX.utils.book_append_sheet(wb, ws, "Software");
    XLSX.writeFile(wb, "SoftWareList.xlsx");
  };
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsxs("div", {
      className: "flex flex-col min-h-screen w-[850px]",
      children: [/* @__PURE__ */ jsx("div", {
        className: "border-b border-gray-200 dark:border-gray-700 ",
        children: /* @__PURE__ */ jsx("nav", {
          className: "flex -mb-px",
          children: tabs.map((tab) => /* @__PURE__ */ jsx("button", {
            onClick: () => setActiveTab(tab.id),
            className: `mr-8 py-4 px-1 border-b-2 font-medium text-sm ${activeTab === tab.id ? "border-red-500 text-red-600" : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,
            children: tab.label
          }, tab.id))
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "p-4 flex-grow w-full ",
        children: [activeTab === "software" && /* @__PURE__ */ jsxs(Fragment, {
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex flex-col w-[850px]",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "p-4 flex-grow",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-center mb-4",
                children: [/* @__PURE__ */ jsx("h2", {
                  className: "text-xl font-semibold text-[var(--color-primary)] dark:text-[var(--color-primary)]",
                  children: "Global Software Management"
                }), isMobile && /* @__PURE__ */ jsx("button", {
                  onClick: () => setShowFilters2(!showFilters2),
                  className: "p-2 bg-gray-200 rounded-md",
                  children: showFilters2 ? "Hide Filters" : "Show Filters"
                })]
              }), /* @__PURE__ */ jsx(Toaster, {
                position: "top-center",
                reverseOrder: false
              }), /* @__PURE__ */ jsx("div", {
                className: `flex ${isMobile ? "flex-col" : "items-end justify-end"} gap-4 mb-5`,
                children: /* @__PURE__ */ jsxs("div", {
                  className: `flex ${isMobile ? "flex-col" : "flex-row"} gap-4`,
                  children: [/* @__PURE__ */ jsx(Dropdown, {
                    options: pageSizeOptions,
                    selectedValue: pageSize,
                    onSelect: handlePageSizeChange,
                    placeholder: "Items per page",
                    className: "w-full md:w-[150px]"
                  }), /* @__PURE__ */ jsxs("button", {
                    onClick: handleOnExport,
                    className: "flex items-center justify-center text-gray-400 bg-white focus:outline-non font-medium text-sm rounded-sm border border-dotted border-gray-400 hover:text-red-700/70 px-3 dark:bg-gray-800 dark:text-gray-300 py-2.5",
                    children: [/* @__PURE__ */ jsx(FileDown, {
                      className: "mr-1"
                    }), !isMobile && "Export Excel"]
                  }), /* @__PURE__ */ jsxs("button", {
                    onClick: () => setShowCreateModal(true),
                    className: "flex items-center justify-center text-white bg-[var(--color-primary)] hover-effect dark:bg-red-800 focus:outline-non font-medium text-sm rounded-sm px-5 py-2.5",
                    children: [!isMobile && "New Software", " +"]
                  })]
                })
              }), /* @__PURE__ */ jsx("div", {
                className: `${isMobile && !showFilters2 ? "hidden" : "block"} mb-4`,
                children: /* @__PURE__ */ jsxs("div", {
                  className: `${isMobile ? "grid grid-cols-1 gap-3" : "flex flex-wrap justify-between items-center gap-3"}`,
                  children: [/* @__PURE__ */ jsx(Dropdown, {
                    options: branchCodeOptions,
                    selectedValue: selectedBranchCode,
                    onSelect: handleBranchCodeChange,
                    placeholder: "Branch Code",
                    className: "w-full md:w-[200px]",
                    isLoading: isStoreLoading
                  }), /* @__PURE__ */ jsxs("button", {
                    onClick: toggleSortOrder,
                    className: `${isMobile ? "w-full" : "w-[200px]"} h-[40px] text-white bg-[var(--color-primary)] hover-effect px-2 py-1 rounded-sm`,
                    children: ["Sort ", sortOrder === "desc" ? "" : ""]
                  }), /* @__PURE__ */ jsx("div", {
                    className: `${isMobile ? "w-full" : "w-[180px] mt-3"}`,
                    children: /* @__PURE__ */ jsx(SearchInput, {
                      value: searchTerm,
                      onChange: handleSearch,
                      placeholder: "Search branches...",
                      className: "w-full"
                    })
                  })]
                })
              }), loading && /* @__PURE__ */ jsx("div", {
                className: "text-center py-4",
                children: "Loading..."
              }), error && /* @__PURE__ */ jsx("div", {
                className: "text-red-500 text-center py-4",
                children: error
              }), /* @__PURE__ */ jsx("div", {
                className: "overflow-x-auto",
                children: /* @__PURE__ */ jsx(DataTable, {
                  thead,
                  tbody,
                  responsive: true,
                  className: "min-w-[50%]"
                })
              })]
            }), /* @__PURE__ */ jsx("div", {
              className: "bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
              children: /* @__PURE__ */ jsx(CustomPagination, {
                total: totalItem,
                currentPage,
                defaultPageSize: pageSize,
                onChange: handlePageChange,
                paginationLabel: "branches",
                isScroll: true
              })
            })]
          }), /* @__PURE__ */ jsx(Modal, {
            isVisible: showCreateModal,
            className: "w-full md:w-[800px]",
            onClose: () => setShowCreateModal(false),
            title: "CREATE NEW SOFTWARE",
            children: /* @__PURE__ */ jsx(CreateSoftwareForm, {
              onSuccess: handleCreateSuccess,
              onCancel: () => setShowCreateModal(false)
            })
          }), /* @__PURE__ */ jsx(Modal, {
            isVisible: showEditModal,
            className: "w-full md:w-[800px]",
            onClose: () => setShowEditModal(false),
            title: "EDIT SOFTWARE",
            children: /* @__PURE__ */ jsx(EditSoftwareForm, {
              branch: selectedBranch,
              onSuccess: handleEditSuccess,
              onCancel: () => setShowEditModal(false)
            })
          }), /* @__PURE__ */ jsx(Modal, {
            isVisible: showDeleteModal,
            className: "w-full md:w-[600px]",
            onClose: () => setShowDeleteModal(false),
            title: "DELETE BRANCH",
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex flex-col gap-6 justify-center items-center",
              children: [/* @__PURE__ */ jsx("p", {
                className: "text-gray-500 text-lg font-bold text-center",
                children: "Are you sure you want to delete this Software?"
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex gap-4 flex-wrap justify-center",
                children: [/* @__PURE__ */ jsx("button", {
                  type: "button",
                  className: "px-4 py-2 bg-[var(--color-secondary)] hover:bg-[var(--color-hover-secondary)] text-gray-800 hover-effect dark:text-gray-700 rounded dark:hover:bg-gray-500 transition",
                  disabled: loading,
                  onClick: () => setShowDeleteModal(false),
                  children: "Cancel"
                }), /* @__PURE__ */ jsx("button", {
                  type: "submit",
                  className: "px-4 py-2 bg-[var(--color-primary)] text-white rounded hover:bg-[var(--color-hover)] hover-effect transition",
                  disabled: loading,
                  onClick: handleDeleteSubmit,
                  children: loading ? /* @__PURE__ */ jsx(ButtonLoader$1, {}) : "Confirm"
                })]
              })]
            })
          })]
        }), activeTab === "languages" && /* @__PURE__ */ jsx(Language, {}), activeTab === "leaves" && /* @__PURE__ */ jsx(LeaveTy, {})]
      })]
    })
  });
};
const SystemSetting$1 = withComponentProps(SystemSetting);
const route47 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: SystemSetting$1
}, Symbol.toStringTag, { value: "Module" }));
const SettingTeam = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [sheetData, setSheetData] = useState([]);
  const [selectStatus, setSelectStatus] = useState("");
  const [selectedFilter, setSelectedFilter] = useState("");
  const data = [{
    id: "1",
    Tname: "AJB Project",
    Tdescription: "Sales Team",
    members: "Karthick, santhiya",
    createdAt: "21-03-2024"
  }, {
    id: "2",
    Tname: "Summar campaign",
    Tdescription: "Sales Team",
    members: "Karthick, santhiya",
    createdAt: "21-03-2024"
  }, {
    id: "3",
    Tname: "adhi Project",
    Tdescription: "Sales Team",
    members: "Karthick, santhiya",
    createdAt: "21-03-2024"
  }];
  const getData = () => {
    return data;
  };
  useEffect(() => {
    setSheetData(getData());
  }, []);
  const thead = () => [{
    data: "id"
  }, {
    data: "Team Name"
  }, {
    data: "Description"
  }, {
    data: "Members"
  }, {
    data: "Created At"
  }];
  const tbody = () => {
    if (!data) return [];
    return data.map((user) => ({
      id: user.id,
      data: [{
        data: user.id
      }, {
        data: user.Tname
      }, {
        data: user.Tdescription
      }, {
        data: user.members
      }, {
        data: user.createdAt
      }]
    }));
  };
  const filterOptions = [{
    value: "client",
    label: "Client"
  }, {
    value: "Project",
    label: "Project"
  }, {
    value: "Leads",
    label: "Leads"
  }, {
    value: "Employee",
    label: "Employee"
  }];
  const statusOptions = [{
    value: "Pending",
    label: "Pending"
  }, {
    value: "Paid",
    label: "Paid"
  }, {
    value: "Un Paid",
    label: "Un-Paid"
  }];
  return /* @__PURE__ */ jsxs("div", {
    className: "flex flex-col min-h-screen",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "p-4 flex-grow",
      children: [/* @__PURE__ */ jsx("h2", {
        className: "text-xl font-semibold mb-4 text-red-700 dark:text-red-700",
        children: "Team List "
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex justify-between",
        children: [/* @__PURE__ */ jsx(Dropdown, {
          options: filterOptions,
          selectedValue: selectedFilter,
          onSelect: setSelectedFilter,
          placeholder: "Filter By",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(Dropdown, {
          options: statusOptions,
          selectedValue: selectStatus,
          onSelect: setSelectStatus,
          placeholder: "Payment Status",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(Dropdown, {
          options: filterOptions,
          selectedValue: selectedFilter,
          onSelect: setSelectedFilter,
          placeholder: "Sort by",
          className: "w-[200px]"
        }), /* @__PURE__ */ jsx(SearchInput, {
          value: searchTerm,
          onChange: setSearchTerm,
          placeholder: "Search users..."
        })]
      }), /* @__PURE__ */ jsx(DataTable, {
        thead,
        tbody,
        isSearch: true,
        actionIcons: ["Eye", "Edit", "Trash2"]
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "sticky bottom-0 border-t border-gray-200 dark:border-gray-700 p-4",
      children: /* @__PURE__ */ jsx(CustomPagination, {
        total: 100,
        currentPage,
        defaultPageSize: 10,
        onChange: setCurrentPage,
        paginationLabel: "employees",
        isScroll: true
      })
    })]
  });
};
const SettingTeam$1 = withComponentProps(SettingTeam);
const route48 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: SettingTeam$1
}, Symbol.toStringTag, { value: "Module" }));
const Tax = () => {
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsx("h1", {
      children: "settings Tax"
    })
  });
};
const Tax$1 = withComponentProps(Tax);
const route49 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Tax$1
}, Symbol.toStringTag, { value: "Module" }));
const PaymentMethod = () => {
  return /* @__PURE__ */ jsx(Fragment, {
    children: /* @__PURE__ */ jsx("h1", {
      children: "settings payment"
    })
  });
};
const PaymentMethod$1 = withComponentProps(PaymentMethod);
const route50 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: PaymentMethod$1
}, Symbol.toStringTag, { value: "Module" }));
const NotFound = () => {
  const navigate = useNavigate();
  const handleGoBack = () => {
    navigate(-1);
  };
  const handleGoHome = () => {
    navigate("/");
  };
  useEffect(() => {
    document.title = "Page Not Found | CRM Admin";
  }, []);
  return /* @__PURE__ */ jsxs("div", {
    className: "min-h-screen bg-transparant dark:bg-gray-900 flex flex-col justify-center py-8 sm:px-6 lg:px-8",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "sm:mx-auto sm:w-full sm:max-w-md",
      children: [/* @__PURE__ */ jsx("div", {
        className: "flex justify-center",
        children: /* @__PURE__ */ jsx("svg", {
          xmlns: "http://www.w3.org/2000/svg",
          className: "h-16 w-16 text-red-600 dark:text-red-800",
          fill: "none",
          viewBox: "0 0 24 24",
          stroke: "currentColor",
          children: /* @__PURE__ */ jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeWidth: 2,
            d: "M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          })
        })
      }), /* @__PURE__ */ jsx("h2", {
        className: "mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",
        children: "404 - Page Not Found"
      }), /* @__PURE__ */ jsx("p", {
        className: "mt-2 text-center text-sm text-gray-600 dark:text-gray-400",
        children: "Oops! The page you're looking for doesn't exist or has been moved."
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "mt-8 sm:mx-auto sm:w-full sm:max-w-md",
      children: /* @__PURE__ */ jsxs("div", {
        className: "bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex flex-col space-y-4",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: handleGoBack,
            className: "w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800 transition-colors duration-200",
            children: "Go Back"
          }), /* @__PURE__ */ jsx("button", {
            onClick: handleGoHome,
            className: "w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-700 transition-colors duration-200 dark:text-red-100 dark:bg-red-700 dark:hover:bg-red-600",
            children: "Return to Dashboard"
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "mt-6",
          children: /* @__PURE__ */ jsxs("div", {
            className: "relative",
            children: [/* @__PURE__ */ jsx("div", {
              className: "absolute inset-0 flex items-center",
              children: /* @__PURE__ */ jsx("div", {
                className: "w-full border-t border-gray-300 dark:border-gray-600"
              })
            }), /* @__PURE__ */ jsx("div", {
              className: "relative flex justify-center text-sm",
              children: /* @__PURE__ */ jsx("span", {
                className: "px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",
                children: "Or search for what you need"
              })
            })]
          })
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "mt-8 text-center text-xs text-gray-500 dark:text-gray-400",
      children: [/* @__PURE__ */ jsx("p", {
        children: "Need help? Contact support@yourcrm.com"
      }), /* @__PURE__ */ jsx("p", {
        className: "mt-1",
        children: "Error code: 404_NOT_FOUND"
      })]
    })]
  });
};
const NotFound$1 = withComponentProps(NotFound);
const route51 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: NotFound$1
}, Symbol.toStringTag, { value: "Module" }));
const serverManifest = { "entry": { "module": "/assets/entry.client-9i1m4BvT.js", "imports": ["/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-CyJ3O4p6.js"], "css": [] }, "routes": { "root": { "id": "root", "parentId": void 0, "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/root-Fb8B-7jU.js", "imports": ["/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-CyJ3O4p6.js", "/assets/with-props-DF0D9zIo.js"], "css": ["/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Login": { "id": "routes/Login", "parentId": "root", "path": "/login", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Login-O2YDcLTu.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/index-DeMEeQCX.js", "/assets/index-BWPvLUBf.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Layout": { "id": "routes/Layout", "parentId": "root", "path": "/", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Layout-Cs4DJiOY.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-DTbJanog.js", "/assets/index-DeMEeQCX.js", "/assets/cn-CwPS7eUF.js", "/assets/AuthStore-BnYeBJES.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/chevrons-down-Dd15NhJ2.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/briefcase-B0VTTUxq.js", "/assets/square-kanban-CCTPh8t8.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/calendar-clock-hGpbKQUd.js", "/assets/mail-check-CPL1y1D5.js", "/assets/index-knF4tUPh.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/bundle-mjs-BJOqOzcM.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/home": { "id": "routes/home", "parentId": "routes/Layout", "path": void 0, "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/home-B2JLljOb.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-SUJt3Dgp.js", "/assets/bundle-mjs-BJOqOzcM.js", "/assets/AuthStore-BnYeBJES.js", "/assets/api-C04JdqFc.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/index-DxoBGdjx.js", "/assets/users-CXAhoVGa.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/circle-x-Dr6D4A3M.js", "/assets/book-open-COuwv_wZ.js", "/assets/circle-alert-CIGxBCHF.js", "/assets/clock-CzOQJT5p.js", "/assets/ProgressCard-WzjzqIeA.js", "/assets/index-DTbJanog.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/credit-card-YBFNOl8z.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/file-text-BNGbNc3I.js", "/assets/react-_sXfQCJm.js", "/assets/iconBase-CajCgYY2.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Branch/BranchList": { "id": "routes/Branch/BranchList", "parentId": "routes/Layout", "path": "/branch", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/BranchList-e_22EmYp.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/CreateBranchForm-2rtCEtUt.js", "/assets/index-DxoBGdjx.js", "/assets/EditFormData-Bo3BQ7HJ.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/BranchMeetingForm-DfT3S_5L.js", "/assets/message-square-text-D3my64cM.js", "/assets/eye-2Mk8PZw-.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/moment-C5S46NFB.js", "/assets/react-_sXfQCJm.js", "/assets/network-4iL8t-Of.js", "/assets/hash-Cmnw3-GM.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/map-pin-DetA7opX.js", "/assets/phone-iHDF8fYQ.js", "/assets/user-round-DtkRnRSi.js", "/assets/user-DKFoNGWn.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js", "/assets/video-BzePKQuD.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Branch/BranchViewPage": { "id": "routes/Branch/BranchViewPage", "parentId": "routes/Layout", "path": "/branch/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/BranchViewPage-BpnmeXHm.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/EditFormData-Bo3BQ7HJ.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/BranchMeetingForm-DfT3S_5L.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js", "/assets/log-out-DAuSHV9-.js", "/assets/message-square-text-D3my64cM.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/network-4iL8t-Of.js", "/assets/hash-Cmnw3-GM.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/map-pin-DetA7opX.js", "/assets/phone-iHDF8fYQ.js", "/assets/user-round-DtkRnRSi.js", "/assets/user-DKFoNGWn.js", "/assets/video-BzePKQuD.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/Employee": { "id": "routes/Employee/Employee", "parentId": "routes/Layout", "path": "/employee", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Employee-BkpQ_Grk.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/AddSalary-DLBe5IEO.js", "/assets/index.es-Dy-HqQhS.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/award-AgZZTWnY.js", "/assets/percent-PG9oKso6.js", "/assets/calendar-C_LRGMui.js", "/assets/circle-x-Dr6D4A3M.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/funnel-BXR2-FhQ.js", "/assets/clock-CzOQJT5p.js", "/assets/file-text-BNGbNc3I.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/user-DKFoNGWn.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/phone-iHDF8fYQ.js", "/assets/file-QxKA-9Fo.js", "/assets/map-pin-DetA7opX.js", "/assets/briefcase-B0VTTUxq.js", "/assets/hash-Cmnw3-GM.js", "/assets/user-check-BVVInUPf.js", "/assets/credit-card-YBFNOl8z.js", "/assets/plus-HifIQSWH.js", "/assets/moment-C5S46NFB.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/building-38OCE1f9.js", "/assets/users-CXAhoVGa.js", "/assets/clipboard-check-ZUIfxiNP.js", "/assets/user-x-B8sHd6dn.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/indian-rupee-vxz3wvmf.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/Salary/PaySlip": { "id": "routes/Employee/Salary/PaySlip", "parentId": "routes/Layout", "path": "/employee/salary_slip", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/PaySlip-DBWwaKrm.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/log-out-DAuSHV9-.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/AddNewEmployeeDetail": { "id": "routes/Employee/AddNewEmployeeDetail", "parentId": "routes/Layout", "path": "/employee/addpage/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/AddNewEmployeeDetail-BqJEjtp_.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/log-out-DAuSHV9-.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/EditEmployeeForm": { "id": "routes/Employee/EditEmployeeForm", "parentId": "routes/Layout", "path": "/employee/editpage/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/EditEmployeeForm-DEUAwxFe.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/log-out-DAuSHV9-.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Leave/Leave": { "id": "routes/Leave/Leave", "parentId": "routes/Layout", "path": "/leave", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Leave-BvGW7xYp.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index.es-Dy-HqQhS.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/clock-CzOQJT5p.js", "/assets/user-DKFoNGWn.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/calendar-C_LRGMui.js", "/assets/file-text-BNGbNc3I.js", "/assets/LeaveTypes-DGVd8zog.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/circle-x-Dr6D4A3M.js", "/assets/funnel-BXR2-FhQ.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/moment-C5S46NFB.js", "/assets/EditLeaveForm-ZCAHbRg3.js", "/assets/hash-Cmnw3-GM.js", "/assets/eye-2Mk8PZw-.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Timesheet/EmployeeTimeSheet": { "id": "routes/Project/Timesheet/EmployeeTimeSheet", "parentId": "routes/Layout", "path": "/time_sheet", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/EmployeeTimeSheet-Dac9KF0d.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/arrow-up-narrow-wide-BXfcg2ON.js", "/assets/square-kanban-CCTPh8t8.js", "/assets/hourglass-BDGbSW0U.js", "/assets/index-knF4tUPh.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Report": { "id": "routes/Report", "parentId": "routes/Layout", "path": "/reportAnaysis", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Report-i2By0esR.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-DxoBGdjx.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/index-SUJt3Dgp.js", "/assets/bundle-mjs-BJOqOzcM.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/index.es-Dy-HqQhS.js", "/assets/square-kanban-CCTPh8t8.js", "/assets/user-check-BVVInUPf.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/x-BfrbTbzo.js", "/assets/users-CXAhoVGa.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/credit-card-YBFNOl8z.js", "/assets/flag-GJ94Fqe2.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/calendar-C_LRGMui.js", "/assets/file-text-BNGbNc3I.js", "/assets/circle-alert-CIGxBCHF.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/trending-up-mD_L3rqa.js", "/assets/clock-CzOQJT5p.js", "/assets/arrow-up-narrow-wide-BXfcg2ON.js", "/assets/hourglass-BDGbSW0U.js", "/assets/list-DzQOn6sg.js", "/assets/building-38OCE1f9.js", "/assets/index-DDa5wjlm.js", "/assets/index-DTbJanog.js", "/assets/index-knF4tUPh.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/iconBase-CajCgYY2.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Attendance/Attandance": { "id": "routes/Attendance/Attandance", "parentId": "routes/Layout", "path": "/attandance", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Attandance-sNwoUDiZ.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index.es-Dy-HqQhS.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/users-CXAhoVGa.js", "/assets/user-check-BVVInUPf.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/circle-x-Dr6D4A3M.js", "/assets/clock-CzOQJT5p.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/funnel-BXR2-FhQ.js", "/assets/square-pen-hueQTsQ_.js", "/assets/plus-HifIQSWH.js", "/assets/x-BfrbTbzo.js", "/assets/book-user-BTUNghSh.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Project": { "id": "routes/Project/Project", "parentId": "routes/Layout", "path": "/project", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Project-YHWMcQgk.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/AddNewProject-BwdU85rY.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/book-user-BTUNghSh.js", "/assets/hash-Cmnw3-GM.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/briefcase-B0VTTUxq.js", "/assets/network-4iL8t-Of.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/tag-hjf6KM-t.js", "/assets/indian-rupee-vxz3wvmf.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/ProjectMeetingForm-7pSkeH58.js", "/assets/index.es-Dy-HqQhS.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/video-BzePKQuD.js", "/assets/file-text-BNGbNc3I.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/ProjectOverview": { "id": "routes/Project/ProjectOverview", "parentId": "routes/Layout", "path": "/project/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ProjectOverview-DOalAZdy.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/ProgressCard-WzjzqIeA.js", "/assets/index-DTbJanog.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/dateUtils-CBplQNBw.js", "/assets/flag-GJ94Fqe2.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/tag-hjf6KM-t.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/list-checks-Bum2w6xD.js", "/assets/EditTaskForm-Cwdu_Gp4.js", "/assets/hash-Cmnw3-GM.js", "/assets/banknote-DmPEdTMl.js", "/assets/percent-PG9oKso6.js", "/assets/network-4iL8t-Of.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/AddNewTask-Dl9c1PYs.js", "/assets/AddSalary-DLBe5IEO.js", "/assets/ProjectMeetingForm-7pSkeH58.js", "/assets/dot-BRbGo9NO.js", "/assets/message-square-text-D3my64cM.js", "/assets/calendar-check-2-BfAjpHZ6.js", "/assets/calendar-clock-hGpbKQUd.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/user-round-DtkRnRSi.js", "/assets/users-CXAhoVGa.js", "/assets/plus-HifIQSWH.js", "/assets/calendar-C_LRGMui.js", "/assets/indian-rupee-vxz3wvmf.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/file-text-BNGbNc3I.js", "/assets/video-BzePKQuD.js", "/assets/file-QxKA-9Fo.js", "/assets/clock-CzOQJT5p.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Task/MilestoneTaskList": { "id": "routes/Project/Task/MilestoneTaskList", "parentId": "routes/Layout", "path": "/milestone/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/MilestoneTaskList-atk_SWQd.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/EditTaskForm-Cwdu_Gp4.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/video-BzePKQuD.js", "/assets/file-text-BNGbNc3I.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js", "/assets/dateUtils-CBplQNBw.js", "/assets/flag-GJ94Fqe2.js", "/assets/hash-Cmnw3-GM.js", "/assets/tag-hjf6KM-t.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/user-DKFoNGWn.js", "/assets/trash-2-AUNIB88j.js", "/assets/list-checks-Bum2w6xD.js", "/assets/log-out-DAuSHV9-.js", "/assets/network-4iL8t-Of.js", "/assets/message-square-text-D3my64cM.js", "/assets/clipboard-check-ZUIfxiNP.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/user-round-DtkRnRSi.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Campaign/ViewCampaignDetails": { "id": "routes/Campaign/ViewCampaignDetails", "parentId": "routes/Layout", "path": "/campaignview/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ViewCampaignDetails-zgILVzl9.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/AddNewLead-CzoeECYc.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/dot-BRbGo9NO.js", "/assets/log-out-DAuSHV9-.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/book-user-BTUNghSh.js", "/assets/hash-Cmnw3-GM.js", "/assets/user-DKFoNGWn.js", "/assets/phone-iHDF8fYQ.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/building-38OCE1f9.js", "/assets/tag-hjf6KM-t.js", "/assets/book-open-text-CwD5ICOx.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Task/TaskViewPage": { "id": "routes/Project/Task/TaskViewPage", "parentId": "routes/Layout", "path": "/task_view/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/TaskViewPage-BQEgvg9J.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/Modal-BCIUwH-b.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/user-DKFoNGWn.js", "/assets/tag-hjf6KM-t.js", "/assets/trash-2-AUNIB88j.js", "/assets/plus-HifIQSWH.js", "/assets/StarRating-CpKCQTJJ.js", "/assets/video-BzePKQuD.js", "/assets/file-text-BNGbNc3I.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/dot-BRbGo9NO.js", "/assets/log-out-DAuSHV9-.js", "/assets/message-square-text-D3my64cM.js", "/assets/calendar-check-2-BfAjpHZ6.js", "/assets/calendar-clock-hGpbKQUd.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/eye-2Mk8PZw-.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/index-knF4tUPh.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/index-DeMEeQCX.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Task/ProjectTaskList": { "id": "routes/Project/Task/ProjectTaskList", "parentId": "routes/Layout", "path": "/project_tasklist", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ProjectTaskList-CiyJTEdd.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/AddNewTask-Dl9c1PYs.js", "/assets/EditTaskForm-Cwdu_Gp4.js", "/assets/network-4iL8t-Of.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/tag-hjf6KM-t.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/flag-GJ94Fqe2.js", "/assets/hash-Cmnw3-GM.js", "/assets/users-CXAhoVGa.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/user-DKFoNGWn.js", "/assets/plus-HifIQSWH.js", "/assets/list-checks-Bum2w6xD.js", "/assets/user-round-DtkRnRSi.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Leads/Leads": { "id": "routes/Leads/Leads", "parentId": "routes/Layout", "path": "/leads", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Leads-BZIh_prk.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/AddNewLead-CzoeECYc.js", "/assets/book-user-BTUNghSh.js", "/assets/hash-Cmnw3-GM.js", "/assets/user-DKFoNGWn.js", "/assets/phone-iHDF8fYQ.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/tag-hjf6KM-t.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js", "/assets/map-pin-DetA7opX.js", "/assets/trash-2-AUNIB88j.js", "/assets/plus-HifIQSWH.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/building-38OCE1f9.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Clients/Client": { "id": "routes/Clients/Client", "parentId": "routes/Layout", "path": "/client", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Client-Bf56tdmp.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/ClientAddForm-DTfYjHQ5.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/user-DKFoNGWn.js", "/assets/hash-Cmnw3-GM.js", "/assets/phone-iHDF8fYQ.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js", "/assets/map-pin-DetA7opX.js", "/assets/plus-HifIQSWH.js", "/assets/trash-2-AUNIB88j.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Clients/ClientAddForm": { "id": "routes/Clients/ClientAddForm", "parentId": "routes/Layout", "path": "/client_add", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ClientAddForm-DTfYjHQ5.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/user-DKFoNGWn.js", "/assets/hash-Cmnw3-GM.js", "/assets/phone-iHDF8fYQ.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js", "/assets/map-pin-DetA7opX.js", "/assets/trash-2-AUNIB88j.js", "/assets/plus-HifIQSWH.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Clients/ClientPage": { "id": "routes/Clients/ClientPage", "parentId": "routes/Layout", "path": "/client_view", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ClientPage-BGL9zdv1.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-BWPvLUBf.js", "/assets/index-DTbJanog.js", "/assets/Project-YHWMcQgk.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/Modal-BCIUwH-b.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/MomViewPage-DyfwsTXQ.js", "/assets/eye-2Mk8PZw-.js", "/assets/AddSalary-DLBe5IEO.js", "/assets/StarRating-CpKCQTJJ.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/iconBase-CajCgYY2.js", "/assets/api-C04JdqFc.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/react-_sXfQCJm.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/AddNewProject-BwdU85rY.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/book-user-BTUNghSh.js", "/assets/hash-Cmnw3-GM.js", "/assets/briefcase-B0VTTUxq.js", "/assets/network-4iL8t-Of.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/tag-hjf6KM-t.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/indian-rupee-vxz3wvmf.js", "/assets/ProjectMeetingForm-7pSkeH58.js", "/assets/video-BzePKQuD.js", "/assets/file-text-BNGbNc3I.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js", "/assets/index.es-Dy-HqQhS.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/moment-C5S46NFB.js", "/assets/index-DDa5wjlm.js", "/assets/index-knF4tUPh.js", "/assets/clipboard-check-ZUIfxiNP.js", "/assets/percent-PG9oKso6.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/index-DeMEeQCX.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Campaign/Campaign": { "id": "routes/Campaign/Campaign", "parentId": "routes/Layout", "path": "/campaign", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Campaign-BFP1j8Le.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/hash-Cmnw3-GM.js", "/assets/tag-hjf6KM-t.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/flag-GJ94Fqe2.js", "/assets/user-x-B8sHd6dn.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/AccountProfile": { "id": "routes/AccountProfile", "parentId": "routes/Layout", "path": "/account_profile", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/AccountProfile-DEfql1g1.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/arrow-big-left-CB9ZfvaY.js", "/assets/square-pen-hueQTsQ_.js", "/assets/mail-check-CPL1y1D5.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/dot-BRbGo9NO.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Team/TeamList": { "id": "routes/Team/TeamList", "parentId": "routes/Layout", "path": "/team", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/TeamList-D6oYapug.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/hash-Cmnw3-GM.js", "/assets/users-CXAhoVGa.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Team": { "id": "routes/Team", "parentId": "routes/Layout", "path": "/teamview/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Team-Bm02Yben.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/index-DTbJanog.js", "/assets/index-BWPvLUBf.js", "/assets/Modal-BCIUwH-b.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/file-text-BNGbNc3I.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/award-AgZZTWnY.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/trending-up-mD_L3rqa.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/clock-CzOQJT5p.js", "/assets/message-square-DlZUvNO5.js", "/assets/book-open-COuwv_wZ.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/circle-alert-CIGxBCHF.js", "/assets/eye-2Mk8PZw-.js", "/assets/log-out-DAuSHV9-.js", "/assets/square-kanban-CCTPh8t8.js", "/assets/trash-2-AUNIB88j.js", "/assets/square-pen-hueQTsQ_.js", "/assets/dot-BRbGo9NO.js", "/assets/react-_sXfQCJm.js", "/assets/iconBase-CajCgYY2.js", "/assets/index-DDa5wjlm.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/index-knF4tUPh.js", "/assets/moment-C5S46NFB.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Leads/LeadsPage": { "id": "routes/Leads/LeadsPage", "parentId": "routes/Layout", "path": "/leadsview/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/LeadsPage-Cie3_XDq.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/hash-Cmnw3-GM.js", "/assets/calendar-clock-hGpbKQUd.js", "/assets/tag-hjf6KM-t.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/trash-2-AUNIB88j.js", "/assets/dot-BRbGo9NO.js", "/assets/log-out-DAuSHV9-.js", "/assets/alarm-clock-check-ZK0mJr1H.js", "/assets/square-pen-hueQTsQ_.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Accounts/AccountsProject": { "id": "routes/Accounts/AccountsProject", "parentId": "routes/Layout", "path": "/account", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/AccountsProject-CpDm5FFZ.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/AddNewProject-BwdU85rY.js", "/assets/ProjectStore-Bmk5yusB.js", "/assets/LeadsStore-C-d0npQs.js", "/assets/ProjectMeetingForm-7pSkeH58.js", "/assets/index-DTbJanog.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/UseStaffFilter-Bwbq-nCs.js", "/assets/dateUtils-CBplQNBw.js", "/assets/file-text-BNGbNc3I.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/percent-PG9oKso6.js", "/assets/tag-hjf6KM-t.js", "/assets/banknote-DmPEdTMl.js", "/assets/list-checks-Bum2w6xD.js", "/assets/building-38OCE1f9.js", "/assets/user-DKFoNGWn.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/eye-2Mk8PZw-.js", "/assets/network-4iL8t-Of.js", "/assets/clipboard-type-fPi_05HQ.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/book-user-BTUNghSh.js", "/assets/hash-Cmnw3-GM.js", "/assets/briefcase-B0VTTUxq.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/video-BzePKQuD.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/ReportAnalysis": { "id": "routes/ReportAnalysis", "parentId": "routes/Layout", "path": "/report_analysis", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ReportAnalysis-DMovG62L.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/react-_sXfQCJm.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/LeaveTypes-DGVd8zog.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/moment-C5S46NFB.js", "/assets/clock-CzOQJT5p.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/calendar-C_LRGMui.js", "/assets/file-text-BNGbNc3I.js", "/assets/EditLeaveForm-ZCAHbRg3.js", "/assets/hash-Cmnw3-GM.js", "/assets/eye-2Mk8PZw-.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Notification": { "id": "routes/Notification", "parentId": "routes/Layout", "path": "/notification", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Notification-Blc691fS.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index.es-Dy-HqQhS.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/calendar-C_LRGMui.js", "/assets/user-round-DtkRnRSi.js", "/assets/dot-BRbGo9NO.js", "/assets/eye-2Mk8PZw-.js", "/assets/credit-card-YBFNOl8z.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": ["/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/calendar/EventCalandar": { "id": "routes/calendar/EventCalandar", "parentId": "routes/Layout", "path": "/calendar", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/EventCalandar-BmAkYRfC.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/index-knF4tUPh.js", "/assets/index-CyJ3O4p6.js", "/assets/moment-C5S46NFB.js", "/assets/AuthStore-BnYeBJES.js", "/assets/react-_sXfQCJm.js"], "css": ["/assets/EventCalandar-qeKFb0yB.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/MomReport": { "id": "routes/MomReport", "parentId": "routes/Layout", "path": "/mom_report", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/MomReport-DLbre2L7.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/index.es-Dy-HqQhS.js", "/assets/Modal-BCIUwH-b.js", "/assets/MomViewPage-DyfwsTXQ.js", "/assets/arrow-up-narrow-wide-BXfcg2ON.js", "/assets/eye-2Mk8PZw-.js", "/assets/index-knF4tUPh.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/index-DTbJanog.js", "/assets/calendar-C_LRGMui.js", "/assets/users-CXAhoVGa.js", "/assets/clipboard-check-ZUIfxiNP.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/ActiveLog": { "id": "routes/ActiveLog", "parentId": "routes/Layout", "path": "/active_log", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ActiveLog-Br_GBxVs.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/CreateBranchForm-2rtCEtUt.js", "/assets/index-DxoBGdjx.js", "/assets/EditFormData-Bo3BQ7HJ.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/moment-C5S46NFB.js", "/assets/react-_sXfQCJm.js", "/assets/network-4iL8t-Of.js", "/assets/hash-Cmnw3-GM.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/map-pin-DetA7opX.js", "/assets/phone-iHDF8fYQ.js", "/assets/user-round-DtkRnRSi.js", "/assets/user-DKFoNGWn.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-text-BNGbNc3I.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/EmployeeProfile": { "id": "routes/Employee/EmployeeProfile", "parentId": "routes/Layout", "path": "/employee_profile/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/EmployeeProfile-KRmIGt4z.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/xlsx-DTxMWUdD.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/index.es-Dy-HqQhS.js", "/assets/clock-CzOQJT5p.js", "/assets/hourglass-BDGbSW0U.js", "/assets/list-DzQOn6sg.js", "/assets/Modal-BCIUwH-b.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/user-DKFoNGWn.js", "/assets/hash-Cmnw3-GM.js", "/assets/trending-up-mD_L3rqa.js", "/assets/calendar-check-DuYbAMAv.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/circle-alert-CIGxBCHF.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/book-user-BTUNghSh.js", "/assets/award-AgZZTWnY.js", "/assets/message-square-DlZUvNO5.js", "/assets/book-open-text-CwD5ICOx.js", "/assets/tag-hjf6KM-t.js", "/assets/chevrons-down-Dd15NhJ2.js", "/assets/arrow-big-left-CB9ZfvaY.js", "/assets/file-text-BNGbNc3I.js", "/assets/phone-iHDF8fYQ.js", "/assets/briefcase-B0VTTUxq.js", "/assets/file-QxKA-9Fo.js", "/assets/index-knF4tUPh.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Project/Task/TaskMember/TaskMemberCheckInOutView": { "id": "routes/Project/Task/TaskMember/TaskMemberCheckInOutView", "parentId": "routes/Layout", "path": "/member_view/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/TaskMemberCheckInOutView-DknK1B5t.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/index-DxoBGdjx.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/Modal-BCIUwH-b.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/video-BzePKQuD.js", "/assets/file-text-BNGbNc3I.js", "/assets/clipboard-list-C2ET-QCv.js", "/assets/file-QxKA-9Fo.js", "/assets/calendar-C_LRGMui.js", "/assets/clock-CzOQJT5p.js", "/assets/users-CXAhoVGa.js", "/assets/x-BfrbTbzo.js", "/assets/chevron-up-DjUqBI0v.js", "/assets/chevron-down-DOBgonSl.js", "/assets/plus-HifIQSWH.js", "/assets/dot-BRbGo9NO.js", "/assets/log-out-DAuSHV9-.js", "/assets/message-square-text-D3my64cM.js", "/assets/user-DKFoNGWn.js", "/assets/calendar-check-2-BfAjpHZ6.js", "/assets/calendar-clock-hGpbKQUd.js", "/assets/alarm-clock-check-ZK0mJr1H.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/circle-check-big-DhDS6nah.js", "/assets/react-_sXfQCJm.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js"], "css": ["/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/EmployeeReport": { "id": "routes/Employee/EmployeeReport", "parentId": "routes/Layout", "path": "/employee_report", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/EmployeeReport-BRKuT3qm.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/index.es-Dy-HqQhS.js", "/assets/clock-CzOQJT5p.js", "/assets/hourglass-BDGbSW0U.js", "/assets/list-DzQOn6sg.js", "/assets/index-knF4tUPh.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/index-CyJ3O4p6.js"], "css": ["/assets/react-datepicker-agoxPcWL.css", "/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Accounts/PayRequestList": { "id": "routes/Accounts/PayRequestList", "parentId": "routes/Layout", "path": "/payreq_view/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/PayRequestList-Dr-eWtER.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/AuthStore-BnYeBJES.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/Modal-BCIUwH-b.js", "/assets/log-out-DAuSHV9-.js", "/assets/eye-2Mk8PZw-.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/index-knF4tUPh.js", "/assets/react-_sXfQCJm.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": ["/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Accounts/Invoice/ViewInvoice": { "id": "routes/Accounts/Invoice/ViewInvoice", "parentId": "routes/Layout", "path": "/invoice_view/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ViewInvoice-DHtSnj8i.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/almino seal-NgTqrA6Q.js", "/assets/AuthStore-BnYeBJES.js", "/assets/log-out-DAuSHV9-.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/offerletters/ViewOfferLetter": { "id": "routes/Employee/offerletters/ViewOfferLetter", "parentId": "routes/Layout", "path": "/offer-letter-view/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ViewOfferLetter-B6VvUMwl.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/almino seal-NgTqrA6Q.js", "/assets/log-out-DAuSHV9-.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/EmployeeJoiningLetter/ViewJoiningLetter": { "id": "routes/Employee/EmployeeJoiningLetter/ViewJoiningLetter", "parentId": "routes/Layout", "path": "/employee/:id/joining-letter", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ViewJoiningLetter-Dd3E01E7.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/almino seal-NgTqrA6Q.js", "/assets/api-C04JdqFc.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/log-out-DAuSHV9-.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/Employee/termination/ExperienceCertification": { "id": "routes/Employee/termination/ExperienceCertification", "parentId": "routes/Layout", "path": "/View-certificate/:id/:resign_id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/ExperienceCertification-DZ0yN72j.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/Almino structural consultancy_Final-CGShv3XU.js", "/assets/almino seal-NgTqrA6Q.js", "/assets/api-C04JdqFc.js", "/assets/AuthStore-BnYeBJES.js", "/assets/log-out-DAuSHV9-.js", "/assets/react-_sXfQCJm.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/SettingsLayout": { "id": "routes/settings/SettingsLayout", "parentId": "routes/Layout", "path": "/settings", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/SettingsLayout-J7vobShv.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/cn-CwPS7eUF.js", "/assets/square-check-big-BL7d4uf2.js", "/assets/chevron-down-DOBgonSl.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/react-_sXfQCJm.js", "/assets/clsx-B-dksMZM.js", "/assets/bundle-mjs-BJOqOzcM.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/Settings": { "id": "routes/settings/Settings", "parentId": "routes/settings/SettingsLayout", "path": void 0, "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Settings-R0cc_BNp.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/square-check-big-BL7d4uf2.js", "/assets/dollar-sign-D2IX7NrM.js", "/assets/createLucideIcon-RccWoOaL.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/AccessRole": { "id": "routes/settings/AccessRole", "parentId": "routes/settings/SettingsLayout", "path": "access-permission/roles", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/AccessRole-BNqd5c1v.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/Modal-BCIUwH-b.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/plus-HifIQSWH.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/hash-Cmnw3-GM.js", "/assets/user-check-BVVInUPf.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/react-_sXfQCJm.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/UserRoles": { "id": "routes/settings/UserRoles", "parentId": "routes/settings/SettingsLayout", "path": "access-permission/user", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/UserRoles-BvnVIezm.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/index-knF4tUPh.js"], "css": ["/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/SystemSetting": { "id": "routes/settings/SystemSetting", "parentId": "routes/settings/SettingsLayout", "path": "access-permission/systemsetting", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/SystemSetting-DafTK5lB.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/Modal-BCIUwH-b.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/xlsx-DTxMWUdD.js", "/assets/api-C04JdqFc.js", "/assets/index-DxoBGdjx.js", "/assets/ButtonLoader-Z62NVHwI.js", "/assets/AuthStore-BnYeBJES.js", "/assets/useBranchStore-kvv3vD_e.js", "/assets/useEmployeeStore-BJ_SZO4g.js", "/assets/use-click-outside-BhLpsQYS.js", "/assets/hash-Cmnw3-GM.js", "/assets/EditLeaveForm-ZCAHbRg3.js", "/assets/eye-2Mk8PZw-.js", "/assets/square-pen-hueQTsQ_.js", "/assets/trash-2-AUNIB88j.js", "/assets/index-knF4tUPh.js", "/assets/index-DDa5wjlm.js", "/assets/iconBase-CajCgYY2.js", "/assets/createLucideIcon-RccWoOaL.js", "/assets/react-_sXfQCJm.js", "/assets/moment-C5S46NFB.js", "/assets/calendar-C_LRGMui.js", "/assets/clipboard-list-C2ET-QCv.js"], "css": ["/assets/app-B5JlI6j0.css", "/assets/react-datepicker-agoxPcWL.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/SettingTeam": { "id": "routes/settings/SettingTeam", "parentId": "routes/settings/SettingsLayout", "path": "access-permission/teams", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/SettingTeam-BqFFiLoF.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js", "/assets/DataTable-DtyPIAGZ.js", "/assets/CustomPagination-CBTcVvJz.js", "/assets/SearchInput-CMdOUuSO.js", "/assets/DrapDown-CEm3nLdF.js", "/assets/index-knF4tUPh.js"], "css": ["/assets/app-B5JlI6j0.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/Tax": { "id": "routes/settings/Tax", "parentId": "routes/settings/SettingsLayout", "path": "/settings/invoice/tax", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/Tax-D_2YEQiQ.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/settings/PaymentMethod": { "id": "routes/settings/PaymentMethod", "parentId": "routes/settings/SettingsLayout", "path": "invoice/payment-methods", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/PaymentMethod-CcSGKiRJ.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/NotFound": { "id": "routes/NotFound", "parentId": "routes/Layout", "path": "*", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/NotFound-cbPRTzJm.js", "imports": ["/assets/with-props-DF0D9zIo.js", "/assets/chunk-AYJ5UCUI-nSEPIBkT.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 } }, "url": "/assets/manifest-b0352a68.js", "version": "b0352a68", "sri": void 0 };
const assetsBuildDirectory = "build\\client";
const basename = "/";
const future = { "unstable_middleware": false, "unstable_optimizeDeps": false, "unstable_splitRouteModules": false, "unstable_subResourceIntegrity": false, "unstable_viteEnvironmentApi": false };
const ssr = true;
const isSpaMode = false;
const prerender = [];
const publicPath = "/";
const entry = { module: entryServer };
const routes = {
  "root": {
    id: "root",
    parentId: void 0,
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route0
  },
  "routes/Login": {
    id: "routes/Login",
    parentId: "root",
    path: "/login",
    index: void 0,
    caseSensitive: void 0,
    module: route1
  },
  "routes/Layout": {
    id: "routes/Layout",
    parentId: "root",
    path: "/",
    index: void 0,
    caseSensitive: void 0,
    module: route2
  },
  "routes/home": {
    id: "routes/home",
    parentId: "routes/Layout",
    path: void 0,
    index: true,
    caseSensitive: void 0,
    module: route3
  },
  "routes/Branch/BranchList": {
    id: "routes/Branch/BranchList",
    parentId: "routes/Layout",
    path: "/branch",
    index: void 0,
    caseSensitive: void 0,
    module: route4
  },
  "routes/Branch/BranchViewPage": {
    id: "routes/Branch/BranchViewPage",
    parentId: "routes/Layout",
    path: "/branch/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route5
  },
  "routes/Employee/Employee": {
    id: "routes/Employee/Employee",
    parentId: "routes/Layout",
    path: "/employee",
    index: void 0,
    caseSensitive: void 0,
    module: route6
  },
  "routes/Employee/Salary/PaySlip": {
    id: "routes/Employee/Salary/PaySlip",
    parentId: "routes/Layout",
    path: "/employee/salary_slip",
    index: void 0,
    caseSensitive: void 0,
    module: route7
  },
  "routes/Employee/AddNewEmployeeDetail": {
    id: "routes/Employee/AddNewEmployeeDetail",
    parentId: "routes/Layout",
    path: "/employee/addpage/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route8
  },
  "routes/Employee/EditEmployeeForm": {
    id: "routes/Employee/EditEmployeeForm",
    parentId: "routes/Layout",
    path: "/employee/editpage/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route9
  },
  "routes/Leave/Leave": {
    id: "routes/Leave/Leave",
    parentId: "routes/Layout",
    path: "/leave",
    index: void 0,
    caseSensitive: void 0,
    module: route10
  },
  "routes/Project/Timesheet/EmployeeTimeSheet": {
    id: "routes/Project/Timesheet/EmployeeTimeSheet",
    parentId: "routes/Layout",
    path: "/time_sheet",
    index: void 0,
    caseSensitive: void 0,
    module: route11
  },
  "routes/Report": {
    id: "routes/Report",
    parentId: "routes/Layout",
    path: "/reportAnaysis",
    index: void 0,
    caseSensitive: void 0,
    module: route12
  },
  "routes/Attendance/Attandance": {
    id: "routes/Attendance/Attandance",
    parentId: "routes/Layout",
    path: "/attandance",
    index: void 0,
    caseSensitive: void 0,
    module: route13
  },
  "routes/Project/Project": {
    id: "routes/Project/Project",
    parentId: "routes/Layout",
    path: "/project",
    index: void 0,
    caseSensitive: void 0,
    module: route14
  },
  "routes/Project/ProjectOverview": {
    id: "routes/Project/ProjectOverview",
    parentId: "routes/Layout",
    path: "/project/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route15
  },
  "routes/Project/Task/MilestoneTaskList": {
    id: "routes/Project/Task/MilestoneTaskList",
    parentId: "routes/Layout",
    path: "/milestone/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route16
  },
  "routes/Campaign/ViewCampaignDetails": {
    id: "routes/Campaign/ViewCampaignDetails",
    parentId: "routes/Layout",
    path: "/campaignview/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route17
  },
  "routes/Project/Task/TaskViewPage": {
    id: "routes/Project/Task/TaskViewPage",
    parentId: "routes/Layout",
    path: "/task_view/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route18
  },
  "routes/Project/Task/ProjectTaskList": {
    id: "routes/Project/Task/ProjectTaskList",
    parentId: "routes/Layout",
    path: "/project_tasklist",
    index: void 0,
    caseSensitive: void 0,
    module: route19
  },
  "routes/Leads/Leads": {
    id: "routes/Leads/Leads",
    parentId: "routes/Layout",
    path: "/leads",
    index: void 0,
    caseSensitive: void 0,
    module: route20
  },
  "routes/Clients/Client": {
    id: "routes/Clients/Client",
    parentId: "routes/Layout",
    path: "/client",
    index: void 0,
    caseSensitive: void 0,
    module: route21
  },
  "routes/Clients/ClientAddForm": {
    id: "routes/Clients/ClientAddForm",
    parentId: "routes/Layout",
    path: "/client_add",
    index: void 0,
    caseSensitive: void 0,
    module: route22
  },
  "routes/Clients/ClientPage": {
    id: "routes/Clients/ClientPage",
    parentId: "routes/Layout",
    path: "/client_view",
    index: void 0,
    caseSensitive: void 0,
    module: route23
  },
  "routes/Campaign/Campaign": {
    id: "routes/Campaign/Campaign",
    parentId: "routes/Layout",
    path: "/campaign",
    index: void 0,
    caseSensitive: void 0,
    module: route24
  },
  "routes/AccountProfile": {
    id: "routes/AccountProfile",
    parentId: "routes/Layout",
    path: "/account_profile",
    index: void 0,
    caseSensitive: void 0,
    module: route25
  },
  "routes/Team/TeamList": {
    id: "routes/Team/TeamList",
    parentId: "routes/Layout",
    path: "/team",
    index: void 0,
    caseSensitive: void 0,
    module: route26
  },
  "routes/Team": {
    id: "routes/Team",
    parentId: "routes/Layout",
    path: "/teamview/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route27
  },
  "routes/Leads/LeadsPage": {
    id: "routes/Leads/LeadsPage",
    parentId: "routes/Layout",
    path: "/leadsview/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route28
  },
  "routes/Accounts/AccountsProject": {
    id: "routes/Accounts/AccountsProject",
    parentId: "routes/Layout",
    path: "/account",
    index: void 0,
    caseSensitive: void 0,
    module: route29
  },
  "routes/ReportAnalysis": {
    id: "routes/ReportAnalysis",
    parentId: "routes/Layout",
    path: "/report_analysis",
    index: void 0,
    caseSensitive: void 0,
    module: route30
  },
  "routes/Notification": {
    id: "routes/Notification",
    parentId: "routes/Layout",
    path: "/notification",
    index: void 0,
    caseSensitive: void 0,
    module: route31
  },
  "routes/calendar/EventCalandar": {
    id: "routes/calendar/EventCalandar",
    parentId: "routes/Layout",
    path: "/calendar",
    index: void 0,
    caseSensitive: void 0,
    module: route32
  },
  "routes/MomReport": {
    id: "routes/MomReport",
    parentId: "routes/Layout",
    path: "/mom_report",
    index: void 0,
    caseSensitive: void 0,
    module: route33
  },
  "routes/ActiveLog": {
    id: "routes/ActiveLog",
    parentId: "routes/Layout",
    path: "/active_log",
    index: void 0,
    caseSensitive: void 0,
    module: route34
  },
  "routes/Employee/EmployeeProfile": {
    id: "routes/Employee/EmployeeProfile",
    parentId: "routes/Layout",
    path: "/employee_profile/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route35
  },
  "routes/Project/Task/TaskMember/TaskMemberCheckInOutView": {
    id: "routes/Project/Task/TaskMember/TaskMemberCheckInOutView",
    parentId: "routes/Layout",
    path: "/member_view/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route36
  },
  "routes/Employee/EmployeeReport": {
    id: "routes/Employee/EmployeeReport",
    parentId: "routes/Layout",
    path: "/employee_report",
    index: void 0,
    caseSensitive: void 0,
    module: route37
  },
  "routes/Accounts/PayRequestList": {
    id: "routes/Accounts/PayRequestList",
    parentId: "routes/Layout",
    path: "/payreq_view/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route38
  },
  "routes/Accounts/Invoice/ViewInvoice": {
    id: "routes/Accounts/Invoice/ViewInvoice",
    parentId: "routes/Layout",
    path: "/invoice_view/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route39
  },
  "routes/Employee/offerletters/ViewOfferLetter": {
    id: "routes/Employee/offerletters/ViewOfferLetter",
    parentId: "routes/Layout",
    path: "/offer-letter-view/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route40
  },
  "routes/Employee/EmployeeJoiningLetter/ViewJoiningLetter": {
    id: "routes/Employee/EmployeeJoiningLetter/ViewJoiningLetter",
    parentId: "routes/Layout",
    path: "/employee/:id/joining-letter",
    index: void 0,
    caseSensitive: void 0,
    module: route41
  },
  "routes/Employee/termination/ExperienceCertification": {
    id: "routes/Employee/termination/ExperienceCertification",
    parentId: "routes/Layout",
    path: "/View-certificate/:id/:resign_id",
    index: void 0,
    caseSensitive: void 0,
    module: route42
  },
  "routes/settings/SettingsLayout": {
    id: "routes/settings/SettingsLayout",
    parentId: "routes/Layout",
    path: "/settings",
    index: void 0,
    caseSensitive: void 0,
    module: route43
  },
  "routes/settings/Settings": {
    id: "routes/settings/Settings",
    parentId: "routes/settings/SettingsLayout",
    path: void 0,
    index: true,
    caseSensitive: void 0,
    module: route44
  },
  "routes/settings/AccessRole": {
    id: "routes/settings/AccessRole",
    parentId: "routes/settings/SettingsLayout",
    path: "access-permission/roles",
    index: void 0,
    caseSensitive: void 0,
    module: route45
  },
  "routes/settings/UserRoles": {
    id: "routes/settings/UserRoles",
    parentId: "routes/settings/SettingsLayout",
    path: "access-permission/user",
    index: void 0,
    caseSensitive: void 0,
    module: route46
  },
  "routes/settings/SystemSetting": {
    id: "routes/settings/SystemSetting",
    parentId: "routes/settings/SettingsLayout",
    path: "access-permission/systemsetting",
    index: void 0,
    caseSensitive: void 0,
    module: route47
  },
  "routes/settings/SettingTeam": {
    id: "routes/settings/SettingTeam",
    parentId: "routes/settings/SettingsLayout",
    path: "access-permission/teams",
    index: void 0,
    caseSensitive: void 0,
    module: route48
  },
  "routes/settings/Tax": {
    id: "routes/settings/Tax",
    parentId: "routes/settings/SettingsLayout",
    path: "/settings/invoice/tax",
    index: void 0,
    caseSensitive: void 0,
    module: route49
  },
  "routes/settings/PaymentMethod": {
    id: "routes/settings/PaymentMethod",
    parentId: "routes/settings/SettingsLayout",
    path: "invoice/payment-methods",
    index: void 0,
    caseSensitive: void 0,
    module: route50
  },
  "routes/NotFound": {
    id: "routes/NotFound",
    parentId: "routes/Layout",
    path: "*",
    index: void 0,
    caseSensitive: void 0,
    module: route51
  }
};
export {
  serverManifest as assets,
  assetsBuildDirectory,
  basename,
  entry,
  future,
  isSpaMode,
  prerender,
  publicPath,
  routes,
  ssr
};
